{"version":3,"file":"client.es.mjs","sources":["../src/libraries/Hex.js","../src/libraries/strings.js","../src/Meta.js","../src/libraries/array.js","../src/PolicyMeta.js","../src/AtomMeta.js","../src/exception/BaseException.js","../src/exception/AtomsMissingException.js","../src/versions/HashAtom.js","../src/versions/Version4.js","../src/versions/index.js","../src/Atom.js","../src/libraries/crypto.js","../src/TokenUnit.js","../src/exception/WalletCredentialException.js","../node_modules/@noble/hashes/_u64.js","../node_modules/@noble/hashes/utils.js","../node_modules/@noble/hashes/sha3.js","../node_modules/@noble/curves/abstract/fft.js","../node_modules/@noble/post-quantum/utils.js","../node_modules/@noble/post-quantum/_crystals.js","../node_modules/@noble/post-quantum/ml-kem.js","../src/Wallet.js","../src/exception/AtomIndexException.js","../src/exception/MolecularHashMismatchException.js","../src/exception/MolecularHashMissingException.js","../src/exception/PolicyInvalidException.js","../src/exception/SignatureMalformedException.js","../src/exception/SignatureMismatchException.js","../src/exception/TransferBalanceException.js","../src/exception/TransferMalformedException.js","../src/exception/TransferMismatchedException.js","../src/exception/TransferRemainderException.js","../src/exception/TransferToSelfException.js","../src/exception/TransferUnbalancedException.js","../src/exception/MetaMissingException.js","../src/exception/WrongTokenTypeException.js","../src/exception/BatchIdException.js","../src/instance/Rules/Meta.js","../src/instance/Rules/exception/RuleArgumentException.js","../src/exception/CodeException.js","../src/instance/Rules/Callback.js","../src/instance/Rules/Condition.js","../src/instance/Rules/Rule.js","../src/libraries/Dot.js","../src/libraries/CheckMolecule.js","../src/exception/BalanceInsufficientException.js","../src/exception/NegativeAmountException.js","../src/Molecule.js","../src/AuthToken.js","../src/libraries/Decimal.js","../src/exception/InvalidResponseException.js","../src/exception/UnauthenticatedException.js","../src/response/Response.js","../src/query/Query.js","../src/response/ResponseContinuId.js","../src/query/QueryContinuId.js","../src/response/ResponseWalletBundle.js","../src/query/QueryWalletBundle.js","../src/response/ResponseWalletList.js","../src/query/QueryWalletList.js","../src/response/ResponseBalance.js","../src/query/QueryBalance.js","../src/response/ResponseMetaType.js","../src/query/QueryMetaType.js","../src/query/QueryBatch.js","../src/query/QueryBatchHistory.js","../src/response/ResponseProposeMolecule.js","../src/mutation/Mutation.js","../src/mutation/MutationProposeMolecule.js","../src/response/ResponseRequestAuthorization.js","../src/mutation/MutationRequestAuthorization.js","../src/response/ResponseCreateToken.js","../src/mutation/MutationCreateToken.js","../src/response/ResponseRequestTokens.js","../src/mutation/MutationRequestTokens.js","../src/response/ResponseTransferTokens.js","../src/mutation/MutationTransferTokens.js","../src/response/ResponseCreateIdentifier.js","../src/mutation/MutationCreateIdentifier.js","../src/response/ResponseClaimShadowWallet.js","../src/mutation/MutationClaimShadowWallet.js","../src/response/ResponseCreateMeta.js","../src/mutation/MutationCreateMeta.js","../src/response/ResponsePeering.js","../src/mutation/MutationPeering.js","../src/response/ResponseAppendRequest.js","../src/mutation/MutationAppendRequest.js","../src/response/ResponseLinkIdentifier.js","../src/mutation/MutationLinkIdentifier.js","../src/response/ResponseCreateWallet.js","../src/mutation/MutationCreateWallet.js","../src/response/ResponseRequestAuthorizationGuest.js","../src/mutation/MutationRequestAuthorizationGuest.js","../src/exception/WalletShadowException.js","../src/exception/StackableUnitDecimalsException.js","../src/exception/StackableUnitAmountException.js","../src/subscribe/Subscribe.js","../src/subscribe/CreateMoleculeSubscribe.js","../src/subscribe/WalletStatusSubscribe.js","../src/subscribe/ActiveWalletSubscribe.js","../src/subscribe/ActiveSessionSubscribe.js","../src/response/ResponseActiveSession.js","../src/mutation/MutationActiveSession.js","../src/response/ResponseQueryActiveSession.js","../src/query/QueryActiveSession.js","../src/response/ResponseQueryUserActivity.js","../src/query/QueryUserActivity.js","../src/query/QueryToken.js","../src/exception/AuthorizationRejectedException.js","../src/response/ResponseAtom.js","../src/query/QueryAtom.js","../src/response/ResponsePolicy.js","../src/query/QueryPolicy.js","../src/response/ResponseMetaTypeViaAtom.js","../src/query/QueryMetaTypeViaAtom.js","../src/response/ResponseMetaTypeViaMolecule.js","../src/query/QueryMetaTypeViaMolecule.js","../src/response/ResponseCreateRule.js","../src/mutation/MutationCreateRule.js","../src/mutation/MutationDepositBufferToken.js","../src/mutation/MutationWithdrawBufferToken.js","../node_modules/@thumbmarkjs/thumbmarkjs/dist/thumbmark.esm.js","../src/libraries/urql/UrqlClientWrapper.js","../src/KnishIOClient.js","../src/response/ResponseAuthorizationGuest.js"],"sourcesContent":["/**\n * Create Uint8Array buffers from hexadecimal strings, and vice versa.\n */\n\nif (typeof self === 'undefined') {\n  global.self = global\n}\n\nexport default class Hex {\n  /**\n   * Converts the given buffer to a string containing its hexadecimal representation.\n   *\n   * arr a Uint8Array buffer to convert.\n   *\n   * options an optional object with the following members:\n   *     grouping this number of hex bytes are grouped together with spaces between groups. 0 means no grouping is applied. 0 if unspecified.\n   *     rowlength the number of groups which make up a row. When 0, no splitting into rows occurs. 0 if unspecified.\n   *     uppercase if true, the output will be in uppercase. true by default.\n   *\n   * return a hexadecimal string representing the buffer.\n   *\n   * @param {array|ArrayBuffer|Uint8Array} arr\n   * @param {object} options\n   * @return {string}\n   */\n  static toHex (arr, options) {\n    /**\n     * @param {number} val\n     * @param {boolean} uppercase\n     * @return {*}\n     */\n    const numberToHex = (val, uppercase) => {\n      const set = uppercase\n        ? ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F']\n        : ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f']\n\n      return set[Math.floor(val / 16)] + set[val % 16]\n    }\n    const opts = Object.assign(\n      {\n        grouping: 0,\n        rowlength: 0,\n        uppercase: false\n      },\n      options || {}\n    )\n\n    let str = ''\n    let group = 0\n    let column = 0\n\n    for (let i = 0; i < arr.length; ++i) {\n      str += numberToHex(arr[i], opts.uppercase)\n\n      if (i === arr.length - 1) {\n        break\n      }\n\n      if (opts.grouping > 0 && ++group === opts.grouping) {\n        group = 0\n\n        if (opts.rowlength > 0 && ++column === opts.rowlength) {\n          column = 0\n          str += '\\n'\n        } else {\n          str += ' '\n        }\n      }\n    }\n\n    return str\n  }\n\n  /**\n   * Takes a string containing hexadecimal and returns the equivalent as a Uint8Array buffer.\n   *\n   * str The string to convert. Whitespace is ignored. If an odd number of characters are specified,\n   * it will act as if preceeded with a leading 0; that is, \"FFF\" is equivalent to \"0FFF\".\n   *\n   * return a Uint8Array array.\n   *\n   * @param {string} str\n   * @return {Uint8Array}\n   */\n  static toUint8Array (str) {\n    let target = str.toLowerCase().replace(/\\s/g, '')\n\n    if (target.length % 2 === 1) {\n      target = `0${ target }`\n    }\n\n    const buffer = new Uint8Array(Math.floor(target.length / 2))\n    let curr = -1\n\n    for (let i = 0; i < target.length; ++i) {\n      const c = target[i]\n      const val = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'].indexOf(c)\n\n      if (val === -1) {\n        throw Error('unexpected character')\n      }\n\n      if (curr === -1) {\n        curr = 16 * val\n      } else {\n        buffer[Math.floor(i / 2)] = curr + val\n        curr = -1\n      }\n    }\n\n    return buffer\n  }\n}\n","import Hex from './Hex.js'\n\nif (!String.prototype.trim) {\n  String.prototype.trim = function () {\n    return this.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n  }\n}\n\nif (!String.prototype.toCamelCase) {\n  String.prototype.toCamelCase = function () {\n    return this.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g, (m, chr) => chr.toUpperCase())\n  }\n}\n\nif (!String.prototype.toSnakeCase) {\n  String.prototype.toSnakeCase = function () {\n    return this.replace(/[A-Z]/g, letter => `_${ letter.toLowerCase() }`)\n  }\n}\n\n/**\n * Chunks a string into array segments of equal size\n *\n * @param str\n * @param size\n * @return {any[]}\n */\nexport function chunkSubstr (str, size) {\n  const numChunks = Math.ceil(str.length / size)\n  const chunks = []\n\n  for (let chunkIndex = 0, o = 0; chunkIndex < numChunks; ++chunkIndex, o += size) {\n    chunks[chunkIndex] = str.substr(o, size)\n  }\n\n  return chunks\n}\n\n/**\n * Generates a cryptographically-secure pseudo-random string of the given length out of the given alphabet\n *\n * @param length\n * @param alphabet\n * @return {string}\n */\nexport function randomString (length = 256, alphabet = 'abcdef0123456789') {\n  let array = new Uint8Array(length)\n\n  array = crypto.getRandomValues(array)\n\n  array = array.map(x => alphabet.charCodeAt(x % alphabet.length))\n\n  return String.fromCharCode.apply(null, array)\n}\n\n/**\n * Convert charset between bases and alphabets\n *\n * @param src\n * @param {int} fromBase\n * @param {int} toBase\n * @param { string} srcSymbolTable\n * @param {string} destSymbolTable\n * @return {boolean|string|number}\n */\nexport function charsetBaseConvert (src, fromBase, toBase, srcSymbolTable, destSymbolTable) {\n  const baseSymbols = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~`!@#$%^&*()-_=+[{]}\\\\|;:\\'\",<.>/?¿¡'\n  srcSymbolTable = srcSymbolTable || baseSymbols\n  destSymbolTable = destSymbolTable || srcSymbolTable\n\n  if (fromBase > srcSymbolTable.length || toBase > destSymbolTable.length) {\n    console.warn('Strings::charsetBaseConvert() - Can\\'t convert', src, 'to base', toBase, 'greater than symbol table length. src-table:', srcSymbolTable.length, 'dest-table:', destSymbolTable.length)\n    return false\n  }\n\n  // Convert from source base to BigInt in base 10\n  let val = BigInt(0)\n  for (let charIndex = 0; charIndex < src.length; charIndex++) {\n    val = val * BigInt(fromBase) + BigInt(srcSymbolTable.indexOf(src.charAt(charIndex)))\n  }\n\n  // Convert from BigInt in base 10 to destination base\n  let res = ''\n  while (val > 0) {\n    const r = val % BigInt(toBase)\n    res = destSymbolTable.charAt(Number(r)) + res\n    val /= BigInt(toBase)\n  }\n\n  // If the result is empty, it means the source was 0\n  return res || '0'\n}\n\n/**\n * Converts a buffer into a hexadecimal string\n *\n * @param byteArray\n * @return {string}\n */\nexport function bufferToHexString (byteArray) {\n  return Hex.toHex(byteArray, {})\n}\n\n/**\n * Converts a hexadecimal string into a buffer\n *\n * @param hexString\n * @return {Uint8Array}\n */\nexport function hexStringToBuffer (hexString) {\n  return Hex.toUint8Array(hexString)\n}\n\n/**\n * Compresses a given string for web sharing\n *\n * @param string\n * @return {string}\n */\nexport function hexToBase64 (string) {\n  const bytes = hexStringToBuffer(string)\n  return btoa(String.fromCharCode.apply(null, bytes))\n}\n\n/**\n * Decompresses a compressed string\n *\n * @param {string} string\n * @return {string}\n */\nexport function base64ToHex (string) {\n  const bytes = new Uint8Array(atob(string).split('').map(char => char.charCodeAt(0)))\n  return bufferToHexString(bytes)\n}\n\n/**\n * @param {string} str\n * @return {boolean}\n */\nexport function isHex (str) {\n  return /^[A-F0-9]+$/i.test(str)\n}\n\n/**\n * @param {string} str\n * @return {boolean}\n */\nexport function isNumeric (str) {\n  return (typeof (str) === 'number' || (typeof (str) === 'string' && str.trim() !== '')) && !isNaN(str)\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n */\n\n/**\n * Meta class to represent metadata conveyed by Atoms\n */\nexport default class Meta {\n  /**\n   * Normalizes the meta array into the standard {key: ..., value: ...} format\n   *\n   * @param {array|object} meta\n   * @return {array}\n   */\n  static normalizeMeta (meta) {\n    // Ensuring that only object-based meta gets normalized\n    if (Array.isArray(meta)) {\n      return meta.map(entry => ({\n        key: entry.key,\n        value: entry.value == null ? null : String(entry.value)\n      }))\n    }\n\n    // Converting object-based meta into array-based notation\n    const target = []\n    for (const property in meta) {\n      if (Object.prototype.hasOwnProperty.call(meta, property)) {\n        const raw = meta[property]\n        target.push({ key: property, value: raw == null ? null : String(raw) })\n      }\n    }\n\n    return target\n  }\n\n  /**\n   * Condenses metadata array into object-based key: value notation\n   *\n   * @param {array|object} meta\n   * @return {object}\n   */\n  static aggregateMeta (meta) {\n    let aggregate = {}\n\n    // Ensuring that only array-based meta gets aggregated\n    if (Array.isArray(meta)) {\n      for (const metaEntry of meta) {\n        aggregate[metaEntry.key] = metaEntry.value\n      }\n    } else {\n      aggregate = meta\n    }\n\n    return aggregate\n  }\n}\n","/**\n * Split an array into chunks\n *\n * @param {array} arr\n * @param {number} size\n * @return {array}\n */\nexport function chunkArray (arr, size) {\n  if (!arr.length) {\n    return []\n  }\n\n  return [arr.slice(0, size)].concat(chunkArray(arr.slice(size), size))\n}\n\nexport function deepCloning (\n  o // The only argument passed by user: object to clone\n  , h // Cache (organized as array: [key,value,key,value,...])\n) {\n  let i\n  let r\n  let x // Property indexer, result, temporary variable\n\n  const t = [Array, Date, Number, String, Boolean] // Types to treat in a special way\n\n  const s = Object.prototype.toString // Shortcut to Object.prototype.toString\n  h = h || [] // If cache is not created yet, create it!\n  // Search cache for our object\n  for (i = 0; i < h.length; i += 2) {\n    if (o === h[i]) {\n      r = h[i + 1]\n    }\n  }\n  // Clone o if it is uncached object and not null\n  if (!r && o && typeof o === 'object') {\n    r = {} // Default result template: plain hash\n    // To handle multiframe environment, search for type by\n    for (i = 0; i < t.length; i++) {\n      //   comparing Object.prototype.toString's of our object\n      //   and new object x created with the constructor t[i]\n      // Notice that it will create new Date(o), new String(o)\n      //   which is good and new Array(o) which is bad\n      if (s.call(o) === s.call(x = new t[i](o))) {\n        r = i ? x : []\n      }\n    } // If i==0, t==Array. We need to recreate it. Else use x\n    h.push(o, r) // Add object to cache before (!) making recursive call\n    // Just copy properties recursively\n    for (i in o) {\n      // As o might have key 'hasOwnProperty', use something\n      if (h.hasOwnProperty.call(o, i)) {\n        r[i] = deepCloning(o[i], h)\n      }\n    } //   we defined right instead\n  }\n  return r || o // Return r if it was found in cache or built in if(){}\n}\n\n/**\n * @param arrays\n * @returns {*[]}\n */\nexport function diff (...arrays) {\n  return [].concat(...arrays.map((arr, i) => {\n    const others = arrays.slice(0)\n\n    others.splice(i, 1)\n\n    const unique = [...new Set([].concat(...others))]\n\n    return arr.filter(item => !unique.includes(item))\n  }))\n}\n\n/**\n *\n * @param arrays\n * @return {*[]}\n */\nexport function intersect (...arrays) {\n  return arrays.reduce((first, second) => first.filter(item => second.includes(item)))\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport { diff } from './libraries/array.js'\n\n/**\n *\n */\nexport default class PolicyMeta {\n  /**\n   *\n   * @param policy\n   * @param metaKeys\n   */\n  constructor (policy = {}, metaKeys = {}) {\n    this.policy = PolicyMeta.normalizePolicy(policy)\n    this.fillDefault(metaKeys)\n  }\n\n  /**\n   *\n   * @param policy\n   * @returns {{}}\n   */\n  static normalizePolicy (policy = {}) {\n    const policyMeta = {}\n    for (const [policyKey, value] of Object.entries(policy)) {\n      if (value !== null && ['read', 'write'].includes(policyKey)) {\n        policyMeta[policyKey] = {}\n        for (const [key, content] of Object.entries(value)) {\n          policyMeta[policyKey][key] = content\n        }\n      }\n    }\n    return policyMeta\n  }\n\n  /**\n   *\n   */\n  fillDefault (metaKeys = {}) {\n    const readPolicy = Array.from(this.policy).filter(item => item.action === 'read')\n    const writePolicy = Array.from(this.policy).filter(item => item.action === 'write')\n\n    for (const [type, value] of Object.entries({\n      read: readPolicy,\n      write: writePolicy\n    })) {\n      const policyKey = value.map(item => item.key)\n\n      if (!this.policy[type]) {\n        this.policy[type] = {}\n      }\n\n      for (const key of diff(metaKeys, policyKey)) {\n        if (!this.policy[type][key]) {\n          this.policy[type][key] = (type === 'write' && !['characters', 'pubkey'].includes(key)) ? ['self'] : ['all']\n        }\n      }\n    }\n  }\n\n  /**\n   *\n   * @returns {{}|*}\n   */\n  get () {\n    return this.policy\n  }\n\n  /**\n   *\n   * @returns {string}\n   */\n  toJson () {\n    return JSON.stringify(this.get())\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport PolicyMeta from './PolicyMeta.js'\nimport Meta from './Meta.js'\n\nconst USE_META_CONTEXT = false\nconst DEFAULT_META_CONTEXT = 'https://www.schema.org'\n\n/**\n *\n */\nexport default class AtomMeta {\n  /**\n   *\n   * @param {object|array} meta\n   */\n  constructor (meta = []) {\n    this.meta = Meta.normalizeMeta(meta)\n  }\n\n  /**\n   *\n   * @param {object|array} meta\n   * @returns {AtomMeta}\n   */\n  merge (meta) {\n    this.meta = Array.from(new Set([...this.meta, ...Meta.normalizeMeta(meta)]))\n    return this\n  }\n\n  /**\n   *\n   * @param context\n   * @returns {AtomMeta}\n   */\n  addContext (context = null) {\n    // Add context key if it is enabled\n    if (USE_META_CONTEXT) {\n      this.merge({ context: context || DEFAULT_META_CONTEXT })\n    }\n\n    return this\n  }\n\n  /**\n   *\n   * @param {Wallet} wallet\n   * @returns {AtomMeta}\n   */\n  setAtomWallet (wallet) {\n    const walletMeta = {}\n\n    // Add token units meta key\n    if (wallet.tokenUnits && wallet.tokenUnits.length) {\n      walletMeta.tokenUnits = JSON.stringify(wallet.getTokenUnitsData())\n    }\n    // Add trade rates meta key\n    if (wallet.tradeRates && wallet.tradeRates.length) {\n      walletMeta.tradeRates = JSON.stringify(wallet.tradeRates)\n    }\n\n    // Merge all wallet's metas (if any)\n    if (Object.keys(walletMeta).length > 0) {\n      this.merge(walletMeta)\n    }\n    return this\n  }\n\n  /**\n   * Set full NEW wallet metadata\n   * Used for shadow wallet claim & wallet creation & token creation\n   *\n   * @param {Wallet} wallet\n   * @returns {AtomMeta}\n   */\n  setMetaWallet (wallet) {\n    this.merge({\n      walletTokenSlug: wallet.token,\n      walletBundleHash: wallet.bundle,\n      walletAddress: wallet.address,\n      walletPosition: wallet.position,\n      walletBatchId: wallet.batchId,\n      walletPubkey: wallet.pubkey,\n      walletCharacters: wallet.characters\n    })\n    return this\n  }\n\n  /**\n   *\n   * @param shadowWalletClaim\n   * @returns {AtomMeta}\n   */\n  setShadowWalletClaim (shadowWalletClaim) {\n    this.merge({ shadowWalletClaim: shadowWalletClaim * 1 })\n    return this\n  }\n\n  /**\n   *\n   * @param {Wallet} signingWallet\n   * @returns {AtomMeta}\n   */\n  setSigningWallet (signingWallet) {\n    this.merge({\n      signingWallet: JSON.stringify({\n        tokenSlug: signingWallet.token,\n        bundleHash: signingWallet.bundle,\n        address: signingWallet.address,\n        position: signingWallet.position,\n        pubkey: signingWallet.pubkey,\n        characters: signingWallet.characters\n      })\n    })\n    return this\n  }\n\n  /**\n   *\n   * @param policy\n   * @todo move logic to the separated class\n   * @returns {AtomMeta}\n   */\n  addPolicy (policy) {\n    // Policy meta initialization\n    const policyMeta = new PolicyMeta(policy, Object.keys(this.meta))\n\n    this.merge({\n      policy: policyMeta.toJson()\n    })\n\n    return this\n  }\n\n  /**\n   *\n   * @returns {array}\n   */\n  get () {\n    return this.meta\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n/**\n * Base exception class\n */\nexport default class BaseException extends TypeError {\n  /**\n   * @param {string|null} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = null, fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n\n    if (message === null) {\n      throw new this(`Unknown ${ this.constructor.name }`)\n    }\n\n    this.name = 'BaseException'\n  }\n\n  /**\n   * @return {string}\n   */\n  toString () {\n    return `${ this.name }: ${ this.message }.\\nStack:\\n${ this.stack }`\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Empty molecules are not allowed\n */\nexport default class AtomsMissingException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'The molecule does not contain atoms', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'AtomsMissingException'\n  }\n}\n","export default class HashAtom {\n  /**\n   *\n   * @param {Atom} atom\n   */\n  static create (atom) {\n    const parameters = {}\n\n    for (const key of Object.keys(atom)) {\n      if (Object.prototype.hasOwnProperty.call(atom, key)) {\n        parameters[key] = atom[key]\n      }\n    }\n\n    return new this(parameters)\n  }\n\n  /**\n   *\n   * @param {Object|Array} object\n   * @returns {Object|Array[]}\n   */\n  static structure (object) {\n    switch (Object.prototype.toString.call(object)) {\n      case '[object Array]': {\n        const result = []\n        for (const key in object) {\n          result.push(HashAtom.isStructure(object[key]) ? HashAtom.structure(object[key]) : object[key])\n        }\n\n        return result\n      }\n\n      case '[object Object]': {\n        const result = []\n        const keys = Object.keys(object).sort((first, second) => {\n          if (first === second) {\n            return 0\n          }\n          return (first < second) ? -1 : 1\n        })\n\n        for (const key of keys) {\n          if (Object.prototype.hasOwnProperty.call(object, key)) {\n            const item = {}\n            item[key] = HashAtom.isStructure(object[key]) ? HashAtom.structure(object[key]) : object[key]\n            result.push(item)\n          }\n        }\n\n        if (result.length > 0) {\n          return result\n        }\n\n        break\n      }\n    }\n\n    return object\n  }\n\n  /**\n   *\n   * @param {*} structure\n   * @returns {boolean}\n   */\n  static isStructure (structure) {\n    return ['[object Object]', '[object Array]'].includes(Object.prototype.toString.call(structure))\n  }\n\n  /**\n   *\n   * @returns {Object[]}\n   */\n  view () {\n    return HashAtom.structure(this)\n  }\n}\n","import HashAtom from './HashAtom.js'\n\nexport default class Version4 extends HashAtom {\n  constructor ({\n    position = null,\n    walletAddress = null,\n    isotope = null,\n    token = null,\n    value = null,\n    batchId = null,\n    metaType = null,\n    metaId = null,\n    meta = null,\n    index = null,\n    createdAt = null,\n    version = null\n  }) {\n    super()\n    this.position = position\n    this.walletAddress = walletAddress\n    this.isotope = isotope\n    this.token = token\n    this.value = value\n    this.batchId = batchId\n\n    this.metaType = metaType\n    this.metaId = metaId\n    this.meta = meta\n\n    this.index = index\n    this.createdAt = createdAt\n    this.version = version\n  }\n}\n","import Version4 from './Version4.js'\n\nexport default {\n  4: Version4\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport JsSHA from 'jssha'\nimport { charsetBaseConvert } from './libraries/strings.js'\nimport Meta from './Meta.js'\nimport AtomMeta from './AtomMeta.js'\nimport AtomsMissingException from './exception/AtomsMissingException.js'\nimport versions from './versions/index.js'\n\n/**\n * Atom class used to form microtransactions within a Molecule\n */\nexport default class Atom {\n  /**\n   * Class constructor\n   *\n   * @param {string|null} position\n   * @param {string|null} walletAddress\n   * @param {string|null} isotope\n   * @param {string|null} token\n   * @param {string|number|null} value\n   * @param {string|null} batchId\n   * @param {string|null} metaType\n   * @param {string|null} metaId\n   * @param {array|object|null} meta\n   * @param {string|null} otsFragment\n   * @param {number|null} index\n   * @param {string|null} version\n   */\n  constructor ({\n    position = null,\n    walletAddress = null,\n    isotope = null,\n    token = null,\n    value = null,\n    batchId = null,\n    metaType = null,\n    metaId = null,\n    meta = null,\n    otsFragment = null,\n    index = null,\n    version = null\n  }) {\n    this.position = position\n    this.walletAddress = walletAddress\n    this.isotope = isotope\n    this.token = token\n    this.value = value !== null ? String(value) : null\n    this.batchId = batchId\n\n    this.metaType = metaType\n    this.metaId = metaId\n    this.meta = meta ? Meta.normalizeMeta(meta) : []\n\n    this.index = index\n    this.otsFragment = otsFragment\n    this.createdAt = String(+new Date())\n    if (version !== null && Object.prototype.hasOwnProperty.call(versions, version)) {\n      this.version = String(version)\n    }\n  }\n\n  /**\n   *\n   * @returns {string[]}\n   */\n  static getHashableProps () {\n    return [\n      'position',\n      'walletAddress',\n      'isotope',\n      'token',\n      'value',\n      'batchId',\n      'metaType',\n      'metaId',\n      'meta',\n      'createdAt'\n    ]\n  }\n\n  /**\n   *\n   * @returns {string[]}\n   */\n  static getUnclaimedProps () {\n    return [\n      'otsFragment'\n    ]\n  }\n\n  /**\n   *\n   * @param {string} isotope\n   * @param {Wallet|null} wallet\n   * @param {int|null} value\n   * @param {string|null} metaType\n   * @param {string|null} metaId\n   * @param {AtomMeta|array|object|null} meta\n   * @param {string|null} batchId\n   * @returns {Atom}\n   */\n  static create ({\n    isotope,\n    wallet = null,\n    value = null,\n    metaType = null,\n    metaId = null,\n    meta = null,\n    batchId = null\n  }) {\n    // If meta object is not passed - create it\n    if (!meta) {\n      meta = new AtomMeta()\n    }\n\n    // If meta object is not an instance of AtomMeta - create it from meta\n    if (!(meta instanceof AtomMeta)) {\n      meta = new AtomMeta(meta)\n    }\n\n    // If wallet has been passed => add related metas\n    if (wallet) {\n      // Add wallet's meta\n      meta.setAtomWallet(wallet)\n\n      // If batch ID does not passed: set it from the wallet\n      if (!batchId) {\n        batchId = wallet.batchId\n      }\n    }\n\n    // Create the final atom's object\n    // walletAddress is null for atoms without a pre-existing wallet (e.g., recipient V-atoms).\n    // toJSON() serializes null as '' for GraphQL compatibility; hash computation treats both identically.\n    return new Atom({\n      position: wallet ? wallet.position : null,\n      walletAddress: wallet ? wallet.address : null,\n      isotope,\n      token: wallet ? wallet.token : null,\n      value,\n      batchId,\n      metaType,\n      metaId,\n      meta: meta.get()\n    })\n  }\n\n  /**\n   * Converts a compliant JSON string into an Atom class instance\n   *\n   * @param {string} json\n   * @return {object}\n   */\n  static jsonToObject (json) {\n    const target = Object.assign(new Atom({}), JSON.parse(json))\n    const properties = Object.keys(new Atom({}))\n\n    for (const property in target) {\n      if (Object.prototype.hasOwnProperty.call(target, property) && !properties.includes(property)) {\n        delete target[property]\n      }\n    }\n\n    return target\n  }\n\n  /**\n   * Returns JSON-ready object for cross-SDK compatibility (2025 JS best practices)\n   * \n   * Provides clean serialization of atomic operations with optional OTS fragments.\n   * Follows 2025 JavaScript best practices with proper type safety and validation.\n   *\n   * @param {Object} options - Serialization options\n   * @param {boolean} options.includeOtsFragments - Include OTS signature fragments (default: true)\n   * @param {boolean} options.validateFields - Validate required fields (default: false)\n   * @return {Object} JSON-serializable object\n   * @throws {Error} If atom is in invalid state for serialization\n   */\n  toJSON (options = {}) {\n    const {\n      includeOtsFragments = true,\n      validateFields = false\n    } = options;\n\n    try {\n      // Validate required fields if requested\n      if (validateFields) {\n        const requiredFields = ['position', 'walletAddress', 'isotope', 'token'];\n        for (const field of requiredFields) {\n          if (!this[field]) {\n            throw new Error(`Required field '${field}' is missing or empty`);\n          }\n        }\n      }\n\n      // Core atom properties (always included)\n      // Coerce null position/walletAddress/token to empty string for GraphQL compatibility.\n      // The molecular hash computation (getHashableValues) already treats null as '' (line 448),\n      // so this coercion does NOT change the hash. Required because the Rust validator's\n      // GraphQL schema uses String! (non-null) with #[graphql(default)] for these fields,\n      // which accepts omitted values but rejects explicit null.\n      const serialized = {\n        position: this.position ?? '',\n        walletAddress: this.walletAddress ?? '',\n        isotope: this.isotope,\n        token: this.token ?? '',\n        value: this.value,\n        batchId: this.batchId,\n        metaType: this.metaType,\n        metaId: this.metaId,\n        meta: this.meta || [],\n        index: this.index,\n        createdAt: this.createdAt,\n        version: this.version\n      };\n\n      // Optional OTS fragments (can be large, so optional)\n      if (includeOtsFragments && this.otsFragment) {\n        serialized.otsFragment = this.otsFragment;\n      }\n\n      return serialized;\n\n    } catch (error) {\n      throw new Error(`Atom serialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Creates an Atom instance from JSON data (2025 JS best practices)\n   * \n   * Handles cross-SDK atom deserialization with robust error handling.\n   * Essential for reconstructing atoms from other SDK implementations.\n   *\n   * @param {string|Object} json - JSON string or object to deserialize\n   * @param {Object} options - Deserialization options\n   * @param {boolean} options.validateStructure - Validate required fields (default: true)\n   * @param {boolean} options.strictMode - Strict validation mode (default: false)\n   * @return {Atom} Reconstructed atom instance\n   * @throws {Error} If JSON is invalid or required fields are missing\n   */\n  static fromJSON (json, options = {}) {\n    const {\n      validateStructure = true,\n      strictMode = false\n    } = options;\n\n    try {\n      // Parse JSON safely\n      const data = typeof json === 'string' ? JSON.parse(json) : json;\n\n      // Validate required fields in strict mode\n      if (strictMode || validateStructure) {\n        const requiredFields = ['position', 'walletAddress', 'isotope', 'token'];\n        for (const field of requiredFields) {\n          if (!data[field]) {\n            throw new Error(`Required field '${field}' is missing or empty`);\n          }\n        }\n      }\n\n      // Create atom instance with required fields\n      const atom = new Atom({\n        position: data.position,\n        walletAddress: data.walletAddress,\n        isotope: data.isotope,\n        token: data.token,\n        value: data.value,\n        batchId: data.batchId,\n        metaType: data.metaType,\n        metaId: data.metaId,\n        meta: data.meta,\n        index: data.index,\n        version: data.version\n      });\n\n      // Set additional properties that may not be in constructor\n      if (data.otsFragment) {\n        atom.otsFragment = data.otsFragment;\n      }\n      if (data.createdAt) {\n        atom.createdAt = data.createdAt;\n      }\n\n      return atom;\n\n    } catch (error) {\n      throw new Error(`Atom deserialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Produces a hash of the atoms inside a molecule.\n   * Used to generate the molecularHash field for Molecules.\n   *\n   * @param {array} atoms\n   * @param {string} output\n   * @return {number[]|*}\n   */\n  static hashAtoms ({\n    atoms,\n    output = 'base17'\n  }) {\n    const molecularSponge = new JsSHA('SHAKE256', 'TEXT')\n    const atomList = Atom.sortAtoms(atoms)\n\n    if (atomList.length === 0) {\n      throw new AtomsMissingException()\n    }\n\n    atomList.map(atom => {\n      if (!(atom instanceof Atom)) {\n        throw new AtomsMissingException()\n      }\n      return atom\n    })\n\n    // Hashing each atom in the molecule to produce a molecular hash\n    if (atomList.every(atom => atom.version && Object.prototype.hasOwnProperty.call(versions, atom.version))) {\n      molecularSponge.update(JSON.stringify(atomList.map(atom => versions[atom.version].create(atom).view())))\n    } else {\n      const numberOfAtoms = String(atoms.length)\n      let hashableValues = []\n\n      for (const atom of atomList) {\n        // Add number of atoms (???)\n        hashableValues.push(numberOfAtoms)\n\n        // Add atom's properties\n        hashableValues = hashableValues.concat(atom.getHashableValues())\n      }\n\n      // Add hash values to the sponge\n      for (const hashableValue of hashableValues) {\n        molecularSponge.update(hashableValue)\n      }\n    }\n\n    // Return the hash in the requested format\n    switch (output) {\n      case 'hex': {\n        return molecularSponge.getHash('HEX', { outputLen: 256 })\n      }\n      case 'array': {\n        return molecularSponge.getHash('ARRAYBUFFER', { outputLen: 256 })\n      }\n      default: {\n        return charsetBaseConvert(molecularSponge.getHash('HEX', { outputLen: 256 }), 16, 17, '0123456789abcdef', '0123456789abcdefg').padStart(64, '0')\n      }\n    }\n  }\n\n  static jsonSerialization (key, value) {\n    if (!Atom.getUnclaimedProps().includes(key)) {\n      return value\n    }\n\n    return undefined\n  }\n\n  /**\n   * Sort the atoms in a Molecule\n   *\n   * @param {array} atoms\n   * @return {array}\n   */\n  static sortAtoms (atoms) {\n    const atomList = [...atoms]\n\n    // Sort based on atomic index\n    atomList.sort((first, second) => {\n      return first.index < second.index ? -1 : 1\n    })\n\n    return atomList\n  }\n\n  /**\n   * Get aggregated meta from stored normalized ones\n   */\n  aggregatedMeta () {\n    return Meta.aggregateMeta(this.meta)\n  }\n\n  /**\n   *\n   * @returns {*[]}\n   */\n  getHashableValues () {\n    const hashableValues = []\n    for (const property of Atom.getHashableProps()) {\n      const value = this[property]\n\n      // All nullable values are not hashed (only custom keys)\n      if (value === null && !['position', 'walletAddress'].includes(property)) {\n        continue\n      }\n\n      // Hashing individual meta keys and values\n      if (property === 'meta') {\n        for (const meta of value) {\n          if (typeof meta.value !== 'undefined' && meta.value !== null) {\n            hashableValues.push(String(meta.key))\n            hashableValues.push(String(meta.value))\n          }\n        }\n      } else {\n        // Default value\n        hashableValues.push(value === null ? '' : String(value))\n      }\n    }\n    return hashableValues\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n */\nimport { randomString } from './strings.js'\nimport JsSHA from 'jssha'\n\n/**\n * Generates a secret based on an optional seed\n *\n * @param seed\n * @param length\n * @return {string|*}\n */\nexport function generateSecret (seed = null, length = 2048) {\n  // console.info(`Crypto::generateSecret() - Computing new secret${ seed ? ' from existing seed' : '' }...`)\n  if (seed) {\n    const sponge = new JsSHA('SHAKE256', 'TEXT')\n    sponge.update(seed)\n    // Fix: outputLen is in BITS, so for 'length' hex chars (length/2 bytes), we need length*2 bits\n    return sponge.getHash('HEX', { outputLen: length * 2 })\n  } else {\n    return randomString(length)\n  }\n}\n\n/**\n * Hashes the user secret to produce a bundle hash\n *\n * @param {string} secret\n * @param {string|null} source\n * @return {string}\n */\nexport function generateBundleHash (secret, source = null) {\n  const sponge = new JsSHA('SHAKE256', 'TEXT')\n  sponge.update(secret)\n  return sponge.getHash('HEX', { outputLen: 64 * 4 }) // 64 bytes = 512 bits\n}\n\n/**\n * SHAKE256 hash function\n *\n * @param {string} input - The input string to hash\n * @param {number} outputLength - The desired output length in bits\n * @return {string} The hex-encoded hash\n */\nexport function shake256 (input, outputLength) {\n  const sponge = new JsSHA('SHAKE256', 'TEXT')\n  sponge.update(input)\n  return sponge.getHash('HEX', { outputLen: outputLength })\n}\n\n/**\n * Returns a new batch ID for stackable tokens\n *\n * @param {string|null} molecularHash\n * @param {number|null} index\n *\n * @return {string}\n */\nexport function generateBatchId ({\n  molecularHash = null,\n  index = null\n}) {\n  if (molecularHash !== null && index !== null) {\n    return generateBundleHash(String(molecularHash) + String(index), 'generateBatchId')\n  }\n\n  return randomString(64)\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\n/**\n * AuthToken class\n */\nexport default class TokenUnit {\n  /**\n   *\n   * @param id\n   * @param name\n   * @param metas\n   */\n  constructor (id, name, metas) {\n    this.id = id\n    this.name = name\n    this.metas = metas || {}\n  }\n\n  /**\n   *\n   * @param data\n   * @returns {*}\n   */\n  static createFromGraphQL (data) {\n    let metas = data.metas || {}\n    if (metas.length) {\n      metas = JSON.parse(metas)\n      if (!metas) { // set an empty object instead of an array\n        metas = {}\n      }\n    }\n    return new TokenUnit(\n      data.id,\n      data.name,\n      metas\n    )\n  }\n\n  /**\n   *\n   * @param data\n   * @returns {TokenUnit}\n   */\n  static createFromDB (data) {\n    return new TokenUnit(\n      data[0],\n      data[1],\n      data.length > 2 ? data[2] : {}\n    )\n  }\n\n  /**\n   *\n   * @returns {*|null}\n   */\n  getFragmentZone () {\n    return this.metas.fragmentZone || null\n  }\n\n  /**\n   *\n   * @returns {*|null}\n   */\n  getFusedTokenUnits () {\n    return this.metas.fusedTokenUnits || null\n  }\n\n  /**\n   * @return array\n   */\n  toData () {\n    return [this.id, this.name, this.metas]\n  }\n\n  /**\n   *\n   * @returns {{metas: string, name: *, id: *}}\n   */\n  toGraphQLResponse () {\n    return {\n      id: this.id,\n      name: this.name,\n      metas: JSON.stringify(this.metas)\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when failing to retrieve shadow wallets\n */\nexport default class WalletCredentialException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Attempting to create a wallet with no credentials (secret or bundle hash)', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'WalletCredentialException'\n  }\n}\n","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nexport function anumber(n, title = '') {\n    if (!Number.isSafeInteger(n) || n < 0) {\n        const prefix = title && `\"${title}\" `;\n        throw new Error(`${prefix}expected integer >0, got ${n}`);\n    }\n}\n/** Asserts something is Uint8Array. */\nexport function abytes(value, length, title = '') {\n    const bytes = isBytes(value);\n    const len = value?.length;\n    const needsLen = length !== undefined;\n    if (!bytes || (needsLen && len !== length)) {\n        const prefix = title && `\"${title}\" `;\n        const ofLen = needsLen ? ` of length ${length}` : '';\n        const got = bytes ? `length=${len}` : `type=${typeof value}`;\n        throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n    }\n    return value;\n}\n/** Asserts something is hash */\nexport function ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash must wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out, instance) {\n    abytes(out, undefined, 'digestInto() output');\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('\"digestInto() output\" expected to be of length >=' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nexport function byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexport const swap32IfBE = isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * Built-in doesn't validate input to be string: we do the check.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data, errorTitle = '') {\n    if (typeof data === 'string')\n        return utf8ToBytes(data);\n    return abytes(data, undefined, errorTitle);\n}\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n/** Merges default options and passed options. */\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options must be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** Creates function with outputLen, blockLen, create properties from a class constructor. */\nexport function createHasher(hashCons, info = {}) {\n    const hashC = (msg, opts) => hashCons(opts).update(msg).digest();\n    const tmp = hashCons(undefined);\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    Object.assign(hashC, info);\n    return Object.freeze(hashC);\n}\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32) {\n    const cr = typeof globalThis === 'object' ? globalThis.crypto : null;\n    if (typeof cr?.getRandomValues !== 'function')\n        throw new Error('crypto.getRandomValues must be defined');\n    return cr.getRandomValues(new Uint8Array(bytesLength));\n}\n/** Creates OID opts for NIST hashes, with prefix 06 09 60 86 48 01 65 03 04 02. */\nexport const oidNist = (suffix) => ({\n    oid: Uint8Array.from([0x06, 0x09, 0x60, 0x86, 0x48, 0x01, 0x65, 0x03, 0x04, 0x02, suffix]),\n});\n//# sourceMappingURL=utils.js.map","/**\n * SHA3 (keccak) hash function, based on a new \"Sponge function\" design.\n * Different from older hashes, the internal state is bigger than output size.\n *\n * Check out [FIPS-202](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf),\n * [Website](https://keccak.team/keccak.html),\n * [the differences between SHA-3 and Keccak](https://crypto.stackexchange.com/questions/15727/what-are-the-key-differences-between-the-draft-sha-3-standard-and-the-keccak-sub).\n *\n * Check out `sha3-addons` module for cSHAKE, k12, and others.\n * @module\n */\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from \"./_u64.js\";\n// prettier-ignore\nimport { abytes, aexists, anumber, aoutput, clean, createHasher, oidNist, swap32IfBE, u32 } from \"./utils.js\";\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = []; // no pure annotation: var is always used\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst IOTAS = split(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n/** `keccakf1600` internal function, additionally allows to adjust round count. */\nexport function keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta θ\n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho (ρ) and Pi (π)\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi (χ)\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota (ι)\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    clean(B);\n}\n/** Keccak sponge function. */\nexport class Keccak {\n    state;\n    pos = 0;\n    posOut = 0;\n    finished = false;\n    state32;\n    destroyed = false;\n    blockLen;\n    suffix;\n    outputLen;\n    enableXOF = false;\n    rounds;\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        // Can be passed from user as dkLen\n        anumber(outputLen, 'outputLen');\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        // 0 < blockLen < 200\n        if (!(0 < blockLen && blockLen < 200))\n            throw new Error('only keccak-f1600 function is supported');\n        this.state = new Uint8Array(200);\n        this.state32 = u32(this.state);\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    keccak() {\n        swap32IfBE(this.state32);\n        keccakP(this.state32, this.rounds);\n        swap32IfBE(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        aexists(this);\n        abytes(data);\n        const { blockLen, state } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        aexists(this, false);\n        abytes(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        anumber(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        aoutput(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        clean(this.state);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to ||= new Keccak(blockLen, suffix, outputLen, enableXOF, rounds);\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nconst genKeccak = (suffix, blockLen, outputLen, info = {}) => createHasher(() => new Keccak(blockLen, suffix, outputLen), info);\n/** SHA3-224 hash function. */\nexport const sha3_224 = /* @__PURE__ */ genKeccak(0x06, 144, 28, \n/* @__PURE__ */ oidNist(0x07));\n/** SHA3-256 hash function. Different from keccak-256. */\nexport const sha3_256 = /* @__PURE__ */ genKeccak(0x06, 136, 32, \n/* @__PURE__ */ oidNist(0x08));\n/** SHA3-384 hash function. */\nexport const sha3_384 = /* @__PURE__ */ genKeccak(0x06, 104, 48, \n/* @__PURE__ */ oidNist(0x09));\n/** SHA3-512 hash function. */\nexport const sha3_512 = /* @__PURE__ */ genKeccak(0x06, 72, 64, \n/* @__PURE__ */ oidNist(0x0a));\n/** keccak-224 hash function. */\nexport const keccak_224 = /* @__PURE__ */ genKeccak(0x01, 144, 28);\n/** keccak-256 hash function. Different from SHA3-256. */\nexport const keccak_256 = /* @__PURE__ */ genKeccak(0x01, 136, 32);\n/** keccak-384 hash function. */\nexport const keccak_384 = /* @__PURE__ */ genKeccak(0x01, 104, 48);\n/** keccak-512 hash function. */\nexport const keccak_512 = /* @__PURE__ */ genKeccak(0x01, 72, 64);\nconst genShake = (suffix, blockLen, outputLen, info = {}) => createHasher((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true), info);\n/** SHAKE128 XOF with 128-bit security. */\nexport const shake128 = \n/* @__PURE__ */\ngenShake(0x1f, 168, 16, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 256-bit security. */\nexport const shake256 = \n/* @__PURE__ */\ngenShake(0x1f, 136, 32, /* @__PURE__ */ oidNist(0x0c));\n/** SHAKE128 XOF with 256-bit output (NIST version). */\nexport const shake128_32 = \n/* @__PURE__ */\ngenShake(0x1f, 168, 32, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 512-bit output (NIST version). */\nexport const shake256_64 = \n/* @__PURE__ */\ngenShake(0x1f, 136, 64, /* @__PURE__ */ oidNist(0x0c));\n//# sourceMappingURL=sha3.js.map","function checkU32(n) {\n    // 0xff_ff_ff_ff\n    if (!Number.isSafeInteger(n) || n < 0 || n > 0xffffffff)\n        throw new Error('wrong u32 integer:' + n);\n    return n;\n}\n/** Checks if integer is in form of `1 << X` */\nexport function isPowerOfTwo(x) {\n    checkU32(x);\n    return (x & (x - 1)) === 0 && x !== 0;\n}\nexport function nextPowerOfTwo(n) {\n    checkU32(n);\n    if (n <= 1)\n        return 1;\n    return (1 << (log2(n - 1) + 1)) >>> 0;\n}\nexport function reverseBits(n, bits) {\n    checkU32(n);\n    let reversed = 0;\n    for (let i = 0; i < bits; i++, n >>>= 1)\n        reversed = (reversed << 1) | (n & 1);\n    return reversed;\n}\n/** Similar to `bitLen(x)-1` but much faster for small integers, like indices */\nexport function log2(n) {\n    checkU32(n);\n    return 31 - Math.clz32(n);\n}\n/**\n * Moves lowest bit to highest position, which at first step splits\n * array on even and odd indices, then it applied again to each part,\n * which is core of fft\n */\nexport function bitReversalInplace(values) {\n    const n = values.length;\n    if (n < 2 || !isPowerOfTwo(n))\n        throw new Error('n must be a power of 2 and greater than 1. Got ' + n);\n    const bits = log2(n);\n    for (let i = 0; i < n; i++) {\n        const j = reverseBits(i, bits);\n        if (i < j) {\n            const tmp = values[i];\n            values[i] = values[j];\n            values[j] = tmp;\n        }\n    }\n    return values;\n}\nexport function bitReversalPermutation(values) {\n    return bitReversalInplace(values.slice());\n}\nconst _1n = /** @__PURE__ */ BigInt(1);\nfunction findGenerator(field) {\n    let G = BigInt(2);\n    for (; field.eql(field.pow(G, field.ORDER >> _1n), field.ONE); G++)\n        ;\n    return G;\n}\n/** We limit roots up to 2**31, which is a lot: 2-billion polynomimal should be rare. */\nexport function rootsOfUnity(field, generator) {\n    // Factor field.ORDER-1 as oddFactor * 2^powerOfTwo\n    let oddFactor = field.ORDER - _1n;\n    let powerOfTwo = 0;\n    for (; (oddFactor & _1n) !== _1n; powerOfTwo++, oddFactor >>= _1n)\n        ;\n    // Find non quadratic residue\n    let G = generator !== undefined ? BigInt(generator) : findGenerator(field);\n    // Powers of generator\n    const omegas = new Array(powerOfTwo + 1);\n    omegas[powerOfTwo] = field.pow(G, oddFactor);\n    for (let i = powerOfTwo; i > 0; i--)\n        omegas[i - 1] = field.sqr(omegas[i]);\n    // Compute all roots of unity for powers up to maxPower\n    const rootsCache = [];\n    const checkBits = (bits) => {\n        checkU32(bits);\n        if (bits > 31 || bits > powerOfTwo)\n            throw new Error('rootsOfUnity: wrong bits ' + bits + ' powerOfTwo=' + powerOfTwo);\n        return bits;\n    };\n    const precomputeRoots = (maxPower) => {\n        checkBits(maxPower);\n        for (let power = maxPower; power >= 0; power--) {\n            if (rootsCache[power])\n                continue; // Skip if we've already computed roots for this power\n            const rootsAtPower = [];\n            for (let j = 0, cur = field.ONE; j < 2 ** power; j++, cur = field.mul(cur, omegas[power]))\n                rootsAtPower.push(cur);\n            rootsCache[power] = rootsAtPower;\n        }\n        return rootsCache[maxPower];\n    };\n    const brpCache = new Map();\n    const inverseCache = new Map();\n    // NOTE: we use bits instead of power, because power = 2**bits,\n    // but power is not neccesary isPowerOfTwo(power)!\n    return {\n        roots: (bits) => {\n            const b = checkBits(bits);\n            return precomputeRoots(b);\n        },\n        brp(bits) {\n            const b = checkBits(bits);\n            if (brpCache.has(b))\n                return brpCache.get(b);\n            else {\n                const res = bitReversalPermutation(this.roots(b));\n                brpCache.set(b, res);\n                return res;\n            }\n        },\n        inverse(bits) {\n            const b = checkBits(bits);\n            if (inverseCache.has(b))\n                return inverseCache.get(b);\n            else {\n                const res = field.invertBatch(this.roots(b));\n                inverseCache.set(b, res);\n                return res;\n            }\n        },\n        omega: (bits) => omegas[checkBits(bits)],\n        clear: () => {\n            rootsCache.splice(0, rootsCache.length);\n            brpCache.clear();\n        },\n    };\n}\n/**\n * Constructs different flavors of FFT. radix2 implementation of low level mutating API. Flavors:\n *\n * - DIT (Decimation-in-Time): Bottom-Up (leaves -> root), Cool-Turkey\n * - DIF (Decimation-in-Frequency): Top-Down (root -> leaves), Gentleman–Sande\n *\n * DIT takes brp input, returns natural output.\n * DIF takes natural input, returns brp output.\n *\n * The output is actually identical. Time / frequence distinction is not meaningful\n * for Polynomial multiplication in fields.\n * Which means if protocol supports/needs brp output/inputs, then we can skip this step.\n *\n * Cyclic NTT: Rq = Zq[x]/(x^n-1). butterfly_DIT+loop_DIT OR butterfly_DIF+loop_DIT, roots are omega\n * Negacyclic NTT: Rq = Zq[x]/(x^n+1). butterfly_DIT+loop_DIF, at least for mlkem / mldsa\n */\nexport const FFTCore = (F, coreOpts) => {\n    const { N, roots, dit, invertButterflies = false, skipStages = 0, brp = true } = coreOpts;\n    const bits = log2(N);\n    if (!isPowerOfTwo(N))\n        throw new Error('FFT: Polynomial size should be power of two');\n    const isDit = dit !== invertButterflies;\n    isDit;\n    return (values) => {\n        if (values.length !== N)\n            throw new Error('FFT: wrong Polynomial length');\n        if (dit && brp)\n            bitReversalInplace(values);\n        for (let i = 0, g = 1; i < bits - skipStages; i++) {\n            // For each stage s (sub-FFT length m = 2^s)\n            const s = dit ? i + 1 + skipStages : bits - i;\n            const m = 1 << s;\n            const m2 = m >> 1;\n            const stride = N >> s;\n            // Loop over each subarray of length m\n            for (let k = 0; k < N; k += m) {\n                // Loop over each butterfly within the subarray\n                for (let j = 0, grp = g++; j < m2; j++) {\n                    const rootPos = invertButterflies ? (dit ? N - grp : grp) : j * stride;\n                    const i0 = k + j;\n                    const i1 = k + j + m2;\n                    const omega = roots[rootPos];\n                    const b = values[i1];\n                    const a = values[i0];\n                    // Inlining gives us 10% perf in kyber vs functions\n                    if (isDit) {\n                        const t = F.mul(b, omega); // Standard DIT butterfly\n                        values[i0] = F.add(a, t);\n                        values[i1] = F.sub(a, t);\n                    }\n                    else if (invertButterflies) {\n                        values[i0] = F.add(b, a); // DIT loop + inverted butterflies (Kyber decode)\n                        values[i1] = F.mul(F.sub(b, a), omega);\n                    }\n                    else {\n                        values[i0] = F.add(a, b); // Standard DIF butterfly\n                        values[i1] = F.mul(F.sub(a, b), omega);\n                    }\n                }\n            }\n        }\n        if (!dit && brp)\n            bitReversalInplace(values);\n        return values;\n    };\n};\n/**\n * NTT aka FFT over finite field (NOT over complex numbers).\n * Naming mirrors other libraries.\n */\nexport function FFT(roots, opts) {\n    const getLoop = (N, roots, brpInput = false, brpOutput = false) => {\n        if (brpInput && brpOutput) {\n            // we cannot optimize this case, but lets support it anyway\n            return (values) => FFTCore(opts, { N, roots, dit: false, brp: false })(bitReversalInplace(values));\n        }\n        if (brpInput)\n            return FFTCore(opts, { N, roots, dit: true, brp: false });\n        if (brpOutput)\n            return FFTCore(opts, { N, roots, dit: false, brp: false });\n        return FFTCore(opts, { N, roots, dit: true, brp: true }); // all natural\n    };\n    return {\n        direct(values, brpInput = false, brpOutput = false) {\n            const N = values.length;\n            if (!isPowerOfTwo(N))\n                throw new Error('FFT: Polynomial size should be power of two');\n            const bits = log2(N);\n            return getLoop(N, roots.roots(bits), brpInput, brpOutput)(values.slice());\n        },\n        inverse(values, brpInput = false, brpOutput = false) {\n            const N = values.length;\n            const bits = log2(N);\n            const res = getLoop(N, roots.inverse(bits), brpInput, brpOutput)(values.slice());\n            const ivm = opts.inv(BigInt(values.length)); // scale\n            // we can get brp output if we use dif instead of dit!\n            for (let i = 0; i < res.length; i++)\n                res[i] = opts.mul(res[i], ivm);\n            // Allows to re-use non-inverted roots, but is VERY fragile\n            // return [res[0]].concat(res.slice(1).reverse());\n            // inverse calculated as pow(-1), which transforms into ω^{-kn} (-> reverses indices)\n            return res;\n        },\n    };\n}\nexport function poly(field, roots, create, fft, length) {\n    const F = field;\n    const _create = create ||\n        ((len, elm) => new Array(len).fill(elm ?? F.ZERO));\n    const isPoly = (x) => Array.isArray(x) || ArrayBuffer.isView(x);\n    const checkLength = (...lst) => {\n        if (!lst.length)\n            return 0;\n        for (const i of lst)\n            if (!isPoly(i))\n                throw new Error('poly: not polynomial: ' + i);\n        const L = lst[0].length;\n        for (let i = 1; i < lst.length; i++)\n            if (lst[i].length !== L)\n                throw new Error(`poly: mismatched lengths ${L} vs ${lst[i].length}`);\n        if (length !== undefined && L !== length)\n            throw new Error(`poly: expected fixed length ${length}, got ${L}`);\n        return L;\n    };\n    function findOmegaIndex(x, n, brp = false) {\n        const bits = log2(n);\n        const omega = brp ? roots.brp(bits) : roots.roots(bits);\n        for (let i = 0; i < n; i++)\n            if (F.eql(x, omega[i]))\n                return i;\n        return -1;\n    }\n    // TODO: mutating versions for mlkem/mldsa\n    return {\n        roots,\n        create: _create,\n        length,\n        extend: (a, len) => {\n            checkLength(a);\n            const out = _create(len, F.ZERO);\n            for (let i = 0; i < a.length; i++)\n                out[i] = a[i];\n            return out;\n        },\n        degree: (a) => {\n            checkLength(a);\n            for (let i = a.length - 1; i >= 0; i--)\n                if (!F.is0(a[i]))\n                    return i;\n            return -1;\n        },\n        add: (a, b) => {\n            const len = checkLength(a, b);\n            const out = _create(len);\n            for (let i = 0; i < len; i++)\n                out[i] = F.add(a[i], b[i]);\n            return out;\n        },\n        sub: (a, b) => {\n            const len = checkLength(a, b);\n            const out = _create(len);\n            for (let i = 0; i < len; i++)\n                out[i] = F.sub(a[i], b[i]);\n            return out;\n        },\n        dot: (a, b) => {\n            const len = checkLength(a, b);\n            const out = _create(len);\n            for (let i = 0; i < len; i++)\n                out[i] = F.mul(a[i], b[i]);\n            return out;\n        },\n        mul: (a, b) => {\n            if (isPoly(b)) {\n                const len = checkLength(a, b);\n                if (fft) {\n                    const A = fft.direct(a, false, true);\n                    const B = fft.direct(b, false, true);\n                    for (let i = 0; i < A.length; i++)\n                        A[i] = F.mul(A[i], B[i]);\n                    return fft.inverse(A, true, false);\n                }\n                else {\n                    // NOTE: this is quadratic and mostly for compat tests with FFT\n                    const res = _create(len);\n                    for (let i = 0; i < len; i++) {\n                        for (let j = 0; j < len; j++) {\n                            const k = (i + j) % len; // wrap mod length\n                            res[k] = F.add(res[k], F.mul(a[i], b[j]));\n                        }\n                    }\n                    return res;\n                }\n            }\n            else {\n                const out = _create(checkLength(a));\n                for (let i = 0; i < out.length; i++)\n                    out[i] = F.mul(a[i], b);\n                return out;\n            }\n        },\n        convolve(a, b) {\n            const len = nextPowerOfTwo(a.length + b.length - 1);\n            return this.mul(this.extend(a, len), this.extend(b, len));\n        },\n        shift(p, factor) {\n            const out = _create(checkLength(p));\n            out[0] = p[0];\n            for (let i = 1, power = F.ONE; i < p.length; i++) {\n                power = F.mul(power, factor);\n                out[i] = F.mul(p[i], power);\n            }\n            return out;\n        },\n        clone: (a) => {\n            checkLength(a);\n            const out = _create(a.length);\n            for (let i = 0; i < a.length; i++)\n                out[i] = a[i];\n            return out;\n        },\n        eval: (a, basis) => {\n            checkLength(a);\n            let acc = F.ZERO;\n            for (let i = 0; i < a.length; i++)\n                acc = F.add(acc, F.mul(a[i], basis[i]));\n            return acc;\n        },\n        monomial: {\n            basis: (x, n) => {\n                const out = _create(n);\n                let pow = F.ONE;\n                for (let i = 0; i < n; i++) {\n                    out[i] = pow;\n                    pow = F.mul(pow, x);\n                }\n                return out;\n            },\n            eval: (a, x) => {\n                checkLength(a);\n                // Same as eval(a, monomialBasis(x, a.length)), but it is faster this way\n                let acc = F.ZERO;\n                for (let i = a.length - 1; i >= 0; i--)\n                    acc = F.add(F.mul(acc, x), a[i]);\n                return acc;\n            },\n        },\n        lagrange: {\n            basis: (x, n, brp = false, weights) => {\n                const bits = log2(n);\n                const cache = weights || brp ? roots.brp(bits) : roots.roots(bits); // [ω⁰, ω¹, ..., ωⁿ⁻¹]\n                const out = _create(n);\n                // Fast Kronecker-δ shortcut\n                const idx = findOmegaIndex(x, n, brp);\n                if (idx !== -1) {\n                    out[idx] = F.ONE;\n                    return out;\n                }\n                const tm = F.pow(x, BigInt(n));\n                const c = F.mul(F.sub(tm, F.ONE), F.inv(BigInt(n))); // c = (xⁿ - 1)/n\n                const denom = _create(n);\n                for (let i = 0; i < n; i++)\n                    denom[i] = F.sub(x, cache[i]);\n                const inv = F.invertBatch(denom);\n                for (let i = 0; i < n; i++)\n                    out[i] = F.mul(c, F.mul(cache[i], inv[i]));\n                return out;\n            },\n            eval(a, x, brp = false) {\n                checkLength(a);\n                const idx = findOmegaIndex(x, a.length, brp);\n                if (idx !== -1)\n                    return a[idx]; // fast path\n                const L = this.basis(x, a.length, brp); // Lᵢ(x)\n                let acc = F.ZERO;\n                for (let i = 0; i < a.length; i++)\n                    if (!F.is0(a[i]))\n                        acc = F.add(acc, F.mul(a[i], L[i]));\n                return acc;\n            },\n        },\n        vanishing(roots) {\n            checkLength(roots);\n            const out = _create(roots.length + 1, F.ZERO);\n            out[0] = F.ONE;\n            for (const r of roots) {\n                const neg = F.neg(r);\n                for (let j = out.length - 1; j > 0; j--)\n                    out[j] = F.add(F.mul(out[j], neg), out[j - 1]);\n                out[0] = F.mul(out[0], neg);\n            }\n            return out;\n        },\n    };\n}\n//# sourceMappingURL=fft.js.map","/**\n * Utilities for hex, bytearray and number handling.\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nimport { abytes, abytes as abytes_, concatBytes, isBytes, randomBytes as randb, } from '@noble/hashes/utils.js';\nexport { abytes } from '@noble/hashes/utils.js';\nexport { concatBytes };\nexport const randomBytes = randb;\n// Compares 2 u8a-s in kinda constant time\nexport function equalBytes(a, b) {\n    if (a.length !== b.length)\n        return false;\n    let diff = 0;\n    for (let i = 0; i < a.length; i++)\n        diff |= a[i] ^ b[i];\n    return diff === 0;\n}\n// copy bytes to new u8a (aligned). Because Buffer.slice is broken.\nexport function copyBytes(bytes) {\n    return Uint8Array.from(bytes);\n}\nexport function validateOpts(opts) {\n    // We try to catch u8a, since it was previously valid argument at this position\n    if (typeof opts !== 'object' || opts === null || isBytes(opts))\n        throw new Error('expected opts to be an object');\n}\nexport function validateVerOpts(opts) {\n    validateOpts(opts);\n    if (opts.context !== undefined)\n        abytes(opts.context, undefined, 'opts.context');\n}\nexport function validateSigOpts(opts) {\n    validateVerOpts(opts);\n    if (opts.extraEntropy !== false && opts.extraEntropy !== undefined)\n        abytes(opts.extraEntropy, undefined, 'opts.extraEntropy');\n}\nexport function splitCoder(label, ...lengths) {\n    const getLength = (c) => (typeof c === 'number' ? c : c.bytesLen);\n    const bytesLen = lengths.reduce((sum, a) => sum + getLength(a), 0);\n    return {\n        bytesLen,\n        encode: (bufs) => {\n            const res = new Uint8Array(bytesLen);\n            for (let i = 0, pos = 0; i < lengths.length; i++) {\n                const c = lengths[i];\n                const l = getLength(c);\n                const b = typeof c === 'number' ? bufs[i] : c.encode(bufs[i]);\n                abytes_(b, l, label);\n                res.set(b, pos);\n                if (typeof c !== 'number')\n                    b.fill(0); // clean\n                pos += l;\n            }\n            return res;\n        },\n        decode: (buf) => {\n            abytes_(buf, bytesLen, label);\n            const res = [];\n            for (const c of lengths) {\n                const l = getLength(c);\n                const b = buf.subarray(0, l);\n                res.push(typeof c === 'number' ? b : c.decode(b));\n                buf = buf.subarray(l);\n            }\n            return res;\n        },\n    };\n}\n// nano-packed.array (fixed size)\nexport function vecCoder(c, vecLen) {\n    const bytesLen = vecLen * c.bytesLen;\n    return {\n        bytesLen,\n        encode: (u) => {\n            if (u.length !== vecLen)\n                throw new Error(`vecCoder.encode: wrong length=${u.length}. Expected: ${vecLen}`);\n            const res = new Uint8Array(bytesLen);\n            for (let i = 0, pos = 0; i < u.length; i++) {\n                const b = c.encode(u[i]);\n                res.set(b, pos);\n                b.fill(0); // clean\n                pos += b.length;\n            }\n            return res;\n        },\n        decode: (a) => {\n            abytes_(a, bytesLen);\n            const r = [];\n            for (let i = 0; i < a.length; i += c.bytesLen)\n                r.push(c.decode(a.subarray(i, i + c.bytesLen)));\n            return r;\n        },\n    };\n}\n// cleanBytes(Uint8Array.of(), [Uint16Array.of(), Uint32Array.of()])\nexport function cleanBytes(...list) {\n    for (const t of list) {\n        if (Array.isArray(t))\n            for (const b of t)\n                b.fill(0);\n        else\n            t.fill(0);\n    }\n}\nexport function getMask(bits) {\n    return (1 << bits) - 1; // 4 -> 0b1111\n}\nexport const EMPTY = Uint8Array.of();\nexport function getMessage(msg, ctx = EMPTY) {\n    abytes_(msg);\n    abytes_(ctx);\n    if (ctx.length > 255)\n        throw new Error('context should be less than 255 bytes');\n    return concatBytes(new Uint8Array([0, ctx.length]), ctx, msg);\n}\n// 06 09 60 86 48 01 65 03 04 02\nconst oidNistP = /* @__PURE__ */ Uint8Array.from([6, 9, 0x60, 0x86, 0x48, 1, 0x65, 3, 4, 2]);\nexport function checkHash(hash, requiredStrength = 0) {\n    if (!hash.oid || !equalBytes(hash.oid.subarray(0, 10), oidNistP))\n        throw new Error('hash.oid is invalid: expected NIST hash');\n    const collisionResistance = (hash.outputLen * 8) / 2;\n    if (requiredStrength > collisionResistance) {\n        throw new Error('Pre-hash security strength too low: ' +\n            collisionResistance +\n            ', required: ' +\n            requiredStrength);\n    }\n}\nexport function getMessagePrehash(hash, msg, ctx = EMPTY) {\n    abytes_(msg);\n    abytes_(ctx);\n    if (ctx.length > 255)\n        throw new Error('context should be less than 255 bytes');\n    const hashed = hash(msg);\n    return concatBytes(new Uint8Array([1, ctx.length]), ctx, hash.oid, hashed);\n}\n//# sourceMappingURL=utils.js.map","/**\n * Internal methods for lattice-based ML-KEM and ML-DSA.\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nimport { FFTCore, reverseBits } from '@noble/curves/abstract/fft.js';\nimport { shake128, shake256 } from '@noble/hashes/sha3.js';\nimport { cleanBytes, getMask } from \"./utils.js\";\nexport const genCrystals = (opts) => {\n    // isKyber: true means Kyber, false means Dilithium\n    const { newPoly, N, Q, F, ROOT_OF_UNITY, brvBits, isKyber } = opts;\n    const mod = (a, modulo = Q) => {\n        const result = a % modulo | 0;\n        return (result >= 0 ? result | 0 : (modulo + result) | 0) | 0;\n    };\n    // -(Q-1)/2 < a <= (Q-1)/2\n    const smod = (a, modulo = Q) => {\n        const r = mod(a, modulo) | 0;\n        return (r > modulo >> 1 ? (r - modulo) | 0 : r) | 0;\n    };\n    // Generate zettas (different from roots of unity, negacyclic uses phi, where acyclic uses omega)\n    function getZettas() {\n        const out = newPoly(N);\n        for (let i = 0; i < N; i++) {\n            const b = reverseBits(i, brvBits);\n            const p = BigInt(ROOT_OF_UNITY) ** BigInt(b) % BigInt(Q);\n            out[i] = Number(p) | 0;\n        }\n        return out;\n    }\n    const nttZetas = getZettas();\n    // Number-Theoretic Transform\n    // Explained: https://electricdusk.com/ntt.html\n    // Kyber has slightly different params, since there is no 512th primitive root of unity mod q,\n    // only 256th primitive root of unity mod. Which also complicates MultiplyNTT.\n    const field = {\n        add: (a, b) => mod((a | 0) + (b | 0)) | 0,\n        sub: (a, b) => mod((a | 0) - (b | 0)) | 0,\n        mul: (a, b) => mod((a | 0) * (b | 0)) | 0,\n        inv: (_a) => {\n            throw new Error('not implemented');\n        },\n    };\n    const nttOpts = {\n        N,\n        roots: nttZetas,\n        invertButterflies: true,\n        skipStages: isKyber ? 1 : 0,\n        brp: false,\n    };\n    const dif = FFTCore(field, { dit: false, ...nttOpts });\n    const dit = FFTCore(field, { dit: true, ...nttOpts });\n    const NTT = {\n        encode: (r) => {\n            return dif(r);\n        },\n        decode: (r) => {\n            dit(r);\n            // kyber uses 128 here, because brv && stuff\n            for (let i = 0; i < r.length; i++)\n                r[i] = mod(F * r[i]);\n            return r;\n        },\n    };\n    // Encode polynominal as bits\n    const bitsCoder = (d, c) => {\n        const mask = getMask(d);\n        const bytesLen = d * (N / 8);\n        return {\n            bytesLen,\n            encode: (poly) => {\n                const r = new Uint8Array(bytesLen);\n                for (let i = 0, buf = 0, bufLen = 0, pos = 0; i < poly.length; i++) {\n                    buf |= (c.encode(poly[i]) & mask) << bufLen;\n                    bufLen += d;\n                    for (; bufLen >= 8; bufLen -= 8, buf >>= 8)\n                        r[pos++] = buf & getMask(bufLen);\n                }\n                return r;\n            },\n            decode: (bytes) => {\n                const r = newPoly(N);\n                for (let i = 0, buf = 0, bufLen = 0, pos = 0; i < bytes.length; i++) {\n                    buf |= bytes[i] << bufLen;\n                    bufLen += 8;\n                    for (; bufLen >= d; bufLen -= d, buf >>= d)\n                        r[pos++] = c.decode(buf & mask);\n                }\n                return r;\n            },\n        };\n    };\n    return { mod, smod, nttZetas, NTT, bitsCoder };\n};\nconst createXofShake = (shake) => (seed, blockLen) => {\n    if (!blockLen)\n        blockLen = shake.blockLen;\n    // Optimizations that won't mater:\n    // - cached seed update (two .update(), on start and on the end)\n    // - another cache which cloned into working copy\n    // Faster than multiple updates, since seed less than blockLen\n    const _seed = new Uint8Array(seed.length + 2);\n    _seed.set(seed);\n    const seedLen = seed.length;\n    const buf = new Uint8Array(blockLen); // == shake128.blockLen\n    let h = shake.create({});\n    let calls = 0;\n    let xofs = 0;\n    return {\n        stats: () => ({ calls, xofs }),\n        get: (x, y) => {\n            _seed[seedLen + 0] = x;\n            _seed[seedLen + 1] = y;\n            h.destroy();\n            h = shake.create({}).update(_seed);\n            calls++;\n            return () => {\n                xofs++;\n                return h.xofInto(buf);\n            };\n        },\n        clean: () => {\n            h.destroy();\n            cleanBytes(buf, _seed);\n        },\n    };\n};\nexport const XOF128 = /* @__PURE__ */ createXofShake(shake128);\nexport const XOF256 = /* @__PURE__ */ createXofShake(shake256);\n//# sourceMappingURL=_crystals.js.map","/**\n * ML-KEM: Module Lattice-based Key Encapsulation Mechanism from\n * [FIPS-203](https://csrc.nist.gov/pubs/fips/203/ipd). A.k.a. CRYSTALS-Kyber.\n *\n * Key encapsulation is similar to DH / ECDH (think X25519), with important differences:\n * * Unlike in ECDH, we can't verify if it was \"Bob\" who've sent the shared secret\n * * Unlike ECDH, it is probabalistic and relies on quality of randomness (CSPRNG).\n * * Decapsulation never throws an error, even when shared secret was\n *   encrypted by a different public key. It will just return a different shared secret.\n *\n * There are some concerns with regards to security: see\n * [djb blog](https://blog.cr.yp.to/20231003-countcorrectly.html) and\n * [mailing list](https://groups.google.com/a/list.nist.gov/g/pqc-forum/c/W2VOzy0wz_E).\n *\n * Has similar internals to ML-DSA, but their keys and params are different.\n *\n * Check out [official site](https://www.pq-crystals.org/kyber/resources.shtml),\n * [repo](https://github.com/pq-crystals/kyber),\n * [spec](https://datatracker.ietf.org/doc/draft-cfrg-schwabe-kyber/).\n * @module\n */\n/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */\nimport { sha3_256, sha3_512, shake256 } from '@noble/hashes/sha3.js';\nimport { u32 } from '@noble/hashes/utils.js';\nimport { genCrystals, XOF128 } from \"./_crystals.js\";\nimport { abytes, cleanBytes, copyBytes, equalBytes, randomBytes, splitCoder, vecCoder, } from \"./utils.js\";\n/** Key encapsulation mechanism interface */\nconst N = 256; // Kyber (not FIPS-203) supports different lengths, but all std modes were using 256\nconst Q = 3329; // 13*(2**8)+1, modulo prime\nconst F = 3303; // 3303 ≡ 128**(−1) mod q (FIPS-203)\nconst ROOT_OF_UNITY = 17; // ζ = 17 ∈ Zq is a primitive 256-th root of unity modulo Q. ζ**128 ≡−1\nconst { mod, nttZetas, NTT, bitsCoder } = genCrystals({\n    N,\n    Q,\n    F,\n    ROOT_OF_UNITY,\n    newPoly: (n) => new Uint16Array(n),\n    brvBits: 7,\n    isKyber: true,\n});\n/** Internal params of ML-KEM versions */\n// prettier-ignore\nexport const PARAMS = {\n    512: { N, Q, K: 2, ETA1: 3, ETA2: 2, du: 10, dv: 4, RBGstrength: 128 },\n    768: { N, Q, K: 3, ETA1: 2, ETA2: 2, du: 10, dv: 4, RBGstrength: 192 },\n    1024: { N, Q, K: 4, ETA1: 2, ETA2: 2, du: 11, dv: 5, RBGstrength: 256 },\n};\n// FIPS-203: compress/decompress\nconst compress = (d) => {\n    // Special case, no need to compress, pass as is, but strip high bytes on compression\n    if (d >= 12)\n        return { encode: (i) => i, decode: (i) => i };\n    // NOTE: we don't use float arithmetic (forbidden by FIPS-203 and high chance of bugs).\n    // Comments map to python implementation in RFC (draft-cfrg-schwabe-kyber)\n    // const round = (i: number) => Math.floor(i + 0.5) | 0;\n    const a = 2 ** (d - 1);\n    return {\n        // const compress = (i: number) => round((2 ** d / Q) * i) % 2 ** d;\n        encode: (i) => ((i << d) + Q / 2) / Q,\n        // const decompress = (i: number) => round((Q / 2 ** d) * i);\n        decode: (i) => (i * Q + a) >>> d,\n    };\n};\n// NOTE: we merge encoding and compress because it is faster, also both require same d param\n// Converts between bytes and d-bits compressed representation. Kinda like convertRadix2 from @scure/base\n// decode(encode(t)) == t, but there is loss of information on encode(decode(t))\nconst polyCoder = (d) => bitsCoder(d, compress(d));\nfunction polyAdd(a, b) {\n    for (let i = 0; i < N; i++)\n        a[i] = mod(a[i] + b[i]); // a += b\n}\nfunction polySub(a, b) {\n    for (let i = 0; i < N; i++)\n        a[i] = mod(a[i] - b[i]); // a -= b\n}\n// FIPS-203: Computes the product of two degree-one polynomials with respect to a quadratic modulus\nfunction BaseCaseMultiply(a0, a1, b0, b1, zeta) {\n    const c0 = mod(a1 * b1 * zeta + a0 * b0);\n    const c1 = mod(a0 * b1 + a1 * b0);\n    return { c0, c1 };\n}\n// FIPS-203: Computes the product (in the ring Tq) of two NTT representations. NOTE: works inplace for f\n// NOTE: since multiply defined only for NTT representation, we need to convert to NTT, multiply and convert back\nfunction MultiplyNTTs(f, g) {\n    for (let i = 0; i < N / 2; i++) {\n        let z = nttZetas[64 + (i >> 1)];\n        if (i & 1)\n            z = -z;\n        const { c0, c1 } = BaseCaseMultiply(f[2 * i + 0], f[2 * i + 1], g[2 * i + 0], g[2 * i + 1], z);\n        f[2 * i + 0] = c0;\n        f[2 * i + 1] = c1;\n    }\n    return f;\n}\n// Return poly in NTT representation\nfunction SampleNTT(xof) {\n    const r = new Uint16Array(N);\n    for (let j = 0; j < N;) {\n        const b = xof();\n        if (b.length % 3)\n            throw new Error('SampleNTT: unaligned block');\n        for (let i = 0; j < N && i + 3 <= b.length; i += 3) {\n            const d1 = ((b[i + 0] >> 0) | (b[i + 1] << 8)) & 0xfff;\n            const d2 = ((b[i + 1] >> 4) | (b[i + 2] << 4)) & 0xfff;\n            if (d1 < Q)\n                r[j++] = d1;\n            if (j < N && d2 < Q)\n                r[j++] = d2;\n        }\n    }\n    return r;\n}\n// Sampling from the centered binomial distribution\n// Returns poly with small coefficients (noise/errors)\nfunction sampleCBD(PRF, seed, nonce, eta) {\n    const buf = PRF((eta * N) / 4, seed, nonce);\n    const r = new Uint16Array(N);\n    const b32 = u32(buf);\n    let len = 0;\n    for (let i = 0, p = 0, bb = 0, t0 = 0; i < b32.length; i++) {\n        let b = b32[i];\n        for (let j = 0; j < 32; j++) {\n            bb += b & 1;\n            b >>= 1;\n            len += 1;\n            if (len === eta) {\n                t0 = bb;\n                bb = 0;\n            }\n            else if (len === 2 * eta) {\n                r[p++] = mod(t0 - bb);\n                bb = 0;\n                len = 0;\n            }\n        }\n    }\n    if (len)\n        throw new Error(`sampleCBD: leftover bits: ${len}`);\n    return r;\n}\n// K-PKE\n// As per FIPS-203, it doesn't perform any input validation and can't be used in standalone fashion.\nconst genKPKE = (opts) => {\n    const { K, PRF, XOF, HASH512, ETA1, ETA2, du, dv } = opts;\n    const poly1 = polyCoder(1);\n    const polyV = polyCoder(dv);\n    const polyU = polyCoder(du);\n    const publicCoder = splitCoder('publicKey', vecCoder(polyCoder(12), K), 32);\n    const secretCoder = vecCoder(polyCoder(12), K);\n    const cipherCoder = splitCoder('ciphertext', vecCoder(polyU, K), polyV);\n    const seedCoder = splitCoder('seed', 32, 32);\n    return {\n        secretCoder,\n        lengths: {\n            secretKey: secretCoder.bytesLen,\n            publicKey: publicCoder.bytesLen,\n            cipherText: cipherCoder.bytesLen,\n        },\n        keygen: (seed) => {\n            abytes(seed, 32, 'seed');\n            const seedDst = new Uint8Array(33);\n            seedDst.set(seed);\n            seedDst[32] = K;\n            const seedHash = HASH512(seedDst);\n            const [rho, sigma] = seedCoder.decode(seedHash);\n            const sHat = [];\n            const tHat = [];\n            for (let i = 0; i < K; i++)\n                sHat.push(NTT.encode(sampleCBD(PRF, sigma, i, ETA1)));\n            const x = XOF(rho);\n            for (let i = 0; i < K; i++) {\n                const e = NTT.encode(sampleCBD(PRF, sigma, K + i, ETA1));\n                for (let j = 0; j < K; j++) {\n                    const aji = SampleNTT(x.get(j, i)); // A[j][i], inplace\n                    polyAdd(e, MultiplyNTTs(aji, sHat[j]));\n                }\n                tHat.push(e); // t ← A ◦ s + e\n            }\n            x.clean();\n            const res = {\n                publicKey: publicCoder.encode([tHat, rho]),\n                secretKey: secretCoder.encode(sHat),\n            };\n            cleanBytes(rho, sigma, sHat, tHat, seedDst, seedHash);\n            return res;\n        },\n        encrypt: (publicKey, msg, seed) => {\n            const [tHat, rho] = publicCoder.decode(publicKey);\n            const rHat = [];\n            for (let i = 0; i < K; i++)\n                rHat.push(NTT.encode(sampleCBD(PRF, seed, i, ETA1)));\n            const x = XOF(rho);\n            const tmp2 = new Uint16Array(N);\n            const u = [];\n            for (let i = 0; i < K; i++) {\n                const e1 = sampleCBD(PRF, seed, K + i, ETA2);\n                const tmp = new Uint16Array(N);\n                for (let j = 0; j < K; j++) {\n                    const aij = SampleNTT(x.get(i, j)); // A[i][j], inplace\n                    polyAdd(tmp, MultiplyNTTs(aij, rHat[j])); // t += aij * rHat[j]\n                }\n                polyAdd(e1, NTT.decode(tmp)); // e1 += tmp\n                u.push(e1);\n                polyAdd(tmp2, MultiplyNTTs(tHat[i], rHat[i])); // t2 += tHat[i] * rHat[i]\n                cleanBytes(tmp);\n            }\n            x.clean();\n            const e2 = sampleCBD(PRF, seed, 2 * K, ETA2);\n            polyAdd(e2, NTT.decode(tmp2)); // e2 += tmp2\n            const v = poly1.decode(msg); // encode plaintext m into polynomial v\n            polyAdd(v, e2); // v += e2\n            cleanBytes(tHat, rHat, tmp2, e2);\n            return cipherCoder.encode([u, v]);\n        },\n        decrypt: (cipherText, privateKey) => {\n            const [u, v] = cipherCoder.decode(cipherText);\n            const sk = secretCoder.decode(privateKey); // s  ← ByteDecode_12(dkPKE)\n            const tmp = new Uint16Array(N);\n            for (let i = 0; i < K; i++)\n                polyAdd(tmp, MultiplyNTTs(sk[i], NTT.encode(u[i]))); // tmp += sk[i] * u[i]\n            polySub(v, NTT.decode(tmp)); // v += tmp\n            cleanBytes(tmp, sk, u);\n            return poly1.encode(v);\n        },\n    };\n};\nfunction createKyber(opts) {\n    const KPKE = genKPKE(opts);\n    const { HASH256, HASH512, KDF } = opts;\n    const { secretCoder: KPKESecretCoder, lengths } = KPKE;\n    const secretCoder = splitCoder('secretKey', lengths.secretKey, lengths.publicKey, 32, 32);\n    const msgLen = 32;\n    const seedLen = 64;\n    return {\n        info: { type: 'ml-kem' },\n        lengths: {\n            ...lengths,\n            seed: 64,\n            msg: msgLen,\n            msgRand: msgLen,\n            secretKey: secretCoder.bytesLen,\n        },\n        keygen: (seed = randomBytes(seedLen)) => {\n            abytes(seed, seedLen, 'seed');\n            const { publicKey, secretKey: sk } = KPKE.keygen(seed.subarray(0, 32));\n            const publicKeyHash = HASH256(publicKey);\n            // (dkPKE||ek||H(ek)||z)\n            const secretKey = secretCoder.encode([sk, publicKey, publicKeyHash, seed.subarray(32)]);\n            cleanBytes(sk, publicKeyHash);\n            return { publicKey, secretKey };\n        },\n        getPublicKey: (secretKey) => {\n            const [_sk, publicKey, _publicKeyHash, _z] = secretCoder.decode(secretKey);\n            return Uint8Array.from(publicKey);\n        },\n        encapsulate: (publicKey, msg = randomBytes(msgLen)) => {\n            abytes(publicKey, lengths.publicKey, 'publicKey');\n            abytes(msg, msgLen, 'message');\n            // FIPS-203 includes additional verification check for modulus\n            const eke = publicKey.subarray(0, 384 * opts.K);\n            const ek = KPKESecretCoder.encode(KPKESecretCoder.decode(copyBytes(eke))); // Copy because of inplace encoding\n            // (Modulus check.) Perform the computation ek ← ByteEncode12(ByteDecode12(eke)).\n            // If ek = ̸ eke, the input is invalid. (See Section 4.2.1.)\n            if (!equalBytes(ek, eke)) {\n                cleanBytes(ek);\n                throw new Error('ML-KEM.encapsulate: wrong publicKey modulus');\n            }\n            cleanBytes(ek);\n            const kr = HASH512.create().update(msg).update(HASH256(publicKey)).digest(); // derive randomness\n            const cipherText = KPKE.encrypt(publicKey, msg, kr.subarray(32, 64));\n            cleanBytes(kr.subarray(32));\n            return { cipherText, sharedSecret: kr.subarray(0, 32) };\n        },\n        decapsulate: (cipherText, secretKey) => {\n            abytes(secretKey, secretCoder.bytesLen, 'secretKey'); // 768*k + 96\n            abytes(cipherText, lengths.cipherText, 'cipherText'); // 32(du*k + dv)\n            // test ← H(dk[384𝑘 ∶ 768𝑘 + 32])) .\n            const k768 = secretCoder.bytesLen - 96;\n            const start = k768 + 32;\n            const test = HASH256(secretKey.subarray(k768 / 2, start));\n            // If test ≠ dk[768𝑘 + 32 ∶ 768𝑘 + 64], then input checking has failed.\n            if (!equalBytes(test, secretKey.subarray(start, start + 32)))\n                throw new Error('invalid secretKey: hash check failed');\n            const [sk, publicKey, publicKeyHash, z] = secretCoder.decode(secretKey);\n            const msg = KPKE.decrypt(cipherText, sk);\n            const kr = HASH512.create().update(msg).update(publicKeyHash).digest(); // derive randomness, Khat, rHat = G(mHat || h)\n            const Khat = kr.subarray(0, 32);\n            const cipherText2 = KPKE.encrypt(publicKey, msg, kr.subarray(32, 64)); // re-encrypt using the derived randomness\n            const isValid = equalBytes(cipherText, cipherText2); // if ciphertexts do not match, “implicitly reject”\n            const Kbar = KDF.create({ dkLen: 32 }).update(z).update(cipherText).digest();\n            cleanBytes(msg, cipherText2, !isValid ? Khat : Kbar);\n            return isValid ? Khat : Kbar;\n        },\n    };\n}\nfunction shakePRF(dkLen, key, nonce) {\n    return shake256\n        .create({ dkLen })\n        .update(key)\n        .update(new Uint8Array([nonce]))\n        .digest();\n}\nconst opts = {\n    HASH256: sha3_256,\n    HASH512: sha3_512,\n    KDF: shake256,\n    XOF: XOF128,\n    PRF: shakePRF,\n};\n/** ML-KEM-512 for 128-bit security level. Not recommended after 2030, as per ASD. */\nexport const ml_kem512 = /* @__PURE__ */ createKyber({\n    ...opts,\n    ...PARAMS[512],\n});\n/** ML-KEM-768, for 192-bit security level. Not recommended after 2030, as per ASD. */\nexport const ml_kem768 = /* @__PURE__ */ createKyber({\n    ...opts,\n    ...PARAMS[768],\n});\n/** ML-KEM-1024 for 256-bit security level. OK after 2030, as per ASD. */\nexport const ml_kem1024 = /* @__PURE__ */ createKyber({\n    ...opts,\n    ...PARAMS[1024],\n});\n//# sourceMappingURL=ml-kem.js.map","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport JsSHA from 'jssha'\nimport {\n  chunkSubstr,\n  isHex,\n  randomString\n} from './libraries/strings.js'\nimport {\n  generateBatchId,\n  generateBundleHash,\n  generateSecret,\n  shake256\n} from './libraries/crypto.js'\nimport TokenUnit from './TokenUnit.js'\nimport WalletCredentialException from './exception/WalletCredentialException.js'\nimport { ml_kem768 as MlKEM768 } from '@noble/post-quantum/ml-kem.js'\n\n/**\n * Wallet class represents the set of public and private\n * keys to sign Molecules\n */\nexport default class Wallet {\n  /**\n   * Class constructor\n   *\n   * @param {string|null} secret - typically a 2048-character biometric hash\n   * @param {string|null} bundle - 64-character hexadecimal user identifier\n   * @param {string} token - slug for the token this wallet is intended for\n   * @param {string|null} address - hexadecimal public key for the signature of this wallet\n   * @param {string|null} position - hexadecimal string used to salt the secret and produce one-time signatures\n   * @param {string|null} batchId\n   * @param {string|null} characters\n   */\n  constructor ({\n    secret = null,\n    bundle = null,\n    token = 'USER',\n    address = null,\n    position = null,\n    batchId = null,\n    characters = null\n  }) {\n    this.token = token\n    this.balance = '0'\n    this.molecules = {}\n\n    // Empty values\n    this.key = null\n    this.privkey = null\n    this.pubkey = null\n    this.tokenUnits = []\n    this.tradeRates = {}\n\n    this.address = address\n    this.position = position\n    this.bundle = bundle\n    this.batchId = batchId\n    this.characters = characters\n\n    if (secret) {\n      // Set bundle from the secret\n      this.bundle = this.bundle || generateBundleHash(secret, 'Wallet::constructor')\n\n      // Generate a position for non-shadow wallet if not initialized\n      this.position = this.position || Wallet.generatePosition()\n\n      // Key & address initialization\n      this.key = Wallet.generateKey({\n        secret,\n        token: this.token,\n        position: this.position\n      })\n      this.address = this.address || Wallet.generateAddress(this.key)\n\n      // Set characters\n      this.characters = this.characters || 'BASE64'\n\n      // Initialize ML-KEM keys\n      this.initializeMLKEM()\n    }\n  }\n\n  /**\n   * Creates a new Wallet instance\n   *\n   * @param {string|null} secret\n   * @param {string|null} bundle\n   * @param {string} token\n   * @param {string|null} batchId\n   * @param {string|null} characters\n   * @return {Wallet}\n   */\n  static create ({\n    secret = null,\n    bundle = null,\n    token,\n    batchId = null,\n    characters = null\n  }) {\n    let position = null\n\n    // No credentials parameters provided?\n    if (!secret && !bundle) {\n      throw new WalletCredentialException()\n    }\n\n    // Secret, but no bundle?\n    if (secret && !bundle) {\n      position = Wallet.generatePosition()\n      bundle = generateBundleHash(secret, 'Wallet::create')\n    }\n\n    // Wallet initialization\n    return new Wallet({\n      secret,\n      bundle,\n      token,\n      position,\n      batchId,\n      characters\n    })\n  }\n\n  /**\n   * Determines if the provided string is a bundle hash\n   *\n   * @param {string} maybeBundleHash\n   * @return {boolean}\n   */\n  static isBundleHash (maybeBundleHash) {\n    if (typeof maybeBundleHash !== 'string') {\n      return false\n    }\n\n    return maybeBundleHash.length === 64 && isHex(maybeBundleHash)\n  }\n\n  /**\n   * Get formatted token units from the raw data\n   *\n   * @param unitsData\n   * @return {[]}\n   */\n  static getTokenUnits (unitsData) {\n    const result = []\n    unitsData.forEach(unitData => {\n      result.push(TokenUnit.createFromDB(unitData))\n    })\n    return result\n  }\n\n  /**\n   * Generates a private key for the given parameters\n   *\n   * @param {string} secret\n   * @param {string} token\n   * @param {string} position\n   * @return {string}\n   */\n  static generateKey ({\n    secret,\n    token,\n    position\n  }) {\n    if (!secret) {\n      throw new WalletCredentialException('Wallet::generateKey() - Secret is required!')\n    }\n    if (!position) {\n      throw new WalletCredentialException('Wallet::generateKey() - Position is required!')\n    }\n\n    // Normalize non-hex secret via SHAKE256 (matching Rust/Kotlin behavior)\n    const secretHex = isHex(secret) ? secret : shake256(secret, 1024)\n    // Normalize non-hex position via SHAKE256\n    const positionHex = isHex(position) ? position : shake256(position, 256)\n\n    // Converting secret to bigInt\n    const bigIntSecret = BigInt(`0x${ secretHex }`)\n\n    // Adding new position to the user secret to produce the indexed key\n    const indexedKey = bigIntSecret + BigInt(`0x${ positionHex }`)\n\n    // Hashing the indexed key to produce the intermediate key\n    const intermediateKeySponge = new JsSHA('SHAKE256', 'TEXT')\n\n    intermediateKeySponge.update(indexedKey.toString(16))\n\n    if (token) {\n      intermediateKeySponge.update(token)\n    }\n\n    // Hashing the intermediate key to produce the private key\n    const privateKeySponge = new JsSHA('SHAKE256', 'TEXT')\n    privateKeySponge.update(intermediateKeySponge.getHash('HEX', { outputLen: 8192 }))\n    return privateKeySponge.getHash('HEX', { outputLen: 8192 })\n  }\n\n  /**\n   * Generates a wallet address\n   *\n   * @param {string} key\n   * @return {string}\n   */\n  static generateAddress (key) {\n    // Subdivide private key into 16 fragments of 128 characters each\n    const keyFragments = chunkSubstr(key, 128)\n    // Generating wallet digest\n    const digestSponge = new JsSHA('SHAKE256', 'TEXT')\n\n    for (const index in keyFragments) {\n      let workingFragment = keyFragments[index]\n      for (let fragmentCount = 1; fragmentCount <= 16; fragmentCount++) {\n        const workingSponge = new JsSHA('SHAKE256', 'TEXT')\n        workingSponge.update(workingFragment)\n        workingFragment = workingSponge.getHash('HEX', { outputLen: 512 })\n      }\n\n      digestSponge.update(workingFragment)\n    }\n\n    // Producing wallet address\n    const outputSponge = new JsSHA('SHAKE256', 'TEXT')\n    outputSponge.update(digestSponge.getHash('HEX', { outputLen: 8192 }))\n    return outputSponge.getHash('HEX', { outputLen: 256 })\n  }\n\n  /**\n   *\n   * @param saltLength\n   * @returns {string}\n   */\n  static generatePosition (saltLength = 64) {\n    return randomString(saltLength, 'abcdef0123456789')\n  }\n\n  /**\n   * Initializes the ML-KEM key pair\n   */\n  initializeMLKEM () {\n    // Generate a 64-byte (512-bit) seed from the Knish.IO private key  \n    // Use deterministic approach: generateSecret(key, 128) → 128 hex chars = 64 bytes\n    const seedHex = generateSecret(this.key, 128)  // 128 hex chars = 64 bytes\n\n    // Convert the hex string to a Uint8Array  \n    const seed = new Uint8Array(64)\n    for (let i = 0; i < 64; i++) {\n      seed[i] = parseInt(seedHex.substr(i * 2, 2), 16)\n    }\n\n    const { publicKey, secretKey } = MlKEM768.keygen(seed)\n\n    this.pubkey = this.serializeKey(publicKey)\n    this.privkey = secretKey // Note: We're keeping privkey as UInt8Array for security\n  }\n\n  serializeKey (key) {\n    return btoa(String.fromCharCode.apply(null, key))\n  }\n\n  deserializeKey (serializedKey) {\n    const binaryString = atob(serializedKey)\n    return new Uint8Array(binaryString.length).map((_, i) => binaryString.charCodeAt(i))\n  }\n\n  /**\n   * Returns balance as a Number for arithmetic operations.\n   * WARNING: Precision loss for values > 2^53.\n   *\n   * @return {number}\n   */\n  balanceAsNumber () {\n    return Number(this.balance)\n  }\n\n  /**\n   * Returns balance as a BigInt for precision-safe integer arithmetic.\n   * Truncates any fractional component.\n   *\n   * @return {bigint}\n   */\n  balanceAsBigInt () {\n    const str = String(this.balance)\n    const intPart = str.includes('.') ? str.split('.')[0] : str\n    return BigInt(intPart || '0')\n  }\n\n  /**\n   * Sets balance from a BigInt value\n   *\n   * @param {bigint} value\n   */\n  setBalanceBigInt (value) {\n    this.balance = value.toString()\n  }\n\n  /**\n   * Sets balance from a Number value, storing as String\n   *\n   * @param {number} value\n   */\n  setBalanceNumber (value) {\n    this.balance = String(value)\n  }\n\n  /**\n   *\n   * @returns {*[]}\n   */\n  getTokenUnitsData () {\n    const result = []\n    this.tokenUnits.forEach(tokenUnit => {\n      result.push(tokenUnit.toData())\n    })\n    return result\n  }\n\n  /**\n   * Split token units\n   *\n   * @param {array} units\n   * @param remainderWallet\n   * @param recipientWallet\n   */\n  splitUnits (\n    units, // Array: token unit IDs\n    remainderWallet,\n    recipientWallet = null\n  ) {\n    // No units supplied, nothing to split\n    if (units.length === 0) {\n      return\n    }\n\n    // Init recipient & remainder token units\n    const recipientTokenUnits = []\n    const remainderTokenUnits = []\n    this.tokenUnits.forEach(tokenUnit => {\n      if (units.includes(tokenUnit.id)) {\n        recipientTokenUnits.push(tokenUnit)\n      } else {\n        remainderTokenUnits.push(tokenUnit)\n      }\n    })\n\n    // Reset token units to the sending value\n    this.tokenUnits = recipientTokenUnits\n\n    // Set token units to recipient & remainder\n    if (recipientWallet !== null) {\n      recipientWallet.tokenUnits = recipientTokenUnits\n    }\n    remainderWallet.tokenUnits = remainderTokenUnits\n  }\n\n  /**\n   * Create a remainder wallet from the source one\n   *\n   * @param secret\n   */\n  createRemainder (secret) {\n    const remainderWallet = Wallet.create({\n      secret,\n      token: this.token,\n      characters: this.characters\n    })\n    remainderWallet.initBatchId({\n      sourceWallet: this,\n      isRemainder: true\n    })\n    return remainderWallet\n  }\n\n  /**\n   * @return boolean\n   */\n  isShadow () {\n    return (\n      (typeof this.position === 'undefined' || this.position === null) &&\n      (typeof this.address === 'undefined' || this.address === null)\n    )\n  }\n\n  /**\n   * Sets up a batch ID - either using the sender's, or a new one\n   *\n   * @param {Wallet} sourceWallet\n   * @param {boolean} isRemainder\n   */\n  initBatchId ({\n    sourceWallet,\n    isRemainder = false\n  }) {\n    if (sourceWallet.batchId) {\n      this.batchId = isRemainder ? sourceWallet.batchId : generateBatchId({})\n    }\n  }\n\n  async encryptMessage (message, recipientPubkey) {\n    const messageString = JSON.stringify(message)\n    const messageUint8 = new TextEncoder().encode(messageString)\n    const deserializedPubkey = this.deserializeKey(recipientPubkey)\n    const { cipherText, sharedSecret } = MlKEM768.encapsulate(deserializedPubkey)\n    const encryptedMessage = await this.encryptWithSharedSecret(messageUint8, sharedSecret)\n    return {\n      cipherText: this.serializeKey(cipherText),\n      encryptedMessage: this.serializeKey(encryptedMessage)\n    }\n  }\n\n  async decryptMessage (encryptedData) {\n    const { cipherText, encryptedMessage } = encryptedData\n\n    let sharedSecret\n    try {\n      sharedSecret = MlKEM768.decapsulate(this.deserializeKey(cipherText), this.privkey)\n    } catch (e) {\n      console.error('Wallet::decryptMessage() - Decapsulation failed', e)\n      console.info('Wallet::decryptMessage() - my public key', this.pubkey)\n      return null\n    }\n\n    let deserializedEncryptedMessage\n    try {\n      deserializedEncryptedMessage = this.deserializeKey(encryptedMessage)\n    } catch (e) {\n      console.warn('Wallet::decryptMessage() - Deserialization failed', e)\n      console.info('Wallet::decryptMessage() - my public key', this.pubkey)\n      console.info('Wallet::decryptMessage() - our shared secret', sharedSecret)\n      return null\n    }\n\n    let decryptedUint8\n    try {\n      decryptedUint8 = await this.decryptWithSharedSecret(deserializedEncryptedMessage, sharedSecret)\n    } catch (e) {\n      console.warn('Wallet::decryptMessage() - Decryption failed', e)\n      console.info('Wallet::decryptMessage() - my public key', this.pubkey)\n      console.info('Wallet::decryptMessage() - our shared secret', sharedSecret)\n      console.info('Wallet::decryptMessage() - deserialized encrypted message', deserializedEncryptedMessage)\n      return null\n    }\n\n    let decryptedString\n    try {\n      decryptedString = new TextDecoder().decode(decryptedUint8)\n    } catch (e) {\n      console.warn('Wallet::decryptMessage() - Decoding failed', e)\n      console.info('Wallet::decryptMessage() - my public key', this.pubkey)\n      console.info('Wallet::decryptMessage() - our shared secret', sharedSecret)\n      console.info('Wallet::decryptMessage() - deserialized encrypted message', deserializedEncryptedMessage)\n      console.info('Wallet::decryptMessage() - decrypted Uint8Array', decryptedUint8)\n      return null\n    }\n\n    return JSON.parse(decryptedString)\n  }\n\n  async encryptWithSharedSecret (message, sharedSecret) {\n    const iv = crypto.getRandomValues(new Uint8Array(12))\n    const algorithm = { name: 'AES-GCM', iv }\n\n    // Convert the shared secret to a CryptoKey\n    const key = await crypto.subtle.importKey(\n      'raw',\n      sharedSecret,\n      { name: 'AES-GCM' },\n      false,\n      ['encrypt']\n    )\n\n    // Encrypt the message\n    const encryptedContent = await crypto.subtle.encrypt(\n      algorithm,\n      key,\n      message\n    )\n\n    // Combine IV and encrypted content\n    const result = new Uint8Array(iv.length + encryptedContent.byteLength)\n    result.set(iv)\n    result.set(new Uint8Array(encryptedContent), iv.length)\n\n    return result\n  }\n\n  /**\n   * Decrypts the given message using the shared secret\n   * @param encryptedMessage\n   * @param sharedSecret\n   * @returns {Promise<Uint8Array>}\n   */\n  async decryptWithSharedSecret (encryptedMessage, sharedSecret) {\n    // Extract IV from the encrypted message\n    const iv = encryptedMessage.slice(0, 12)\n    const algorithm = { name: 'AES-GCM', iv }\n\n    // Convert the shared secret to a CryptoKey\n    const key = await crypto.subtle.importKey(\n      'raw',\n      sharedSecret,\n      { name: 'AES-GCM' },\n      false,\n      ['decrypt']\n    )\n\n    // Decrypt the message\n    const decryptedContent = await crypto.subtle.decrypt(\n      algorithm,\n      key,\n      encryptedMessage.slice(12)\n    )\n\n    return new Uint8Array(decryptedContent)\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Atoms must have an index so that they can be sorted in a Molecule\n */\nexport default class AtomIndexException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'There is an atom without an index', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'AtomIndexException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Molecular hash does not match - contents may have been tampered with\n */\nexport default class MolecularHashMismatchException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'The molecular hash does not match', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'MolecularHashMismatchException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * A molecular hash is always required.\n */\nexport default class MolecularHashMissingException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'The molecular hash is missing', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'MolecularHashMissingException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Exception for bad GraphQL responses\n */\nexport default class PolicyInvalidException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = '', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'PolicyInvalidException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when a molecular signature is malformed\n */\nexport default class SignatureMalformedException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'OTS malformed', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'SignatureMalformedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when signature does not match the public key\n */\nexport default class SignatureMismatchException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'One-time signature (OTS) does not match!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'SignatureMismatchException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when you try to transfer more tokens than you have available\n */\nexport default class TransferBalanceException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Insufficient balance to make transfer', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferBalanceException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when V isotope atoms are arranged incorrectly\n */\nexport default class TransferMalformedException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Token transfer atoms are malformed', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferMalformedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when the token slugs of wallets involved in a transfer do not match\n */\nexport default class TransferMismatchedException extends BaseException {\n  /**\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Token slugs for wallets in transfer do not match!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferMismatchedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when the remainder atom in a V isotope transfer is incorrect\n */\nexport default class TransferRemainderException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Invalid remainder provided', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferRemainderException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when attempting to transfer tokens to yourself\n */\nexport default class TransferToSelfException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Sender and recipient(s) cannot be the same', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferToSelfException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when V isotope atom amounts do not add up to zero\n */\nexport default class TransferUnbalancedException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Token transfer atoms are unbalanced', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'TransferUnbalancedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * M isotope atoms must always contain metadata\n */\nexport default class MetaMissingException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Empty meta data.', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'MetaMissingException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when trying to use an inappropriate token slug for a particular isotope\n */\nexport default class WrongTokenTypeException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Wrong type of token for this isotope', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'WrongTokenTypeException'\n  }\n}\n","import BaseException from './BaseException.js'\n\n/**\n * Generic code exception\n */\nexport default class BatchIdException extends BaseException {\n  /**\n   * @param {string|null} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Incorrect BatchId', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'BatchIdException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nexport default class Meta {\n  constructor ({}) {\n    const args = arguments[0]\n\n    for (const key in args) {\n      this[`__${ key }`] = args[key]\n    }\n  }\n\n  static toObject (object) {\n    return new this(object)\n  }\n\n  /**\n   *\n   * @returns {{}}\n   */\n  toJSON () {\n    const object = {}\n\n    for (const item of Object.keys(this)) {\n      if (item.substring(0, 2) === '__') {\n        object[item.substring(2, item.length)] = this[item]\n      }\n    }\n\n    return object\n  }\n}\n","import BaseException from '../../../exception/BaseException.js'\n\nexport default class RuleArgumentException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'An incorrect argument!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'RuleArgumentException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Generic code exception\n */\nexport default class CodeException extends BaseException {\n  /**\n   * @param {string|null} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Code exception', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'CodeException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Meta from './Meta.js'\nimport RuleArgumentException from './exception/RuleArgumentException.js'\nimport { isNumeric } from '../../libraries/strings.js'\nimport { intersect } from '../../libraries/array.js'\nimport CodeException from '../../exception/CodeException.js'\n\nexport default class Callback {\n  /**\n   *\n   * @param {string} action\n   * @param {string|null} metaType\n   * @param {string|null} metaId\n   * @param {Meta|null} meta\n   * @param {string|null} address\n   * @param {string|null} token\n   * @param {string|null} amount\n   * @param {string|null} comparison\n   */\n  constructor ({\n    action,\n    metaType = null,\n    metaId = null,\n    meta = null,\n    address = null,\n    token = null,\n    amount = null,\n    comparison = null\n  }) {\n    if (meta) {\n      this.meta = meta\n    }\n\n    if (!action) {\n      throw new RuleArgumentException('Callback structure violated, missing mandatory \"action\" parameter.')\n    }\n\n    this.__metaId = metaId\n    this.__metaType = metaType\n    this.__action = action\n    this.__address = address\n    this.__token = token\n    this.__amount = amount\n    this.__comparison = comparison\n  }\n\n  /**\n   *\n   * @param {string} comparison\n   */\n  set comparison (comparison) {\n    this.__comparison = comparison\n  }\n\n  /**\n   *\n   * @param {string} amount\n   */\n  set amount (amount) {\n    if (!isNumeric(amount)) {\n      throw new CodeException('Parameter amount should be a string containing numbers')\n    }\n    this.__amount = amount\n  }\n\n  /**\n   *\n   * @param {string} token\n   */\n  set token (token) {\n    this.__token = token\n  }\n\n  /**\n   *\n   * @param {string} address\n   */\n  set address (address) {\n    this.__address = address\n  }\n\n  /**\n   *\n   * @param {Meta|object} meta\n   */\n  set meta (meta) {\n    this.__meta = meta instanceof Meta ? meta : Meta.toObject(meta)\n  }\n\n  /**\n   *\n   * @param {string} metaType\n   */\n  set metaType (metaType) {\n    this.__metaType = metaType\n  }\n\n  /**\n   *\n   * @param {string} metaId\n   */\n  set metaId (metaId) {\n    this.__metaId = metaId\n  }\n\n  /**\n   *\n   * @param {object} object\n   *\n   * @return Callback\n   */\n  static toObject (object) {\n    const callback = new Callback({\n      action: object.action\n    })\n\n    if (object.metaType) {\n      callback.metaType = object.metaType\n    }\n\n    if (object.metaId) {\n      callback.metaId = object.metaId\n    }\n\n    if (object.meta) {\n      callback.meta = object.meta\n    }\n\n    if (object.address) {\n      callback.address = object.address\n    }\n\n    if (object.token) {\n      callback.token = object.token\n    }\n\n    if (object.amount) {\n      callback.amount = object.amount\n    }\n\n    if (object.comparison) {\n      callback.comparison = object.comparison\n    }\n\n    return callback\n  }\n\n  /**\n   *\n   * @return {{action: string}}\n   */\n  toJSON () {\n    const meta = {\n      action: this.__action\n    }\n\n    if (this.__metaType) {\n      meta.metaType = this.__metaType\n    }\n    if (this.__metaId) {\n      meta.metaId = this.__metaId\n    }\n    if (this.__meta) {\n      meta.meta = this.__meta\n    }\n\n    if (this.__address) {\n      meta.address = this.__address\n    }\n\n    if (this.__token) {\n      meta.token = this.__token\n    }\n\n    if (this.__amount) {\n      meta.amount = this.__amount\n    }\n\n    if (this.__comparison) {\n      meta.comparison = this.__comparison\n    }\n\n    return meta\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isReject () {\n    return this._is('reject')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isMeta () {\n    const prop = intersect(Object.keys(this.toJSON()), ['action', 'metaId', 'metaType', 'meta'])\n\n    return prop.length === 4 && this._is('meta')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isCollect () {\n    const prop = intersect(Object.keys(this.toJSON()), ['action', 'address', 'token', 'amount', 'comparison'])\n\n    return prop.length === 5 && this._is('collect')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isBuffer () {\n    const prop = intersect(Object.keys(this.toJSON()), ['action', 'address', 'token', 'amount', 'comparison'])\n\n    return prop.length === 5 && this._is('buffer')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isRemit () {\n    const prop = intersect(Object.keys(this.toJSON()), ['action', 'token', 'amount'])\n\n    return prop.length === 3 && this._is('remit')\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isBurn () {\n    const prop = intersect(Object.keys(this.toJSON()), ['action', 'token', 'amount', 'comparison'])\n\n    return prop.length === 4 && this._is('burn')\n  }\n\n  /**\n   * @param {string} type\n   *\n   * @return {boolean}\n   * @private\n   */\n  _is (type) {\n    return this.__action.toLowerCase() === type.toLowerCase()\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport RuleArgumentException from './exception/RuleArgumentException.js'\n\nexport default class Condition {\n  /**\n   *\n   * @param key\n   * @param value\n   * @param comparison\n   */\n  constructor ({\n    key,\n    value,\n    comparison\n  }) {\n    if ([key, value, comparison].some(item => !item)) {\n      throw new RuleArgumentException('Condition::constructor( { key, value, comparison } ) - not all class parameters are initialised!')\n    }\n\n    this.__key = key\n    this.__value = value\n    this.__comparison = comparison\n  }\n\n  /**\n   * @param object\n   * @return {Condition}\n   */\n  static toObject (object) {\n    return new this({\n      key: object.key,\n      value: object.value,\n      comparison: object.comparison\n    })\n  }\n\n  /**\n   * @return {{comparison, value, key}}\n   */\n  toJSON () {\n    return {\n      key: this.__key,\n      value: this.__value,\n      comparison: this.__comparison\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Callback from './Callback.js'\nimport Condition from './Condition.js'\nimport RuleArgumentException from './exception/RuleArgumentException.js'\nimport MetaMissingException from '../../exception/MetaMissingException.js'\n\nexport default class Rule {\n  /**\n   *\n   * @param {Condition[]} condition\n   * @param  {Callback[]} callback\n   */\n  constructor ({\n    condition = [],\n    callback = []\n  }) {\n    for (const element of condition) {\n      if (!(element instanceof Condition)) {\n        throw new RuleArgumentException()\n      }\n    }\n\n    for (const element of callback) {\n      if (!(element instanceof Callback)) {\n        throw new RuleArgumentException()\n      }\n    }\n\n    this.__condition = condition\n    this.__callback = callback\n  }\n\n  /**\n   *\n   * @param {Condition[]|{}} condition\n   */\n  set comparison (condition) {\n    this.__condition.push(condition instanceof Condition ? condition : Condition.toObject(condition))\n  }\n\n  /**\n   * @param {Callback[]|{}} callback\n   */\n  set callback (callback) {\n    this.__callback.push(callback instanceof Callback ? callback : Callback.toObject(callback))\n  }\n\n  /**\n   *\n   * @param {object} object\n   *\n   * @return {Rule}\n   */\n  static toObject (object) {\n    if (!object.condition) {\n      throw new MetaMissingException('Rule::toObject() - Incorrect rule format! There is no condition field.')\n    }\n    if (!object.callback) {\n      throw new MetaMissingException('Rule::toObject() - Incorrect rule format! There is no callback field.')\n    }\n\n    const rule = new Rule({})\n\n    for (const condition of object.condition) {\n      rule.comparison = condition\n    }\n\n    for (const callback of object.callback) {\n      rule.callback = callback\n    }\n\n    return rule\n  }\n\n  /**\n   * @returns {{condition: *, callback: Callback[]}}\n   */\n  toJSON () {\n    return {\n      condition: this.__condition,\n      callback: this.__callback\n    }\n  }\n}\n","/**\n * Utility class for accessing nested object properties using dot notation\n */\nexport default class Dot {\n  /**\n   * Initialize the Dot utility with the given object and key path\n   * @param {object|array} obj - The object or array to traverse\n   * @param {string} keys - The dot-notated string of keys\n   * @private\n   */\n  static __init (obj, keys) {\n    this.arr = String(keys).split('.')\n    this.key = this.arr.shift()\n\n    // Convert to number if the key is a valid integer\n    const numberKey = Number(this.key)\n    if (Number.isInteger(numberKey)) {\n      this.key = numberKey\n    }\n\n    this.__nextKey = this.arr.length\n    this.__next = this.__tic(obj)\n  }\n\n  /**\n   * Check if the current key exists in the object\n   * @param {object|array} obj - The object or array to check\n   * @return {boolean} - Whether the key exists\n   * @private\n   */\n  static __tic (obj) {\n    if (!Array.isArray(obj) && !(obj instanceof Object)) {\n      return false\n    }\n\n    return typeof obj[this.key] !== 'undefined'\n  }\n\n  /**\n   * Check if a nested property exists in an object using dot notation\n   * @param {object|array} obj - The object or array to search\n   * @param {string} keys - The path to the property, using dot notation\n   * @return {boolean} - True if the property exists, false otherwise\n   */\n  static has (obj, keys) {\n    this.__init(obj, keys)\n\n    if (!this.__next) {\n      return false\n    }\n    if (this.__nextKey === 0) {\n      return true\n    }\n\n    return this.has(obj[this.key], this.arr.join('.'))\n  }\n\n  /**\n   * Get a nested property from an object using dot notation\n   * @param {object|array} obj - The object or array to search\n   * @param {string} keys - The path to the property, using dot notation\n   * @param {*} [def=null] - The default value to return if the property is not found\n   * @return {*} - The value of the property, or the default value if not found\n   */\n  static get (obj, keys, def = null) {\n    this.__init(obj, keys)\n\n    if (!this.__next) {\n      return def\n    }\n    if (this.__nextKey === 0) {\n      return obj[this.key]\n    }\n\n    return this.get(obj[this.key], this.arr.join('.'), def)\n  }\n\n  /**\n   * Set a nested property in an object using dot notation\n   * @param {object|array} obj - The object or array to modify\n   * @param {string} keys - The path to the property, using dot notation\n   * @param {*} value - The value to set\n   * @return {object|array} - The modified object or array\n   */\n  static set (obj, keys, value) {\n    const parts = keys.split('.')\n    let current = obj\n    const lastIndex = parts.length - 1\n\n    for (let i = 0; i < lastIndex; i++) {\n      const key = parts[i]\n      const numberKey = Number(key)\n      const useNumberKey = Number.isInteger(numberKey)\n\n      if (!(useNumberKey ? numberKey : key in current)) {\n        current[useNumberKey ? numberKey : key] = parts[i + 1].match(/^\\d+$/) ? [] : {}\n      }\n      current = current[useNumberKey ? numberKey : key]\n    }\n\n    const lastKey = parts[lastIndex]\n    const lastNumberKey = Number(lastKey)\n    current[Number.isInteger(lastNumberKey) ? lastNumberKey : lastKey] = value\n\n    return obj\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n */\nimport AtomIndexException from './../exception/AtomIndexException.js'\nimport AtomsMissingException from './../exception/AtomsMissingException.js'\nimport MolecularHashMismatchException from './../exception/MolecularHashMismatchException.js'\nimport MolecularHashMissingException from './../exception/MolecularHashMissingException.js'\nimport PolicyInvalidException from './../exception/PolicyInvalidException.js'\nimport SignatureMalformedException from './../exception/SignatureMalformedException.js'\nimport SignatureMismatchException from './../exception/SignatureMismatchException.js'\nimport TransferBalanceException from './../exception/TransferBalanceException.js'\nimport TransferMalformedException from './../exception/TransferMalformedException.js'\nimport TransferMismatchedException from './../exception/TransferMismatchedException.js'\nimport TransferRemainderException from './../exception/TransferRemainderException.js'\nimport TransferToSelfException from './../exception/TransferToSelfException.js'\nimport TransferUnbalancedException from './../exception/TransferUnbalancedException.js'\nimport MetaMissingException from './../exception/MetaMissingException.js'\nimport WrongTokenTypeException from './../exception/WrongTokenTypeException.js'\nimport BatchIdException from './../exception/BatchIdException.js'\nimport Atom from './../Atom.js'\nimport Meta from './../Meta.js'\nimport Molecule from './../Molecule.js'\nimport Wallet from './../Wallet.js'\nimport Rule from '../instance/Rules/Rule.js'\nimport {\n  base64ToHex,\n  chunkSubstr\n} from './strings.js'\nimport JsSHA from 'jssha'\nimport Dot from './../libraries/Dot.js'\n\n/**\n *\n */\nexport default class CheckMolecule {\n  /**\n   *\n   * @param molecule\n   */\n  constructor (molecule) {\n    // No molecular hash?\n    if (molecule.molecularHash === null) {\n      throw new MolecularHashMissingException()\n    }\n\n    // No atoms?\n    if (!molecule.atoms.length) {\n      throw new AtomsMissingException()\n    }\n\n    // Check atom indexes\n    for (const atom of molecule.atoms) {\n      if (atom.index === null) {\n        throw new AtomIndexException()\n      }\n    }\n\n    this.molecule = molecule\n  }\n\n  /**\n   *\n   * @param senderWallet\n   * @returns {false|*|boolean}\n   */\n  verify (senderWallet) {\n    return this.molecularHash() &&\n      this.ots() &&\n      this.batchId() &&\n      this.continuId() &&\n      this.isotopeM() &&\n      this.isotopeT() &&\n      this.isotopeC() &&\n      this.isotopeU() &&\n      this.isotopeI() &&\n      this.isotopeR() &&\n      this.isotopeP() &&\n      this.isotopeA() &&\n      this.isotopeB() &&\n      this.isotopeF() &&\n      this.isotopeV(senderWallet)\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  continuId () {\n    const firstAtom = this.molecule.atoms[0]\n\n    if (firstAtom.token === 'USER' && this.molecule.getIsotopes('I').length < 1) {\n      throw new AtomsMissingException('Check::continuId() - Molecule is missing required ContinuID Atom!')\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  batchId () {\n    if (this.molecule.atoms.length > 0) {\n      const signingAtom = this.molecule.atoms[0]\n\n      if (signingAtom.isotope === 'V' && signingAtom.batchId !== null) {\n        const atoms = this.molecule.getIsotopes('V')\n        const remainderAtom = atoms[atoms.length - 1]\n\n        if (signingAtom.batchId !== remainderAtom.batchId) {\n          throw new BatchIdException()\n        }\n\n        for (const atom of atoms) {\n          if (atom.batchId === null) {\n            throw new BatchIdException()\n          }\n        }\n      }\n\n      return true\n    }\n\n    throw new BatchIdException()\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeI () {\n    for (const atom of this.molecule.getIsotopes('I')) {\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeI() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      if (atom.index === 0) {\n        throw new AtomIndexException(`Check::isotopeI() - Isotope \"${ atom.isotope }\" Atoms must have a non-zero index!`)\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeU () {\n    for (const atom of this.molecule.getIsotopes('U')) {\n      if (atom.token !== 'AUTH') {\n        throw new WrongTokenTypeException(`Check::isotopeU() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      if (atom.index !== 0) {\n        throw new AtomIndexException(`Check::isotopeU() - Isotope \"${ atom.isotope }\" Atoms must have an index equal to 0!`)\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeM () {\n    const policyArray = ['readPolicy', 'writePolicy']\n\n    for (/** @type {Atom} */ const atom of this.molecule.getIsotopes('M')) {\n      if (atom.meta.length < 1) {\n        throw new MetaMissingException()\n      }\n\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeM() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      const metas = Meta.aggregateMeta(atom.meta)\n\n      for (const key of policyArray) {\n        let policy = metas[key]\n\n        if (policy) {\n          policy = JSON.parse(policy)\n\n          for (const [policyName, policyValue] of Object.entries(policy)) {\n            if (!policyArray.includes(policyName)) {\n              if (!Object.keys(metas).includes(policyName)) {\n                throw new PolicyInvalidException(`${ policyName } is missing from the meta.`)\n              }\n\n              for (const value of policyValue) {\n                if (!Wallet.isBundleHash(value) && !['all', 'self'].includes(value)) {\n                  throw new PolicyInvalidException(`${ value } does not correspond to the format of the policy.`)\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeC () {\n    for (const atom of this.molecule.getIsotopes('C')) {\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeC() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      if (atom.index !== 0) {\n        throw new AtomIndexException(`Check::isotopeC() - Isotope \"${ atom.isotope }\" Atoms must have an index equal to 0!`)\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeT () {\n    for (const atom of this.molecule.getIsotopes('T')) {\n      const meta = atom.aggregatedMeta()\n      const metaType = String(atom.metaType).toLowerCase()\n\n      if (metaType === 'wallet') {\n        for (const key of ['position', 'bundle']) {\n          if (!Object.prototype.hasOwnProperty.call(meta, key) || !meta[key]) {\n            throw new MetaMissingException(`Check::isotopeT() - Required meta field \"${ key }\" is missing!`)\n          }\n        }\n      }\n\n      for (const key of ['token']) {\n        if (!Object.prototype.hasOwnProperty.call(meta, key) || !meta[key]) {\n          throw new MetaMissingException(`Check::isotopeT() - Required meta field \"${ key }\" is missing!`)\n        }\n      }\n\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeT() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      if (atom.index !== 0) {\n        throw new AtomIndexException(`Check::isotopeT() - Isotope \"${ atom.isotope }\" Atoms must have an index equal to 0!`)\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  isotopeR () {\n    for (const atom of this.molecule.getIsotopes('R')) {\n      const metas = atom.aggregatedMeta()\n\n      if (metas.policy) {\n        const policy = JSON.parse(metas.policy)\n\n        if (!Object.keys(policy).every(i => ['read', 'write'].includes(i))) {\n          throw new MetaMissingException('Check::isotopeR() - Mixing rules with politics!')\n        }\n      }\n\n      if (metas.rule) {\n        const rules = JSON.parse(metas.rule)\n\n        if (!Array.isArray(rules)) {\n          throw new MetaMissingException('Check::isotopeR() - Incorrect rule format!')\n        }\n\n        for (const item of rules) {\n          Rule.toObject(item)\n        }\n\n        if (rules.length < 1) {\n          throw new MetaMissingException('Check::isotopeR() - No rules!')\n        }\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Validates P-isotope (Peering) atoms\n   *\n   * @returns {boolean}\n   */\n  isotopeP () {\n    for (const atom of this.molecule.getIsotopes('P')) {\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeP() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      const metas = atom.aggregatedMeta()\n\n      if (!Object.prototype.hasOwnProperty.call(metas, 'peerHost') || !metas.peerHost) {\n        throw new MetaMissingException('Check::isotopeP() - Required meta field \"peerHost\" is missing!')\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Validates A-isotope (Append Request) atoms\n   *\n   * @returns {boolean}\n   */\n  isotopeA () {\n    for (const atom of this.molecule.getIsotopes('A')) {\n      if (atom.token !== 'USER') {\n        throw new WrongTokenTypeException(`Check::isotopeA() - \"${ atom.token }\" is not a valid Token slug for \"${ atom.isotope }\" isotope Atoms!`)\n      }\n\n      if (!atom.metaType) {\n        throw new MetaMissingException('Check::isotopeA() - Required field \"metaType\" is missing!')\n      }\n\n      if (!atom.metaId) {\n        throw new MetaMissingException('Check::isotopeA() - Required field \"metaId\" is missing!')\n      }\n\n      const metas = atom.aggregatedMeta()\n\n      if (!Object.prototype.hasOwnProperty.call(metas, 'action') || !metas.action) {\n        throw new MetaMissingException('Check::isotopeA() - Required meta field \"action\" is missing!')\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Validates B-isotope (Buffer/Exchange) atoms\n   *\n   * @returns {boolean}\n   */\n  isotopeB () {\n    const isotopeB = this.molecule.getIsotopes('B')\n\n    if (isotopeB.length === 0) {\n      return true\n    }\n\n    for (const atom of isotopeB) {\n      // B atoms must reference a wallet bundle\n      if (!atom.metaType || atom.metaType !== 'walletBundle') {\n        throw new MetaMissingException('Check::isotopeB() - B-isotope atoms must have metaType \"walletBundle\"!')\n      }\n\n      if (!atom.metaId) {\n        throw new MetaMissingException('Check::isotopeB() - B-isotope atoms must have a metaId!')\n      }\n\n      // Value must be parseable as a number\n      const value = Number(atom.value)\n      if (Number.isNaN(value)) {\n        throw new TransferMalformedException('Check::isotopeB() - B-isotope atom value is not a valid number!')\n      }\n    }\n\n    // V+B balance conservation: sum of all V and B atom values must equal zero\n    const vAtoms = this.molecule.getIsotopes('V')\n    if (vAtoms.length > 0) {\n      let sum = 0\n      for (const atom of [...vAtoms, ...isotopeB]) {\n        const value = Number(atom.value)\n        if (!Number.isNaN(value)) {\n          sum += value\n        }\n      }\n      if (sum !== 0) {\n        throw new TransferUnbalancedException('Check::isotopeB() - V+B atom values do not balance to zero!')\n      }\n    }\n\n    return true\n  }\n\n  /**\n   * Validates F-isotope (Fusion/NFT) atoms\n   *\n   * @returns {boolean}\n   */\n  isotopeF () {\n    const isotopeF = this.molecule.getIsotopes('F')\n\n    if (isotopeF.length === 0) {\n      return true\n    }\n\n    for (const atom of isotopeF) {\n      // F atoms must reference a wallet bundle\n      if (!atom.metaType || atom.metaType !== 'walletBundle') {\n        throw new MetaMissingException('Check::isotopeF() - F-isotope atoms must have metaType \"walletBundle\"!')\n      }\n\n      if (!atom.metaId) {\n        throw new MetaMissingException('Check::isotopeF() - F-isotope atoms must have a metaId!')\n      }\n\n      // Value must be parseable\n      const value = Number(atom.value)\n      if (Number.isNaN(value)) {\n        throw new TransferMalformedException('Check::isotopeF() - F-isotope atom value is not a valid number!')\n      }\n\n      if (value < 0) {\n        throw new TransferMalformedException('Check::isotopeF() - F-isotope atom value must not be negative!')\n      }\n    }\n\n    // V+F balance conservation: sum of all V and F atom values must equal zero\n    const vAtoms = this.molecule.getIsotopes('V')\n    if (vAtoms.length > 0) {\n      let sum = 0\n      for (const atom of [...vAtoms, ...isotopeF]) {\n        const value = Number(atom.value)\n        if (!Number.isNaN(value)) {\n          sum += value\n        }\n      }\n      if (sum !== 0) {\n        throw new TransferUnbalancedException('Check::isotopeF() - V+F atom values do not balance to zero!')\n      }\n    }\n\n    return true\n  }\n\n  /**\n   *\n   * @param senderWallet\n   * @returns {boolean}\n   */\n  isotopeV (senderWallet = null) {\n    const isotopeV = this.molecule.getIsotopes('V')\n\n    if (isotopeV.length === 0) {\n      return true\n    }\n\n    // When B or F atoms are present, cross-isotope conservation is validated\n    // by isotopeB()/isotopeF() — skip V-only conservation check\n    const hasCrossIsotope = this.molecule.getIsotopes('B').length > 0 ||\n      this.molecule.getIsotopes('F').length > 0\n\n    const firstAtom = this.molecule.atoms[0]\n\n    if (!hasCrossIsotope && firstAtom.isotope === 'V' && isotopeV.length === 2) {\n      const endAtom = isotopeV[isotopeV.length - 1]\n\n      if (firstAtom.token !== endAtom.token) {\n        throw new TransferMismatchedException()\n      }\n\n      if (endAtom.value < 0) {\n        throw new TransferMalformedException()\n      }\n\n      // Conservation check for 2-atom transfers\n      if ((Number(firstAtom.value) + Number(endAtom.value)) !== 0) {\n        throw new TransferUnbalancedException()\n      }\n\n      return true\n    }\n\n    let sum = 0\n    let value = 0\n\n    for (const index in this.molecule.atoms) {\n      if (Object.prototype.hasOwnProperty.call(this.molecule.atoms, index)) {\n        const vAtom = this.molecule.atoms[index]\n\n        // Not V? Next...\n        if (vAtom.isotope !== 'V') {\n          continue\n        }\n\n        // Making sure we're in integer land\n        value = vAtom.value * 1\n\n        if (Number.isNaN(value)) {\n          throw new TypeError('Invalid isotope \"V\" values')\n        }\n\n        // Making sure all V atoms of the same token\n        if (vAtom.token !== firstAtom.token) {\n          throw new TransferMismatchedException()\n        }\n\n        // Checking non-primary atoms\n        if (index > 0) {\n          // Negative V atom in a non-primary position?\n          if (value < 0) {\n            throw new TransferMalformedException()\n          }\n\n          // Cannot be sending and receiving from the same address\n          if (vAtom.walletAddress === firstAtom.walletAddress) {\n            throw new TransferToSelfException()\n          }\n        }\n\n        // Adding this Atom's value to the total sum\n        sum += value\n      }\n    }\n\n    // V-only conservation: all V atoms must sum to zero (skip for B/F cross-isotope)\n    if (!hasCrossIsotope && sum !== 0) {\n      throw new TransferUnbalancedException()\n    }\n\n    // If we're provided with a senderWallet argument, we can perform additional checks\n    if (senderWallet) {\n      value = firstAtom.value * 1\n\n      if (Number.isNaN(value)) {\n        throw new TypeError('Invalid isotope \"V\" values')\n      }\n\n      const remainder = Number(senderWallet.balance) + value\n\n      // Is there enough balance to send?\n      if (remainder < 0) {\n        throw new TransferBalanceException()\n      }\n\n      // Does the remainder match what should be there in the source wallet, if provided?\n      // Skip for cross-isotope (B/F) — conservation is validated by isotopeB()/isotopeF()\n      if (!hasCrossIsotope && remainder !== sum) {\n        throw new TransferRemainderException()\n      }\n    } else if (value !== 0) {\n      // No senderWallet, but have a remainder?\n      throw new TransferRemainderException()\n    }\n\n    // Looks like we passed all the tests!\n    return true\n  }\n\n  /**\n   * Verifies if the hash of all the atoms matches the molecular hash to ensure content has not been messed with\n   *\n   * @returns {boolean}\n   */\n  molecularHash () {\n    if (this.molecule.molecularHash !== Atom.hashAtoms({\n      atoms: this.molecule.atoms\n    })) {\n      throw new MolecularHashMismatchException()\n    }\n\n    // Looks like we passed all the tests!\n    return true\n  }\n\n  /**\n   * Checks if the provided molecule was signed properly by transforming a collection of signature\n   * fragments from its atoms and its molecular hash into a single-use wallet address to be matched\n   * against the sender’s address. If it matches, the molecule was correctly signed.\n   *\n   * @returns {boolean}\n   */\n  ots () {\n    // Convert Hm to numeric notation via EnumerateMolecule(Hm)\n    const normalizedHash = this.molecule.normalizedHash()\n\n    // Rebuilding OTS out of all the atoms\n    let ots = this.molecule.atoms.map(\n      atom => atom.otsFragment\n    ).reduce(\n      (accumulator, otsFragment) => accumulator + otsFragment\n    )\n\n    // Wrong size? Maybe it's compressed\n    if (ots.length !== 2048) {\n      // Attempting decompression\n      ots = base64ToHex(ots)\n\n      // Still wrong? That's a failure\n      if (ots.length !== 2048) {\n        throw new SignatureMalformedException()\n      }\n    }\n\n    // Subdivide Kk into 16 segments of 256 bytes (128 characters) each\n    const otsChunks = chunkSubstr(ots, 128)\n\n    let keyFragments = ''\n\n    for (const index in otsChunks) {\n      let workingChunk = otsChunks[index]\n\n      for (let iterationCount = 0, condition = 8 + normalizedHash[index]; iterationCount < condition; iterationCount++) {\n        workingChunk = (new JsSHA('SHAKE256', 'TEXT')).update(workingChunk).getHash('HEX', { outputLen: 512 })\n      }\n\n      keyFragments += workingChunk\n    }\n\n    // Absorb the hashed Kk into the sponge to receive the digest Dk\n    const digestSponge = new JsSHA('SHAKE256', 'TEXT')\n    digestSponge.update(keyFragments)\n    const digest = digestSponge.getHash('HEX', { outputLen: 8192 })\n\n    // Squeeze the sponge to retrieve a 128 byte (64 character) string that should match the sender’s wallet address\n    const addressSponge = new JsSHA('SHAKE256', 'TEXT')\n    addressSponge.update(digest)\n    const address = addressSponge.getHash('HEX', { outputLen: 256 })\n\n    // Signing atom\n    const signingAtom = this.molecule.atoms[0]\n\n    // Get a signing address\n    let signingAddress = signingAtom.walletAddress\n\n    // Get signing wallet from first atom's metas\n    const signingWallet = Dot.get(signingAtom.aggregatedMeta(), 'signingWallet')\n\n    // Try to get custom signing address from the metas (local molecule with server secret)\n    if (signingWallet) {\n      signingAddress = Dot.get(JSON.parse(signingWallet), 'address')\n    }\n\n    if (address !== signingAddress) {\n      throw new SignatureMismatchException()\n    }\n\n    // Looks like we passed all the tests!\n    return true\n  }\n\n  /**\n   * Converts server-side molecule data (from GraphQL meta query responses)\n   * into a Molecule instance suitable for verification via CheckMolecule.\n   *\n   * Handles field mapping differences between server and client:\n   * - tokenSlug → token\n   * - metasJson (JSON string) → meta (array of {key, value})\n   * - bundleHash → bundle\n   *\n   * @param {object} serverData - Molecule data from GraphQL response\n   * @param {string} serverData.molecularHash\n   * @param {string} serverData.bundleHash\n   * @param {string|null} serverData.cellSlug\n   * @param {string|null} serverData.status\n   * @param {string|null} serverData.createdAt\n   * @param {array} serverData.atoms - Array of server-format atom objects\n   * @return {Molecule}\n   */\n  static fromServerData ({\n    molecularHash,\n    bundleHash,\n    cellSlug = null,\n    status = null,\n    createdAt = null,\n    atoms = []\n  }) {\n    const mappedAtoms = atoms.map(serverAtom => {\n      let meta = []\n      if (serverAtom.metasJson) {\n        try {\n          const parsed = JSON.parse(serverAtom.metasJson)\n          if (Array.isArray(parsed)) {\n            // Already in [{key, value}] format\n            meta = parsed\n          } else if (parsed && typeof parsed === 'object') {\n            // Object format {key1: val1, key2: val2} — convert to [{key, value}] pairs\n            meta = Object.entries(parsed).map(([key, value]) => ({ key, value }))\n          }\n        } catch (e) {\n          meta = []\n        }\n      }\n\n      return {\n        position: serverAtom.position || null,\n        walletAddress: serverAtom.walletAddress || null,\n        isotope: serverAtom.isotope || null,\n        token: serverAtom.tokenSlug || serverAtom.token || null,\n        value: serverAtom.value != null ? String(serverAtom.value) : null,\n        batchId: serverAtom.batchId || null,\n        metaType: serverAtom.metaType || null,\n        metaId: serverAtom.metaId || null,\n        meta,\n        index: serverAtom.index != null ? serverAtom.index : null,\n        otsFragment: serverAtom.otsFragment || null,\n        createdAt: serverAtom.createdAt || null\n      }\n    })\n\n    return Molecule.fromJSON({\n      molecularHash,\n      bundle: bundleHash,\n      cellSlug,\n      status,\n      createdAt,\n      atoms: mappedAtoms\n    })\n  }\n\n  /**\n   * Verifies a molecule reconstructed from server-side GraphQL data.\n   * Returns an object with verification result and any error details.\n   *\n   * @param {object} moleculeData - Server molecule data (same format as fromServerData)\n   * @return {{ molecularHash: string, verified: boolean, error: string|null }}\n   */\n  static verifyFromServerData (moleculeData) {\n    try {\n      const molecule = CheckMolecule.fromServerData(moleculeData)\n      new CheckMolecule(molecule).verify()\n      return {\n        molecularHash: moleculeData.molecularHash,\n        verified: true,\n        error: null\n      }\n    } catch (error) {\n      return {\n        molecularHash: moleculeData.molecularHash || null,\n        verified: false,\n        error: error.message || String(error)\n      }\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when the node does not have enough tokens to fulfill a T request\n */\nexport default class BalanceInsufficientException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Insufficient balance for requested transfer', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'BalanceInsufficientException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when a negative amount is provided\n */\nexport default class NegativeAmountException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Amount cannot be negative!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'NegativeAmountException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Atom from './Atom.js'\nimport AtomMeta from './AtomMeta.js'\nimport Wallet from './Wallet.js'\nimport JsSHA from 'jssha'\nimport {\n  chunkSubstr,\n  hexToBase64\n} from './libraries/strings.js'\nimport CheckMolecule from './libraries/CheckMolecule.js'\nimport {\n  generateBatchId,\n  generateBundleHash\n} from './libraries/crypto.js'\nimport Dot from './libraries/Dot.js'\nimport Rule from './instance/Rules/Rule.js'\nimport AtomsMissingException from './exception/AtomsMissingException.js'\nimport BalanceInsufficientException from './exception/BalanceInsufficientException.js'\nimport NegativeAmountException from './exception/NegativeAmountException.js'\nimport SignatureMalformedException from './exception/SignatureMalformedException.js'\nimport versions from './versions/index.js'\n\n/**\n * Molecule class used for committing changes to the ledger\n */\nexport default class Molecule {\n  /**\n   * Class constructor\n   *\n   * @param {string|null} secret\n   * @param {string|null} bundle\n   * @param {Wallet|null} sourceWallet\n   * @param {Wallet|null} remainderWallet\n   * @param {string|null} cellSlug\n   * @param {string|number|null} version\n   */\n  constructor ({\n    secret = null,\n    bundle = null,\n    sourceWallet = null,\n    remainderWallet = null,\n    cellSlug = null,\n    version = null\n  }) {\n    this.status = null\n    this.molecularHash = null\n    this.createdAt = String(+new Date())\n    this.cellSlugOrigin = this.cellSlug = cellSlug\n    this.secret = secret\n    this.bundle = bundle\n    this.sourceWallet = sourceWallet\n    this.atoms = []\n    this.parentHashes = []\n    if (version !== null && Object.prototype.hasOwnProperty.call(versions, version)) {\n      this.version = String(version)\n    }\n\n    // Set the remainder wallet for this transaction\n    if (remainderWallet || sourceWallet) {\n      this.remainderWallet = remainderWallet || Wallet.create({\n        secret,\n        bundle,\n        token: sourceWallet.token,\n        batchId: sourceWallet.batchId,\n        characters: sourceWallet.characters\n      })\n    }\n  }\n\n  /**\n   * Sets parent molecular hashes for DAG linkage\n   *\n   * @param {string[]} hashes - Array of parent molecular hash strings\n   * @return {Molecule} this instance for chaining\n   */\n  withParentHashes (hashes) {\n    this.parentHashes = Array.isArray(hashes) ? [...hashes] : []\n    return this\n  }\n\n  /**\n   * Returns the cell slug delimiter\n   *\n   * @return {string}\n   */\n  get cellSlugDelimiter () {\n    return '.'\n  }\n\n  /**\n   * Filters the atoms array by the supplied isotope list\n   *\n   * @param {string|array} isotopes\n   * @param {array} atoms\n   * @returns {*[]}\n   */\n  static isotopeFilter (isotopes, atoms) {\n    if (!Array.isArray(isotopes)) {\n      isotopes = [isotopes]\n    }\n    return atoms.filter(atom => isotopes.includes(atom.isotope))\n  }\n\n  /**\n   * Generates the next atomic index\n   *\n   * @param {array} atoms\n   * @return {number}\n   */\n  static generateNextAtomIndex (atoms) {\n    return atoms.length\n  }\n\n  /**\n   * Converts a JSON object into a Molecule Structure instance\n   *\n   * @param {string} json\n   * @return {object}\n   * @throws {AtomsMissingException}\n   */\n  static jsonToObject (json) {\n    const target = Object.assign(new Molecule({}), JSON.parse(json))\n    const properties = Object.keys(new Molecule({}))\n\n    if (!Array.isArray(target.atoms)) {\n      throw new AtomsMissingException()\n    }\n\n    for (const index in Object.keys(target.atoms)) {\n      target.atoms[index] = Atom.jsonToObject(JSON.stringify(target.atoms[index]))\n\n      for (const property of ['position', 'walletAddress', 'isotope']) {\n        if (target.atoms[index].isotope.toLowerCase() !== 'r' && (typeof target.atoms[index][property] === 'undefined' || target.atoms[index][property] === null)) {\n          throw new AtomsMissingException('MolecularStructure::jsonToObject() - Required Atom properties are missing!')\n        }\n      }\n    }\n\n    for (const property in target) {\n      if (Object.prototype.hasOwnProperty.call(target, property) && !properties.includes(property)) {\n        delete target[property]\n      }\n    }\n\n    target.atoms = Atom.sortAtoms(target.atoms)\n\n    return target\n  }\n\n  /**\n   * Accept a string of letters and numbers, and outputs a collection of decimals representing each\n   * character according to a pre-defined dictionary. Input string would typically be 64-character\n   * hexadecimal string featuring numbers from 0 to 9 and characters from a to f - a total of 15\n   * unique symbols. To ensure that string has an even number of symbols, convert it to Base 17\n   * (adding G as a possible symbol). Map each symbol to integer values as follows:\n   *  0   1   2   3   4   5   6   7  8  9  a   b   c   d   e   f   g\n   * -8  -7  -6  -5  -4  -3  -2  -1  0  1  2   3   4   5   6   7   8\n   *\n   * @param {string} hash\n   * @return {array}\n   */\n  static enumerate (hash) {\n    const mapped = {\n      0: -8,\n      1: -7,\n      2: -6,\n      3: -5,\n      4: -4,\n      5: -3,\n      6: -2,\n      7: -1,\n      8: 0,\n      9: 1,\n      a: 2,\n      b: 3,\n      c: 4,\n      d: 5,\n      e: 6,\n      f: 7,\n      g: 8\n    }\n    const target = []\n    const hashList = hash.toLowerCase().split('')\n\n    for (let index = 0, len = hashList.length; index < len; ++index) {\n      const symbol = hashList[index]\n\n      if (typeof mapped[symbol] !== 'undefined') {\n        target[index] = mapped[symbol]\n      }\n    }\n\n    return target\n  }\n\n  /**\n   * Normalize enumerated string to ensure that the total sum of all symbols is exactly zero. This\n   * ensures that exactly 50% of the WOTS+ key is leaked with each usage, ensuring predictable key\n   * safety:\n   * The sum of each symbol within Hm shall be presented by m\n   *  While m0 iterate across that set’s integers as Im:\n   *    If m0 and Im>-8 , let Im=Im-1\n   *    If m<0 and Im<8 , let Im=Im+1\n   *    If m=0, stop the iteration\n   *\n   * @param {array} mappedHashArray\n   * @return {array}\n   */\n  static normalize (mappedHashArray) {\n    let total = mappedHashArray.reduce((total, num) => total + num)\n\n    const totalCondition = total < 0\n\n    while (total < 0 || total > 0) {\n      for (const index of Object.keys(mappedHashArray)) {\n        const condition = totalCondition ? mappedHashArray[index] < 8 : mappedHashArray[index] > -8\n\n        if (condition) {\n          const process = totalCondition ? [++mappedHashArray[index], ++total] : [--mappedHashArray[index], --total]\n\n          if (total === 0) {\n            break\n          }\n        }\n      }\n    }\n\n    return mappedHashArray\n  }\n\n  /**\n   *\n   * @param isotopes\n   * @returns {*[]}\n   */\n  getIsotopes (isotopes) {\n    return Molecule.isotopeFilter(isotopes, this.atoms)\n  }\n\n  /**\n   * Generates the next atomic index\n   *\n   * @return {number}\n   */\n  generateIndex () {\n    return Molecule.generateNextAtomIndex(this.atoms)\n  }\n\n  /**\n   * Fills a Molecule's properties with the provided object\n   *\n   * @param {Molecule} molecule\n   */\n  fill (molecule) {\n    for (const key in Object.keys(molecule)) {\n      this[key] = molecule[key]\n    }\n  }\n\n  /**\n   *\n   * @param {Atom} atom\n   * @returns {Molecule}\n   */\n  addAtom (atom) {\n    // Reset the molecular hash\n    this.molecularHash = null\n\n    // Set atom's index\n    atom.index = this.generateIndex()\n    atom.version = this.version\n\n    // Add atom\n    this.atoms.push(atom)\n\n    // Sort atoms\n    this.atoms = Atom.sortAtoms(this.atoms)\n\n    return this\n  }\n\n  /**\n   * Add user remainder atom for ContinuID\n   *\n   * @return {Molecule}\n   */\n  addContinuIdAtom () {\n    // If remainder wallet is not USER token, create a new USER remainder wallet\n    if (!this.remainderWallet || this.remainderWallet.token !== 'USER') {\n      this.remainderWallet = Wallet.create({\n        secret: this.secret,\n        bundle: this.bundle\n      })\n    }\n\n    // ContinuID metadata for chain integrity validation (matching Rust SDK GAP-07-002).\n    // These are atom meta fields (not core fields), so they don't affect molecular hash.\n    const continuIdMeta = {}\n\n    // previousPosition: the source wallet's position being consumed\n    if (this.sourceWallet && this.sourceWallet.position) {\n      continuIdMeta.previousPosition = this.sourceWallet.position\n    }\n\n    // pubkey: ML-KEM public key for encrypted communication\n    if (this.remainderWallet.pubkey) {\n      continuIdMeta.pubkey = this.remainderWallet.pubkey\n    }\n\n    // characters: encoding format for the wallet\n    if (this.remainderWallet.characters) {\n      continuIdMeta.characters = this.remainderWallet.characters\n    }\n\n    this.addAtom(Atom.create({\n      isotope: 'I',\n      wallet: this.remainderWallet,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle,\n      meta: new AtomMeta(continuIdMeta)\n    }))\n    return this\n  }\n\n  /**\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {object} meta\n   * @param {object} policy\n   *\n   * @return {Molecule}\n   */\n  addPolicyAtom ({\n    metaType,\n    metaId,\n    meta = {},\n    policy = {}\n  }) {\n    // AtomMeta object initialization\n    const atomMeta = new AtomMeta(meta)\n    atomMeta.addPolicy(policy)\n\n    const wallet = Wallet.create({\n      secret: this.secret,\n      bundle: this.sourceWallet.bundle,\n      token: 'USER'\n    })\n\n    this.addAtom(Atom.create({\n      wallet,\n      isotope: 'R',\n      metaType,\n      metaId,\n      meta: atomMeta\n    }))\n    return this\n  }\n\n  /**\n   *\n   * @param tokenUnits\n   * @param recipientWallet\n   * @returns {Molecule}\n   */\n  fuseToken (tokenUnits, recipientWallet) {\n    // Calculate amount\n    const amount = tokenUnits.length\n\n    if ((this.sourceWallet.balance - amount) < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    // Initializing a new Atom to remove tokens from source\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: -amount\n    }))\n\n    // Add F isotope for fused tokens creation\n    this.addAtom(Atom.create({\n      isotope: 'F',\n      wallet: recipientWallet,\n      value: 1,\n      metaType: 'walletBundle',\n      metaId: recipientWallet.bundle\n    }))\n\n    // Initializing a new Atom to remove tokens from source\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle\n    }))\n\n    return this\n  }\n\n  /**\n   * Burns some amount of tokens from a wallet\n   *\n   * @param {number} amount\n   * @param {string|null} walletBundle\n   * @return {Molecule}\n   */\n  burnToken ({\n    amount,\n    walletBundle = null\n  }) {\n    if (amount < 0.0) {\n      throw new NegativeAmountException('Molecule::burnToken() - Amount to burn must be positive!')\n    }\n\n    if ((this.sourceWallet.balance - amount) < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: -amount\n    }))\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle\n    }))\n\n    return this\n  }\n\n  /*\n   * Replenishes non-finite token supplies\n   *\n   * @param {number} amount\n   * @param {string} token\n   * @param {array|object} metas\n   * @return {Molecule}\n   */\n  replenishToken ({\n    amount,\n    units = []\n  }) {\n    if (amount < 0) {\n      throw new NegativeAmountException('Molecule::replenishToken() - Amount to replenish must be positive!')\n    }\n\n    // Special code for the token unit logic\n    if (units.length) {\n      // Prepare token units to formatted style\n      units = Wallet.getTokenUnits(units)\n\n      // Merge token units with source wallet & new items\n      this.remainderWallet.tokenUnits = this.sourceWallet.tokenUnits\n      for (const unit of units) {\n        this.remainderWallet.tokenUnits.push(unit)\n      }\n      this.remainderWallet.balance = String(this.remainderWallet.tokenUnits.length)\n\n      // Override first atom's token units to replenish values\n      this.sourceWallet.tokenUnits = units\n      this.sourceWallet.balance = String(this.sourceWallet.tokenUnits.length)\n    } else {\n      // Update wallet's balances\n      this.remainderWallet.balance = String(Number(this.sourceWallet.balance) + amount)\n      this.sourceWallet.balance = String(amount)\n    }\n\n    // Initializing a new Atom to remove tokens from source\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: Number(this.sourceWallet.balance)\n    }))\n\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: Number(this.remainderWallet.balance),\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle\n    }))\n\n    return this\n  }\n\n  /**\n   * Initialize a V-type molecule to transfer value from one wallet to another, with a third,\n   * regenerated wallet receiving the remainder\n   *\n   * @param {Wallet} recipientWallet\n   * @param {number} amount\n   * @return {Molecule}\n   */\n  initValue ({\n    recipientWallet,\n    amount\n  }) {\n    if (this.sourceWallet.balance - amount < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    // Initializing a new Atom to remove tokens from source (debit full balance)\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: -this.sourceWallet.balance\n    }))\n    // Initializing a new Atom to add tokens to recipient\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: recipientWallet,\n      value: amount,\n      metaType: 'walletBundle',\n      metaId: recipientWallet.bundle\n    }))\n    // Initializing a remainder atom\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle\n    }))\n\n    return this\n  }\n\n  /**\n   * Creates a stackable V-isotope transfer with 3 atoms:\n   * source debit, recipient credit, remainder.\n   * Propagates batchId from source wallet.\n   *\n   * @param {Wallet} recipientWallet - wallet receiving the tokens\n   * @param {number} amount - amount to transfer\n   * @return {Molecule}\n   */\n  addStackableTransfer ({\n    recipientWallet,\n    amount\n  }) {\n    if (amount <= 0) {\n      throw new NegativeAmountException('Molecule::addStackableTransfer() - Amount must be positive!')\n    }\n\n    if (this.sourceWallet.balance - amount < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    const batchId = this.sourceWallet.batchId || generateBatchId({})\n\n    // Source debit atom\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: -amount,\n      batchId\n    }))\n\n    // Recipient credit atom\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: recipientWallet,\n      value: amount,\n      metaType: 'walletBundle',\n      metaId: recipientWallet.bundle,\n      batchId: generateBatchId({})\n    }))\n\n    // Remainder atom\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle,\n      batchId\n    }))\n\n    return this\n  }\n\n  /**\n   *\n   * @param amount\n   * @param tradeRates\n   */\n  initDepositBuffer ({\n    amount,\n    tradeRates\n  }) {\n    if (this.sourceWallet.balance - amount < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    // Create a buffer wallet\n    const bufferWallet = Wallet.create({\n      secret: this.secret,\n      bundle: this.bundle,\n      token: this.sourceWallet.token,\n      batchId: this.sourceWallet.batchId\n    })\n    bufferWallet.tradeRates = tradeRates\n\n    // Initializing a new Atom to remove tokens from source (debit full balance)\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.sourceWallet,\n      value: -this.sourceWallet.balance\n    }))\n\n    // Initializing a new Atom to add tokens to recipient\n    this.addAtom(Atom.create({\n      isotope: 'B',\n      wallet: bufferWallet,\n      value: amount,\n      metaType: 'walletBundle',\n      metaId: this.sourceWallet.bundle\n    }))\n\n    this.addAtom(Atom.create({\n      isotope: 'V',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.sourceWallet.bundle\n    }))\n\n    return this\n  }\n\n  /**\n   *\n   * @param {{}} recipients\n   * @param {Wallet|{}} signingWallet\n   * @returns {Molecule}\n   */\n  initWithdrawBuffer ({\n    recipients,\n    signingWallet = null\n  }) {\n    // Calculate final amount from all recipients\n    let amount = 0\n    for (const [recipientBundle, recipientAmount] of Object.entries(recipients || {})) {\n      amount += recipientAmount\n    }\n    if (this.sourceWallet.balance - amount < 0) {\n      throw new BalanceInsufficientException()\n    }\n\n    // Set a metas signing position for molecule correct reconciliation\n    const firstAtomMeta = new AtomMeta()\n    if (signingWallet) {\n      firstAtomMeta.setSigningWallet(signingWallet)\n    }\n\n    // Initializing a new Atom to remove tokens from source (debit full balance)\n    this.addAtom(Atom.create({\n      isotope: 'B',\n      wallet: this.sourceWallet,\n      value: -this.sourceWallet.balance,\n      meta: firstAtomMeta,\n      metaType: 'walletBundle',\n      metaId: this.sourceWallet.bundle\n    }))\n\n    // Initializing a new Atom to add tokens to recipient\n    for (const [recipientBundle, recipientAmount] of Object.entries(recipients || {})) {\n      this.addAtom(new Atom({\n        isotope: 'V',\n        token: this.sourceWallet.token,\n        value: recipientAmount,\n        batchId: this.sourceWallet.batchId ? generateBatchId({}) : null,\n        metaType: 'walletBundle',\n        metaId: recipientBundle\n      }))\n    }\n\n    this.addAtom(Atom.create({\n      isotope: 'B',\n      wallet: this.remainderWallet,\n      value: this.sourceWallet.balance - amount,\n      metaType: 'walletBundle',\n      metaId: this.remainderWallet.bundle\n    }))\n\n    return this\n  }\n\n  /**\n   * Initialize a C-type molecule to issue a new type of token\n   *\n   * @param {Wallet} recipientWallet - wallet receiving the tokens. Needs to be initialized for the new token beforehand.\n   * @param {number} amount - how many of the token we are initially issuing (for fungible tokens only)\n   * @param {array|object} meta - additional fields to configure the token\n   * @return {Molecule}\n   */\n  initTokenCreation ({\n    recipientWallet,\n    amount,\n    meta\n  }) {\n    const atomMeta = new AtomMeta(meta)\n    atomMeta.setMetaWallet(recipientWallet)\n\n    // The primary atom tells the ledger that a certain amount of the new token is being issued.\n    this.addAtom(Atom.create({\n      isotope: 'C',\n      wallet: this.sourceWallet,\n      value: amount,\n      metaType: 'token',\n      metaId: recipientWallet.token,\n      meta: atomMeta,\n      batchId: recipientWallet.batchId\n    }))\n\n    // User remainder atom\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {object[]} rule,\n   * @param {object} policy\n   * @return {Molecule}\n   */\n  createRule ({\n    metaType,\n    metaId,\n    rule,\n    policy = {}\n  }) {\n    const $rules = []\n\n    for (const $rule of rule) {\n      $rules.push($rule instanceof Rule ? $rule : Rule.toObject($rule))\n    }\n\n    // Create atom meta with rules\n    const atomMeta = new AtomMeta({\n      rule: JSON.stringify($rules)\n    })\n\n    // Add policies to meta object\n    atomMeta.addPolicy(policy)\n\n    this.addAtom(Atom.create({\n      isotope: 'R',\n      wallet: this.sourceWallet,\n      metaType,\n      metaId,\n      meta: atomMeta\n    }))\n\n    // User continuID atom\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Builds Atoms to define a new wallet on the ledger\n   *\n   * @param {Wallet} wallet\n   * @param {AtomMeta|null} atomMeta\n   * @return {Molecule}\n   */\n  initWalletCreation (wallet, atomMeta = null) {\n    if (!atomMeta) {\n      atomMeta = new AtomMeta()\n    }\n    atomMeta.setMetaWallet(wallet)\n    const creationAtom = Atom.create({\n      isotope: 'C',\n      wallet: this.sourceWallet,\n      metaType: 'wallet',\n      metaId: wallet.address,\n      meta: atomMeta,\n      batchId: wallet.batchId\n    })\n    this.addAtom(creationAtom)\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Init shadow wallet claim\n   *\n   * @param wallet\n   */\n  initShadowWalletClaim (wallet) {\n    const atomMeta = (new AtomMeta()).setShadowWalletClaim(true)\n    return this.initWalletCreation(wallet, atomMeta)\n  }\n\n  /**\n   * Builds Atoms to define a new identifier on the ledger\n   *\n   * @param {string} type - phone or email\n   * @param {string} contact - phone number or email string\n   * @param {string} code -\n   *\n   * @return {Molecule}\n   */\n  initIdentifierCreation ({\n    type,\n    contact,\n    code\n  }) {\n    const meta = {\n      code,\n      hash: generateBundleHash(contact.trim(), 'Molecule::initIdentifierCreation')\n    }\n\n    this.addAtom(Atom.create({\n      isotope: 'C',\n      wallet: this.sourceWallet,\n      metaType: 'identifier',\n      metaId: type,\n      meta: new AtomMeta(meta)\n    }))\n\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Initialize an M-type molecule with the given data\n   *\n   * @param {array|object} meta\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {object} policy\n   * @return {Molecule}\n   */\n  initMeta ({\n    meta,\n    metaType,\n    metaId,\n    policy\n  }) {\n    // Initializing a new Atom to hold our metadata\n    this.addAtom(Atom.create({\n      isotope: 'M',\n      wallet: this.sourceWallet,\n      metaType,\n      metaId,\n      meta: new AtomMeta(meta)\n    }))\n\n    // Only add policy atom if policy is provided and not empty\n    if (policy && Object.keys(policy).length > 0) {\n      this.addPolicyAtom({\n        metaType,\n        metaId,\n        meta,\n        policy\n      })\n    }\n\n    // User remainder atom\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Initialize a P-type molecule for peer registration\n   *\n   * @param {string} host - The peer host URL to register\n   * @return {Molecule}\n   */\n  initPeering ({\n    host\n  }) {\n    this.addAtom(Atom.create({\n      isotope: 'P',\n      wallet: this.sourceWallet,\n      metaType: 'walletBundle',\n      metaId: this.bundle,\n      meta: new AtomMeta({ peerHost: host })\n    }))\n\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Initialize an A-type molecule for an append request\n   *\n   * @param {string} metaType - The target MetaType to append to\n   * @param {string} metaId - The target MetaId to append to\n   * @param {string} action - The action to perform\n   * @param {object} meta - Additional metadata\n   * @return {Molecule}\n   */\n  initAppendRequest ({\n    metaType,\n    metaId,\n    action,\n    meta = {}\n  }) {\n    this.addAtom(Atom.create({\n      isotope: 'A',\n      wallet: this.sourceWallet,\n      metaType,\n      metaId,\n      meta: new AtomMeta({ action, ...meta })\n    }))\n\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Arranges atoms to request tokens from the node itself\n   *\n   * @param {string} token\n   * @param {Number} amount\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {array|object} meta\n   * @param {string|null} batchId\n   *\n   * @return {Molecule}\n   */\n  initTokenRequest ({\n    token,\n    amount,\n    metaType,\n    metaId,\n    meta = {},\n    batchId = null\n  }) {\n    meta.token = token\n    meta.amount = String(amount)\n\n    this.addAtom(Atom.create({\n      isotope: 'T',\n      wallet: this.sourceWallet,\n      value: amount,\n      metaType,\n      metaId,\n      meta: new AtomMeta(meta),\n      batchId\n    }))\n\n    // User remainder atom\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Arranges atoms to request an authorization token from the node\n   *\n   * @param {object} meta\n   *\n   * @return {Molecule}\n   */\n  initAuthorization ({ meta }) {\n    this.addAtom(Atom.create({\n      isotope: 'U',\n      wallet: this.sourceWallet,\n      meta: new AtomMeta(meta)\n    }))\n\n    // User remainder atom\n    this.addContinuIdAtom()\n\n    return this\n  }\n\n  /**\n   * Creates a one-time signature for a molecule and breaks it up across multiple atoms within that\n   * molecule. Resulting 4096 byte (2048 character) string is the one-time signature, which is then compressed.\n   *\n   * @param {string|null} bundle\n   * @param {boolean} anonymous\n   * @param {boolean} compressed\n   * @return {string|null}\n   * @throws {AtomsMissingException}\n   */\n  sign ({\n    bundle = null,\n    anonymous = false,\n    compressed = true\n  }) {\n    // Do we have atoms?\n    if (this.atoms.length === 0 || this.atoms.filter(atom => !(atom instanceof Atom)).length !== 0) {\n      throw new AtomsMissingException()\n    }\n\n    // Derive the user's bundle\n    if (!anonymous && !this.bundle) {\n      this.bundle = bundle || generateBundleHash(this.secret, 'Molecule::sign')\n    }\n\n    // Hash atoms to get molecular hash\n    this.molecularHash = Atom.hashAtoms({\n      atoms: this.atoms\n    })\n\n    // Signing atom\n    const signingAtom = this.atoms[0]\n\n    // Set signing position from the first atom\n    let signingPosition = signingAtom.position\n\n    // Get signing wallet from first atom's metas\n    const signingWallet = Dot.get(signingAtom.aggregatedMeta(), 'signingWallet')\n\n    // Try to get custom signing position from the metas (local molecule with server secret)\n    if (signingWallet) {\n      signingPosition = Dot.get(JSON.parse(signingWallet), 'position')\n    }\n\n    // Signing position is required\n    if (!signingPosition) {\n      throw new SignatureMalformedException('Signing wallet must have a position!')\n    }\n\n    // Generate the private signing key for this molecule\n    const key = Wallet.generateKey({\n      secret: this.secret,\n      token: signingAtom.token,\n      position: signingAtom.position\n    })\n    // Subdivide Kk into 16 segments of 256 bytes (128 characters) each\n    const keyChunks = chunkSubstr(key, 128)\n    // Convert Hm to numeric notation, and then normalize\n    const normalizedHash = this.normalizedHash()\n\n    // Building a one-time-signature\n    let signatureFragments = ''\n\n    for (const index in keyChunks) {\n      let workingChunk = keyChunks[index]\n\n      for (let iterationCount = 0, condition = 8 - normalizedHash[index]; iterationCount < condition; iterationCount++) {\n        workingChunk = (new JsSHA('SHAKE256', 'TEXT')).update(workingChunk).getHash('HEX', { outputLen: 512 })\n      }\n      signatureFragments += workingChunk\n    }\n\n    // Compressing the OTS\n    if (compressed) {\n      signatureFragments = hexToBase64(signatureFragments)\n    }\n\n    // Chunking the signature across multiple atoms\n    const chunkedSignature = chunkSubstr(signatureFragments, Math.ceil(signatureFragments.length / this.atoms.length))\n\n    let lastPosition = null\n\n    for (let chunkCount = 0, condition = chunkedSignature.length; chunkCount < condition; chunkCount++) {\n      this.atoms[chunkCount].otsFragment = chunkedSignature[chunkCount]\n      lastPosition = this.atoms[chunkCount].position\n    }\n\n    return lastPosition\n  }\n\n  /**\n   * Synchronous signing — identical to sign() since all operations are CPU-bound.\n   * Provided for API parity with Rust SDK's sign_sync().\n   *\n   * @param {object} options\n   * @param {string|null} options.bundle\n   * @param {boolean} options.anonymous\n   * @param {boolean} options.compressed\n   * @return {string|null}\n   */\n  signSync (options = {}) {\n    return this.sign(options)\n  }\n\n  /**\n   * Returns the base cell slug portion\n   *\n   * @return {string}\n   */\n  cellSlugBase () {\n    return (this.cellSlug || '').split(this.cellSlugDelimiter)[0]\n  }\n\n  /**\n   * Returns JSON-ready object for cross-SDK compatibility (2025 JS best practices)\n   *\n   * Includes all necessary fields for cross-SDK validation while excluding sensitive data.\n   * Follows 2025 JavaScript best practices with proper error handling and type safety.\n   *\n   * @param {Object} options - Serialization options\n   * @param {boolean} options.includeValidationContext - Include sourceWallet/remainderWallet for validation (default: false)\n   * @param {boolean} options.includeOtsFragments - Include OTS signature fragments (default: true)\n   * @param {boolean} options.secureMode - Extra security checks (default: false)\n   * @return {Object} JSON-serializable object\n   * @throws {Error} If molecule is in invalid state for serialization\n   */\n  toJSON (options = {}) {\n    const {\n      includeValidationContext = false,\n      includeOtsFragments = true\n    } = options;\n\n    try {\n      // Core molecule properties (server-compatible fields only)\n      const serialized = {\n        status: this.status,\n        molecularHash: this.molecularHash,\n        createdAt: this.createdAt,\n        cellSlug: this.cellSlug,\n        bundle: this.bundle,\n\n        // Serialized atoms array with optional OTS fragments\n        atoms: this.atoms.map(atom => atom.toJSON({\n          includeOtsFragments\n        }))\n      };\n\n      // Parent molecular hashes for DAG linkage (only include when non-empty\n      // to maintain backward compatibility with servers that don't support it)\n      if (this.parentHashes && this.parentHashes.length > 0) {\n        serialized.parentHashes = this.parentHashes\n      }\n\n      // Extended context for Rust validator and local validation\n      if (includeValidationContext) {\n        serialized.cellSlugOrigin = this.cellSlugOrigin\n        serialized.version = this.version\n\n        if (this.sourceWallet) {\n          serialized.sourceWallet = {\n            address: this.sourceWallet.address,\n            position: this.sourceWallet.position,\n            token: this.sourceWallet.token,\n            balance: this.sourceWallet.balance || '0',\n            bundle: this.sourceWallet.bundle,\n            batchId: this.sourceWallet.batchId || null,\n            characters: this.sourceWallet.characters || 'BASE64',\n            pubkey: this.sourceWallet.pubkey || null,\n            tokenUnits: this.sourceWallet.tokenUnits || [],\n            tradeRates: this.sourceWallet.tradeRates || {},\n            molecules: this.sourceWallet.molecules || {}\n          };\n        }\n\n        if (this.remainderWallet) {\n          serialized.remainderWallet = {\n            address: this.remainderWallet.address,\n            position: this.remainderWallet.position,\n            token: this.remainderWallet.token,\n            balance: this.remainderWallet.balance || '0',\n            bundle: this.remainderWallet.bundle,\n            batchId: this.remainderWallet.batchId || null,\n            characters: this.remainderWallet.characters || 'BASE64',\n            pubkey: this.remainderWallet.pubkey || null,\n            tokenUnits: this.remainderWallet.tokenUnits || [],\n            tradeRates: this.remainderWallet.tradeRates || {},\n            molecules: this.remainderWallet.molecules || {}\n          };\n        }\n      }\n\n      return serialized;\n\n    } catch (error) {\n      throw new Error(`Molecule serialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Creates a Molecule instance from JSON data (2025 JS best practices)\n   *\n   * Handles cross-SDK deserialization with robust error handling and validation.\n   * Essential for cross-platform molecule validation and compatibility testing.\n   *\n   * @param {string|Object} json - JSON string or object to deserialize\n   * @param {Object} options - Deserialization options\n   * @param {boolean} options.includeValidationContext - Reconstruct sourceWallet/remainderWallet (default: false)\n   * @param {boolean} options.validateStructure - Validate required fields (default: true)\n   * @return {Molecule} Reconstructed molecule instance\n   * @throws {Error} If JSON is invalid or required fields are missing\n   */\n  static fromJSON (json, options = {}) {\n    const {\n      includeValidationContext = false,\n      validateStructure = true\n    } = options;\n\n    try {\n      // Parse JSON safely\n      const data = typeof json === 'string' ? JSON.parse(json) : json;\n\n      // Validate required fields in strict mode\n      if (validateStructure) {\n        if (!data.molecularHash || !Array.isArray(data.atoms)) {\n          throw new Error('Invalid molecule data: missing molecularHash or atoms array');\n        }\n      }\n\n      // Create minimal molecule instance (never include secret from JSON)\n      const molecule = new Molecule({\n        secret: null,\n        bundle: data.bundle || null,\n        cellSlug: data.cellSlug || null,\n        version: data.version || null\n      });\n\n      // Populate core properties\n      molecule.status = data.status;\n      molecule.molecularHash = data.molecularHash;\n      molecule.createdAt = data.createdAt || String(+new Date());\n      molecule.cellSlugOrigin = data.cellSlugOrigin;\n      molecule.parentHashes = Array.isArray(data.parentHashes) ? [...data.parentHashes] : [];\n\n      // Reconstruct atoms array with proper Atom instances\n      if (Array.isArray(data.atoms)) {\n        molecule.atoms = data.atoms.map((atomData, index) => {\n          try {\n            return Atom.fromJSON(atomData);\n          } catch (error) {\n            throw new Error(`Failed to reconstruct atom ${index}: ${error.message}`);\n          }\n        });\n      }\n\n      // Reconstruct validation context if available and requested\n      if (includeValidationContext) {\n        if (data.sourceWallet) {\n          // Create source wallet for validation (without secret for security)\n          molecule.sourceWallet = new Wallet({\n            secret: null,\n            token: data.sourceWallet.token,\n            position: data.sourceWallet.position,\n            bundle: data.sourceWallet.bundle,\n            batchId: data.sourceWallet.batchId,\n            characters: data.sourceWallet.characters\n          });\n\n          // Set additional properties for validation context\n          molecule.sourceWallet.balance = String(data.sourceWallet.balance != null ? data.sourceWallet.balance : 0);\n          molecule.sourceWallet.address = data.sourceWallet.address;\n          if (data.sourceWallet.pubkey) {\n            molecule.sourceWallet.pubkey = data.sourceWallet.pubkey;\n          }\n          molecule.sourceWallet.tokenUnits = data.sourceWallet.tokenUnits || [];\n          molecule.sourceWallet.tradeRates = data.sourceWallet.tradeRates || {};\n          molecule.sourceWallet.molecules = data.sourceWallet.molecules || {};\n        }\n\n        if (data.remainderWallet) {\n          // Create remainder wallet for validation (without secret for security)\n          molecule.remainderWallet = new Wallet({\n            secret: null,\n            token: data.remainderWallet.token,\n            position: data.remainderWallet.position,\n            bundle: data.remainderWallet.bundle,\n            batchId: data.remainderWallet.batchId,\n            characters: data.remainderWallet.characters\n          });\n\n          // Set additional properties for validation context\n          molecule.remainderWallet.balance = String(data.remainderWallet.balance != null ? data.remainderWallet.balance : 0);\n          molecule.remainderWallet.address = data.remainderWallet.address;\n          if (data.remainderWallet.pubkey) {\n            molecule.remainderWallet.pubkey = data.remainderWallet.pubkey;\n          }\n          molecule.remainderWallet.tokenUnits = data.remainderWallet.tokenUnits || [];\n          molecule.remainderWallet.tradeRates = data.remainderWallet.tradeRates || {};\n          molecule.remainderWallet.molecules = data.remainderWallet.molecules || {};\n        }\n      }\n\n      return molecule;\n\n    } catch (error) {\n      throw new Error(`Molecule deserialization failed: ${error.message}`);\n    }\n  }\n\n  /**\n   * Validates the current molecular structure\n   *\n   * @param senderWallet\n   */\n  check (senderWallet = null) {\n    return (new CheckMolecule(this)).verify(senderWallet)\n  }\n\n  /**\n   * Convert Hm to numeric notation via EnumerateMolecule(Hm)\n   *\n   * @returns {Array}\n   */\n  normalizedHash () {\n    return Molecule.normalize(Molecule.enumerate(this.molecularHash))\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Wallet from './Wallet.js'\n\n/**\n *\n */\nexport default class AuthToken {\n  /**\n   *\n   * @param {string} token\n   * @param {number} expiresAt\n   * @param {boolean} encrypt\n   * @param {string} pubkey\n   */\n  constructor ({\n    token,\n    expiresAt,\n    encrypt,\n    pubkey\n  }) {\n    this.$__token = token\n    this.$__expiresAt = expiresAt\n    this.$__pubkey = pubkey\n    this.$__encrypt = encrypt\n  }\n\n  /**\n   *\n   * @param data\n   * @param wallet\n   * @returns {AuthToken}\n   */\n  static create (data, wallet) {\n    const authToken = new AuthToken(data)\n    authToken.setWallet(wallet)\n    return authToken\n  }\n\n  /**\n   *\n   * @param {object} snapshot\n   * @param {string} secret\n   * @return {AuthToken}\n   */\n  static restore (snapshot, secret) {\n    const wallet = new Wallet({\n      secret,\n      token: 'AUTH',\n      position: snapshot.wallet.position,\n      characters: snapshot.wallet.characters\n    })\n    return AuthToken.create({\n      token: snapshot.token,\n      expiresAt: snapshot.expiresAt,\n      pubkey: snapshot.pubkey,\n      encrypt: snapshot.encrypt\n    }, wallet)\n  }\n\n  /**\n   *\n   * @param {Wallet} wallet\n   */\n  setWallet (wallet) {\n    this.$__wallet = wallet\n  }\n\n  /**\n   * Get a wallet\n   * @return {Wallet}\n   */\n  getWallet () {\n    return this.$__wallet\n  }\n\n  /**\n   *\n   * @return {{wallet: {characters, position}, encrypt, expiresAt, token, pubkey}}\n   */\n  getSnapshot () {\n    return {\n      token: this.$__token,\n      expiresAt: this.$__expiresAt,\n      pubkey: this.$__pubkey,\n      encrypt: this.$__encrypt,\n      wallet: {\n        position: this.$__wallet.position,\n        characters: this.$__wallet.characters\n      }\n    }\n  }\n\n  /**\n   *\n   * @return {string}\n   */\n  getToken () {\n    return this.$__token\n  }\n\n  /**\n   *\n   * @return {string}\n   */\n  getPubkey () {\n    return this.$__pubkey\n  }\n\n  /**\n   *\n   * @return {number}\n   */\n  getExpireInterval () {\n    return (this.$__expiresAt * 1000) - Date.now()\n  }\n\n  /**\n   *\n   * @return {boolean}\n   */\n  isExpired () {\n    return !this.$__expiresAt || this.getExpireInterval() < 0\n  }\n\n  /**\n   * Get auth data for the final GraphQL client\n   * @return {{wallet: Wallet, token: string, pubkey: string}}\n   */\n  getAuthData () {\n    return {\n      token: this.getToken(),\n      pubkey: this.getPubkey(),\n      wallet: this.getWallet()\n    }\n  }\n}\n","// Value determines by min sql decimal precision\nconst multiplier = 10 ** 18\n\nexport default class Decimal {\n  /**\n   * @param {number} value\n   * @return {number}\n   */\n  static val (value) {\n    if (Math.abs(value * multiplier) < 1) {\n      return 0.0\n    }\n\n    return value\n  }\n\n  /**\n   * @param {number} value1\n   * @param {number} value2\n   * @param {boolean} debug\n   * @return {number}\n   */\n  static cmp (value1, value2, debug = false) {\n    const val1 = Decimal.val(value1) * multiplier\n    const val2 = Decimal.val(value2) * multiplier\n\n    // Equal\n    if (Math.abs(val1 - val2) < 1) {\n      return 0\n    }\n\n    // Greater or smaller\n    return (val1 > val2) ? 1 : -1\n  }\n\n  /**\n   * @param {number} value1\n   * @param {number} value2\n   * @return {boolean}\n   */\n  static equal (value1, value2) {\n    return (Decimal.cmp(value1, value2) === 0)\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Exception for bad GraphQL responses\n */\nexport default class InvalidResponseException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'GraphQL did not provide a valid response.', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'InvalidResponseException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when attempting to transact without an auth token\n */\nexport default class UnauthenticatedException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Authorization token missing or invalid.', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'UnauthenticatedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport InvalidResponseException from '../exception/InvalidResponseException.js'\nimport UnauthenticatedException from '../exception/UnauthenticatedException.js'\nimport Dot from '../libraries/Dot.js'\n\n/**\n * Base Response class for processing node responses\n */\nexport default class Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   * @param {string|null} dataKey\n   */\n  constructor ({\n    query,\n    json,\n    dataKey = null\n  }) {\n    this.dataKey = dataKey\n    this.errorKey = 'exception'\n    this.$__payload = null\n    this.$__query = query\n    this.$__originResponse = json\n    this.$__response = json\n\n    if (typeof this.$__response === 'undefined' || this.$__response === null) {\n      throw new InvalidResponseException()\n    }\n\n    if (Dot.has(this.$__response, this.errorKey)) {\n      const error = Dot.get(this.$__response, this.errorKey)\n\n      if (String(error).includes('Unauthenticated')) {\n        throw new UnauthenticatedException()\n      }\n\n      throw new InvalidResponseException()\n    }\n\n    // Check for GraphQL errors array\n    if (this.$__response.errors && Array.isArray(this.$__response.errors) && this.$__response.errors.length > 0) {\n      const errorMessage = this.$__response.errors[0].message || 'Unknown GraphQL error'\n\n      if (errorMessage.includes('Unauthenticated')) {\n        throw new UnauthenticatedException()\n      }\n\n      throw new InvalidResponseException(`GraphQL Error: ${errorMessage}`)\n    }\n\n    this.init()\n  }\n\n  /**\n   *\n   */\n  init () {\n  }\n\n  /**\n   * @return {*}\n   */\n  data () {\n    if (!this.dataKey) {\n      return this.response()\n    }\n\n    // Check if response has data field\n    if (!this.response().data) {\n      throw new InvalidResponseException('Response has no data field')\n    }\n\n    // Check key & return custom data from the response\n    if (!Dot.has(this.response(), this.dataKey)) {\n      throw new InvalidResponseException(`Missing expected field: ${this.dataKey}`)\n    }\n\n    return Dot.get(this.response(), this.dataKey)\n  }\n\n  /**\n   * @return {object}\n   */\n  response () {\n    return this.$__response\n  }\n\n  /**\n   * @return {*}\n   */\n  payload () {\n    return null\n  }\n\n  /**\n   * @return {Query}\n   */\n  query () {\n    return this.$__query\n  }\n\n  /**\n   * @return {*}\n   */\n  status () {\n    return null\n  }\n\n  /**\n   * Check if response was successful\n   * @return {boolean}\n   */\n  success () {\n    // Default implementation - can be overridden by subclasses\n    return !this.$__response?.errors?.length\n  }\n\n  /**\n   * Get error message if any\n   *\n   * @return {string|null}\n   */\n  error () {\n    return this.$__response?.errors?.length ? this.$__response.errors[0].message || 'Unknown error' : null\n  }\n\n  /**\n   * Enhanced interface methods for standardized response handling\n   */\n  \n  /**\n   * Get error reason (alias for error() to match standardized interface)\n   * @return {string|null}\n   */\n  reason () {\n    return this.error()\n  }\n\n  /**\n   * Convert to ValidationResult for enhanced error handling\n   * @return {object}\n   */\n  toValidationResult () {\n    if (this.success() && this.payload() !== null) {\n      return {\n        success: true,\n        data: this.payload(),\n        warnings: []\n      }\n    } else {\n      return {\n        success: false,\n        error: {\n          message: this.reason() || 'Unknown error',\n          context: this.constructor.name,\n          details: this.$__response?.errors || []\n        }\n      }\n    }\n  }\n\n  /**\n   * Enhanced error handling with callbacks\n   * @param {function} callback\n   * @return {Response}\n   */\n  onSuccess (callback) {\n    if (this.success() && this.payload() !== null) {\n      try {\n        callback(this.payload())\n      } catch (error) {\n        console.warn('Response.onSuccess callback failed:', error)\n      }\n    }\n    return this\n  }\n\n  /**\n   * Enhanced failure handling with callbacks\n   * @param {function} callback\n   * @return {Response}\n   */\n  onFailure (callback) {\n    if (!this.success()) {\n      try {\n        callback(this.reason() || 'Unknown error')\n      } catch (error) {\n        console.warn('Response.onFailure callback failed:', error)\n      }\n    }\n    return this\n  }\n\n  /**\n   * Debug logging with enhanced context\n   * @param {string|null} label\n   * @return {Response}\n   */\n  debug (label = null) {\n    const debugPrefix = label ? `[${label}]` : `[${this.constructor.name}]`\n    \n    if (this.success()) {\n      console.debug(`${debugPrefix} Success:`, {\n        payload: this.payload(),\n        query: this.$__query?.constructor?.name,\n        dataKey: this.dataKey\n      })\n    } else {\n      console.debug(`${debugPrefix} Failure:`, {\n        error: this.reason(),\n        errors: this.$__response?.errors,\n        rawData: this.$__response\n      })\n    }\n    \n    return this\n  }\n\n  /**\n   * Promise conversion for enhanced async patterns\n   * @return {Promise}\n   */\n  toPromise () {\n    if (this.success() && this.payload() !== null) {\n      return Promise.resolve(this.payload())\n    } else {\n      return Promise.reject(new Error(this.reason() || 'Unknown error'))\n    }\n  }\n\n  /**\n   * Functional programming map operation\n   * @param {function} mapper\n   * @return {Response}\n   */\n  map (mapper) {\n    if (this.success() && this.payload() !== null) {\n      try {\n        const mappedPayload = mapper(this.payload())\n        // Create new response with mapped payload\n        const newResponse = Object.create(Object.getPrototypeOf(this))\n        Object.assign(newResponse, this)\n        newResponse.$__payload = mappedPayload\n        return newResponse\n      } catch (error) {\n        // Create error response\n        const errorResponse = Object.create(Object.getPrototypeOf(this))\n        Object.assign(errorResponse, this)\n        errorResponse.$__response = { errors: [{ message: `Mapping failed: ${error.message}` }] }\n        return errorResponse\n      }\n    } else {\n      return this\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport CodeException from '../exception/CodeException.js'\nimport Response from '../response/Response.js'\n\nexport default class Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    this.client = graphQLClient\n    this.knishIOClient = knishIOClient\n    this.$__variables = null\n    this.$__query = null\n    this.$__response = null\n    this.$__request = null\n  }\n\n  /**\n   * Return a response object\n   * Used at KnishIOClient::createMolecule => sets the source wallet from the remainder one stored in response object\n   * @return {Response}\n   */\n  response () {\n    return this.$__response\n  }\n\n  /**\n   * Builds a Response based on JSON input\n   *\n   * @param response\n   * @return {Promise<Response>}\n   */\n  async createResponseRaw (response) {\n    return this.createResponse(response)\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {Response}\n   */\n  createResponse (json) {\n    return new Response({\n      query: this,\n      json\n    })\n  }\n\n  /**\n   * Creates a new Request for the given parameters\n   *\n   * @param {{}} variables\n   * @returns {{variables: (Object|null), query: null}}\n   */\n  createQuery ({ variables = null }) {\n    this.$__variables = this.compiledVariables(variables)\n\n    // Uri is a required parameter\n    const uri = this.uri()\n\n    if (!uri) {\n      throw new CodeException('Query::createQuery() - Node URI was not initialized for this client instance!')\n    }\n\n    if (this.$__query === null) {\n      throw new CodeException('Query::createQuery() - GraphQL subscription was not initialized!')\n    }\n\n    return {\n      query: this.$__query,\n      variables: this.variables()\n    }\n  }\n\n  /**\n   * Sends the Query to a Knish.IO node and returns the Response\n   *\n   * @param {object} variables\n   * @param {object} context\n   * @return {Promise<Response>}\n   */\n  async execute ({ variables = null, context = {} }) {\n    this.$__request = this.createQuery({ variables })\n\n    const mergedContext = {\n      ...context,\n      ...this.createQueryContext()\n    }\n\n    try {\n      const response = await this.client.query({\n        ...this.$__request,\n        context: mergedContext\n      })\n\n      this.$__response = await this.createResponseRaw(response)\n\n      return this.$__response\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        this.knishIOClient.log('warn', 'Query was cancelled')\n        // You might want to create a custom response for cancelled queries\n        return new Response({\n          query: this,\n          json: { data: null, errors: [{ message: 'Query was cancelled' }] }\n        })\n      } else {\n        throw error\n      }\n    }\n  }\n\n  /**\n   * Returns a variables object for the Query\n   *\n   * @param {object} variables\n   * @return {object}\n   */\n  compiledVariables (variables = null) {\n    return variables || {}\n  }\n\n  /**\n   * Returns the Knish.IO endpoint URI\n   *\n   * @return {string}\n   */\n  uri () {\n    return this.client.getUri()\n  }\n\n  /**\n   * Returns the query variables object\n   *\n   * @return {object|null}\n   */\n  variables () {\n    return this.$__variables\n  }\n\n  createQueryContext () {\n    // Override this method in subclasses if needed\n    return {}\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport Wallet from '../Wallet.js'\n\n/**\n * Response for ContinuID query\n */\nexport default class ResponseContinuId extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.ContinuId'\n    })\n  }\n\n  /**\n   * Returns the ContinuID wallet\n   *\n   * @return {Wallet|null}\n   */\n  payload () {\n    let wallet = null\n\n    const continuId = this.data()\n\n    if (continuId) {\n      wallet = new Wallet({\n        secret: null,\n        token: continuId.tokenSlug\n      })\n      wallet.address = continuId.address\n      wallet.position = continuId.position\n      wallet.bundle = continuId.bundleHash\n      wallet.batchId = continuId.batchId\n      wallet.characters = continuId.characters\n      wallet.pubkey = continuId.pubkey\n      wallet.balance = String(continuId.amount != null ? continuId.amount : 0)\n    }\n\n    return wallet\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseContinuId from '../response/ResponseContinuId.js'\nimport { gql } from '@urql/core'\n\n/**\n * Queries the node for the next wallet to sign with for ContinuID\n */\nexport default class QueryContinuId extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query ($bundle: String!) {\n      ContinuId(bundle: $bundle) {\n        address,\n        bundleHash,\n        tokenSlug,\n        position,\n        batchId,\n        characters,\n        pubkey,\n        amount,\n        createdAt\n      }\n    }`\n  }\n\n  /**\n   * Force network-only for ContinuID queries to prevent URQL cache from\n   * returning stale wallet positions after mutations advance the ContinuID chain\n   */\n  createQueryContext () {\n    return { requestPolicy: 'network-only' }\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseContinuId}\n   */\n  createResponse (json) {\n    return new ResponseContinuId({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport Meta from '../Meta.js'\n\n/**\n * Response for Wallet Bundle query\n */\nexport default class ResponseWalletBundle extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.WalletBundle'\n    })\n  }\n\n  /**\n   * Returns a wallet bundle with normalized metadata\n   *\n   * @return {{}|null}\n   */\n  payload () {\n    const bundleData = this.data()\n\n    if (!bundleData || bundleData.length === 0) {\n      return null\n    }\n\n    const aggregate = {}\n\n    bundleData.forEach(bundle => {\n      bundle.metas = Meta.aggregateMeta(bundle.metas)\n      aggregate[bundle.bundleHash] = bundle\n    })\n\n    return aggregate\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseWalletBundle from '../response/ResponseWalletBundle.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving information about Wallet Bundles\n */\nexport default class QueryWalletBundle extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $bundleHashes: [ String! ] ) {\n      WalletBundle( bundleHashes: $bundleHashes ) {\n        bundleHash,\n        metas {\n          molecularHash,\n          position,\n          key,\n          value,\n          createdAt\n        },\n        createdAt\n      }\n    }`\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseWalletBundle}\n   */\n  createResponse (json) {\n    return new ResponseWalletBundle({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport Wallet from '../Wallet.js'\nimport TokenUnit from '../TokenUnit.js'\n\n/**\n * Response for Wallet List query\n */\nexport default class ResponseWalletList extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.Wallet'\n    })\n  }\n\n  /**\n   * Returns a Knish.IO client Wallet class instance out of object data\n   *\n   * @param {object} data\n   * @param {string|null} secret\n   * @return {Wallet}\n   */\n  static toClientWallet ({\n    data,\n    secret = null\n  }) {\n    let wallet\n\n    if (data.position === null || typeof data.position === 'undefined') {\n      wallet = Wallet.create({\n        bundle: data.bundleHash,\n        token: data.tokenSlug,\n        batchId: data.batchId,\n        characters: data.characters\n      })\n    } else {\n      wallet = new Wallet({\n        secret,\n        token: data.tokenSlug,\n        position: data.position,\n        batchId: data.batchId,\n        characters: data.characters\n      })\n      wallet.address = data.address\n      wallet.bundle = data.bundleHash\n    }\n\n    if (data.token) {\n      wallet.tokenName = data.token.name\n      wallet.tokenAmount = data.token.amount\n      wallet.tokenSupply = data.token.supply\n      wallet.tokenFungibility = data.token.fungibility\n    }\n\n    if (data.tokenUnits.length) {\n      for (const tokenUnitData of data.tokenUnits) {\n        wallet.tokenUnits.push(TokenUnit.createFromGraphQL(tokenUnitData))\n      }\n    }\n\n    if (data.tradeRates.length) {\n      for (const tradeRate of data.tradeRates) {\n        wallet.tradeRates[tradeRate.tokenSlug] = tradeRate.amount\n      }\n    }\n\n    wallet.balance = String(data.amount != null ? data.amount : 0)\n    wallet.pubkey = data.pubkey\n    wallet.createdAt = data.createdAt\n\n    return wallet\n  }\n\n  /**\n   * Returns a list of Wallet class instances\n   *\n   * @param secret\n   * @return {null|[Wallet]}\n   */\n  getWallets (secret = null) {\n    const list = this.data()\n\n    if (!list) {\n      return null\n    }\n\n    const wallets = []\n\n    for (const data of list) {\n      wallets.push(ResponseWalletList.toClientWallet({\n        data,\n        secret\n      }))\n    }\n\n    return wallets\n  }\n\n  /**\n   * Returns response payload\n   *\n   * @return {null|[Wallet]}\n   */\n  payload () {\n    return this.getWallets()\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseWalletList from '../response/ResponseWalletList.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for getting a list of Wallets\n */\nexport default class QueryWalletList extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $bundleHash: String, $token: String ) {\n      Wallet( bundleHash: $bundleHash, token: $token ) {\n        address,\n        bundleHash,\n        token {\n          name,\n          amount,\n          fungibility,\n          supply\n        },\n        tokenSlug,\n        batchId,\n        position,\n        amount,\n        characters,\n        pubkey,\n        createdAt,\n        tokenUnits {\n          id,\n          name,\n          metas\n        },\n        tradeRates {\n          tokenSlug,\n          amount\n        }\n      }\n    }`\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseWalletList}\n   */\n  createResponse (json) {\n    return new ResponseWalletList({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport ResponseWalletList from './ResponseWalletList.js'\n\n/**\n * Response for balance query\n */\nexport default class ResponseBalance extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.Balance'\n    })\n  }\n\n  /**\n   * Returns a wallet with balance\n   *\n   * @return {null|Wallet}\n   */\n  payload () {\n    let walletData = this.data()\n\n    // Handle array response (e.g. from Rust validator which returns Vec<Wallet>)\n    if (Array.isArray(walletData)) {\n      walletData = walletData.length > 0 ? walletData[0] : null\n    }\n\n    if (!walletData || !walletData.bundleHash || !walletData.tokenSlug) {\n      return null\n    }\n\n    return ResponseWalletList.toClientWallet({\n      data: walletData\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseBalance from '../response/ResponseBalance.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for getting the balance of a given wallet or token slug\n */\nexport default class QueryBalance extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $address: String, $bundleHash: String, $type: String, $token: String, $position: String ) {\n      Balance( address: $address, bundleHash: $bundleHash, type: $type, token: $token, position: $position ) {\n        address,\n        bundleHash,\n        type,\n        tokenSlug,\n        batchId,\n        position,\n        amount,\n        characters,\n        pubkey,\n        createdAt,\n        tokenUnits {\n          id,\n          name,\n          metas\n        },\n        tradeRates {\n          tokenSlug,\n          amount\n        }\n      }\n    }`\n  }\n\n  /**\n   * @param {object} json\n   * @return {ResponseBalance}\n   */\n  createResponse (json) {\n    return new ResponseBalance({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\n/**\n * Response for MetaType Query\n */\nexport default class ResponseMetaType extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.MetaType'\n    })\n  }\n\n  /**\n   * Returns meta type instance results\n   *\n   * @return {null|*}\n   */\n  payload () {\n    const metaTypeData = this.data()\n\n    if (!metaTypeData || metaTypeData.length === 0) {\n      return null\n    }\n\n    const response = {\n      instances: {},\n      instanceCount: {},\n      paginatorInfo: {}\n    }\n\n    const metaData = metaTypeData.pop()\n\n    if (metaData.instances) {\n      response.instances = metaData.instances\n    }\n\n    if (metaData.instanceCount) {\n      response.instanceCount = metaData.instanceCount\n    }\n\n    if (metaData.paginatorInfo) {\n      response.paginatorInfo = metaData.paginatorInfo\n    }\n\n    return response\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseMetaType from '../response/ResponseMetaType.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving Meta Asset information\n */\nexport default class QueryMetaType extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $metaType: String, $metaTypes: [ String! ], $metaId: String, $metaIds: [ String! ], $key: String, $keys: [ String! ], $value: String, $values: [ String! ], $count: String, $latest: Boolean, $filter: [ MetaFilter! ], $queryArgs: QueryArgs, $countBy: String, $cellSlug: String ) {\n      MetaType( metaType: $metaType, metaTypes: $metaTypes, metaId: $metaId, metaIds: $metaIds, key: $key, keys: $keys, value: $value, values: $values, count: $count, filter: $filter, queryArgs: $queryArgs, countBy: $countBy, cellSlug: $cellSlug ) {\n        metaType,\n        instanceCount {\n          key,\n          value\n        },\n        instances {\n          metaType,\n          metaId,\n          createdAt,\n          metas(latest:$latest) {\n            molecularHash,\n            position,\n            key,\n            value,\n            createdAt\n          }\n        },\n        paginatorInfo {\n          currentPage,\n          total\n        }\n      }\n    }`\n  }\n\n  /**\n   * Builds a GraphQL-friendly variables object based on input fields\n   *\n   * @param {string|array|null} metaType\n   * @param {string|array|null} metaId\n   * @param {string|array|null} key\n   * @param {string|array|null} value\n   * @param {boolean|null} latest\n   * @param {object|null} filter\n   * @param {object|null} queryArgs\n   * @param {string|null} count\n   * @param {string|null} countBy\n   * @param {string|null} cellSlug\n   * @return {{}}\n   */\n  static createVariables ({\n    metaType = null,\n    metaId = null,\n    key = null,\n    value = null,\n    latest = null,\n    filter = null,\n    queryArgs = null,\n    count = null,\n    countBy = null,\n    cellSlug = null\n  }) {\n    const variables = {}\n\n    if (metaType) {\n      variables[typeof metaType === 'string' ? 'metaType' : 'metaTypes'] = metaType\n    }\n\n    if (metaId) {\n      variables[typeof metaId === 'string' ? 'metaId' : 'metaIds'] = metaId\n    }\n\n    if (key) {\n      variables[typeof key === 'string' ? 'key' : 'keys'] = key\n    }\n\n    if (value) {\n      variables[typeof value === 'string' ? 'value' : 'values'] = value\n    }\n\n    variables.latest = latest === true\n\n    if (filter) {\n      variables.filter = filter\n    }\n\n    if (queryArgs) {\n      if (typeof queryArgs.limit === 'undefined' || queryArgs.limit === 0) {\n        queryArgs.limit = '*'\n      }\n\n      variables.queryArgs = queryArgs\n    }\n\n    if (count) {\n      variables.count = count\n    }\n\n    if (countBy) {\n      variables.countBy = countBy\n    }\n\n    if (cellSlug) {\n      variables.cellSlug = cellSlug\n    }\n\n    return variables\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseMetaType}\n   */\n  createResponse (json) {\n    return new ResponseMetaType({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport Response from '../response/Response.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving Meta Asset information\n */\nexport default class QueryBatch extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $batchId: String ) {\n      Batch( batchId: $batchId ) {\n        ${ QueryBatch.getFields() },\n        children {\n          ${ QueryBatch.getFields() }\n        }\n      }\n    }`\n  }\n\n  static getFields () {\n    return `batchId,\n              molecularHash,\n              type,\n              status,\n              createdAt,\n              wallet {\n                  address,\n                  bundleHash,\n                  amount,\n                  tokenSlug,\n                  token {\n                      name,\n                      amount\n                  },\n                  tokenUnits {\n                      id,\n                      name,\n                      metas\n                  }\n              },\n              fromWallet {\n                  address,\n                  bundleHash,\n                  amount,\n                  batchId\n              },\n              toWallet {\n                  address,\n                  bundleHash,\n                  amount,\n                  batchId\n              },\n              sourceTokenUnits {\n                  id,\n                  name,\n                  metas\n              },\n              transferTokenUnits {\n                  id,\n                  name,\n                  metas\n              },\n              metas {\n                  key,\n                  value,\n              },\n              throughMetas {\n                  key,\n                  value\n              }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {Response}\n   */\n  createResponse (json) {\n    const responseObject = new Response({\n      query: this,\n      json\n    })\n    responseObject.dataKey = 'data.Batch'\n    return responseObject\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport QueryBatch from './QueryBatch.js'\nimport Response from '../response/Response.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving Meta Asset information\n */\nexport default class QueryBatchHistory extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $batchId: String ) {\n      BatchHistory( batchId: $batchId ) {\n        ${ QueryBatch.getFields() }\n      }\n    }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {Response}\n   */\n  createResponse (json) {\n    const responseObject = new Response({\n      query: this,\n      json\n    })\n    responseObject.dataKey = 'data.BatchHistory'\n    return responseObject\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Response from './Response.js'\nimport Dot from '../libraries/Dot.js'\nimport Molecule from '../Molecule.js'\n\n/**\n * Response for proposing new Molecules\n */\nexport default class ResponseProposeMolecule extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {MutationProposeMolecule} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.ProposeMolecule'\n    })\n    this.$__clientMolecule = query.molecule()\n  }\n\n  /**\n   * Initialize response object with payload data\n   */\n  init () {\n    const payloadJson = Dot.get(this.data(), 'payload')\n    try {\n      this.$__payload = Object.prototype.toString.call(payloadJson) === '[object String]'\n        ? JSON.parse(payloadJson)\n        : payloadJson\n    } catch (err) {\n      this.$__payload = null\n    }\n  }\n\n  /**\n   * Returns the client molecule\n   */\n  clientMolecule () {\n    return this.$__clientMolecule\n  }\n\n  /**\n   * Returns the resulting molecule\n   *\n   * @return {Molecule|null}\n   */\n  molecule () {\n    const data = this.data()\n\n    if (!data) {\n      return null\n    }\n\n    const molecule = new Molecule({})\n\n    molecule.molecularHash = Dot.get(data, 'molecularHash')\n    molecule.status = Dot.get(data, 'status')\n    molecule.createdAt = Dot.get(data, 'createdAt')\n\n    return molecule\n  }\n\n  /**\n   * Returns whether molecule was accepted or not\n   *\n   * @return {boolean}\n   */\n  success () {\n    return this.status() === 'accepted'\n  }\n\n  /**\n   * Returns the status of the proposal\n   *\n   * @return {string}\n   */\n  status () {\n    return Dot.get(this.data(), 'status', 'rejected')\n  }\n\n  /**\n   * Returns the reason for rejection\n   *\n   * @return {string}\n   */\n  reason () {\n    return Dot.get(this.data(), 'reason', 'Invalid response from server')\n  }\n\n  /**\n   * Returns payload object\n   *\n   * @return {null}\n   */\n  payload () {\n    return this.$__payload\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from '../response/Response.js'\n\n/**\n * Base class used to construct various GraphQL mutations\n */\nexport default class Mutation extends Query {\n  /**\n   * Creates a new Request for the given parameters\n   *\n   * @param {{}} variables\n   * @returns {{variables: (Object|null), query: null}}\n   */\n  createQuery ({ variables = null }) {\n    const request = super.createQuery({ variables })\n    request.mutation = request.query\n    delete request.query\n    return request\n  }\n\n  /**\n   * Sends the Mutation to a Knish.IO node and returns the Response\n   * @param {Object||null} variables\n   * @param {Object||null} context\n   * @returns {Promise<Response|null>}\n   */\n  async execute ({ variables = {}, context = {} }) {\n    this.$__request = this.createQuery({\n      variables\n    })\n\n    const mergedContext = {\n      ...context,\n      ...this.createQueryContext()\n    }\n\n    try {\n      const mutationParams = {\n        ...this.$__request,\n        context: mergedContext\n      }\n      const response = await this.client.mutate(mutationParams)\n\n      this.$__response = await this.createResponseRaw(response)\n\n      return this.$__response\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        this.knishIOClient.log('warn', 'Mutation was cancelled')\n        // You might want to create a custom response for cancelled mutations\n        return new Response({\n          query: this,\n          json: { data: null, errors: [{ message: 'Mutation was cancelled' }] }\n        })\n      } else {\n        throw error\n      }\n    }\n  }\n\n  createQueryContext () {\n    // Override this method in subclasses if needed\n    return {}\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from '../response/ResponseProposeMolecule.js'\nimport Mutation from './Mutation.js'\nimport { gql } from '@urql/core'\n\nexport default class MutationProposeMolecule extends Mutation {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   * @param molecule\n   */\n  constructor (graphQLClient, knishIOClient, molecule) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__molecule = molecule\n    this.$__remainderWallet = null\n    this.$__query = gql`mutation( $molecule: MoleculeInput! ) {\n      ProposeMolecule( molecule: $molecule ) {\n        molecularHash,\n        height,\n        depth,\n        status,\n        reason,\n        payload,\n        createdAt,\n        receivedAt,\n        processedAt,\n        broadcastedAt,\n      }\n    }`\n  }\n\n  /**\n   * Returns an object of query variables\n   *\n   * @param {object} variables\n   * @return {object}\n   */\n  compiledVariables (variables) {\n    const _variables = super.compiledVariables(variables)\n\n    return { ..._variables, ...{ molecule: this.molecule() } }\n  }\n\n  /**\n   * Creates a new response from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseProposeMolecule}\n   */\n  createResponse (json) {\n    return new ResponseProposeMolecule({\n      query: this,\n      json\n    })\n  }\n\n  /**\n   * Executes the query\n   *\n   * @param {object} variables\n   * @return {Promise}\n   */\n  async execute ({ variables = null }) {\n    variables = variables || {}\n    variables.molecule = this.molecule()\n\n    return super.execute({\n      variables\n    })\n  }\n\n  /**\n   * Returns the remainder wallet\n   *\n   * @return {null}\n   */\n  remainderWallet () {\n    return this.$__remainderWallet\n  }\n\n  /**\n   * Returns the molecule we are proposing\n   *\n   * @return {Molecule}\n   */\n  molecule () {\n    return this.$__molecule\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Dot from '../libraries/Dot.js'\nimport InvalidResponseException from '../exception/InvalidResponseException.js'\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for auth token mutation\n */\nexport default class ResponseRequestAuthorization extends ResponseProposeMolecule {\n  /**\n   * return the authorization key\n   *\n   * @param key\n   * @return {*}\n   */\n  payloadKey (key) {\n    if (!Dot.has(this.payload(), key)) {\n      throw new InvalidResponseException(`ResponseRequestAuthorization::payloadKey() - '${ key }' key was not found in the payload!`)\n    }\n    return Dot.get(this.payload(), key)\n  }\n\n  /**\n   * Returns the auth token\n   *\n   * @return {string}\n   */\n  token () {\n    return this.payloadKey('token')\n  }\n\n  /**\n   * Returns raw time value from payload\n   *\n   * @return {string}\n   */\n  time () {\n    return this.payloadKey('time')\n  }\n\n  /**\n   * Returns the expiration timestamp as Unix seconds.\n   * Handles both server formats:\n   * - PHP server: time = lifetime in ms, expiresAt = Unix timestamp in payload\n   * - Rust server: time = Unix timestamp in seconds\n   *\n   * @return {number}\n   */\n  expiresAt () {\n    // Try the explicit expiresAt payload key first (PHP server provides this)\n    try {\n      const ea = this.payloadKey('expiresAt')\n      if (ea) {\n        return Number(ea)\n      }\n    } catch (_e) {\n      // Not available in payload, fall back\n    }\n\n    // Use time field with heuristic detection\n    const timeValue = Number(this.time())\n\n    // If timeValue looks like a valid Unix timestamp (>= year 2020), use directly\n    // Rust server sets time = Unix timestamp in seconds\n    if (timeValue >= 1577836800) {\n      return timeValue\n    }\n\n    // Otherwise, time is a lifetime in milliseconds (PHP server format)\n    // Convert to Unix timestamp: now_seconds + lifetime_seconds\n    return Math.floor(Date.now() / 1000) + Math.floor(timeValue / 1000)\n  }\n\n  /**\n   *\n   * @return {string}\n   */\n  encrypt () {\n    return this.payloadKey('encrypt')\n  }\n\n  /**\n   *\n   * @return {string}\n   */\n  pubKey () {\n    return this.payloadKey('key')\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseRequestAuthorization from '../response/ResponseRequestAuthorization.js'\n\n/**\n * Query for requesting an authorization token from the node\n */\nexport default class MutationRequestAuthorization extends MutationProposeMolecule {\n  /**\n   *\n   * @param {object} meta\n   */\n  fillMolecule ({ meta }) {\n    this.$__molecule.initAuthorization({ meta })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseRequestAuthorization}\n   */\n  createResponse (json) {\n    return new ResponseRequestAuthorization({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for token creation\n */\nexport default class ResponseCreateToken extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseCreateToken from '../response/ResponseCreateToken.js'\n\n/**\n * Query for creating new Tokens\n */\nexport default class MutationCreateToken extends MutationProposeMolecule {\n  /**\n   * @param {Wallet|null} recipientWallet\n   * @param {number|null} amount\n   * @param {object|null} meta\n   */\n  fillMolecule ({\n    recipientWallet,\n    amount,\n    meta = null\n  }) {\n    this.$__molecule.initTokenCreation({\n      recipientWallet,\n      amount,\n      meta: meta || {}\n    })\n    this.$__molecule.sign({\n      bundle: recipientWallet.bundle\n    })\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a new Response object from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseCreateToken}\n   */\n  createResponse (json) {\n    return new ResponseCreateToken({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for identifier creation\n */\nexport default class ResponseRequestTokens extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseRequestTokens from '../response/ResponseRequestTokens.js'\n\nexport default class MutationRequestTokens extends MutationProposeMolecule {\n  /**\n   * Fills a Molecule with the appropriate atoms and prepares for broadcast\n   *\n   * @param {string} token\n   * @param {Number} amount\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {object} meta\n   * @param {string|null} batchId\n   */\n  fillMolecule ({\n    token,\n    amount,\n    metaType,\n    metaId,\n    meta = null,\n    batchId = null\n  }) {\n    this.$__molecule.initTokenRequest({\n      token,\n      amount,\n      metaType,\n      metaId,\n      meta: meta || {},\n      batchId\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseRequestTokens}\n   */\n  createResponse (json) {\n    return new ResponseRequestTokens({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for token transfer queries\n */\nexport default class ResponseTransferTokens extends ResponseProposeMolecule {\n  /**\n   * Returns result of the transfer\n   *\n   * @return {{reason: null, status: null}}\n   */\n  payload () {\n    const result = {\n      reason: null,\n      status: null\n    }\n    const data = this.data()\n\n    result.reason = typeof data.reason === 'undefined' ? 'Invalid response from server' : data.reason\n    result.status = typeof data.status === 'undefined' ? 'rejected' : data.status\n\n    return result\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseTransferTokens from '../response/ResponseTransferTokens.js'\n\n/**\n * Query for moving tokens between wallets\n */\nexport default class MutationTransferTokens extends MutationProposeMolecule {\n  /**\n   * Fills the Molecule with provided wallet and amount data\n   *\n   * @param recipientWallet\n   * @param amount\n   */\n  fillMolecule ({\n    recipientWallet,\n    amount\n  }) {\n    this.$__molecule.initValue({\n      recipientWallet,\n      amount\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check(this.$__molecule.sourceWallet)\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseTransferTokens}\n   */\n  createResponse (json) {\n    return new ResponseTransferTokens({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for identifier creation\n */\nexport default class ResponseCreateIdentifier extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseCreateIdentifier from '../response/ResponseCreateIdentifier.js'\n\n/**\n * Query for creating a new Identifier\n */\nexport default class MutationCreateIdentifier extends MutationProposeMolecule {\n  fillMolecule ({\n    type,\n    contact,\n    code\n  }) {\n    this.$__molecule.initIdentifierCreation({\n      type,\n      contact,\n      code\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseCreateIdentifier}\n   */\n  createResponse (json) {\n    return new ResponseCreateIdentifier({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for identifier creation\n */\nexport default class ResponseClaimShadowWallet extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport Wallet from '../Wallet.js'\nimport ResponseClaimShadowWallet from '../response/ResponseClaimShadowWallet.js'\n\n/**\n * Mutation for claiming a Shadow Wallet\n */\nexport default class MutationClaimShadowWallet extends MutationProposeMolecule {\n  /**\n   * Class constructor\n   *\n   * @param {string} token\n   * @param {string|null} batchId\n   */\n  fillMolecule ({\n    token,\n    batchId = null\n  }) {\n    const wallet = Wallet.create({\n      secret: this.$__molecule.secret,\n      bundle: this.$__molecule.bundle,\n      token,\n      batchId\n    })\n\n    this.$__molecule.initShadowWalletClaim(wallet)\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseClaimShadowWallet}\n   */\n  createResponse (json) {\n    return new ResponseClaimShadowWallet({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for token creation\n */\nexport default class ResponseCreateMeta extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseCreateMeta from '../response/ResponseCreateMeta.js'\n\n/**\n * Query for creating new Meta attached to some MetaType\n */\nexport default class MutationCreateMeta extends MutationProposeMolecule {\n  /**\n   * Fills a molecule with an appropriate metadata atom\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {array|object} meta\n   * @param {object} policy\n   */\n  fillMolecule ({\n    metaType,\n    metaId,\n    meta,\n    policy\n  }) {\n    this.$__molecule.initMeta({\n      meta,\n      metaType,\n      metaId,\n      policy\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a new Response object from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseCreateMeta}\n   */\n  createResponse (json) {\n    return new ResponseCreateMeta({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for peer registration via P-isotope\n */\nexport default class ResponsePeering extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponsePeering from '../response/ResponsePeering.js'\n\n/**\n * Mutation for registering a peer node via the P-isotope\n */\nexport default class MutationPeering extends MutationProposeMolecule {\n  /**\n   * Fills a molecule with a P-isotope peering atom\n   *\n   * @param {string} host\n   */\n  fillMolecule ({\n    host\n  }) {\n    this.$__molecule.initPeering({\n      host\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a new Response object from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponsePeering}\n   */\n  createResponse (json) {\n    return new ResponsePeering({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for append requests via A-isotope\n */\nexport default class ResponseAppendRequest extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseAppendRequest from '../response/ResponseAppendRequest.js'\n\n/**\n * Mutation for submitting an append request via the A-isotope\n */\nexport default class MutationAppendRequest extends MutationProposeMolecule {\n  /**\n   * Fills a molecule with an A-isotope append request atom\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {string} action\n   * @param {object} meta\n   */\n  fillMolecule ({\n    metaType,\n    metaId,\n    action,\n    meta = {}\n  }) {\n    this.$__molecule.initAppendRequest({\n      metaType,\n      metaId,\n      action,\n      meta\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a new Response object from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseAppendRequest}\n   */\n  createResponse (json) {\n    return new ResponseAppendRequest({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport Dot from '../libraries/Dot.js'\n\n/**\n * Response for mutation to create / link an Identifier to a Wallet Bundle\n */\nexport default class ResponseLinkIdentifier extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.LinkIdentifier'\n    })\n  }\n\n  /**\n   * Returns success status\n   *\n   * @return {*}\n   */\n  success () {\n    return Dot.get(this.data(), 'set')\n  }\n\n  /**\n   * Returns message\n   *\n   * @return {*}\n   */\n  message () {\n    return Dot.get(this.data(), 'message')\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Mutation from '../mutation/Mutation.js'\nimport ResponseLinkIdentifier from '../response/ResponseLinkIdentifier.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for linking an Identifier to a Wallet Bundle\n */\nexport default class MutationLinkIdentifier extends Mutation {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`mutation( $bundle: String!, $type: String!, $content: String! ) {\n      LinkIdentifier( bundle: $bundle, type: $type, content: $content ) {\n        type,\n        bundle,\n        content,\n        set,\n        message\n      }\n    }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseLinkIdentifier}\n   */\n  createResponse (json) {\n    return new ResponseLinkIdentifier({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for Wallet creation\n */\nexport default class ResponseCreateWallet extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseCreateWallet from '../response/ResponseCreateWallet.js'\n\n/**\n * Query for creating new Wallets\n */\nexport default class MutationCreateWallet extends MutationProposeMolecule {\n  fillMolecule (wallet) {\n    this.$__molecule.initWalletCreation(wallet)\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseCreateWallet}\n   */\n  createResponse (json) {\n    return new ResponseCreateWallet({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Response from './Response.js'\nimport Dot from '../libraries/Dot.js'\nimport InvalidResponseException from '../exception/InvalidResponseException.js'\n\n/**\n * Response for guest auth mutation\n */\nexport default class ResponseRequestAuthorizationGuest extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {MutationRequestAuthorizationGuest} query\n   * @param json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.AccessToken'\n    })\n  }\n\n  /**\n   * Returns the reason for rejection\n   *\n   * @return {string}\n   */\n  reason () {\n    return 'Invalid response from server'\n  }\n\n  /**\n   * Returns whether molecule was accepted or not\n   *\n   * @return {boolean}\n   */\n  success () {\n    return this.payload() !== null\n  }\n\n  /**\n   * Returns a wallet with balance\n   *\n   * @return {null|Wallet}\n   */\n  payload () {\n    return this.data()\n  }\n\n  /**\n   * Returns the authorization key\n   *\n   * @param key\n   * @return {*}\n   */\n  payloadKey (key) {\n    if (!Dot.has(this.payload(), key)) {\n      throw new InvalidResponseException(`ResponseAuthorizationGuest::payloadKey() - '${ key }' key is not found in the payload!`)\n    }\n    return Dot.get(this.payload(), key)\n  }\n\n  /**\n   * Returns the auth token\n   *\n   * @return {*}\n   */\n  token () {\n    return this.payloadKey('token')\n  }\n\n  /**\n   * Returns raw time value from payload\n   *\n   * @return {*}\n   */\n  time () {\n    return this.payloadKey('time')\n  }\n\n  /**\n   * Returns the expiration timestamp as Unix seconds.\n   * Handles both server formats:\n   * - PHP server: time = lifetime in ms, expiresAt = Unix timestamp in payload\n   * - Rust server: time = Unix timestamp in seconds\n   *\n   * @return {number}\n   */\n  expiresAt () {\n    // Try the explicit expiresAt payload key first (PHP server provides this)\n    try {\n      const ea = this.payloadKey('expiresAt')\n      if (ea) {\n        return Number(ea)\n      }\n    } catch (_e) {\n      // Not available in payload, fall back\n    }\n\n    // Use time field with heuristic detection\n    const timeValue = Number(this.time())\n\n    // If timeValue looks like a valid Unix timestamp (>= year 2020), use directly\n    if (timeValue >= 1577836800) {\n      return timeValue\n    }\n\n    // Otherwise, time is a lifetime in milliseconds (PHP server format)\n    return Math.floor(Date.now() / 1000) + Math.floor(timeValue / 1000)\n  }\n\n  /**\n   * Returns timestamp\n   *\n   * @return {string}\n   */\n  pubKey () {\n    return this.payloadKey('key')\n  }\n\n  /**\n   *\n   * @return {string}\n   */\n  encrypt () {\n    return this.payloadKey('encrypt')\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Mutation from '../mutation/Mutation.js'\nimport ResponseRequestAuthorizationGuest from '../response/ResponseRequestAuthorizationGuest.js'\nimport { gql } from '@urql/core'\n\nexport default class MutationRequestAuthorizationGuest extends Mutation {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`mutation( $cellSlug: String, $pubkey: String, $encrypt: Boolean ) {\n      AccessToken( cellSlug: $cellSlug, pubkey: $pubkey, encrypt: $encrypt ) {\n        token,\n        pubkey,\n        expiresAt\n      }\n    }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseRequestAuthorizationGuest}\n   */\n  createResponse (json) {\n    return new ResponseRequestAuthorizationGuest({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when failing to retrieve shadow wallets\n */\nexport default class WalletShadowException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'The shadow wallet does not exist', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'WalletShadowException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when a stackable token is being created with units and non-zero decimals\n */\nexport default class StackableUnitDecimalsException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Stackable tokens with unit IDs cannot have decimal places!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'StackableUnitDecimalsException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when a stackable token is being transferred with both unit IDs AND an amount specified (ambiguous)\n */\nexport default class StackableUnitAmountException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Stackable tokens with unit IDs cannot have an amount!', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'StackableUnitAmountException'\n  }\n}\n","import CodeException from '../exception/CodeException.js'\n\nexport default class Subscribe {\n  /**\n   *\n   * @param {UrqlClientWrapper} graphQLClient\n   */\n  constructor (graphQLClient) {\n    this.client = graphQLClient\n    this.$__variables = null\n    this.$__subscribe = null\n  }\n\n  /**\n   * Creates a new Request for the given parameters\n   *\n   * @param {{}} variables\n   * @returns {{variables: (Object|null), fetchPolicy: string, query: null}}\n   */\n  createSubscribe ({\n    variables = null\n  }) {\n    this.$__variables = this.compiledVariables(variables)\n\n    // Uri is a required parameter\n    const uri = this.uri()\n\n    if (!uri) {\n      throw new CodeException('Subscribe::createSubscribe() - Node URI was not initialized for this client instance!')\n    }\n\n    if (this.$__subscribe === null) {\n      throw new CodeException('Subscribe::createSubscribe() - GraphQL subscription was not initialized!')\n    }\n\n    return {\n      query: this.$__subscribe,\n      variables: this.variables(),\n      fetchPolicy: 'no-cache'\n    }\n  }\n\n  /**\n   * Sends the Query to a Knish.IO node and returns the Response\n   *\n   * @param {{}} variables\n   * @param {function} closure\n   * @return {string}\n   */\n  async execute ({\n    variables = null,\n    closure\n  }) {\n    if (!closure) {\n      throw new CodeException(`${ this.constructor.name }::execute() - closure parameter is required!`)\n    }\n\n    this.$__request = this.createSubscribe({\n      variables\n    })\n\n    return this.client.subscribe(this.$__request, closure)\n  }\n\n  /**\n   * Returns a variables object for the Query\n   *\n   * @param variables\n   * @return {object}\n   */\n  compiledVariables (variables = null) {\n    return variables || {}\n  }\n\n  /**\n   * Returns the Knish.IO endpoint URI\n   *\n   * @return {string}\n   */\n  uri () {\n    return this.client.getUri()\n  }\n\n  /**\n   * Returns the query variables object\n   *\n   * @return {object|null}\n   */\n  variables () {\n    return this.$__variables\n  }\n}\n","import Subscribe from './Subscribe.js'\nimport { gql } from '@urql/core'\n\nexport default class CreateMoleculeSubscribe extends Subscribe {\n  constructor (graphQLClient) {\n    super(graphQLClient)\n    this.$__subscribe = gql`\n      subscription onCreateMolecule ( $bundle: String! ) {\n        CreateMolecule( bundle: $bundle ) {\n          molecularHash,\n          cellSlug,\n          counterparty,\n          bundleHash,\n          status,\n          local,\n          height,\n          depth,\n          createdAt,\n          receivedAt,\n          processedAt,\n          broadcastedAt,\n          reason,\n          reasonPayload,\n          payload,\n          status,\n          atoms {\n            molecularHash,\n            position,\n            isotope,\n            walletAddress,\n            tokenSlug,\n            batchId,\n            value,\n            index,\n            metaType,\n            metaId,\n            metasJson,\n            otsFragment,\n            createdAt,\n            metas {\n              molecularHash,\n              position,\n              metaType,\n              metaId,\n              key,\n              value,\n              createdAt,\n            }\n          }\n        }\n      }\n    `\n  }\n}\n","import Subscribe from './Subscribe.js'\nimport { gql } from '@urql/core'\n\nexport default class WalletStatusSubscribe extends Subscribe {\n  constructor (graphQLClient) {\n    super(graphQLClient)\n    this.$__subscribe = gql`\n      subscription onWalletStatus ( $bundle: String!, $token: String! ) {\n        WalletStatus( bundle: $bundle, token: $token ) {\n          bundle,\n          token,\n          admission,\n          balance,\n        }\n      }\n    `\n  }\n}\n","import Subscribe from './Subscribe.js'\nimport { gql } from '@urql/core'\n\nexport default class ActiveWalletSubscribe extends Subscribe {\n  constructor (graphQLClient) {\n    super(graphQLClient)\n    this.$__subscribe = gql`\n      subscription onActiveWallet ( $bundle: String! ) {\n        ActiveWallet( bundle: $bundle ) {\n          address,\n          bundleHash,\n          walletBundle {\n            bundleHash,\n            slug,\n            createdAt,\n          },\n          tokenSlug,\n          token {\n            slug,\n            name,\n            fungibility,\n            supply,\n            decimals,\n            amount,\n            icon,\n            createdAt\n          },\n          batchId,\n          position,\n          characters,\n          pubkey,\n          amount,\n          createdAt,\n          metas {\n            molecularHash,\n            position,\n            metaType,\n            metaId,\n            key,\n            value,\n            createdAt,\n          }\n        }\n      }\n    `\n  }\n}\n","import Subscribe from './Subscribe.js'\nimport { gql } from '@urql/core'\n\nexport default class ActiveSessionSubscribe extends Subscribe {\n  constructor (graphQLClient) {\n    super(graphQLClient)\n    this.$__subscribe = gql`\n      subscription onActiveUser ( $metaType: String!, $metaId: String! ) {\n        ActiveUser( metaType: $metaType, metaId: $metaId ) {\n          bundleHash,\n          metaType,\n          metaId,\n          jsonData,\n          createdAt,\n          updatedAt\n        }\n      }`\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\nexport default class ResponseActiveSession extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.ActiveSession'\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Mutation from '../mutation/Mutation.js'\nimport ResponseActiveSession from '../response/ResponseActiveSession.js'\nimport { gql } from '@urql/core'\n\n/**\n * Mutation for declaring an active User Session with a given MetaAsset\n */\nexport default class MutationActiveSession extends Mutation {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`mutation(\n      $bundleHash: String!,\n      $metaType: String!,\n      $metaId: String!,\n      $ipAddress: String,\n      $browser: String,\n      $osCpu: String,\n      $resolution: String,\n      $timeZone: String,\n      $json: String ) {\n      ActiveSession(\n        bundleHash: $bundleHash,\n        metaType: $metaType,\n        metaId: $metaId,\n        ipAddress: $ipAddress,\n        browser: $browser,\n        osCpu: $osCpu,\n        resolution: $resolution,\n        timeZone: $timeZone,\n        json: $json\n      ) {\n        bundleHash,\n        metaType,\n        metaId,\n        jsonData,\n        createdAt,\n        updatedAt\n      }\n    }`\n  }\n\n  /**\n   * Builds a Response object out of a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseActiveSession}\n   */\n  createResponse (json) {\n    return new ResponseActiveSession({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\n/**\n * Response for QueryActiveSession\n */\nexport default class ResponseQueryActiveSession extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.ActiveUser'\n    })\n  }\n\n  payload () {\n    const list = this.data()\n\n    if (!list) {\n      return null\n    }\n\n    const activeUsers = []\n\n    for (const item of list) {\n      const activeSession = { ...item }\n\n      if (activeSession.jsonData) {\n        activeSession.jsonData = JSON.parse(activeSession.jsonData)\n      }\n\n      if (activeSession.createdAt) {\n        activeSession.createdAt = new Date(activeSession.createdAt)\n      }\n\n      if (activeSession.updatedAt) {\n        activeSession.updatedAt = new Date(activeSession.updatedAt)\n      }\n\n      activeUsers.push(activeSession)\n    }\n\n    return activeUsers\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseQueryActiveSession from '../response/ResponseQueryActiveSession.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving a list of active User Sessions\n */\nexport default class QueryActiveSession extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query ActiveUserQuery ($bundleHash:String, $metaType: String, $metaId: String) {\n      ActiveUser (bundleHash: $bundleHash, metaType: $metaType, metaId: $metaId) {\n        bundleHash,\n        metaType,\n        metaId,\n        jsonData,\n        createdAt,\n        updatedAt\n      }\n    }`\n  }\n\n  /**\n   * @param {object} json\n   * @return {ResponseQueryActiveSession}\n   */\n  createResponse (json) {\n    return new ResponseQueryActiveSession({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\nexport default class ResponseQueryUserActivity extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.UserActivity'\n    })\n  }\n\n  payload () {\n    const data = JSON.parse(JSON.stringify(this.data()))\n\n    if (data.instances) {\n      for (const datum of data.instances) {\n        datum.jsonData = JSON.parse(datum.jsonData)\n      }\n    }\n\n    return data\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseQueryUserActivity from '../response/ResponseQueryUserActivity.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving information about user activity\n */\nexport default class QueryUserActivity extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query UserActivity (\n      $bundleHash:String,\n      $metaType: String,\n      $metaId: String,\n      $ipAddress: String,\n      $browser: String,\n      $osCpu: String,\n      $resolution: String,\n      $timeZone: String,\n      $countBy: [CountByUserActivity],\n      $interval: span\n    ) {\n      UserActivity (\n        bundleHash: $bundleHash,\n        metaType: $metaType,\n        metaId: $metaId,\n        ipAddress: $ipAddress,\n        browser: $browser,\n        osCpu: $osCpu,\n        resolution: $resolution,\n        timeZone: $timeZone,\n        countBy: $countBy,\n        interval: $interval\n      ) {\n        createdAt,\n        bundleHash,\n        metaType,\n        metaId,\n        instances {\n          bundleHash,\n          metaType,\n          metaId,\n          jsonData,\n          createdAt,\n          updatedAt\n        },\n        instanceCount {\n          ...SubFields,\n          ...Recursive\n        }\n      }\n    }\n\n    fragment SubFields on InstanceCountType {\n      id,\n      count\n    }\n\n    fragment Recursive on InstanceCountType {\n      instances {\n        ...SubFields\n        instances {\n          ...SubFields,\n          instances {\n            ...SubFields\n            instances {\n              ...SubFields\n              instances {\n                ...SubFields\n                instances {\n                  ...SubFields\n                  instances {\n                    ...SubFields\n                    instances {\n                      ...SubFields\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseQueryUserActivity}\n   */\n  createResponse (json) {\n    return new ResponseQueryUserActivity({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport Response from '../response/Response.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for getting the token info\n */\nexport default class QueryToken extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $slug: String, $slugs: [ String! ], $limit: Int, $order: String ) {\n      Token( slug: $slug, slugs: $slugs, limit: $limit, order: $order ) {\n        slug,\n        name,\n        fungibility,\n        supply,\n        decimals,\n        amount,\n        icon,\n      }\n    }`\n  }\n\n  /**\n   *\n   * @param json\n   * @returns {Response}\n   */\n  createResponse (json) {\n    return new Response({\n      query: this,\n      json,\n      dataKey: 'data.Token'\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport BaseException from './BaseException.js'\n\n/**\n * Thrown when attempt to authorize is rejected by the node\n */\nexport default class AuthorizationRejectedException extends BaseException {\n  /**\n   * Class constructor\n   *\n   * @param {string} message\n   * @param {string|null} fileName\n   * @param {number|null} lineNumber\n   */\n  constructor (message = 'Authorization attempt rejected by ledger.', fileName = null, lineNumber = null) {\n    super(message, fileName, lineNumber)\n    this.name = 'AuthorizationRejectedException'\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\n/**\n * Response for MetaType Query\n */\nexport default class ResponseAtom extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.Atom'\n    })\n  }\n\n  /**\n   * Returns meta type instance results\n   *\n   * @return {null|*}\n   */\n  payload () {\n    const metaTypeData = this.data()\n\n    if (!metaTypeData) {\n      return null\n    }\n\n    const response = {\n      instances: [],\n      instanceCount: {},\n      paginatorInfo: {}\n    }\n\n    if (metaTypeData.instances) {\n      response.instances = metaTypeData.instances\n\n      for (const instanceKey in response.instances) {\n        const instance = response.instances[instanceKey]\n        if (instance.metasJson) {\n          response.instances[instanceKey].metas = JSON.parse(instance.metasJson)\n        }\n      }\n    }\n\n    if (metaTypeData.instanceCount) {\n      response.instanceCount = metaTypeData.instanceCount\n    }\n\n    if (metaTypeData.paginatorInfo) {\n      response.paginatorInfo = metaTypeData.paginatorInfo\n    }\n\n    return response\n  }\n\n  metas () {\n    const response = this.payload()\n    const metas = []\n\n    if (response && response.instances) {\n      for (const instance of response.instances) {\n        if (instance.metasJson) {\n          metas.push(JSON.parse(instance.metasJson))\n        }\n      }\n    }\n\n    return metas\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseAtom from '../response/ResponseAtom.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for getting the balance of a given wallet or token slug\n */\nexport default class QueryAtom extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query(\n      $molecularHashes: [String!],\n      $bundleHashes: [String!],\n      $positions:[String!],\n      $walletAddresses: [String!],\n      $isotopes: [String!],\n      $tokenSlugs: [String!],\n      $cellSlugs: [String!],\n      $batchIds: [String!],\n      $values: [String!],\n      $metaTypes: [String!],\n      $metaIds: [String!],\n      $indexes: [String!],\n      $filter: [ MetaFilter! ],\n      $latest: Boolean,\n      $queryArgs: QueryArgs,\n    ) {\n      Atom(\n        molecularHashes: $molecularHashes,\n        bundleHashes: $bundleHashes,\n        positions: $positions,\n        walletAddresses: $walletAddresses,\n        isotopes: $isotopes,\n        tokenSlugs: $tokenSlugs,\n        cellSlugs: $cellSlugs,\n        batchIds: $batchIds,\n        values: $values,\n        metaTypes: $metaTypes,\n        metaIds: $metaIds,\n        indexes: $indexes,\n        filter: $filter,\n        latest: $latest,\n        queryArgs: $queryArgs,\n      ) {\n        instances {\n          position,\n          walletAddress,\n          tokenSlug,\n          isotope,\n          index,\n          molecularHash,\n          metaId,\n          metaType,\n          metasJson,\n          batchId,\n          value,\n          bundleHashes,\n          cellSlugs,\n          createdAt,\n          otsFragment\n        },\n        paginatorInfo {\n          currentPage,\n          total\n        }\n      }\n    }`\n  }\n\n  /**\n   * Queries Knish.IO Atoms\n   *\n   * @param {string[]} molecularHashes\n   * @param {string} molecularHash\n   * @param {string[]} bundleHashes\n   * @param {string} bundleHash\n   * @param {string[]} positions\n   * @param {string} position\n   * @param {string[]} walletAddresses\n   * @param {string} walletAddress\n   * @param {string[]} isotopes\n   * @param {string} isotope\n   * @param {string[]} tokenSlugs\n   * @param {string} tokenSlug\n   * @param {string[]} cellSlugs\n   * @param {string} cellSlug\n   * @param {string[]} batchIds\n   * @param {string} batchId\n   * @param {string[]} values\n   * @param {string|number} value\n   * @param {string[]} metaTypes\n   * @param {string} metaType\n   * @param {string[]} metaIds\n   * @param {string} metaId\n   * @param {number[]} indexes\n   * @param {number} index\n   * @param {object[]} filter,\n   * @param {boolean} latest\n   * @param {object} queryArgs\n   * @return {object}\n   */\n  static createVariables ({\n    molecularHashes,\n    molecularHash,\n    bundleHashes,\n    bundleHash,\n    positions,\n    position,\n    walletAddresses,\n    walletAddress,\n    isotopes,\n    isotope,\n    tokenSlugs,\n    tokenSlug,\n    cellSlugs,\n    cellSlug,\n    batchIds,\n    batchId,\n    values,\n    value,\n    metaTypes,\n    metaType,\n    metaIds,\n    metaId,\n    indexes,\n    index,\n    filter,\n    latest,\n    queryArgs\n  }) {\n    if (molecularHash) {\n      molecularHashes = molecularHashes || []\n      molecularHashes.push(molecularHash)\n    }\n\n    if (bundleHash) {\n      bundleHashes = bundleHashes || []\n      bundleHashes.push(bundleHash)\n    }\n\n    if (position) {\n      positions = positions || []\n      positions.push(position)\n    }\n\n    if (walletAddress) {\n      walletAddresses = walletAddresses || []\n      walletAddresses.push(walletAddress)\n    }\n\n    if (isotope) {\n      isotopes = isotopes || []\n      isotopes.push(isotope)\n    }\n\n    if (tokenSlug) {\n      tokenSlugs = tokenSlugs || []\n      tokenSlugs.push(tokenSlug)\n    }\n\n    if (cellSlug) {\n      cellSlugs = cellSlugs || []\n      cellSlugs.push(cellSlug)\n    }\n\n    if (batchId) {\n      batchIds = batchIds || []\n      batchIds.push(batchId)\n    }\n\n    if (value) {\n      values = values || []\n      values.push(value)\n    }\n\n    if (metaType) {\n      metaTypes = metaTypes || []\n      metaTypes.push(metaType)\n    }\n\n    if (metaId) {\n      metaIds = metaIds || []\n      metaIds.push(metaId)\n    }\n\n    if (index) {\n      indexes = indexes || []\n      indexes.push(index)\n    }\n\n    return {\n      molecularHashes,\n      bundleHashes,\n      positions,\n      walletAddresses,\n      isotopes,\n      tokenSlugs,\n      cellSlugs,\n      batchIds,\n      values,\n      metaTypes,\n      metaIds,\n      indexes,\n      filter,\n      latest,\n      queryArgs\n    }\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseAtom}\n   */\n  createResponse (json) {\n    return new ResponseAtom({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\nexport default class ResponsePolicy extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json\n    })\n    this.dataKey = 'data.Policy'\n    this.init()\n  }\n\n  /**\n   *\n   * @returns {null|object}\n   */\n  payload () {\n    const policy = this.data()\n\n    if (!policy) {\n      return null\n    }\n\n    if (policy.callback) {\n      return JSON.parse(policy.callback)\n    }\n\n    return null\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from './Query.js'\nimport ResponsePolicy from '../response/ResponsePolicy.js'\nimport { gql } from \"@urql/core\";\n\nexport default class QueryPolicy extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query( $metaType: String, $metaId: String, ) {\n      Policy( metaType: $metaType, metaId: $metaId ) {\n        molecularHash,\n        position,\n        metaType,\n        metaId,\n        conditions,\n        callback,\n        rule,\n        createdAt\n      }\n    }`\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponsePolicy}\n   */\n  createResponse (json) {\n    return new ResponsePolicy({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\n\nexport default class ResponseMetaTypeViaAtom extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.MetaTypeViaAtom'\n    })\n  }\n\n  payload () {\n    const metaTypeData = this.data()\n\n    if (!metaTypeData || metaTypeData.length === 0) {\n      return null\n    }\n\n    const response = {\n      instances: {},\n      instanceCount: {},\n      paginatorInfo: {}\n    }\n\n    const metaData = metaTypeData.pop()\n\n    if (metaData.instances) {\n      response.instances = metaData.instances\n    }\n\n    if (metaData.instanceCount) {\n      response.instanceCount = metaData.instanceCount\n    }\n\n    if (metaData.paginatorInfo) {\n      response.paginatorInfo = metaData.paginatorInfo\n    }\n\n    return response\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseMetaTypeViaAtom from '../response/ResponseMetaTypeViaAtom.js'\nimport { gql } from '@urql/core'\n\nexport default class QueryMetaTypeViaAtom extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query ($metaTypes: [String!], $metaIds: [String!], $values: [String!], $keys: [String!], $latest: Boolean, $filter: [MetaFilter!], $queryArgs: QueryArgs, $countBy: String, $atomValues: [String!], $cellSlugs: [String!] ) {\n      MetaTypeViaAtom(\n        metaTypes: $metaTypes\n        metaIds: $metaIds\n        atomValues: $atomValues\n        cellSlugs: $cellSlugs\n        filter: $filter,\n        latest: $latest,\n        queryArgs: $queryArgs\n        countBy: $countBy\n      ) {\n        metaType,\n        instanceCount {\n          key,\n          value\n        },\n        instances {\n          metaType,\n          metaId,\n          createdAt,\n          metas( values: $values, keys: $keys ) {\n            molecularHash,\n            position,\n            key,\n            value,\n            createdAt\n          }\n        },\n        paginatorInfo {\n          currentPage,\n          total\n        }\n      }\n    }`\n  }\n\n  /**\n   * Builds a GraphQL-friendly variables object based on input fields\n   *\n   * @param {string|array|null} metaType\n   * @param {string|array|null} metaId\n   * @param {string|null} key\n   * @param {string|null} value\n   * @param {array|null} values\n   * @param {array|null} keys\n   * @param {array|null} atomValues\n   * @param {boolean|null} latest\n   * @param {array|null} filter\n   * @param {object|null} queryArgs\n   * @param {string|null} countBy\n   * @param {string|null} cellSlug\n   * @return {{}}\n   */\n  static createVariables ({\n    metaType = null,\n    metaId = null,\n    key = null,\n    value = null,\n    keys = null,\n    values = null,\n    atomValues = null,\n    latest = null,\n    filter = null,\n    queryArgs = null,\n    countBy = null,\n    cellSlug = null\n  }) {\n    const variables = {}\n\n    if (atomValues) {\n      variables.atomValues = atomValues\n    }\n\n    if (keys) {\n      variables.keys = keys\n    }\n\n    if (values) {\n      variables.values = values\n    }\n\n    if (metaType) {\n      variables.metaTypes = typeof metaType === 'string' ? [metaType] : metaType\n    }\n\n    if (metaId) {\n      variables.metaIds = typeof metaId === 'string' ? [metaId] : metaId\n    }\n\n    if (cellSlug) {\n      variables.cellSlugs = typeof cellSlug === 'string' ? [cellSlug] : cellSlug\n    }\n\n    if (countBy) {\n      variables.countBy = countBy\n    }\n\n    if (filter) {\n      variables.filter = filter\n    }\n\n    if (key && value) {\n      variables.filter = variables.filter || []\n      variables.filter.push({\n        key,\n        value,\n        comparison: '='\n      })\n    }\n\n    variables.latest = latest === true\n\n    if (queryArgs) {\n      if (typeof queryArgs.limit === 'undefined' || queryArgs.limit === 0) {\n        queryArgs.limit = '*'\n      }\n\n      variables.queryArgs = queryArgs\n    }\n\n    return variables\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseMetaTypeViaAtom}\n   */\n  createResponse (json) {\n    return new ResponseMetaTypeViaAtom({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (//////////////)\n                       (////////////////(               (///////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport CheckMolecule from '../libraries/CheckMolecule.js'\n\n/**\n * Response for MetaType queries via Molecule data.\n *\n * Instead of using the redundant instance-level `metas` field,\n * this response extracts metadata from molecule atoms' `metasJson`,\n * producing a payload format compatible with ResponseMetaType and\n * ResponseMetaTypeViaAtom for drop-in replacement usage.\n */\nexport default class ResponseMetaTypeViaMolecule extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.MetaTypeViaAtom'\n    })\n  }\n\n  /**\n   * Extracts metas from a molecule's atoms' metasJson for a specific instance.\n   * Filters atoms by matching metaType and metaId, then parses metasJson.\n   *\n   * @param {object} molecule - Molecule data with atoms array\n   * @param {string} metaType - Instance meta type to filter by\n   * @param {string} metaId - Instance meta ID to filter by\n   * @return {Array<{molecularHash: string, position: string, key: string, value: string, createdAt: string}>}\n   */\n  static extractMetasFromMolecule (molecule, metaType, metaId) {\n    if (!molecule || !molecule.atoms) {\n      return []\n    }\n\n    const metas = []\n\n    for (const atom of molecule.atoms) {\n      // Filter atoms to those matching this instance's metaType and metaId\n      if (atom.metaType !== metaType || atom.metaId !== metaId) {\n        continue\n      }\n\n      if (!atom.metasJson) {\n        continue\n      }\n\n      let parsed\n      try {\n        parsed = JSON.parse(atom.metasJson)\n        if (!Array.isArray(parsed)) {\n          continue\n        }\n      } catch (e) {\n        continue\n      }\n\n      for (const entry of parsed) {\n        metas.push({\n          molecularHash: molecule.molecularHash,\n          position: atom.position,\n          key: entry.key,\n          value: entry.value,\n          createdAt: atom.createdAt\n        })\n      }\n    }\n\n    return metas\n  }\n\n  /**\n   * Returns meta type instance results with metas synthesized from molecule data.\n   * Produces the same payload format as ResponseMetaType and ResponseMetaTypeViaAtom:\n   * { instances, instanceCount, paginatorInfo }\n   *\n   * @return {null|{instances: Array, instanceCount: Array, paginatorInfo: object}}\n   */\n  payload () {\n    const metaTypeData = this.data()\n\n    if (!metaTypeData || metaTypeData.length === 0) {\n      return null\n    }\n\n    const response = {\n      instances: {},\n      instanceCount: {},\n      paginatorInfo: {}\n    }\n\n    const metaData = metaTypeData.pop()\n\n    if (metaData.instances) {\n      response.instances = metaData.instances.map(instance => {\n        // Prefer server-filtered metas (from metas sub-field) when available\n        let metas = instance.metas\n        if (!metas || metas.length === 0) {\n          // Fallback: synthesize from molecule atoms' metasJson\n          metas = ResponseMetaTypeViaMolecule.extractMetasFromMolecule(\n            instance.molecule,\n            instance.metaType,\n            instance.metaId\n          )\n        }\n\n        return {\n          ...instance,\n          metas\n        }\n      })\n    }\n\n    if (metaData.instanceCount) {\n      response.instanceCount = metaData.instanceCount\n    }\n\n    if (metaData.paginatorInfo) {\n      response.paginatorInfo = metaData.paginatorInfo\n    }\n\n    return response\n  }\n\n  /**\n   * Verifies the cryptographic integrity of all molecules associated\n   * with meta instances in this response. For each instance, reconstructs\n   * the molecule from server data and runs CheckMolecule.verify() to validate\n   * the molecular hash and OTS signature.\n   *\n   * @return {{ verified: boolean, molecules: Array<{ molecularHash: string, verified: boolean, error: string|null }> }}\n   */\n  verifyIntegrity () {\n    const results = []\n    const metaTypeData = this.data()\n\n    if (!metaTypeData || metaTypeData.length === 0) {\n      return { verified: true, molecules: results }\n    }\n\n    const instances = metaTypeData[metaTypeData.length - 1]?.instances || []\n\n    for (const instance of instances) {\n      if (!instance.molecule) continue\n      results.push(CheckMolecule.verifyFromServerData(instance.molecule))\n    }\n\n    return {\n      verified: results.length === 0 || results.every(r => r.verified),\n      molecules: results\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (//////////////)\n                       (////////////////(               (///////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport Query from './Query.js'\nimport ResponseMetaTypeViaMolecule from '../response/ResponseMetaTypeViaMolecule.js'\nimport { gql } from '@urql/core'\n\n/**\n * Query for retrieving Meta Asset information via Molecule data.\n *\n * Unlike QueryMetaTypeViaAtom, this query does NOT request the redundant\n * instance-level `metas` field. Instead, metadata is extracted client-side\n * from molecule atoms' `metasJson`, eliminating duplicate data transfer.\n */\nexport default class QueryMetaTypeViaMolecule extends Query {\n  /**\n   * @param {UrqlClientWrapper} graphQLClient\n   * @param {KnishIOClient} knishIOClient\n   */\n  constructor (graphQLClient, knishIOClient) {\n    super(graphQLClient, knishIOClient)\n\n    this.$__query = gql`query ($metaTypes: [String!], $metaIds: [String!], $values: [String!], $keys: [String!], $latest: Boolean, $filter: [MetaFilter!], $queryArgs: QueryArgs, $countBy: String, $atomValues: [String!], $cellSlugs: [String!] ) {\n      MetaTypeViaAtom(\n        metaTypes: $metaTypes\n        metaIds: $metaIds\n        atomValues: $atomValues\n        cellSlugs: $cellSlugs\n        filter: $filter,\n        latest: $latest,\n        queryArgs: $queryArgs\n        countBy: $countBy\n      ) {\n        metaType,\n        instanceCount {\n          key,\n          value\n        },\n        instances {\n          metaType,\n          metaId,\n          createdAt,\n          metas( values: $values, keys: $keys ) {\n            molecularHash,\n            position,\n            key,\n            value,\n            createdAt\n          },\n          molecule {\n            molecularHash,\n            bundleHash,\n            cellSlug,\n            status,\n            createdAt,\n            atoms {\n              position,\n              walletAddress,\n              isotope,\n              tokenSlug,\n              value,\n              batchId,\n              metaType,\n              metaId,\n              index,\n              createdAt,\n              otsFragment,\n              metasJson\n            }\n          }\n        },\n        paginatorInfo {\n          currentPage,\n          total\n        }\n      }\n    }`\n  }\n\n  /**\n   * Builds a GraphQL-friendly variables object based on input fields\n   *\n   * @param {string|array|null} metaType\n   * @param {string|array|null} metaId\n   * @param {string|null} key\n   * @param {string|null} value\n   * @param {array|null} values\n   * @param {array|null} keys\n   * @param {array|null} atomValues\n   * @param {boolean|null} latest\n   * @param {array|null} filter\n   * @param {object|null} queryArgs\n   * @param {string|null} countBy\n   * @param {string|null} cellSlug\n   * @return {{}}\n   */\n  static createVariables ({\n    metaType = null,\n    metaId = null,\n    key = null,\n    value = null,\n    keys = null,\n    values = null,\n    atomValues = null,\n    latest = null,\n    filter = null,\n    queryArgs = null,\n    countBy = null,\n    cellSlug = null\n  }) {\n    const variables = {}\n\n    if (atomValues) {\n      variables.atomValues = atomValues\n    }\n\n    if (keys) {\n      variables.keys = keys\n    }\n\n    if (values) {\n      variables.values = values\n    }\n\n    if (metaType) {\n      variables.metaTypes = typeof metaType === 'string' ? [metaType] : metaType\n    }\n\n    if (metaId) {\n      variables.metaIds = typeof metaId === 'string' ? [metaId] : metaId\n    }\n\n    if (cellSlug) {\n      variables.cellSlugs = typeof cellSlug === 'string' ? [cellSlug] : cellSlug\n    }\n\n    if (countBy) {\n      variables.countBy = countBy\n    }\n\n    if (filter) {\n      variables.filter = filter\n    }\n\n    if (key && value) {\n      variables.filter = variables.filter || []\n      variables.filter.push({\n        key,\n        value,\n        comparison: '='\n      })\n    }\n\n    variables.latest = latest === true\n\n    if (queryArgs) {\n      if (typeof queryArgs.limit === 'undefined' || queryArgs.limit === 0) {\n        queryArgs.limit = '*'\n      }\n\n      variables.queryArgs = queryArgs\n    }\n\n    return variables\n  }\n\n  /**\n   * Returns a Response object\n   *\n   * @param {object} json\n   * @return {ResponseMetaTypeViaMolecule}\n   */\n  createResponse (json) {\n    return new ResponseMetaTypeViaMolecule({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport ResponseProposeMolecule from './ResponseProposeMolecule.js'\n\n/**\n * Response for rule creation\n */\nexport default class ResponseCreateRule extends ResponseProposeMolecule {\n\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\nimport ResponseCreateRule from '../response/ResponseCreateRule.js'\n\n/**\n * Query for creating new Meta attached to some MetaType\n */\nexport default class MutationCreateRule extends MutationProposeMolecule {\n  /**\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {object[]} rule\n   * @param {object} policy\n   */\n  fillMolecule ({\n    metaType,\n    metaId,\n    rule,\n    policy\n  }) {\n    this.$__molecule.createRule({\n      metaType,\n      metaId,\n      rule,\n      policy\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check()\n  }\n\n  /**\n   * Builds a new Response object from a JSON string\n   *\n   * @param {object} json\n   * @return {ResponseCreateRule}\n   */\n  createResponse (json) {\n    return new ResponseCreateRule({\n      query: this,\n      json\n    })\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\n\n/**\n *\n */\nexport default class MutationDepositBufferToken extends MutationProposeMolecule {\n  /**\n   * Fills the Molecule with provided wallet and amount data\n   *\n   * @param amount\n   * @param tradeRates\n   */\n  fillMolecule ({\n    amount,\n    tradeRates\n  }) {\n    this.$__molecule.initDepositBuffer({\n      amount,\n      tradeRates\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check(this.$__molecule.sourceWallet)\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\nimport MutationProposeMolecule from './MutationProposeMolecule.js'\n\n/**\n *\n */\nexport default class MutationWithdrawBufferToken extends MutationProposeMolecule {\n  /**\n   *\n   * @param recipients\n   * @param signingWallet\n   */\n  fillMolecule ({\n    recipients,\n    signingWallet\n  }) {\n    this.$__molecule.initWithdrawBuffer({\n      recipients,\n      signingWallet\n    })\n    this.$__molecule.sign({})\n    this.$__molecule.check(this.$__molecule.sourceWallet)\n  }\n}\n","function e(e,n,r,t){return new(r||(r=Promise))((function(o,a){function i(e){try{c(t.next(e))}catch(e){a(e)}}function u(e){try{c(t.throw(e))}catch(e){a(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,u)}c((t=t.apply(e,n||[])).next())}))}function n(e,n){var r,t,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},\"function\"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(r)throw new TypeError(\"Generator is already executing.\");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(r=1,t&&(o=2&u[0]?t.return:u[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,u[1])).done)return o;switch(t=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,t=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=n.call(e,i)}catch(e){u=[6,e],t=0}finally{r=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}\"function\"==typeof SuppressedError&&SuppressedError;var r={exclude:[],include:[],logging:!0};function t(e,n){if(![\"include\",\"exclude\",\"permissions_to_check\",\"retries\",\"timeout\",\"logging\"].includes(e))throw new Error(\"Unknown option \"+e);if([\"include\",\"exclude\",\"permissions_to_check\"].includes(e)&&(!Array.isArray(n)||!n.every((function(e){return\"string\"==typeof e}))))throw new Error(\"The value of the include, exclude and permissions_to_check must be an array of strings\");if([\"retries\",\"timeout\"].includes(e)&&\"number\"!=typeof n)throw new Error(\"The value of retries must be a number\");r[e]=n}var o={},a={timeout:\"true\"},i=function(e,n){\"undefined\"!=typeof window&&(o[e]=n)},u=function(){return Object.fromEntries(Object.entries(o).filter((function(e){var n,t=e[0];return!(null===(n=null==r?void 0:r.exclude)||void 0===n?void 0:n.includes(t))})).filter((function(e){var n,t,o,a,i=e[0];return(null===(n=null==r?void 0:r.include)||void 0===n?void 0:n.some((function(e){return e.includes(\".\")})))?null===(t=null==r?void 0:r.include)||void 0===t?void 0:t.some((function(e){return e.startsWith(i)})):0===(null===(o=null==r?void 0:r.include)||void 0===o?void 0:o.length)||(null===(a=null==r?void 0:r.include)||void 0===a?void 0:a.includes(i))})).map((function(e){return[e[0],(0,e[1])()]})))};function c(e){return e^=e>>>16,e=Math.imul(e,2246822507),e^=e>>>13,e=Math.imul(e,3266489909),(e^=e>>>16)>>>0}var s=new Uint32Array([597399067,2869860233,951274213,2716044179]);function l(e,n){return e<<n|e>>>32-n}function d(e,n){var r;if(void 0===n&&(n=0),n=n?0|n:0,\"string\"==typeof e&&(r=e,e=(new TextEncoder).encode(r).buffer),!(e instanceof ArrayBuffer))throw new TypeError(\"Expected key to be ArrayBuffer or string\");var t=new Uint32Array([n,n,n,n]);!function(e,n){for(var r=e.byteLength/16|0,t=new Uint32Array(e,0,4*r),o=0;o<r;o++){var a=t.subarray(4*o,4*(o+1));a[0]=Math.imul(a[0],s[0]),a[0]=l(a[0],15),a[0]=Math.imul(a[0],s[1]),n[0]=n[0]^a[0],n[0]=l(n[0],19),n[0]=n[0]+n[1],n[0]=Math.imul(n[0],5)+1444728091,a[1]=Math.imul(a[1],s[1]),a[1]=l(a[1],16),a[1]=Math.imul(a[1],s[2]),n[1]=n[1]^a[1],n[1]=l(n[1],17),n[1]=n[1]+n[2],n[1]=Math.imul(n[1],5)+197830471,a[2]=Math.imul(a[2],s[2]),a[2]=l(a[2],17),a[2]=Math.imul(a[2],s[3]),n[2]=n[2]^a[2],n[2]=l(n[2],15),n[2]=n[2]+n[3],n[2]=Math.imul(n[2],5)+2530024501,a[3]=Math.imul(a[3],s[3]),a[3]=l(a[3],18),a[3]=Math.imul(a[3],s[0]),n[3]=n[3]^a[3],n[3]=l(n[3],13),n[3]=n[3]+n[0],n[3]=Math.imul(n[3],5)+850148119}}(e,t),function(e,n){var r=e.byteLength/16|0,t=e.byteLength%16,o=new Uint32Array(4),a=new Uint8Array(e,16*r,t);switch(t){case 15:o[3]=o[3]^a[14]<<16;case 14:o[3]=o[3]^a[13]<<8;case 13:o[3]=o[3]^a[12]<<0,o[3]=Math.imul(o[3],s[3]),o[3]=l(o[3],18),o[3]=Math.imul(o[3],s[0]),n[3]=n[3]^o[3];case 12:o[2]=o[2]^a[11]<<24;case 11:o[2]=o[2]^a[10]<<16;case 10:o[2]=o[2]^a[9]<<8;case 9:o[2]=o[2]^a[8]<<0,o[2]=Math.imul(o[2],s[2]),o[2]=l(o[2],17),o[2]=Math.imul(o[2],s[3]),n[2]=n[2]^o[2];case 8:o[1]=o[1]^a[7]<<24;case 7:o[1]=o[1]^a[6]<<16;case 6:o[1]=o[1]^a[5]<<8;case 5:o[1]=o[1]^a[4]<<0,o[1]=Math.imul(o[1],s[1]),o[1]=l(o[1],16),o[1]=Math.imul(o[1],s[2]),n[1]=n[1]^o[1];case 4:o[0]=o[0]^a[3]<<24;case 3:o[0]=o[0]^a[2]<<16;case 2:o[0]=o[0]^a[1]<<8;case 1:o[0]=o[0]^a[0]<<0,o[0]=Math.imul(o[0],s[0]),o[0]=l(o[0],15),o[0]=Math.imul(o[0],s[1]),n[0]=n[0]^o[0]}}(e,t),function(e,n){n[0]=n[0]^e.byteLength,n[1]=n[1]^e.byteLength,n[2]=n[2]^e.byteLength,n[3]=n[3]^e.byteLength,n[0]=n[0]+n[1]|0,n[0]=n[0]+n[2]|0,n[0]=n[0]+n[3]|0,n[1]=n[1]+n[0]|0,n[2]=n[2]+n[0]|0,n[3]=n[3]+n[0]|0,n[0]=c(n[0]),n[1]=c(n[1]),n[2]=c(n[2]),n[3]=c(n[3]),n[0]=n[0]+n[1]|0,n[0]=n[0]+n[2]|0,n[0]=n[0]+n[3]|0,n[1]=n[1]+n[0]|0,n[2]=n[2]+n[0]|0,n[3]=n[3]+n[0]|0}(e,t);var o=new Uint8Array(t.buffer);return Array.from(o).map((function(e){return e.toString(16).padStart(2,\"0\")})).join(\"\")}function f(e,n){return new Promise((function(r){setTimeout((function(){return r(n)}),e)}))}function h(e,n,r){return Promise.all(e.map((function(e){var t=performance.now();return Promise.race([e.then((function(e){return{value:e,elapsed:performance.now()-t}})),f(n,r).then((function(e){return{value:e,elapsed:performance.now()-t}}))])})))}function m(e,n,r){return Promise.all(e.map((function(e){return Promise.race([e,f(n,r)])})))}var v=\"0.19.1\";function g(){return v}function p(){return e(this,void 0,void 0,(function(){var e,t,o,i,c;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=u(),t=Object.keys(e),[4,m(Object.values(e),(null==r?void 0:r.timeout)||1e3,a)];case 1:return o=n.sent(),i=o.filter((function(e){return void 0!==e})),c={},i.forEach((function(e,n){c[t[n]]=e})),[2,w(c,r.exclude||[],r.include||[],\"\")];case 2:throw n.sent();case 3:return[2]}}))}))}function w(e,n,r,t){void 0===t&&(t=\"\");for(var o={},a=function(e,a){var i=t+e+\".\";if(\"object\"!=typeof a||Array.isArray(a)){var u=n.some((function(e){return i.startsWith(e)})),c=r.some((function(e){return i.startsWith(e)}));u&&!c||(o[e]=a)}else{var s=w(a,n,r,i);Object.keys(s).length>0&&(o[e]=s)}},i=0,u=Object.entries(e);i<u.length;i++){var c=u[i];a(c[0],c[1])}return o}function y(t){return e(this,void 0,void 0,(function(){var o,a;return n(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,p()];case 1:return o=i.sent(),a=d(JSON.stringify(o)),Math.random()<.001&&r.logging&&function(r,t){e(this,void 0,void 0,(function(){var e,o;return n(this,(function(n){switch(n.label){case 0:if(e=\"https://logging.thumbmarkjs.com/v1/log\",o={thumbmark:r,components:t,version:g()},sessionStorage.getItem(\"_tmjs_l\"))return[3,4];sessionStorage.setItem(\"_tmjs_l\",\"1\"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fetch(e,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(o)})];case 2:case 3:return n.sent(),[3,4];case 4:return[2]}}))}))}(a,o),t?[2,{hash:a.toString(),data:o}]:[2,a.toString()];case 2:throw i.sent();case 3:return[2]}}))}))}function b(){return e(this,void 0,void 0,(function(){var e,t,o,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=u(),t=Object.keys(e),[4,h(Object.values(e),(null==r?void 0:r.timeout)||1e3,a)];case 1:return o=n.sent(),i={elapsed:{}},o.forEach((function(e,n){i[t[n]]=e.value,i.elapsed[t[n]]=e.elapsed})),[2,i];case 2:throw n.sent();case 3:return[2]}}))}))}function S(e){for(var n=0,r=0;r<e.length;++r)n+=Math.abs(e[r]);return n}function M(e,n,r){for(var t=[],o=0;o<e[0].data.length;o++){for(var a=[],i=0;i<e.length;i++)a.push(e[i].data[o]);t.push(E(a))}var u=new Uint8ClampedArray(t);return new ImageData(u,n,r)}function E(e){if(0===e.length)return 0;for(var n={},r=0,t=e;r<t.length;r++){n[a=t[r]]=(n[a]||0)+1}var o=e[0];for(var a in n)n[a]>n[o]&&(o=parseInt(a,10));return o}function P(){if(\"undefined\"==typeof navigator)return{name:\"unknown\",version:\"unknown\"};for(var e=navigator.userAgent,n={Edg:\"Edge\",OPR:\"Opera\"},r=0,t=[/(?<name>Edge|Edg)\\/(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\\/(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\\/(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>Safari)\\/(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>[A-Za-z]+)\\/(?<version>\\d+(?:\\.\\d+)?)/,/(?<name>SamsungBrowser)\\/(?<version>\\d+(?:\\.\\d+)?)/];r<t.length;r++){var o=t[r],a=e.match(o);if(a&&a.groups)return{name:n[a.groups.name]||a.groups.name,version:a.groups.version}}return{name:\"unknown\",version:\"unknown\"}}i(\"audio\",(function(){return e(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e,n){try{var r=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),t=r.createBufferSource(),o=r.createOscillator();o.frequency.value=1e3;var a,i=r.createDynamicsCompressor();i.threshold.value=-50,i.knee.value=40,i.ratio.value=12,i.attack.value=0,i.release.value=.2,o.connect(i),i.connect(r.destination),o.start(),r.oncomplete=function(n){a=n.renderedBuffer.getChannelData(0),e({sampleHash:S(a),oscillator:o.type,maxChannels:r.destination.maxChannelCount,channelCountMode:t.channelCountMode})},r.startRendering()}catch(e){console.error(\"Error creating audio fingerprint:\",e),n(e)}}))]}))}))}));var A=\"SamsungBrowser\"!==P().name?1:3,C=280,x=20;\"Firefox\"!=P().name&&i(\"canvas\",(function(){return document.createElement(\"canvas\").getContext(\"2d\"),new Promise((function(e){var n=Array.from({length:A},(function(){return function(){var e=document.createElement(\"canvas\"),n=e.getContext(\"2d\");if(!n)return new ImageData(1,1);e.width=C,e.height=x;var r=n.createLinearGradient(0,0,e.width,e.height);r.addColorStop(0,\"red\"),r.addColorStop(1/6,\"orange\"),r.addColorStop(2/6,\"yellow\"),r.addColorStop(.5,\"green\"),r.addColorStop(4/6,\"blue\"),r.addColorStop(5/6,\"indigo\"),r.addColorStop(1,\"violet\"),n.fillStyle=r,n.fillRect(0,0,e.width,e.height);var t=\"Random Text WMwmil10Oo\";n.font=\"23.123px Arial\",n.fillStyle=\"black\",n.fillText(t,-5,15),n.fillStyle=\"rgba(0, 0, 255, 0.5)\",n.fillText(t,-3.3,17.7),n.beginPath(),n.moveTo(0,0),n.lineTo(2*e.width/7,e.height),n.strokeStyle=\"white\",n.lineWidth=2,n.stroke();var o=n.getImageData(0,0,e.width,e.height);return o}()}));e({commonImageDataHash:d(M(n,C,x).data.toString()).toString()})}))}));var T,k=[\"Arial\",\"Arial Black\",\"Arial Narrow\",\"Arial Rounded MT\",\"Arimo\",\"Archivo\",\"Barlow\",\"Bebas Neue\",\"Bitter\",\"Bookman\",\"Calibri\",\"Cabin\",\"Candara\",\"Century\",\"Century Gothic\",\"Comic Sans MS\",\"Constantia\",\"Courier\",\"Courier New\",\"Crimson Text\",\"DM Mono\",\"DM Sans\",\"DM Serif Display\",\"DM Serif Text\",\"Dosis\",\"Droid Sans\",\"Exo\",\"Fira Code\",\"Fira Sans\",\"Franklin Gothic Medium\",\"Garamond\",\"Geneva\",\"Georgia\",\"Gill Sans\",\"Helvetica\",\"Impact\",\"Inconsolata\",\"Indie Flower\",\"Inter\",\"Josefin Sans\",\"Karla\",\"Lato\",\"Lexend\",\"Lucida Bright\",\"Lucida Console\",\"Lucida Sans Unicode\",\"Manrope\",\"Merriweather\",\"Merriweather Sans\",\"Montserrat\",\"Myriad\",\"Noto Sans\",\"Nunito\",\"Nunito Sans\",\"Open Sans\",\"Optima\",\"Orbitron\",\"Oswald\",\"Pacifico\",\"Palatino\",\"Perpetua\",\"PT Sans\",\"PT Serif\",\"Poppins\",\"Prompt\",\"Public Sans\",\"Quicksand\",\"Rajdhani\",\"Recursive\",\"Roboto\",\"Roboto Condensed\",\"Rockwell\",\"Rubik\",\"Segoe Print\",\"Segoe Script\",\"Segoe UI\",\"Sora\",\"Source Sans Pro\",\"Space Mono\",\"Tahoma\",\"Taviraj\",\"Times\",\"Times New Roman\",\"Titillium Web\",\"Trebuchet MS\",\"Ubuntu\",\"Varela Round\",\"Verdana\",\"Work Sans\"],R=[\"monospace\",\"sans-serif\",\"serif\"];function I(e,n){if(!e)throw new Error(\"Canvas context not supported\");return e.font,e.font=\"72px \".concat(n),e.measureText(\"WwMmLli0Oo\").width}function O(){var e,n=document.createElement(\"canvas\"),r=null!==(e=n.getContext(\"webgl\"))&&void 0!==e?e:n.getContext(\"experimental-webgl\");if(r&&\"getParameter\"in r)try{var t=(r.getParameter(r.VENDOR)||\"\").toString(),o=(r.getParameter(r.RENDERER)||\"\").toString(),a={vendor:t,renderer:o,version:(r.getParameter(r.VERSION)||\"\").toString(),shadingLanguageVersion:(r.getParameter(r.SHADING_LANGUAGE_VERSION)||\"\").toString()};if(!o.length||!t.length){var i=r.getExtension(\"WEBGL_debug_renderer_info\");if(i){var u=(r.getParameter(i.UNMASKED_VENDOR_WEBGL)||\"\").toString(),c=(r.getParameter(i.UNMASKED_RENDERER_WEBGL)||\"\").toString();u&&(a.vendorUnmasked=u),c&&(a.rendererUnmasked=c)}}return a}catch(e){}return\"undefined\"}function _(){var e=new Float32Array(1),n=new Uint8Array(e.buffer);return e[0]=1/0,e[0]=e[0]-e[0],n[3]}function L(e,n){var r={};return n.forEach((function(n){var t=function(e){if(0===e.length)return null;var n={};e.forEach((function(e){var r=String(e);n[r]=(n[r]||0)+1}));var r=e[0],t=1;return Object.keys(n).forEach((function(e){n[e]>t&&(r=e,t=n[e])})),r}(e.map((function(e){return n in e?e[n]:void 0})).filter((function(e){return void 0!==e})));t&&(r[n]=t)})),r}function D(){var e=[],n={\"prefers-contrast\":[\"high\",\"more\",\"low\",\"less\",\"forced\",\"no-preference\"],\"any-hover\":[\"hover\",\"none\"],\"any-pointer\":[\"none\",\"coarse\",\"fine\"],pointer:[\"none\",\"coarse\",\"fine\"],hover:[\"hover\",\"none\"],update:[\"fast\",\"slow\"],\"inverted-colors\":[\"inverted\",\"none\"],\"prefers-reduced-motion\":[\"reduce\",\"no-preference\"],\"prefers-reduced-transparency\":[\"reduce\",\"no-preference\"],scripting:[\"none\",\"initial-only\",\"enabled\"],\"forced-colors\":[\"active\",\"none\"]};return Object.keys(n).forEach((function(r){n[r].forEach((function(n){matchMedia(\"(\".concat(r,\": \").concat(n,\")\")).matches&&e.push(\"\".concat(r,\": \").concat(n))}))})),e}function B(){if(\"https:\"===window.location.protocol&&\"function\"==typeof window.ApplePaySession)try{for(var e=window.ApplePaySession.supportsVersion,n=15;n>0;n--)if(e(n))return n}catch(e){return 0}return 0}\"Firefox\"!=P().name&&i(\"fonts\",(function(){var r=this;return new Promise((function(t,o){try{!function(r){var t;e(this,void 0,void 0,(function(){var e,o,a;return n(this,(function(n){switch(n.label){case 0:return document.body?[3,2]:[4,(i=50,new Promise((function(e){return setTimeout(e,i,u)})))];case 1:return n.sent(),[3,0];case 2:if((e=document.createElement(\"iframe\")).setAttribute(\"frameBorder\",\"0\"),(o=e.style).setProperty(\"position\",\"fixed\"),o.setProperty(\"display\",\"block\",\"important\"),o.setProperty(\"visibility\",\"visible\"),o.setProperty(\"border\",\"0\"),o.setProperty(\"opacity\",\"0\"),e.src=\"about:blank\",document.body.appendChild(e),!(a=e.contentDocument||(null===(t=e.contentWindow)||void 0===t?void 0:t.document)))throw new Error(\"Iframe document is not accessible\");return r({iframe:a}),setTimeout((function(){document.body.removeChild(e)}),0),[2]}var i,u}))}))}((function(o){var a=o.iframe;return e(r,void 0,void 0,(function(){var e,r,o,i;return n(this,(function(n){return\"Hello, world!\",e=a.createElement(\"canvas\"),r=e.getContext(\"2d\"),o=R.map((function(e){return I(r,e)})),i={},k.forEach((function(e){var n=I(r,e);o.includes(n)||(i[e]=n)})),t(i),[2]}))}))}))}catch(e){o({error:\"unsupported\"})}}))})),i(\"hardware\",(function(){return new Promise((function(e,n){var r=void 0!==navigator.deviceMemory?navigator.deviceMemory:0,t=window.performance&&window.performance.memory?window.performance.memory:0;e({videocard:O(),architecture:_(),deviceMemory:r.toString()||\"undefined\",jsHeapSizeLimit:t.jsHeapSizeLimit||0})}))})),i(\"locales\",(function(){return new Promise((function(e){e({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})}))})),i(\"permissions\",(function(){return e(this,void 0,void 0,(function(){var t;return n(this,(function(o){return T=(null==r?void 0:r.permissions_to_check)||[\"accelerometer\",\"accessibility\",\"accessibility-events\",\"ambient-light-sensor\",\"background-fetch\",\"background-sync\",\"bluetooth\",\"camera\",\"clipboard-read\",\"clipboard-write\",\"device-info\",\"display-capture\",\"gyroscope\",\"geolocation\",\"local-fonts\",\"magnetometer\",\"microphone\",\"midi\",\"nfc\",\"notifications\",\"payment-handler\",\"persistent-storage\",\"push\",\"speaker\",\"storage-access\",\"top-level-storage-access\",\"window-management\",\"query\"],t=Array.from({length:(null==r?void 0:r.retries)||3},(function(){return function(){return e(this,void 0,void 0,(function(){var e,r,t,o,a;return n(this,(function(n){switch(n.label){case 0:e={},r=0,t=T,n.label=1;case 1:if(!(r<t.length))return[3,6];o=t[r],n.label=2;case 2:return n.trys.push([2,4,,5]),[4,navigator.permissions.query({name:o})];case 3:return a=n.sent(),e[o]=a.state.toString(),[3,5];case 4:return n.sent(),[3,5];case 5:return r++,[3,1];case 6:return[2,e]}}))}))}()})),[2,Promise.all(t).then((function(e){return L(e,T)}))]}))}))})),i(\"plugins\",(function(){var e=[];if(navigator.plugins)for(var n=0;n<navigator.plugins.length;n++){var r=navigator.plugins[n];e.push([r.name,r.filename,r.description].join(\"|\"))}return new Promise((function(n){n({plugins:e})}))})),i(\"screen\",(function(){return new Promise((function(e){e({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:D()})}))})),i(\"system\",(function(){return new Promise((function(e){var n=P();e({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency,browser:{name:n.name,version:n.version},applePayVersion:B()})}))}));var U,F=\"SamsungBrowser\"!==P().name?1:3,N=null;i(\"webgl\",(function(){return e(this,void 0,void 0,(function(){var e;return n(this,(function(n){\"undefined\"!=typeof document&&((U=document.createElement(\"canvas\")).width=200,U.height=100,N=U.getContext(\"webgl\"));try{if(!N)throw new Error(\"WebGL not supported\");return e=Array.from({length:F},(function(){return function(){try{if(!N)throw new Error(\"WebGL not supported\");var e=\"\\n          attribute vec2 position;\\n          void main() {\\n              gl_Position = vec4(position, 0.0, 1.0);\\n          }\\n      \",n=\"\\n          precision mediump float;\\n          void main() {\\n              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color\\n          }\\n      \",r=N.createShader(N.VERTEX_SHADER),t=N.createShader(N.FRAGMENT_SHADER);if(!r||!t)throw new Error(\"Failed to create shaders\");if(N.shaderSource(r,e),N.shaderSource(t,n),N.compileShader(r),!N.getShaderParameter(r,N.COMPILE_STATUS))throw new Error(\"Vertex shader compilation failed: \"+N.getShaderInfoLog(r));if(N.compileShader(t),!N.getShaderParameter(t,N.COMPILE_STATUS))throw new Error(\"Fragment shader compilation failed: \"+N.getShaderInfoLog(t));var o=N.createProgram();if(!o)throw new Error(\"Failed to create shader program\");if(N.attachShader(o,r),N.attachShader(o,t),N.linkProgram(o),!N.getProgramParameter(o,N.LINK_STATUS))throw new Error(\"Shader program linking failed: \"+N.getProgramInfoLog(o));N.useProgram(o);for(var a=137,i=new Float32Array(4*a),u=2*Math.PI/a,c=0;c<a;c++){var s=c*u;i[4*c]=0,i[4*c+1]=0,i[4*c+2]=Math.cos(s)*(U.width/2),i[4*c+3]=Math.sin(s)*(U.height/2)}var l=N.createBuffer();N.bindBuffer(N.ARRAY_BUFFER,l),N.bufferData(N.ARRAY_BUFFER,i,N.STATIC_DRAW);var d=N.getAttribLocation(o,\"position\");N.enableVertexAttribArray(d),N.vertexAttribPointer(d,2,N.FLOAT,!1,0,0),N.viewport(0,0,U.width,U.height),N.clearColor(0,0,0,1),N.clear(N.COLOR_BUFFER_BIT),N.drawArrays(N.LINES,0,2*a);var f=new Uint8ClampedArray(U.width*U.height*4);return N.readPixels(0,0,U.width,U.height,N.RGBA,N.UNSIGNED_BYTE,f),new ImageData(f,U.width,U.height)}catch(e){return new ImageData(1,1)}finally{N&&(N.bindBuffer(N.ARRAY_BUFFER,null),N.useProgram(null),N.viewport(0,0,N.drawingBufferWidth,N.drawingBufferHeight),N.clearColor(0,0,0,0))}}()})),[2,{commonImageHash:d(M(e,U.width,U.height).data.toString()).toString()}]}catch(e){return[2,{webgl:\"unsupported\"}]}return[2]}))}))}));var j=function(e,n,r,t){for(var o=(r-n)/t,a=0,i=0;i<t;i++){a+=e(n+(i+.5)*o)}return a*o};i(\"math\",(function(){return e(void 0,void 0,void 0,(function(){return n(this,(function(e){return[2,{acos:Math.acos(.5),asin:j(Math.asin,-1,1,97),atan:j(Math.atan,-1,1,97),cos:j(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:j(Math.sin,-Math.PI,Math.PI,97),sinh:j(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:j(Math.tan,0,2*Math.PI,97),tanh:j(Math.tanh,-9/7,7/9,97)}]}))}))}));export{y as getFingerprint,p as getFingerprintData,b as getFingerprintPerformance,g as getVersion,i as includeComponent,t as setOption};\n//# sourceMappingURL=thumbmark.esm.js.map\n","import {\n  createClient,\n  subscriptionExchange,\n  cacheExchange,\n  fetchExchange\n} from '@urql/core'\nimport { createClient as createWSClient } from 'graphql-ws'\nimport { pipe, map } from 'wonka'\n\nclass UrqlClientWrapper {\n  constructor ({ serverUri, socket = null, encrypt = false }) {\n    this.$__client = this.createUrqlClient({ serverUri, socket, encrypt })\n    this.$__authToken = ''\n    this.$__pubkey = null\n    this.$__wallet = null\n    this.serverUri = serverUri\n    this.soketi = socket\n    this.cipherLink = !!encrypt\n    this.$__subscriptionManager = new Map()\n  }\n\n  createUrqlClient ({ serverUri, socket, encrypt }) {\n    const exchanges = [cacheExchange, fetchExchange]\n\n    // Add subscription support if socket is configured\n    if (socket && socket.socketUri) {\n      const wsClient = createWSClient({\n        url: socket.socketUri,\n        connectionParams: () => ({\n          authToken: this.$__authToken\n        })\n      })\n\n      exchanges.push(subscriptionExchange({\n        forwardSubscription: operation => ({\n          subscribe: sink => {\n            const disposable = wsClient.subscribe(operation, sink)\n            return { unsubscribe: disposable }\n          }\n        })\n      }))\n    }\n\n    return createClient({\n      url: serverUri,\n      exchanges,\n      fetchOptions: () => ({\n        headers: {\n          'X-Auth-Token': this.$__authToken\n        },\n        // Add 60 second timeout for debugging\n        signal: AbortSignal.timeout(60000)\n      })\n    })\n  }\n\n  setAuthData ({ token, pubkey, wallet }) {\n    this.$__authToken = token\n    this.$__pubkey = pubkey\n    this.$__wallet = wallet\n\n    // Recreate client with new auth data\n    this.$__client = this.createUrqlClient({\n      serverUri: this.serverUri,\n      socket: this.soketi,\n      encrypt: !!this.cipherLink\n    })\n  }\n\n  async query (request) {\n    const { query, variables } = request\n    const result = await this.$__client.query(query, variables).toPromise()\n    return this.formatResponse(result)\n  }\n\n  async mutate (request) {\n    const { mutation, variables } = request\n    const result = await this.$__client.mutation(mutation, variables).toPromise()\n    return this.formatResponse(result)\n  }\n\n  subscribe (request, closure) {\n    const { query, variables, operationName } = request\n\n    const { unsubscribe } = pipe(\n      this.$__client.subscription(query, variables),\n      map(result => {\n        closure(this.formatResponse(result))\n      })\n    ).subscribe(() => {})\n\n    // Store subscription for later cleanup\n    this.$__subscriptionManager.set(operationName, { unsubscribe })\n\n    return {\n      unsubscribe: () => this.unsubscribe(operationName)\n    }\n  }\n\n  formatResponse (result) {\n    // Match old Apollo response format\n    return {\n      data: result.data,\n      errors: result.error ? [result.error] : undefined\n    }\n  }\n\n  socketDisconnect () {\n    if (this.soketi) {\n      // Unsubscribe from all active subscriptions\n      this.unsubscribeAll()\n    }\n  }\n\n  unsubscribe (operationName) {\n    const subscription = this.$__subscriptionManager.get(operationName)\n    if (subscription) {\n      subscription.unsubscribe()\n      this.$__subscriptionManager.delete(operationName)\n    }\n  }\n\n  unsubscribeAll () {\n    this.$__subscriptionManager.forEach((subscription, operationName) => {\n      this.unsubscribe(operationName)\n    })\n  }\n\n  unsubscribeFromChannel (operationName) {\n    this.unsubscribe(operationName)\n  }\n\n  setEncryption (encrypt = false) {\n    this.cipherLink = encrypt\n    this.$__client = this.createUrqlClient({\n      serverUri: this.serverUri,\n      socket: this.soketi,\n      encrypt\n    })\n  }\n\n  getAuthToken () { return this.$__authToken }\n  getPubKey () { return this.$__pubkey }\n  getWallet () { return this.$__wallet }\n  getServerUri () { return this.serverUri }\n  getSocketUri () { return this.soketi ? this.soketi.socketUri : null }\n  getUri () { return this.serverUri }\n\n  setUri (uri) {\n    this.serverUri = uri\n    this.$__client = this.createUrqlClient({\n      serverUri: uri,\n      socket: this.soketi,\n      encrypt: !!this.cipherLink\n    })\n  }\n\n  setSocketUri ({ socketUri, appKey }) {\n    this.soketi = { socketUri, appKey }\n    this.$__client = this.createUrqlClient({\n      serverUri: this.serverUri,\n      socket: this.soketi,\n      encrypt: !!this.cipherLink\n    })\n  }\n}\n\nexport default UrqlClientWrapper\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n */\nimport Dot from './libraries/Dot.js'\nimport Decimal from './libraries/Decimal.js'\nimport {\n  generateBatchId,\n  generateBundleHash,\n  generateSecret\n} from './libraries/crypto.js'\nimport Molecule from './Molecule.js'\nimport Wallet from './Wallet.js'\nimport TokenUnit from './TokenUnit.js'\nimport AuthToken from './AuthToken.js'\nimport QueryContinuId from './query/QueryContinuId.js'\nimport QueryWalletBundle from './query/QueryWalletBundle.js'\nimport QueryWalletList from './query/QueryWalletList.js'\nimport QueryBalance from './query/QueryBalance.js'\nimport QueryMetaType from './query/QueryMetaType.js'\nimport QueryBatch from './query/QueryBatch.js'\nimport QueryBatchHistory from './query/QueryBatchHistory.js'\nimport MutationRequestAuthorization from './mutation/MutationRequestAuthorization.js'\nimport MutationCreateToken from './mutation/MutationCreateToken.js'\nimport MutationRequestTokens from './mutation/MutationRequestTokens.js'\nimport MutationTransferTokens from './mutation/MutationTransferTokens.js'\nimport MutationProposeMolecule from './mutation/MutationProposeMolecule.js'\nimport MutationCreateIdentifier from './mutation/MutationCreateIdentifier.js'\nimport MutationClaimShadowWallet from './mutation/MutationClaimShadowWallet.js'\nimport MutationCreateMeta from './mutation/MutationCreateMeta.js'\nimport MutationPeering from './mutation/MutationPeering.js'\nimport MutationAppendRequest from './mutation/MutationAppendRequest.js'\nimport MutationLinkIdentifier from './mutation/MutationLinkIdentifier.js'\nimport MutationCreateWallet from './mutation/MutationCreateWallet.js'\nimport MutationRequestAuthorizationGuest from './mutation/MutationRequestAuthorizationGuest.js'\nimport TransferBalanceException from './exception/TransferBalanceException.js'\nimport CodeException from './exception/CodeException.js'\nimport UnauthenticatedException from './exception/UnauthenticatedException.js'\nimport WalletShadowException from './exception/WalletShadowException.js'\nimport StackableUnitDecimalsException from './exception/StackableUnitDecimalsException.js'\nimport StackableUnitAmountException from './exception/StackableUnitAmountException.js'\nimport CreateMoleculeSubscribe from './subscribe/CreateMoleculeSubscribe.js'\nimport WalletStatusSubscribe from './subscribe/WalletStatusSubscribe.js'\nimport ActiveWalletSubscribe from './subscribe/ActiveWalletSubscribe.js'\nimport ActiveSessionSubscribe from './subscribe/ActiveSessionSubscribe.js'\nimport MutationActiveSession from './mutation/MutationActiveSession.js'\nimport QueryActiveSession from './query/QueryActiveSession.js'\nimport QueryUserActivity from './query/QueryUserActivity.js'\nimport QueryToken from './query/QueryToken.js'\nimport BatchIdException from './exception/BatchIdException.js'\nimport AuthorizationRejectedException from './exception/AuthorizationRejectedException.js'\nimport QueryAtom from './query/QueryAtom.js'\nimport QueryPolicy from './query/QueryPolicy.js'\nimport QueryMetaTypeViaAtom from './query/QueryMetaTypeViaAtom.js'\nimport QueryMetaTypeViaMolecule from './query/QueryMetaTypeViaMolecule.js'\nimport MutationCreateRule from './mutation/MutationCreateRule.js'\nimport MutationDepositBufferToken from './mutation/MutationDepositBufferToken.js'\nimport MutationWithdrawBufferToken from './mutation/MutationWithdrawBufferToken.js'\nimport {\n  getFingerprint,\n  getFingerprintData\n} from '@thumbmarkjs/thumbmarkjs'\nimport UrqlClientWrapper from './libraries/urql/UrqlClientWrapper.js'\n\n/**\n * Base client class providing a powerful but user-friendly wrapper\n * around complex Knish.IO ledger transactions.\n */\nexport default class KnishIOClient {\n  /**\n   * Class constructor\n   *\n   * @param {string} uri\n   * @param {string|null} cellSlug\n   * @param {object|null} socket\n   * @param {UrqlClientWrapper|null} client\n   * @param {number} serverSdkVersion\n   * @param {boolean} logging\n   */\n  constructor ({\n    uri,\n    cellSlug = null,\n    client = null,\n    socket = null,\n    serverSdkVersion = 3,\n    logging = false\n  }) {\n    this.initialize({\n      uri,\n      cellSlug,\n      socket,\n      client,\n      serverSdkVersion,\n      logging\n    })\n  }\n\n  /**\n   * Initializes a new Knish.IO client session\n   *\n   * @param {string|[]} uri\n   * @param {string|null} cellSlug\n   * @param {object|null} socket\n   * @param {UrqlClientWrapper|null} client\n   * @param {number} serverSdkVersion\n   * @param {boolean} logging\n   */\n  initialize ({\n    uri,\n    cellSlug = null,\n    socket = null,\n    client = null,\n    serverSdkVersion = 3,\n    logging = false\n  }) {\n    this.reset()\n\n    this.$__logging = logging\n    this.$__authTokenObjects = {}\n    this.$__authInProcess = false\n    this.abortControllers = new Map()\n\n    this.setUri(uri)\n\n    if (cellSlug) {\n      this.setCellSlug(cellSlug)\n    }\n\n    for (const uriKey in this.$__uris) {\n      const url = this.$__uris[uriKey]\n      this.$__authTokenObjects[url] = null\n    }\n\n    this.log('info', `KnishIOClient::initialize() - Initializing new Knish.IO client session for SDK version ${ serverSdkVersion }...`)\n\n    this.$__client = client || new UrqlClientWrapper({\n      socket: {\n        ...{\n          socketUri: null,\n          appKey: 'knishio'\n        },\n        ...socket || {}\n      },\n      serverUri: this.getRandomUri()\n    })\n\n    this.$__serverSdkVersion = serverSdkVersion\n  }\n\n  /**\n   * Get random uri from specified this.$__uris\n   *\n   * @return {string}\n   */\n  getRandomUri () {\n    const rand = Math.floor(Math.random() * (this.$__uris.length))\n    return this.$__uris[rand]\n  }\n\n  /**\n   *\n   * @param encrypt\n   * @return {boolean}\n   */\n  switchEncryption (encrypt) {\n    if (this.$__encrypt === encrypt) {\n      return false\n    }\n    this.log('info', `KnishIOClient::switchEncryption() - Forcing encryption ${ encrypt ? 'on' : 'off' } to match node...`)\n\n    // Set encryption\n    this.$__encrypt = encrypt\n    this.$__client.setEncryption(encrypt)\n    return true\n  }\n\n  /**\n   * De-initializes the Knish.IO client session so that a new session can replace it\n   */\n  deinitialize () {\n    this.log('info', 'KnishIOClient::deinitialize() - Clearing the Knish.IO client session...')\n    this.reset()\n  }\n\n  /**\n   * Subscribes the client to the node's broadcast socket\n   *\n   * @return {UrqlClientWrapper}\n   */\n  subscribe () {\n    if (!this.client().getSocketUri()) {\n      throw new CodeException('KnishIOClient::subscribe() - Socket client not initialized!')\n    }\n    return this.client()\n  }\n\n  /**\n   * Gets the client's SDK version\n   *\n   * @return {number}\n   */\n  getServerSdkVersion () {\n    return this.$__serverSdkVersion\n  }\n\n  /**\n   * Reset common properties\n   */\n  reset () {\n    this.$__secret = ''\n    this.$__bundle = ''\n    this.remainderWallet = null\n  }\n\n  /**\n   * Returns the currently defined Cell identifier for this session\n   *\n   * @return {string|null}\n   */\n  getCellSlug () {\n    return this.$__cellSlug || null\n  }\n\n  /**\n   * Sets the Cell identifier for this session\n   *\n   * @param {string} cellSlug\n   */\n  setCellSlug (cellSlug) {\n    this.$__cellSlug = cellSlug\n  }\n\n  /**\n   * Sets the endpoint URI for this session\n   *\n   * @param {string|object} uri\n   */\n  setUri (uri) {\n    this.$__uris = typeof uri === 'object' ? uri : [uri]\n\n    // If client exists, update its URI with a random one from the new array\n    if (this.$__client) {\n      const randomUri = this.getRandomUri()\n      this.$__client.setUri(randomUri)\n    }\n  }\n\n  /**\n   * Retrieves the endpoint URI for this session\n   *\n   * @return {string}\n   */\n  getUri () {\n    return this.$__client.getUri()\n  }\n\n  /**\n   * Returns the GraphQL client class session\n   *\n   * @return {UrqlClientWrapper}\n   */\n  client () {\n    if (!this.$__authInProcess) {\n      const randomUri = this.getRandomUri()\n      this.$__client.setUri(randomUri)\n\n      // Try to get stored auth token object\n      const authTokenObject = this.$__authTokenObjects[randomUri]\n\n      // Not authorized - try to do it\n      if (!authTokenObject) {\n        this.requestAuthToken({\n          secret: this.$__secret,\n          cellSlug: this.$__cellSlug,\n          encrypt: this.$__encrypt\n        }).catch(err => {\n          this.log('warn', `KnishIOClient::client() - Background authorization failed: ${ err.message }`)\n        })\n      } else {\n        // Use stored authorization data\n        this.$__client.setAuthData(authTokenObject.getAuthData())\n      }\n    }\n    return this.$__client\n  }\n\n  /**\n   * Returns whether a secret is being stored for this session\n   *\n   * @return {boolean}\n   */\n  hasSecret () {\n    return !!this.$__secret\n  }\n\n  /**\n   * Set the client's secret\n   *\n   * @param secret\n   */\n  setSecret (secret) {\n    this.$__secret = secret\n    this.$__bundle = this.hashSecret(secret, 'setSecret')\n  }\n\n  /**\n   * Hashes the user secret to produce a bundle hash\n   * @param {string} secret\n   * @param {string|null} source\n   * @returns {string}\n   */\n  hashSecret (secret, source = null) {\n    this.log('info', `KnishIOClient::hashSecret(${ source ? `source: ${ source }` : '' }) - Computing wallet bundle from secret...`)\n    return generateBundleHash(secret)\n  }\n\n  /**\n   * Retrieves the stored secret for this session\n   *\n   * @return {string}\n   */\n  getSecret () {\n    if (!this.hasSecret()) {\n      throw new UnauthenticatedException('KnishIOClient::getSecret() - Unable to find a stored secret! Have you set a secret?')\n    }\n    return this.$__secret\n  }\n\n  /**\n   * Returns whether a bundle hash is being stored for this session\n   *\n   * @return {boolean}\n   */\n  hasBundle () {\n    return !!this.$__bundle\n  }\n\n  /**\n   * Returns the bundle hash for this session\n   *\n   * @return {string}\n   */\n  getBundle () {\n    if (!this.hasBundle()) {\n      throw new UnauthenticatedException('KnishIOClient::getBundle() - Unable to find a stored bundle! Have you set a secret?')\n    }\n    return this.$__bundle\n  }\n\n  /**\n   * Retrieves the device fingerprint.\n   *\n   * @returns {Promise<string>} A promise that resolves to the device fingerprint as a string.\n   */\n  getFingerprint () {\n    return getFingerprint()\n  }\n\n  getFingerprintData () {\n    return getFingerprintData()\n  }\n\n  /**\n   * Retrieves this session's wallet used for signing the next Molecule\n   *\n   * @return {Promise<*|Wallet|null>}\n   */\n  async getSourceWallet () {\n    let sourceWallet = (await this.queryContinuId({\n      bundle: this.getBundle()\n    })).payload()\n\n    if (!sourceWallet) {\n      sourceWallet = new Wallet({\n        secret: this.getSecret()\n      })\n    } else {\n      sourceWallet.key = Wallet.generateKey({\n        secret: this.getSecret(),\n        token: sourceWallet.token,\n        position: sourceWallet.position\n      })\n    }\n\n    return sourceWallet\n  }\n\n  /**\n   * Retrieves this session's remainder wallet\n   *\n   * @return {null}\n   */\n  getRemainderWallet () {\n    return this.remainderWallet\n  }\n\n  /**\n   * Instantiates a new Molecule and prepares this client session to operate on it\n   *\n   * @param secret\n   * @param bundle\n   * @param sourceWallet\n   * @param remainderWallet\n   * @return {Promise<Molecule>}\n   */\n  async createMolecule ({\n    secret = null,\n    bundle = null,\n    sourceWallet = null,\n    remainderWallet = null\n  }) {\n    this.log('info', 'KnishIOClient::createMolecule() - Creating a new molecule...')\n\n    secret = secret || this.getSecret()\n    bundle = bundle || this.getBundle()\n\n    // Sets the source wallet as the last remainder wallet (to maintain ContinuID)\n    if (!sourceWallet &&\n      this.lastMoleculeQuery &&\n      this.getRemainderWallet().token === 'USER' &&\n      this.lastMoleculeQuery.response() &&\n      this.lastMoleculeQuery.response().success()\n    ) {\n      sourceWallet = this.getRemainderWallet()\n    }\n\n    // Unable to use last remainder wallet; Figure out what wallet to use:\n    if (sourceWallet === null) {\n      sourceWallet = await this.getSourceWallet()\n    }\n\n    // Set the remainder wallet for the next transaction\n    this.remainderWallet = remainderWallet || Wallet.create({\n      secret,\n      bundle,\n      token: 'USER',\n      batchId: sourceWallet.batchId,\n      characters: sourceWallet.characters\n    })\n\n    return new Molecule({\n      secret,\n      sourceWallet,\n      remainderWallet: this.getRemainderWallet(),\n      cellSlug: this.getCellSlug(),\n      version: this.getServerSdkVersion()\n    })\n  }\n\n  /**\n   * Builds a new instance of the provided Query class\n   *\n   * @param QueryClass\n   * @return {*}\n   */\n  createQuery (QueryClass) {\n    return new QueryClass(this.client(), this)\n  }\n\n  /**\n   * Builds a new instance of the provided Subscription class\n   *\n   * @param SubscribeClass\n   * @return {*}\n   */\n  createSubscribe (SubscribeClass) {\n    return new SubscribeClass(this.subscribe())\n  }\n\n  /**\n   * Uses the supplied Mutation class to build a new tailored Molecule\n   *\n   * @param mutationClass\n   * @param molecule\n   */\n  async createMoleculeMutation ({\n    mutationClass,\n    molecule = null\n  }) {\n    this.log('info', `KnishIOClient::createMoleculeQuery() - Creating a new ${ mutationClass.name } query...`)\n\n    // If you don't supply the molecule, we'll generate one for you\n    const _molecule = molecule || await this.createMolecule({})\n\n    const mutation = new mutationClass(this.client(), this, _molecule)\n\n    if (!(mutation instanceof MutationProposeMolecule)) {\n      throw new CodeException(`${ this.constructor.name }::createMoleculeMutation() - This method only accepts MutationProposeMolecule!`)\n    }\n\n    this.lastMoleculeQuery = mutation\n\n    return mutation\n  }\n\n  /**\n   *\n   * @param query\n   * @param variables\n   * @returns {Promise<*>}\n   */\n  async executeQuery (query, variables = null) {\n    // Check and refresh authorization token if needed\n    // Guard with $__authInProcess to prevent concurrent auth requests\n    if (this.$__authToken && this.$__authToken.isExpired() && !this.$__authInProcess) {\n      this.log('info', 'KnishIOClient::executeQuery() - Access token is expired. Getting new one...')\n      await this.requestAuthToken({\n        secret: this.$__secret,\n        cellSlug: this.$__cellSlug,\n        encrypt: this.$__encrypt\n      })\n    }\n\n    // Create a new AbortController for this query\n    const abortController = new AbortController()\n    const queryKey = JSON.stringify({\n      query: query.$__query,\n      variables\n    })\n    this.abortControllers.set(queryKey, abortController)\n\n    try {\n      // Use the existing query execution method, but add the abort signal\n      const result = await query.execute({\n        variables,\n        context: {\n          fetchOptions: {\n            signal: abortController.signal\n          }\n        }\n      })\n\n      // Remove the AbortController after the query is complete\n      this.abortControllers.delete(queryKey)\n\n      return result\n    } catch (error) {\n      if (error.name === 'AbortError') {\n        this.log('warn', 'Query was cancelled')\n      } else {\n        throw error\n      }\n    }\n  }\n\n  cancelQuery (query, variables = null) {\n    const queryKey = JSON.stringify({\n      query: query.$__query,\n      variables\n    })\n    const controller = this.abortControllers.get(queryKey)\n    if (controller) {\n      controller.abort()\n      this.abortControllers.delete(queryKey)\n    }\n  }\n\n  cancelAllQueries () {\n    for (const controller of this.abortControllers.values()) {\n      controller.abort()\n    }\n    this.abortControllers.clear()\n  }\n\n  /**\n   * Retrieves the balance wallet for a specified Knish.IO identity and token slug\n   *\n   * @param {string} token\n   * @param {string|null} bundle\n   * @param {string} type\n   * @returns {Promise<*>}\n   */\n  async queryBalance ({\n    token,\n    bundle = null,\n    type = 'regular'\n  }) {\n    /**\n     * @type {QueryBalance}\n     */\n    const query = this.createQuery(QueryBalance)\n\n    // Execute query with either the provided bundle hash or the active client's bundle\n    return this.executeQuery(query, {\n      bundleHash: bundle || this.getBundle(),\n      token,\n      type\n    })\n  }\n\n  /**\n   *\n   * @param {string} token\n   * @param {number} amount\n   * @param {string} type\n   * @returns {Promise<{address}|{position}|*>}\n   */\n  async querySourceWallet ({\n    token,\n    amount,\n    type = 'regular'\n  }) {\n    const sourceWallet = (await this.queryBalance({\n      token,\n      type\n    })).payload()\n\n    // Do you have enough tokens?\n    if (sourceWallet === null || Decimal.cmp(sourceWallet.balance, amount) < 0) {\n      throw new TransferBalanceException()\n    }\n\n    // Check shadow wallet\n    if (!sourceWallet.position || !sourceWallet.address) {\n      throw new TransferBalanceException('Source wallet can not be a shadow wallet.')\n    }\n\n    return sourceWallet\n  }\n\n  /**\n   * @param {string|null} bundle\n   * @param {function} closure\n   * @return {Promise<string>}\n   */\n  async subscribeCreateMolecule ({\n    bundle,\n    closure\n  }) {\n    const subscribe = this.createSubscribe(CreateMoleculeSubscribe)\n\n    return await subscribe.execute({\n      variables: {\n        bundle: bundle || this.getBundle()\n      },\n      closure\n    })\n  }\n\n  /**\n   * Creates a subscription for updating Wallet status\n   *\n   * @param {string|null} bundle\n   * @param {string} token\n   * @param {function} closure\n   * @return {string}\n   */\n  subscribeWalletStatus ({\n    bundle,\n    token,\n    closure\n  }) {\n    if (!token) {\n      throw new CodeException(`${ this.constructor.name }::subscribeWalletStatus() - Token parameter is required!`)\n    }\n\n    const subscribe = this.createSubscribe(WalletStatusSubscribe)\n\n    return subscribe.execute({\n      variables: {\n        bundle: bundle || this.getBundle(),\n        token\n      },\n      closure\n    })\n  }\n\n  /**\n   *  Creates a subscription for updating active Wallet\n   *\n   * @param {string|null} bundle\n   * @param {function} closure\n   * @return {string}\n   */\n  subscribeActiveWallet ({\n    bundle,\n    closure\n  }) {\n    const subscribe = this.createSubscribe(ActiveWalletSubscribe)\n\n    return subscribe.execute({\n      variables: {\n        bundle: bundle || this.getBundle()\n      },\n      closure\n    })\n  }\n\n  /**\n   * Creates a subscription for updating list of active sessions for a given MetaType\n   *\n   * @param {string} metaType\n   * @param {string} metaId\n   * @param {function} closure\n   * @return {*}\n   */\n  subscribeActiveSession ({\n    metaType,\n    metaId,\n    closure\n  }) {\n    const subscribe = this.createSubscribe(ActiveSessionSubscribe)\n\n    return subscribe.execute({\n      variables: {\n        metaType,\n        metaId\n      },\n      closure\n    })\n  }\n\n  /**\n   * Unsubscribes from a given subscription name\n   *\n   * @param {string} operationName\n   */\n  unsubscribe (operationName) {\n    this.subscribe().unsubscribe(operationName)\n  }\n\n  unsubscribeAll () {\n    this.subscribe().unsubscribeAll()\n  }\n\n  /**\n   * Retrieves metadata for the given metaType and provided parameters\n   *\n   * @param {string|array|null} metaType\n   * @param {string|array|null} metaId\n   * @param {string|array|null} key\n   * @param {string|array|null} value\n   * @param {boolean|null} latest\n   * @param {object|null} fields\n   * @param {object|null} filter\n   * @param {object|null} queryArgs\n   * @param {string|null} count\n   * @param {string|null} countBy\n   * @param {boolean} throughAtom\n   * @param {boolean} throughMolecule\n   * @param {array|null} values\n   * @param {array|null} keys\n   * @param {array|null} atomValues\n   * @return {Promise<ResponseMetaType|ResponseMetaTypeViaAtom|ResponseMetaTypeViaMolecule>}\n   */\n  queryMeta ({\n    metaType,\n    metaId = null,\n    key = null,\n    value = null,\n    latest = true,\n    fields = null,\n    filter = null,\n    queryArgs = null,\n    count = null,\n    countBy = null,\n    throughAtom = true,\n    throughMolecule = false,\n    values = null,\n    keys = null,\n    atomValues = null\n  }) {\n    this.log('info', `KnishIOClient::queryMeta() - Querying metaType: ${ metaType }, metaId: ${ metaId }...`)\n\n    let query\n    let variables\n\n    if (throughMolecule) {\n      /**\n       * @type {QueryMetaTypeViaMolecule}\n       */\n      query = this.createQuery(QueryMetaTypeViaMolecule)\n      variables = QueryMetaTypeViaMolecule.createVariables({\n        metaType,\n        metaId,\n        key,\n        value,\n        latest,\n        filter,\n        queryArgs,\n        countBy,\n        values,\n        keys,\n        atomValues,\n        cellSlug: this.getCellSlug()\n      })\n    } else if (throughAtom) {\n      /**\n       * @type {QueryMetaTypeViaAtom}\n       */\n      query = this.createQuery(QueryMetaTypeViaAtom)\n      variables = QueryMetaTypeViaAtom.createVariables({\n        metaType,\n        metaId,\n        key,\n        value,\n        latest,\n        filter,\n        queryArgs,\n        countBy,\n        values,\n        keys,\n        atomValues,\n        cellSlug: this.getCellSlug()\n      })\n    } else {\n      /**\n       * @type {QueryMetaType}\n       */\n      query = this.createQuery(QueryMetaType)\n      variables = QueryMetaType.createVariables({\n        metaType,\n        metaId,\n        key,\n        value,\n        latest,\n        filter,\n        queryArgs,\n        count,\n        countBy,\n        cellSlug: this.getCellSlug()\n      })\n    }\n\n    return this.executeQuery(query, variables)\n  }\n\n  /**\n   * Queries meta assets and verifies cryptographic integrity of associated molecules.\n   * Returns the same response as queryMeta(), with an additional `integrity` field on the payload\n   * containing verification results for each molecule.\n   *\n   * @param {object} params - Same parameters as queryMeta()\n   * @return {Promise<ResponseMetaType|ResponseMetaTypeViaAtom|ResponseMetaTypeViaMolecule>}\n   */\n  async queryMetaVerified (params) {\n    const response = await this.queryMeta(params)\n    const payload = response.payload()\n    if (payload) {\n      payload.integrity = response.verifyIntegrity()\n    }\n    return response\n  }\n\n  /**\n   * Query batch to get cascading meta instances by batchID\n   *\n   * @param batchId\n   * @return {Promise<*>}\n   */\n  async queryBatch ({\n    batchId\n  }) {\n    this.log('info', `KnishIOClient::queryBatch() - Querying cascading meta instances for batchId: ${ batchId }...`)\n    const query = this.createQuery(QueryBatch)\n    return await this.executeQuery(query, {\n      batchId\n    })\n  }\n\n  /**\n   * Query batch history to get cascading meta instances by batchID\n   *\n   * @param batchId\n   * @return {Promise<*>}\n   */\n  async queryBatchHistory ({\n    batchId\n  }) {\n    this.log('info', `KnishIOClient::queryBatchHistory() - Querying cascading meta instances for batchId: ${ batchId }...`)\n\n    const query = this.createQuery(QueryBatchHistory)\n\n    return await this.executeQuery(query, {\n      batchId\n    })\n  }\n\n  /**\n   * Queries atom instances based on the provided parameters.\n   *\n   * @param {string[]} molecularHashes - Array of multiple molecular hashes.\n   * @param {string} molecularHash - Single molecular hash.\n   * @param {string[]} bundleHashes - Array of multiple bundle hashes.\n   * @param {string} bundleHash - Single bundle hash.\n   * @param {number[]} positions - Array of multiple positions.\n   * @param {number} position - Single position.\n   * @param {string[]} walletAddresses - Array of multiple wallet addresses.\n   * @param {string} walletAddress - Single wallet address.\n   * @param {string[]} isotopes - Array of multiple isotopes.\n   * @param {string} isotope - Single isotope.\n   * @param {string[]} tokenSlugs - Array of multiple token slugs.\n   * @param {string} tokenSlug - Single token slug.\n   * @param {string[]} cellSlugs - Array of multiple cell slugs.\n   * @param {string} cellSlug - Single cell slug.\n   * @param {string[]} batchIds - Array of multiple batch IDs.\n   * @param {string} batchId - Single batch ID.\n   * @param {any[]} values - Array of multiple values.\n   * @param {any} value - Single value.\n   * @param {string[]} metaTypes - Array of multiple meta types.\n   * @param {string} metaType - Single meta type.\n   * @param {string[]} metaIds - Array of multiple meta IDs.\n   * @param {string} metaId - Single meta ID.\n   * @param {string[]} indexes - Array of multiple atom indices.\n   * @param {string} index - Single atom index.\n   * @param {object} filter - The filter object.\n   * @param {boolean} latest - The latest flag.\n   * @param {object} [queryArgs] - The query arguments (limit, offset).\n   * @param {number} [queryArgs.limit=15] - The limit.\n   * @param {number} [queryArgs.offset=1] - The offset.\n   *\n   * @returns {Promise<ResponseAtom>} - A promise that resolves with the queried atom instances.\n   */\n  async queryAtom ({\n    molecularHashes,\n    molecularHash,\n    bundleHashes,\n    bundleHash,\n    positions,\n    position,\n    walletAddresses,\n    walletAddress,\n    isotopes,\n    isotope,\n    tokenSlugs,\n    tokenSlug,\n    cellSlugs,\n    cellSlug,\n    batchIds,\n    batchId,\n    values,\n    value,\n    metaTypes,\n    metaType,\n    metaIds,\n    metaId,\n    indexes,\n    index,\n    filter,\n    latest,\n    queryArgs = {\n      limit: 15,\n      offset: 1\n    }\n  }) {\n    this.log('info', 'KnishIOClient::queryAtom() - Querying atom instances')\n\n    /** @type QueryAtom */\n    const query = this.createQuery(QueryAtom)\n\n    return await this.executeQuery(query, QueryAtom.createVariables({\n      molecularHashes,\n      molecularHash,\n      bundleHashes,\n      bundleHash,\n      positions,\n      position,\n      walletAddresses,\n      walletAddress,\n      isotopes,\n      isotope,\n      tokenSlugs,\n      tokenSlug,\n      cellSlugs,\n      cellSlug,\n      batchIds,\n      batchId,\n      values,\n      value,\n      metaTypes,\n      metaType,\n      metaIds,\n      metaId,\n      indexes,\n      index,\n      filter,\n      latest,\n      queryArgs\n    }))\n  }\n\n  /**\n   * Builds and executes a molecule to issue a new Wallet on the ledger\n   *\n   * @param {string} token - The token slug for the new wallet\n   * @returns {Promise<ResponseCreateWallet>} - A Promise that resolves with the result of the execution.\n   */\n  async createWallet ({\n    token\n  }) {\n    const newWallet = new Wallet({\n      secret: this.getSecret(),\n      token\n    })\n\n    /**\n     * @type {MutationCreateWallet}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationCreateWallet\n    })\n\n    query.fillMolecule(newWallet)\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Queries the ledger to retrieve a list of active sessions for the given MetaType\n   *\n   * @param {string} bundleHash - The hash of the session bundle.\n   * @param {string} metaType - The type of metadata associated with the session.\n   * @param {string} metaId - The ID of the metadata associated with the session.\n   * @returns {Promise<ResponseQueryActiveSession>} - Returns a promise containing the result of the query.\n   */\n  async queryActiveSession ({\n    bundleHash,\n    metaType,\n    metaId\n  }) {\n    const query = this.createQuery(QueryActiveSession)\n\n    return await this.executeQuery(query, {\n      bundleHash,\n      metaType,\n      metaId\n    })\n  }\n\n  /**\n   * Queries user activity based on the provided parameters.\n   *\n   * @param {string} bundleHash - The bundle hash.\n   * @param {string} metaType - The meta type.\n   * @param {string} metaId - The meta ID.\n   * @param {string} ipAddress - The IP address.\n   * @param {string} browser - The browser.\n   * @param {string} osCpu - The operating system and CPU.\n   * @param {string} resolution - The screen resolution.\n   * @param {string} timeZone - The time zone.\n   * @param {string} countBy - The count by parameter.\n   * @param {string} interval - The interval parameter.\n   *\n   * @returns {Promise<ResponseQueryUserActivity>} The result of the query.\n   */\n  async queryUserActivity ({\n    bundleHash,\n    metaType,\n    metaId,\n    ipAddress,\n    browser,\n    osCpu,\n    resolution,\n    timeZone,\n    countBy,\n    interval\n  }) {\n    const query = this.createQuery(QueryUserActivity)\n\n    return await this.executeQuery(query, {\n      bundleHash,\n      metaType,\n      metaId,\n      ipAddress,\n      browser,\n      osCpu,\n      resolution,\n      timeZone,\n      countBy,\n      interval\n    })\n  }\n\n  /**\n   * Builds and executes a molecule to declare an active session for the given MetaType\n   *\n   * @param {Object} options - The options for activating a session.\n   * @param {string} options.bundle - The bundle hash.\n   * @param {string} options.metaType - The meta type.\n   * @param {string} options.metaId - The meta ID.\n   * @param {string} options.ipAddress - The client's IP address.\n   * @param {string} options.browser - The client's browser.\n   * @param {string} options.osCpu - The client's operating system and CPU.\n   * @param {string} options.resolution - The client's screen resolution.\n   * @param {string} options.timeZone - The client's time zone.\n   * @param {Object} [options.json={}] - Additional JSON data.\n   * @returns {Promise<ResponseActiveSession>} A promise that resolves with the result of the activation.\n   */\n  async activeSession ({\n    bundle,\n    metaType,\n    metaId,\n    ipAddress,\n    browser,\n    osCpu,\n    resolution,\n    timeZone,\n    json = {}\n  }) {\n    const query = this.createQuery(MutationActiveSession)\n\n    return await this.executeQuery(query, {\n      bundleHash: bundle,\n      metaType,\n      metaId,\n      ipAddress,\n      browser,\n      osCpu,\n      resolution,\n      timeZone,\n      json: JSON.stringify(json)\n    })\n  }\n\n  /**\n   * Creates a new token with the given parameters.\n   *\n   * @param {object} options - The options for creating the token.\n   * @param {string} options.token - The token identifier.\n   * @param {number} [options.amount] - The amount of tokens to create.\n   * @param {object} [options.meta] - Additional metadata for the token.\n   * @param {string} [options.batchId] - The batch identifier for stackable tokens.\n   * @param {array} [options.units] - The unit IDs for the token.\n   *\n   * @throws {StackableUnitDecimalsException} If a stackable token has decimals.\n   * @throws {StackableUnitAmountException} If stackable units are provided with an amount.\n   *\n   * @returns {Promise<ResponseCreateToken>} A Promise that resolves to the result of creating the token.\n   */\n  async createToken ({\n    token,\n    amount = null,\n    meta = null,\n    batchId = null,\n    units = []\n  }) {\n    // What is the fungibility mode for this token?\n    const fungibility = Dot.get(meta || {}, 'fungibility')\n\n    // For stackable token - create a batch ID\n    if (fungibility === 'stackable') {\n      meta.batchId = batchId || generateBatchId({})\n    }\n\n    // Special logic for token unit initialization (nonfungible || stackable)\n    if (['nonfungible', 'stackable'].includes(fungibility) && units.length > 0) {\n      // Stackable tokens with Unit IDs must not use decimals\n      if (Dot.get(meta || {}, 'decimals') > 0) {\n        throw new StackableUnitDecimalsException()\n      }\n\n      // Can't create stackable units AND provide amount\n      if (amount > 0) {\n        throw new StackableUnitAmountException()\n      }\n\n      // Calculating amount based on Unit IDs\n      amount = units.length\n      meta.splittable = 1\n      meta.decimals = 0\n      meta.tokenUnits = JSON.stringify(units)\n    }\n\n    // Creating the wallet that will receive the new tokens\n    const recipientWallet = new Wallet({\n      secret: this.getSecret(),\n      bundle: this.getBundle(),\n      token,\n      batchId\n    })\n\n    /**\n     * @type {MutationCreateToken}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationCreateToken\n    })\n\n    query.fillMolecule({\n      recipientWallet,\n      amount,\n      meta: meta || {}\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Creates a new rule with the specified parameters.\n   *\n   * @param {string} metaType - The type of the metadata associated with the rule.\n   * @param {string} metaId - The ID of the metadata associated with the rule.\n   * @param {object} rule - The rule object.\n   * @param {object} [policy={}] - The policy object. (optional)\n   * @returns {Promise<ResponseCreateRule>} - A promise that resolves to the created rule.\n   */\n  async createRule ({\n    metaType,\n    metaId,\n    rule,\n    policy = {}\n  }) {\n    /**\n     * @type {MutationCreateRule}\n     */\n    const query = await this.createMoleculeMutation({\n        mutationClass: MutationCreateRule,\n        molecule: await this.createMolecule({\n          secret: this.getSecret()\n        })\n      }\n    )\n\n    query.fillMolecule({\n      metaType,\n      metaId,\n      rule,\n      policy\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to convey new metadata to the ledger\n   *\n   * @param {string} metaType - The type of the metadata entry.\n   * @param {string} metaId - The ID of the metadata entry.\n   * @param {object|array} meta - The metadata object.\n   * @param {object} [policy={}] - The policy object.\n   * @returns {Promise<ResponseCreateMeta>} - A Promise that resolves with the created metadata entry.\n   */\n  async createMeta ({\n    metaType,\n    metaId,\n    meta = null,\n    policy = {}\n  }) {\n    /**\n     * @type {MutationCreateMeta}\n     */\n    const query = await this.createMoleculeMutation({\n        mutationClass: MutationCreateMeta,\n        molecule: await this.createMolecule({\n          secret: this.getSecret()\n        })\n      }\n    )\n\n    const metas = meta || {}\n\n    query.fillMolecule({\n      metaType,\n      metaId,\n      meta: metas,\n      policy\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to register a peer node via P-isotope\n   *\n   * @param {string} host - The peer host URL to register\n   * @returns {Promise<ResponsePeering>} - A Promise that resolves with the peering response.\n   */\n  async registerPeer ({\n    host\n  }) {\n    /**\n     * @type {MutationPeering}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationPeering,\n      molecule: await this.createMolecule({\n        secret: this.getSecret()\n      })\n    })\n\n    query.fillMolecule({\n      host\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to submit an append request via A-isotope\n   *\n   * @param {string} metaType - The target MetaType to append to\n   * @param {string} metaId - The target MetaId to append to\n   * @param {string} action - The action to perform\n   * @param {object} [meta={}] - Additional metadata\n   * @returns {Promise<ResponseAppendRequest>} - A Promise that resolves with the append request response.\n   */\n  async appendRequest ({\n    metaType,\n    metaId,\n    action,\n    meta = {}\n  }) {\n    /**\n     * @type {MutationAppendRequest}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationAppendRequest,\n      molecule: await this.createMolecule({\n        secret: this.getSecret()\n      })\n    })\n\n    query.fillMolecule({\n      metaType,\n      metaId,\n      action,\n      meta\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to create a new identifier on the ledger\n   *\n   * @param {string} type - The type of the identifier.\n   * @param {string} contact - The contact associated with the identifier.\n   * @param {string} code - The code for the identifier.\n   * @returns {Promise<ResponseCreateIdentifier>} - A promise that resolves to the created identifier.\n   */\n  async createIdentifier ({\n    type,\n    contact,\n    code\n  }) {\n    /**\n     * @type {MutationCreateIdentifier}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationCreateIdentifier\n    })\n\n    query.fillMolecule({\n      type,\n      contact,\n      code\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Links an identifier to the current wallet bundle\n   *\n   * @param {string} type - The type of the identifier.\n   * @param {string} contact - The contact associated with the identifier.\n   * @returns {Promise<ResponseLinkIdentifier>} - A promise that resolves to the link result.\n   */\n  async linkIdentifier ({\n    type,\n    contact\n  }) {\n    const query = this.createQuery(MutationLinkIdentifier)\n    return await this.executeQuery(query, {\n      bundle: this.getBundle(),\n      type,\n      content: contact\n    })\n  }\n\n  /**\n   * Creates a policy for a given metaType and metaId.\n   *\n   * @param {Object} options - The options for creating the policy.\n   * @param {string} options.metaType - The type of the meta.\n   * @param {string} options.metaId - The ID of the meta.\n   * @param {Object} [options.policy={}] - The policy object.\n   * @returns {Promise<*>} - A promise that resolves with the result of the execution.\n   */\n  async createPolicy ({\n    metaType,\n    metaId,\n    policy = {}\n  }) {\n    // Create a molecule\n    const molecule = await this.createMolecule({})\n    molecule.addPolicyAtom({\n      metaType,\n      metaId,\n      meta: {},\n      policy\n    })\n    molecule.addContinuIdAtom()\n    molecule.sign({\n      bundle: this.getBundle()\n    })\n    molecule.check()\n\n    // Create & execute a mutation\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationProposeMolecule,\n      molecule\n    })\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Queries the policy based on the provided metaType and metaId.\n   *\n   * @param {string} metaType - The type of the meta.\n   * @param {string} metaId - The ID of the meta.\n   * @returns {Promise<ResponsePolicy>} - A Promise that resolves to the query result.\n   */\n  async queryPolicy ({\n    metaType,\n    metaId\n  }) {\n    const query = this.createQuery(QueryPolicy)\n    return await this.executeQuery(query, {\n      metaType,\n      metaId\n    })\n  }\n\n  /**\n   * Queries wallets based on the provided parameters.\n   *\n   * @param {object} options - The options for querying wallets.\n   * @param {string|null} options.bundle - The bundle to query wallets for.\n   * @param {string|null} options.token - The token to query wallets for.\n   * @param {boolean} [options.unspent=true] - Whether to include unspent wallets or not.\n   *\n   * @returns {Promise<ResponseWalletList>} - A promise that resolves to the response payload of the query.\n   */\n  queryWallets ({\n    bundle = null,\n    token = null,\n    unspent = true\n  }) {\n    this.log('info', `KnishIOClient::queryWallets() - Querying wallets${ bundle ? ` for ${ bundle }` : '' }...`)\n\n    /**\n     * @type {QueryWalletList}\n     */\n    const walletQuery = this.createQuery(QueryWalletList)\n\n    return this.executeQuery(walletQuery, {\n      bundleHash: bundle || this.getBundle(),\n      token,\n      unspent\n    })\n      .then((response) => {\n        return response.payload()\n      })\n  }\n\n  /**\n   * Queries wallet bundle metadata.\n   *\n   * @param {Object} options - The options for the query.\n   * @param {string|null} options.bundle - The bundle to query. Default is null.\n   * @param {string|null} options.fields - The fields to retrieve. Default is null.\n   * @param {boolean} options.raw - Whether to return the raw response or the payload. Default is false.\n   * @returns {Promise<ResponseWalletBundle|{}|null>} - A promise that resolves to the response or payload.\n   */\n  queryBundle ({\n    bundle = null,\n    fields = null,\n    raw = false\n  }) {\n    this.log('info', `KnishIOClient::queryBundle() - Querying wallet bundle metadata${ bundle ? ` for ${ bundle }` : '' }...`)\n\n    // Bundle default init & to array convertion\n    if (!bundle) {\n      bundle = this.getBundle()\n    }\n    if (typeof bundle === 'string') {\n      bundle = [bundle]\n    }\n\n    /**\n     * @type {QueryWalletBundle}\n     */\n    const query = this.createQuery(QueryWalletBundle)\n    return this.executeQuery(query, { bundleHashes: bundle })\n      .then((/** ResponseWalletBundle */ response) => {\n        return raw ? response : response.payload()\n      })\n  }\n\n  /**\n   * Queries the ledger for the next ContinuId wallet\n   *\n   * @param {String} bundle - The bundle hash used in the query.\n   * @returns {Promise<ResponseContinuId>} - A promise that resolves to the result of the query.\n   */\n  async queryContinuId ({\n    bundle\n  }) {\n    /**\n     * @type {QueryContinuId}\n     */\n    const query = this.createQuery(QueryContinuId)\n\n    return this.executeQuery(query, {\n      bundle\n    })\n  }\n\n  /**\n   * Requests tokens for a specific recipient or for the current wallet bundle.\n   *\n   * @param {Object} options - The options for the token request.\n   * @param {string} options.token - The token slug.\n   * @param {string|Wallet} [options.to] - The recipient of the tokens. If not provided, tokens will be requested for the current wallet bundle.\n   * @param {number|null} [options.amount=null] - The amount of tokens to request. If not provided and `options.units` are provided, the amount will be calculated based on the number of\n   * units.\n   * @param {Array} [options.units=[]] - The array of unit IDs. If provided, the amount will be calculated based on the length of `options.units`.\n   * @param {Object|null} [options.meta=null] - Additional metadata for the token request.\n   * @param {string|null} [options.batchId=null] - The batch ID for the token request. If not provided and the token is stackable, a new batch ID will be generated.\n   *\n   * @returns {Promise<ResponseRequestTokens>} - A promise that resolves with the response from the token request.\n   *\n   * @throws {BatchIdException} - When a non-stackable token is used and `options.batchId` is not null.\n   * @throws {StackableUnitAmountException} - When both `options.units` and `options.amount` are provided for stackable tokens.\n   */\n  async requestTokens ({\n    token,\n    to,\n    amount = null,\n    units = [],\n    meta = null,\n    batchId = null\n  }) {\n    let metaType,\n      metaId\n\n    meta = meta || {}\n\n    // Get a token & init is Stackable flag for batch ID initialization\n    const queryToken = this.createQuery(QueryToken)\n    const tokenResponse = await this.executeQuery(queryToken, {\n      slug: token\n    })\n    const isStackable = Dot.get(tokenResponse.data(), '0.fungibility') === 'stackable'\n\n    // NON-stackable tokens & batch ID is NOT NULL - error\n    if (!isStackable && batchId !== null) {\n      throw new BatchIdException('Expected Batch ID = null for non-stackable tokens.')\n    }\n    // Stackable tokens & batch ID is NULL - generate new one\n    if (isStackable && batchId === null) {\n      batchId = generateBatchId({})\n    }\n\n    // Calculate amount & set meta key\n    if (units.length > 0) {\n      // Can't move stackable units AND provide amount\n      if (amount > 0) {\n        throw new StackableUnitAmountException()\n      }\n\n      // Calculating amount based on Unit IDs\n      amount = units.length\n      meta.tokenUnits = JSON.stringify(units)\n    }\n\n    // Are we specifying a specific recipient?\n    if (to) {\n      // If the recipient is provided as an object, try to figure out the actual recipient\n      if (Object.prototype.toString.call(to) === '[object String]') {\n        if (Wallet.isBundleHash(to)) {\n          metaType = 'walletBundle'\n          metaId = to\n        } else {\n          to = Wallet.create({\n            secret: to,\n            token\n          })\n        }\n      }\n\n      // If recipient is a Wallet, we need to help the node triangulate\n      // the transfer by providing position and bundle hash\n      if (to instanceof Wallet) {\n        metaType = 'wallet'\n        meta.position = to.position\n        meta.bundle = to.bundle\n        metaId = to.address\n      }\n    } else {\n      // No recipient, so request tokens for ourselves\n      metaType = 'walletBundle'\n      metaId = this.getBundle()\n    }\n\n    /**\n     * @type {MutationRequestTokens}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationRequestTokens\n    })\n\n    query.fillMolecule({\n      token,\n      amount,\n      metaType,\n      metaId,\n      meta,\n      batchId\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Claims a shadow wallet for a given token.\n   *\n   * @param {string} token - The token for which to claim the shadow wallet.\n   * @param {string|null} batchId - The batch ID of the shadow wallet (optional).\n   * @param {string|null} molecule - The molecule associated with the shadow wallet (optional).\n   *\n   * @returns {Promise<ResponseClaimShadowWallet>} - A promise that resolves to the result of the claim operation.\n   */\n  async claimShadowWallet ({\n    token,\n    batchId = null,\n    molecule = null\n  }) {\n    /**\n     * @type {MutationClaimShadowWallet}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationClaimShadowWallet,\n      molecule\n    })\n\n    query.fillMolecule({\n      token,\n      batchId\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Claims all shadow wallets for a given token.\n   *\n   * @param {Object} options - The options for claiming shadow wallets.\n   * @param {string} options.token - The token to claim shadow wallets for.\n   * @returns {Promise<*>} - A promise that resolves to an array of responses from claiming shadow wallets.\n   * @throws {WalletShadowException} - If the shadow wallet list is invalid or if a non-shadow wallet is found.\n   */\n  async claimShadowWallets ({\n    token\n  }) {\n    // --- Get & check a shadow wallet list\n    const shadowWallets = await this.queryWallets({ token })\n    if (!shadowWallets || !Array.isArray(shadowWallets)) {\n      throw new WalletShadowException()\n    }\n\n    shadowWallets.forEach(shadowWallet => {\n      if (!shadowWallet.isShadow()) {\n        throw new WalletShadowException()\n      }\n    })\n    // ----\n\n    const responses = []\n    for (const shadowWallet of shadowWallets) {\n      responses.push(await this.claimShadowWallet({\n        token,\n        batchId: shadowWallet.batchId\n      }))\n    }\n    return responses\n  }\n\n  /**\n   * Transfers tokens from one wallet to another.\n   *\n   * @param {Object} options - The transfer options.\n   * @param {string} options.bundleHash - The bundle hash of the source wallet.\n   * @param {string} options.token - The token to transfer.\n   * @param {number} [options.amount=null] - The amount of tokens to transfer. Not required if units are provided.\n   * @param {Array} [options.units=[]] - An array of units to transfer. Overrides the amount if provided.\n   * @param {string} [options.batchId=null] - The batch ID for the recipient wallet.\n   * @param {Object} [options.sourceWallet=null] - The source wallet object. If not provided, it will be queried.\n   *\n   * @returns {Promise} - A Promise that resolves to the transaction result.\n   *\n   * @throws {StackableUnitAmountException} - If both amount and units are provided.\n   * @throws {TransferBalanceException} - If the source wallet does not have enough balance.\n   */\n  async transferToken ({\n    bundleHash,\n    token,\n    amount = null,\n    units = [],\n    batchId = null,\n    sourceWallet = null\n  }) {\n    // Calculate amount & set meta key\n    if (units.length > 0) {\n      // Can't move stackable units AND provide amount\n      if (amount > 0) {\n        throw new StackableUnitAmountException()\n      }\n\n      amount = units.length\n    }\n\n    // Get a source wallet\n    if (sourceWallet === null) {\n      sourceWallet = await this.querySourceWallet({\n        token,\n        amount\n      })\n    }\n\n    // Do you have enough tokens?\n    if (sourceWallet === null || Decimal.cmp(sourceWallet.balance, amount) < 0) {\n      throw new TransferBalanceException()\n    }\n\n    // Attempt to get the recipient's wallet, if not provided\n    const recipientWallet = Wallet.create({\n      bundle: bundleHash,\n      token\n    })\n\n    // Compute the batch ID for the recipient\n    // (typically used by stackable tokens)\n    if (batchId !== null) {\n      recipientWallet.batchId = batchId\n    } else {\n      recipientWallet.initBatchId({\n        sourceWallet\n      })\n    }\n\n    // Create a remainder from the source wallet\n    const remainderWallet = sourceWallet.createRemainder(this.getSecret())\n\n    // --- Token units splitting\n    sourceWallet.splitUnits(\n      units,\n      remainderWallet,\n      recipientWallet\n    )\n    // ---\n\n    // Build the molecule itself\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    /**\n     * @type {MutationTransferTokens}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationTransferTokens,\n      molecule\n    })\n\n    query.fillMolecule({\n      recipientWallet,\n      amount\n    })\n\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Deposits buffer token into the source wallet.\n   *\n   * @param {Object} options - The options for depositing buffer token.\n   * @param {string} options.tokenSlug - The slug of the token to deposit.\n   * @param {number} options.amount - The amount of token to deposit.\n   * @param {Object} options.tradeRates - The trade rates for the deposit.\n   * @param {Wallet|null} options.sourceWallet - The source wallet for the deposit. If not provided, a source wallet will be queried.\n   *\n   * @returns {Promise<*>} - A promise that resolves with the result of the deposit.\n   */\n  async depositBufferToken ({\n    tokenSlug,\n    amount,\n    tradeRates,\n    sourceWallet = null\n  }) {\n    // Get a source wallet\n    if (sourceWallet === null) {\n      sourceWallet = await this.querySourceWallet({\n        token: tokenSlug,\n        amount\n      })\n    }\n\n    // Remainder wallet\n    const remainderWallet = sourceWallet.createRemainder(this.getSecret())\n\n    // Build the molecule itself\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    /**\n     * @type {MutationDepositBufferToken}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationDepositBufferToken,\n      molecule\n    })\n    query.fillMolecule({\n      amount,\n      tradeRates\n    })\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Withdraws buffer tokens.\n   *\n   * @param {Object} options - The options for withdrawing buffer tokens.\n   * @param {string} options.tokenSlug - The token slug.\n   * @param {number} options.amount - The amount of tokens to withdraw.\n   * @param {Object} [options.sourceWallet=null] - The source wallet to withdraw tokens from. If not provided, a source wallet will be queried.\n   * @param {Object} [options.signingWallet=null] - The signing wallet to use for the transaction.\n   * @returns {Promise<Object>} A promise that resolves to the result of the withdrawal transaction.\n   */\n  async withdrawBufferToken ({\n    tokenSlug,\n    amount,\n    sourceWallet = null,\n    signingWallet = null\n  }) {\n    // Get a source wallet\n    if (sourceWallet === null) {\n      sourceWallet = await this.querySourceWallet({\n        token: tokenSlug,\n        amount,\n        type: 'buffer'\n      })\n    }\n\n    // Remainder wallet\n    const remainderWallet = sourceWallet\n\n    // Build the molecule itself\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    /**\n     * @type {MutationWithdrawBufferToken}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationWithdrawBufferToken,\n      molecule\n    })\n    const recipients = {}\n    recipients[this.getBundle()] = amount\n    query.fillMolecule({\n      recipients,\n      signingWallet\n    })\n    return await this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to destroy the specified Token units\n   *\n   * @param {string} token\n   * @param {number|null} amount\n   * @param {array|null} units\n   * @param {Wallet|null} sourceWallet\n   * @return {Promise<unknown>}\n   */\n  async burnTokens ({\n    token,\n    amount = null,\n    units = [],\n    sourceWallet = null\n  }) {\n    // Get a source wallet\n    if (sourceWallet === null) {\n      sourceWallet = await this.querySourceWallet({\n        token,\n        amount\n      })\n    }\n\n    // Remainder wallet\n    const remainderWallet = sourceWallet.createRemainder(this.getSecret())\n\n    // Calculate amount & set meta key\n    if (units.length > 0) {\n      // Can't burn stackable units AND provide amount\n      if (amount > 0) {\n        throw new StackableUnitAmountException()\n      }\n\n      // Calculating amount based on Unit IDs\n      amount = units.length\n\n      // --- Token units splitting\n      sourceWallet.splitUnits(\n        units,\n        remainderWallet\n      )\n      // ---\n    }\n\n    // Create a molecule\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    molecule.burnToken({ amount })\n    molecule.sign({\n      bundle: this.getBundle()\n    })\n    molecule.check()\n\n    // Create & execute a mutation\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationProposeMolecule,\n      molecule\n    })\n    return this.executeQuery(query)\n  }\n\n  /**\n   * Builds and executes a molecule to destroy the specified Token units\n   *\n   * @param {string} token\n   * @param {number|null} amount\n   * @param {array|null} units\n   * @param {Wallet|null} sourceWallet\n   * @return {Promise<unknown>}\n   */\n  async replenishToken ({\n    token,\n    amount = null,\n    units = [],\n    sourceWallet = null\n  }) {\n    if (sourceWallet === null) {\n      sourceWallet = (await this.queryBalance({ token })).payload()\n    }\n    if (!sourceWallet) {\n      throw new TransferBalanceException('Source wallet is missing or invalid.')\n    }\n\n    // Remainder wallet\n    const remainderWallet = sourceWallet.createRemainder(this.getSecret())\n\n    // Create a molecule\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    molecule.replenishToken({\n      amount,\n      units\n    })\n    molecule.sign({\n      bundle: this.getBundle()\n    })\n    molecule.check()\n\n    // Create & execute a mutation\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationProposeMolecule,\n      molecule\n    })\n    return this.executeQuery(query)\n  }\n\n  /**\n   *\n   * @param bundleHash\n   * @param tokenSlug\n   * @param newTokenUnit\n   * @param fusedTokenUnitIds\n   * @param sourceWallet\n   * @returns {Promise<*>}\n   */\n  async fuseToken ({\n    bundleHash,\n    tokenSlug,\n    newTokenUnit,\n    fusedTokenUnitIds,\n    sourceWallet = null\n  }) {\n    if (sourceWallet === null) {\n      sourceWallet = (await this.queryBalance({ token: tokenSlug })).payload()\n    }\n\n    // Check source wallet\n    if (sourceWallet === null) {\n      throw new TransferBalanceException('Source wallet is missing or invalid.')\n    }\n    if (!sourceWallet.tokenUnits || !sourceWallet.tokenUnits.length) {\n      throw new TransferBalanceException('Source wallet does not have token units.')\n    }\n    if (!fusedTokenUnitIds.length) {\n      throw new TransferBalanceException('Fused token unit list is empty.')\n    }\n\n    // Check fused token units\n    const sourceTokenUnitIds = []\n    sourceWallet.tokenUnits.forEach((tokenUnit) => {\n      sourceTokenUnitIds.push(tokenUnit.id)\n    })\n    fusedTokenUnitIds.forEach((tokenUnitId) => {\n      if (!sourceTokenUnitIds.includes(tokenUnitId)) {\n        throw new TransferBalanceException(`Fused token unit ID = ${ tokenUnitId } does not found in the source wallet.`)\n      }\n    })\n\n    // Generate new recipient wallet if only recipient secret has been passed\n    const recipientWallet = Wallet.create({\n      bundle: bundleHash,\n      token: tokenSlug\n    })\n\n    // Set batch ID\n    recipientWallet.initBatchId({ sourceWallet })\n\n    // Remainder wallet\n    const remainderWallet = sourceWallet.createRemainder(this.getSecret())\n\n    // Split token units (fused)\n    sourceWallet.splitUnits(fusedTokenUnitIds, remainderWallet)\n\n    // Coerce string newTokenUnit to TokenUnit object\n    if (typeof newTokenUnit === 'string') {\n      newTokenUnit = new TokenUnit(newTokenUnit, newTokenUnit, {})\n    }\n\n    // Set recipient new fused token unit\n    newTokenUnit.metas.fusedTokenUnits = sourceWallet.getTokenUnitsData()\n    recipientWallet.tokenUnits = [newTokenUnit]\n\n    // Create a molecule\n    const molecule = await this.createMolecule({\n      sourceWallet,\n      remainderWallet\n    })\n    molecule.fuseToken(sourceWallet.tokenUnits, recipientWallet)\n    molecule.sign({\n      bundle: this.getBundle()\n    })\n    molecule.check()\n\n    // Create & execute a mutation\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationProposeMolecule,\n      molecule\n    })\n    return this.executeQuery(query)\n  }\n\n  /**\n   * Requests a guest authentication token using the fingerprint of the user.\n   * @param {Object} options - The options for the guest authentication token request.\n   * @param {string} options.cellSlug - The slug of the cell to request the token for.\n   * @param {boolean} options.encrypt - Indicates whether the session should be encrypted.\n   * @returns {Promise<ResponseRequestAuthorizationGuest>} - A promise that resolves to the response of the guest authentication token request.\n   */\n  async requestGuestAuthToken ({\n    cellSlug,\n    encrypt\n  }) {\n    this.setCellSlug(cellSlug)\n\n    // Create a wallet for encryption\n    const wallet = new Wallet({\n      secret: generateSecret(await this.getFingerprint()),\n      token: 'AUTH'\n    })\n\n    /**\n     * @type {MutationRequestAuthorizationGuest}\n     */\n    const query = await this.createQuery(MutationRequestAuthorizationGuest)\n\n    const variables = {\n      cellSlug,\n      pubkey: wallet.pubkey,\n      encrypt\n    }\n\n    /**\n     * @type {ResponseRequestAuthorizationGuest}\n     */\n    const response = await query.execute({ variables })\n\n    // Did the authorization molecule get accepted?\n    if (response.success()) {\n      // Create & set an auth token from the response data\n      // Map server payload field names (time/key) to AuthToken constructor names (expiresAt/pubkey)\n      const authToken = AuthToken.create({\n        token: response.token(),\n        expiresAt: response.expiresAt(),\n        pubkey: response.pubKey(),\n        encrypt: response.encrypt()\n      }, wallet)\n      this.setAuthToken(authToken)\n    } else {\n      throw new AuthorizationRejectedException(`KnishIOClient::requestGuestAuthToken() - Authorization attempt rejected by ledger. Reason: ${ response.reason() }`)\n    }\n\n    return response\n  }\n\n  /**\n   * Request a profile auth token\n   *\n   * @param secret\n   * @param encrypt\n   * @returns {Promise<ResponseRequestAuthorization>}\n   */\n  async requestProfileAuthToken ({\n    secret,\n    encrypt\n  }) {\n    this.setSecret(secret)\n\n    // Generate a signing wallet\n    const wallet = new Wallet({\n      secret,\n      token: 'AUTH'\n    })\n\n    // Create a wallet with a signing wallet\n    const molecule = await this.createMolecule({\n      secret,\n      sourceWallet: wallet\n    })\n\n    /**\n     * @type {MutationRequestAuthorization}\n     */\n    const query = await this.createMoleculeMutation({\n      mutationClass: MutationRequestAuthorization,\n      molecule\n    })\n\n    query.fillMolecule({ meta: { encrypt: (encrypt ? 'true' : 'false') } })\n    /**\n     * @type {ResponseRequestAuthorization}\n     */\n    const response = await query.execute({})\n\n    // Did the authorization molecule get accepted?\n    if (response.success()) {\n      // Create & set an auth token from the response data\n      // Map server payload field names (time/key) to AuthToken constructor names (expiresAt/pubkey)\n      const authToken = AuthToken.create({\n        token: response.token(),\n        expiresAt: response.expiresAt(),\n        pubkey: response.pubKey(),\n        encrypt: response.encrypt()\n      }, wallet)\n      this.setAuthToken(authToken)\n    } else {\n      throw new AuthorizationRejectedException(`KnishIOClient::requestProfileAuthToken() - Authorization attempt rejected by ledger. Reason: ${ response.reason() }`)\n    }\n\n    return response\n  }\n\n  /**\n   * Request an auth token (guest or profile)\n   *\n   * @param secret\n   * @param seed\n   * @param cellSlug\n   * @param encrypt\n   * @returns {Promise<ResponseRequestAuthorizationGuest|ResponseRequestAuthorization|null>}\n   */\n  async requestAuthToken ({\n    secret = null,\n    seed = null,\n    cellSlug = null,\n    encrypt = false\n  }) {\n    // SDK versions 2 and below do not utilize an authorization token\n    if (this.$__serverSdkVersion < 3) {\n      this.log('warn', 'KnishIOClient::authorize() - Server SDK version does not require an authorization...')\n      return null\n    }\n\n    // Generate a secret from the seed if it has been passed\n    if (secret === null && seed) {\n      secret = generateSecret(seed)\n    }\n\n    // Set cell slug if it has been passed\n    if (cellSlug) {\n      this.setCellSlug(cellSlug)\n    }\n\n    // Auth in process...\n    this.$__authInProcess = true\n\n    // Auth token response\n    let response\n\n    // Authorized user\n    if (secret) {\n      response = await this.requestProfileAuthToken({\n        secret,\n        encrypt\n      })\n    } else {\n      // Guest\n      response = await this.requestGuestAuthToken({\n        cellSlug,\n        encrypt\n      })\n    }\n\n    // Set auth token\n    this.log('info', `KnishIOClient::authorize() - Successfully retrieved auth token ${ this.$__authToken.getToken() }...`)\n\n    // Switch encryption mode if it has been changed\n    this.switchEncryption(encrypt)\n\n    // Auth process is stopped\n    this.$__authInProcess = false\n\n    // Return full response\n    return response\n  }\n\n  /**\n   * Sets the auth token\n   *\n   * @param {AuthToken} authToken\n   */\n  setAuthToken (authToken) {\n    // An empty auth token\n    if (!authToken) {\n      this.log('info', 'KnishIOClient::setAuthToken() - authToken object is empty.')\n      return\n    }\n\n    // Save auth token object to global list\n    this.$__authTokenObjects[this.getUri()] = authToken\n\n    // Set auth data to GraphQL client\n    this.client().setAuthData(authToken.getAuthData())\n\n    // Save a full auth token object with expireAt key\n    this.$__authToken = authToken\n  }\n\n  /**\n   * Returns the current authorization token\n   *\n   * @return {AuthToken}\n   */\n  getAuthToken () {\n    return this.$__authToken\n  }\n\n  /**\n   * Writes the specified message to the console.\n   * @param {string} level\n   * @param {string} message\n   */\n  log (level, message) {\n    if (this.$__logging) {\n      switch (level) {\n        case 'info':\n          console.info(message)\n          break\n        case 'warn':\n          console.warn(message)\n          break\n        case 'error':\n          console.error(message)\n          break\n        default:\n          console.log(message)\n      }\n    }\n  }\n}\n","/*\n                               (\n                              (/(\n                              (//(\n                              (///(\n                             (/////(\n                             (//////(                          )\n                            (////////(                        (/)\n                            (////////(                       (///)\n                           (//////////(                      (////)\n                           (//////////(                     (//////)\n                          (////////////(                    (///////)\n                         (/////////////(                   (/////////)\n                        (//////////////(                  (///////////)\n                        (///////////////(                (/////////////)\n                       (////////////////(               (//////////////)\n                      (((((((((((((((((((              (((((((((((((((\n                     (((((((((((((((((((              ((((((((((((((\n                     (((((((((((((((((((            ((((((((((((((\n                    ((((((((((((((((((((           (((((((((((((\n                    ((((((((((((((((((((          ((((((((((((\n                    (((((((((((((((((((         ((((((((((((\n                    (((((((((((((((((((        ((((((((((\n                    ((((((((((((((((((/      (((((((((\n                    ((((((((((((((((((     ((((((((\n                    (((((((((((((((((    (((((((\n                   ((((((((((((((((((  (((((\n                   #################  ##\n                   ################  #\n                  ################# ##\n                 %################  ###\n                 ###############(   ####\n                ###############      ####\n               ###############       ######\n              %#############(        (#######\n             %#############           #########\n            ############(              ##########\n           ###########                  #############\n          #########                      ##############\n        %######\n\n        Powered by Knish.IO: Connecting a Decentralized World\n\nPlease visit https://github.com/WishKnish/KnishIO-Client-JS for information.\n\nLicense: https://github.com/WishKnish/KnishIO-Client-JS/blob/master/LICENSE\n*/\n\nimport Query from '../query/Query.js'\nimport Response from './Response.js'\nimport Dot from '../libraries/Dot.js'\nimport InvalidResponseException from '../exception/InvalidResponseException.js'\n\n/**\n * Response for Guest Authorization Request\n */\nexport default class ResponseAuthorizationGuest extends Response {\n  /**\n   * Class constructor\n   *\n   * @param {Query} query\n   * @param {object} json\n   */\n  constructor ({\n    query,\n    json\n  }) {\n    super({\n      query,\n      json,\n      dataKey: 'data.AccessToken'\n    })\n  }\n\n  /**\n   * Returns the reason for rejection\n   *\n   * @return {string}\n   */\n  reason () {\n    return 'Invalid response from server'\n  }\n\n  /**\n   * Returns whether molecule was accepted or not\n   *\n   * @return {boolean}\n   */\n  success () {\n    return this.payload() !== null\n  }\n\n  /**\n   * Returns a wallet with balance\n   *\n   * @return {null|Wallet}\n   */\n  payload () {\n    return this.data()\n  }\n\n  /**\n   * Returns the authorization key\n   *\n   * @param key\n   * @return {*}\n   */\n  payloadKey (key) {\n    if (!Dot.has(this.payload(), key)) {\n      throw new InvalidResponseException(`ResponseAuthorizationGuest::payloadKey() - '${ key }' key is not found in the payload!`)\n    }\n    return Dot.get(this.payload(), key)\n  }\n\n  /**\n   * Returns the auth token\n   *\n   * @return {*}\n   */\n  token () {\n    return this.payloadKey('token')\n  }\n\n  /**\n   * Returns timestamp\n   *\n   * @return {*}\n   */\n  time () {\n    return this.payloadKey('time')\n  }\n}\n"],"names":["Hex","arr","options","numberToHex","val","uppercase","set","opts","str","group","column","i","target","buffer","curr","c","m","chr","letter","chunkSubstr","size","numChunks","chunks","chunkIndex","o","randomString","length","alphabet","array","x","charsetBaseConvert","src","fromBase","toBase","srcSymbolTable","destSymbolTable","charIndex","res","r","bufferToHexString","byteArray","hexStringToBuffer","hexString","hexToBase64","string","bytes","base64ToHex","char","isHex","isNumeric","Meta$1","meta","entry","property","raw","aggregate","metaEntry","chunkArray","deepCloning","h","t","s","diff","arrays","others","unique","item","intersect","first","second","PolicyMeta","policy","metaKeys","policyMeta","policyKey","value","key","content","readPolicy","writePolicy","type","AtomMeta","Meta","context","wallet","walletMeta","shadowWalletClaim","signingWallet","BaseException","message","fileName","lineNumber","AtomsMissingException","HashAtom","atom","parameters","object","result","keys","structure","Version4","position","walletAddress","isotope","token","batchId","metaType","metaId","index","createdAt","version","versions","Atom","otsFragment","json","properties","includeOtsFragments","validateFields","requiredFields","field","serialized","error","validateStructure","strictMode","data","atoms","output","molecularSponge","JsSHA","atomList","numberOfAtoms","hashableValues","hashableValue","generateSecret","seed","sponge","generateBundleHash","secret","source","shake256","input","outputLength","generateBatchId","molecularHash","TokenUnit","id","name","metas","WalletCredentialException","U32_MASK64","_32n","fromBig","n","le","split","lst","len","Ah","Al","l","rotlSH","rotlSL","rotlBH","rotlBL","isBytes","a","anumber","title","prefix","abytes","needsLen","ofLen","got","aexists","instance","checkFinished","aoutput","out","min","u32","clean","isLE","byteSwap","word","byteSwap32","swap32IfBE","u","createHasher","hashCons","info","hashC","msg","tmp","randomBytes","bytesLength","cr","oidNist","suffix","_0n","_1n","_2n","_7n","_256n","_0x71n","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","round","R","y","j","IOTAS","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlL","keccakP","rounds","B","idx1","idx0","B0","B1","Th","Tl","curH","curL","shift","PI","Keccak","blockLen","outputLen","enableXOF","__publicField","state","pos","take","bufferOut","to","genKeccak","sha3_256","sha3_512","genShake","shake128","checkU32","isPowerOfTwo","reverseBits","bits","reversed","log2","bitReversalInplace","values","FFTCore","F","coreOpts","N","roots","dit","invertButterflies","skipStages","brp","isDit","g","m2","stride","k","grp","rootPos","i0","i1","omega","b","randb","equalBytes","copyBytes","splitCoder","label","lengths","getLength","bytesLen","sum","bufs","abytes_","buf","vecCoder","vecLen","cleanBytes","list","getMask","genCrystals","newPoly","Q","ROOT_OF_UNITY","brvBits","mod","modulo","smod","getZettas","p","nttZetas","_a","nttOpts","dif","d","mask","poly","bufLen","createXofShake","shake","_seed","seedLen","calls","xofs","XOF128","NTT","bitsCoder","PARAMS","compress","polyCoder","polyAdd","polySub","BaseCaseMultiply","a0","a1","b0","b1","zeta","c0","c1","MultiplyNTTs","f","z","SampleNTT","xof","d1","d2","sampleCBD","PRF","nonce","eta","b32","bb","t0","genKPKE","K","XOF","HASH512","ETA1","ETA2","du","dv","poly1","polyV","polyU","publicCoder","secretCoder","cipherCoder","seedCoder","seedDst","seedHash","rho","sigma","sHat","tHat","e","aji","publicKey","rHat","tmp2","e1","aij","e2","v","cipherText","privateKey","sk","createKyber","KPKE","HASH256","KDF","KPKESecretCoder","msgLen","publicKeyHash","secretKey","_sk","eke","ek","kr","k768","start","test","Khat","cipherText2","isValid","Kbar","shakePRF","dkLen","ml_kem768","Wallet","bundle","address","characters","maybeBundleHash","unitsData","unitData","secretHex","positionHex","indexedKey","intermediateKeySponge","privateKeySponge","keyFragments","digestSponge","workingFragment","fragmentCount","workingSponge","outputSponge","saltLength","seedHex","MlKEM768","serializedKey","binaryString","_","intPart","tokenUnit","units","remainderWallet","recipientWallet","recipientTokenUnits","remainderTokenUnits","sourceWallet","isRemainder","recipientPubkey","messageString","messageUint8","deserializedPubkey","sharedSecret","encryptedMessage","encryptedData","deserializedEncryptedMessage","decryptedUint8","decryptedString","iv","algorithm","encryptedContent","decryptedContent","AtomIndexException","MolecularHashMismatchException","MolecularHashMissingException","PolicyInvalidException","SignatureMalformedException","SignatureMismatchException","TransferBalanceException","TransferMalformedException","TransferMismatchedException","TransferRemainderException","TransferToSelfException","TransferUnbalancedException","MetaMissingException","WrongTokenTypeException","BatchIdException","args","RuleArgumentException","CodeException","Callback","action","amount","comparison","callback","Condition","Rule","condition","element","rule","Dot","obj","numberKey","def","parts","current","lastIndex","useNumberKey","lastKey","lastNumberKey","CheckMolecule","molecule","senderWallet","signingAtom","remainderAtom","policyArray","policyName","policyValue","rules","isotopeB","vAtoms","isotopeF","isotopeV","hasCrossIsotope","firstAtom","endAtom","vAtom","remainder","normalizedHash","ots","accumulator","otsChunks","workingChunk","iterationCount","digest","addressSponge","signingAddress","bundleHash","cellSlug","status","mappedAtoms","serverAtom","parsed","Molecule","moleculeData","BalanceInsufficientException","NegativeAmountException","hashes","isotopes","hash","mapped","hashList","symbol","mappedHashArray","total","num","totalCondition","continuIdMeta","atomMeta","tokenUnits","walletBundle","unit","tradeRates","bufferWallet","recipients","recipientBundle","recipientAmount","firstAtomMeta","$rules","$rule","creationAtom","contact","code","host","anonymous","compressed","signingPosition","keyChunks","signatureFragments","chunkedSignature","lastPosition","chunkCount","includeValidationContext","atomData","AuthToken","expiresAt","encrypt","pubkey","authToken","snapshot","multiplier","Decimal","value1","value2","debug","val1","val2","InvalidResponseException","UnauthenticatedException","Response","query","dataKey","errorMessage","_b","debugPrefix","_c","mapper","mappedPayload","newResponse","errorResponse","Query","graphQLClient","knishIOClient","response","variables","mergedContext","ResponseContinuId","continuId","QueryContinuId","gql","ResponseWalletBundle","bundleData","QueryWalletBundle","ResponseWalletList","tokenUnitData","tradeRate","wallets","QueryWalletList","ResponseBalance","walletData","QueryBalance","ResponseMetaType","metaTypeData","metaData","QueryMetaType","latest","filter","queryArgs","count","countBy","QueryBatch","responseObject","QueryBatchHistory","ResponseProposeMolecule","payloadJson","Mutation","request","mutationParams","MutationProposeMolecule","ResponseRequestAuthorization","ea","timeValue","MutationRequestAuthorization","ResponseCreateToken","MutationCreateToken","ResponseRequestTokens","MutationRequestTokens","ResponseTransferTokens","MutationTransferTokens","ResponseCreateIdentifier","MutationCreateIdentifier","ResponseClaimShadowWallet","MutationClaimShadowWallet","ResponseCreateMeta","MutationCreateMeta","ResponsePeering","MutationPeering","ResponseAppendRequest","MutationAppendRequest","ResponseLinkIdentifier","MutationLinkIdentifier","ResponseCreateWallet","MutationCreateWallet","ResponseRequestAuthorizationGuest","MutationRequestAuthorizationGuest","WalletShadowException","StackableUnitDecimalsException","StackableUnitAmountException","Subscribe","closure","CreateMoleculeSubscribe","WalletStatusSubscribe","ActiveWalletSubscribe","ActiveSessionSubscribe","ResponseActiveSession","MutationActiveSession","ResponseQueryActiveSession","activeUsers","activeSession","QueryActiveSession","ResponseQueryUserActivity","datum","QueryUserActivity","QueryToken","AuthorizationRejectedException","ResponseAtom","instanceKey","QueryAtom","molecularHashes","bundleHashes","positions","walletAddresses","tokenSlugs","tokenSlug","cellSlugs","batchIds","metaTypes","metaIds","indexes","ResponsePolicy","QueryPolicy","ResponseMetaTypeViaAtom","QueryMetaTypeViaAtom","atomValues","ResponseMetaTypeViaMolecule","results","instances","QueryMetaTypeViaMolecule","ResponseCreateRule","MutationCreateRule","MutationDepositBufferToken","MutationWithdrawBufferToken","w","S","M","E","P","A","C","T","I","O","L","D","U","UrqlClientWrapper","serverUri","socket","exchanges","cacheExchange","fetchExchange","wsClient","createWSClient","subscriptionExchange","operation","sink","createClient","mutation","operationName","unsubscribe","pipe","map","subscription","uri","socketUri","appKey","KnishIOClient","client","serverSdkVersion","logging","uriKey","url","rand","randomUri","authTokenObject","err","getFingerprint","getFingerprintData","QueryClass","SubscribeClass","mutationClass","_molecule","abortController","queryKey","controller","fields","throughAtom","throughMolecule","params","payload","newWallet","ipAddress","browser","osCpu","resolution","timeZone","interval","fungibility","unspent","walletQuery","queryToken","tokenResponse","isStackable","shadowWallets","shadowWallet","responses","newTokenUnit","fusedTokenUnitIds","sourceTokenUnitIds","tokenUnitId","level","ResponseAuthorizationGuest"],"mappings":"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","x_google_ignoreList":[15,16,17,18,19,20,21,122]}