var KnishIO=function(J){"use strict";var gm=Object.defineProperty,vm=Object.defineProperties;var bm=Object.getOwnPropertyDescriptors;var kc=Object.getOwnPropertySymbols,wm=Object.getPrototypeOf,Em=Object.prototype.hasOwnProperty,_m=Object.prototype.propertyIsEnumerable,Sm=Reflect.get;var he=Math.pow,xc=(J,Ee,ve)=>Ee in J?gm(J,Ee,{enumerable:!0,configurable:!0,writable:!0,value:ve}):J[Ee]=ve,He=(J,Ee)=>{for(var ve in Ee||(Ee={}))Em.call(Ee,ve)&&xc(J,ve,Ee[ve]);if(kc)for(var ve of kc(Ee))_m.call(Ee,ve)&&xc(J,ve,Ee[ve]);return J},hn=(J,Ee)=>vm(J,bm(Ee));var Tc=(J,Ee,ve)=>Sm(wm(J),ve,Ee);var L=(J,Ee,ve)=>new Promise((pn,Er)=>{var Et=F=>{try{ft(ve.next(F))}catch(Qe){Er(Qe)}},dn=F=>{try{ft(ve.throw(F))}catch(Qe){Er(Qe)}},ft=F=>F.done?pn(F.value):Promise.resolve(F.value).then(Et,dn);ft((ve=ve.apply(J,Ee)).next())});const Ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ve="ARRAYBUFFER not supported by this environment",pn="UINT8ARRAY not supported by this environment";function Er(r,e,t,n){let i,s,o;const a=e||[0],u=(t=t||0)>>>3,f=n===-1?3:0;for(i=0;i<r.length;i+=1)o=i+u,s=o>>>2,a.length<=s&&a.push(0),a[s]|=r[i]<<8*(f+n*(o%4));return{value:a,binLen:8*r.length+t}}function Et(r,e,t){switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(r){case"HEX":return function(n,i,s){return function(o,a,u,f){let c,d,p,y;if(o.length%2!=0)throw new Error("String of HEX type must be in byte increments");const v=a||[0],w=(u=u||0)>>>3,E=f===-1?3:0;for(c=0;c<o.length;c+=2){if(d=parseInt(o.substr(c,2),16),isNaN(d))throw new Error("String of HEX type contains invalid characters");for(y=(c>>>1)+w,p=y>>>2;v.length<=p;)v.push(0);v[p]|=d<<8*(E+f*(y%4))}return{value:v,binLen:4*o.length+u}}(n,i,s,t)};case"TEXT":return function(n,i,s){return function(o,a,u,f,c){let d,p,y,v,w,E,b,k,S=0;const A=u||[0],O=(f=f||0)>>>3;if(a==="UTF8")for(b=c===-1?3:0,y=0;y<o.length;y+=1)for(d=o.charCodeAt(y),p=[],128>d?p.push(d):2048>d?(p.push(192|d>>>6),p.push(128|63&d)):55296>d||57344<=d?p.push(224|d>>>12,128|d>>>6&63,128|63&d):(y+=1,d=65536+((1023&d)<<10|1023&o.charCodeAt(y)),p.push(240|d>>>18,128|d>>>12&63,128|d>>>6&63,128|63&d)),v=0;v<p.length;v+=1){for(E=S+O,w=E>>>2;A.length<=w;)A.push(0);A[w]|=p[v]<<8*(b+c*(E%4)),S+=1}else for(b=c===-1?2:0,k=a==="UTF16LE"&&c!==1||a!=="UTF16LE"&&c===1,y=0;y<o.length;y+=1){for(d=o.charCodeAt(y),k===!0&&(v=255&d,d=v<<8|d>>>8),E=S+O,w=E>>>2;A.length<=w;)A.push(0);A[w]|=d<<8*(b+c*(E%4)),S+=2}return{value:A,binLen:8*S+f}}(n,e,i,s,t)};case"B64":return function(n,i,s){return function(o,a,u,f){let c,d,p,y,v,w,E,b=0;const k=a||[0],S=(u=u||0)>>>3,A=f===-1?3:0,O=o.indexOf("=");if(o.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(o=o.replace(/=/g,""),O!==-1&&O<o.length)throw new Error("Invalid '=' found in base-64 string");for(d=0;d<o.length;d+=4){for(v=o.substr(d,4),y=0,p=0;p<v.length;p+=1)c=Ee.indexOf(v.charAt(p)),y|=c<<18-6*p;for(p=0;p<v.length-1;p+=1){for(E=b+S,w=E>>>2;k.length<=w;)k.push(0);k[w]|=(y>>>16-8*p&255)<<8*(A+f*(E%4)),b+=1}}return{value:k,binLen:8*b+u}}(n,i,s,t)};case"BYTES":return function(n,i,s){return function(o,a,u,f){let c,d,p,y;const v=a||[0],w=(u=u||0)>>>3,E=f===-1?3:0;for(d=0;d<o.length;d+=1)c=o.charCodeAt(d),y=d+w,p=y>>>2,v.length<=p&&v.push(0),v[p]|=c<<8*(E+f*(y%4));return{value:v,binLen:8*o.length+u}}(n,i,s,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(n){throw new Error(ve)}return function(n,i,s){return function(o,a,u,f){return Er(new Uint8Array(o),a,u,f)}(n,i,s,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(n){throw new Error(pn)}return function(n,i,s){return Er(n,i,s,t)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function dn(r,e,t,n){switch(r){case"HEX":return function(i){return function(s,o,a,u){const f="0123456789abcdef";let c,d,p="";const y=o/8,v=a===-1?3:0;for(c=0;c<y;c+=1)d=s[c>>>2]>>>8*(v+a*(c%4)),p+=f.charAt(d>>>4&15)+f.charAt(15&d);return u.outputUpper?p.toUpperCase():p}(i,e,t,n)};case"B64":return function(i){return function(s,o,a,u){let f,c,d,p,y,v="";const w=o/8,E=a===-1?3:0;for(f=0;f<w;f+=3)for(p=f+1<w?s[f+1>>>2]:0,y=f+2<w?s[f+2>>>2]:0,d=(s[f>>>2]>>>8*(E+a*(f%4))&255)<<16|(p>>>8*(E+a*((f+1)%4))&255)<<8|y>>>8*(E+a*((f+2)%4))&255,c=0;c<4;c+=1)v+=8*f+6*c<=o?Ee.charAt(d>>>6*(3-c)&63):u.b64Pad;return v}(i,e,t,n)};case"BYTES":return function(i){return function(s,o,a){let u,f,c="";const d=o/8,p=a===-1?3:0;for(u=0;u<d;u+=1)f=s[u>>>2]>>>8*(p+a*(u%4))&255,c+=String.fromCharCode(f);return c}(i,e,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch(i){throw new Error(ve)}return function(i){return function(s,o,a){let u;const f=o/8,c=new ArrayBuffer(f),d=new Uint8Array(c),p=a===-1?3:0;for(u=0;u<f;u+=1)d[u]=s[u>>>2]>>>8*(p+a*(u%4))&255;return c}(i,e,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch(i){throw new Error(pn)}return function(i){return function(s,o,a){let u;const f=o/8,c=a===-1?3:0,d=new Uint8Array(f);for(u=0;u<f;u+=1)d[u]=s[u>>>2]>>>8*(c+a*(u%4))&255;return d}(i,e,t)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const ft=4294967296,F=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Qe=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],ht=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],_r="Chosen SHA variant is not supported",Us="Cannot set numRounds with MAC";function yn(r,e){let t,n;const i=r.binLen>>>3,s=e.binLen>>>3,o=i<<3,a=4-i<<3;if(i%4!=0){for(t=0;t<s;t+=4)n=i+t>>>2,r.value[n]|=e.value[t>>>2]<<o,r.value.push(0),r.value[n+1]|=e.value[t>>>2]>>>a;return(r.value.length<<2)-4>=s+i&&r.value.pop(),{value:r.value,binLen:r.binLen+e.binLen}}return{value:r.value.concat(e.value),binLen:r.binLen+e.binLen}}function qs(r){const e={outputUpper:!1,b64Pad:"=",outputLen:-1},t=r||{},n="Output length must be a multiple of 8";if(e.outputUpper=t.outputUpper||!1,t.b64Pad&&(e.b64Pad=t.b64Pad),t.outputLen){if(t.outputLen%8!=0)throw new Error(n);e.outputLen=t.outputLen}else if(t.shakeLen){if(t.shakeLen%8!=0)throw new Error(n);e.outputLen=t.shakeLen}if(typeof e.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof e.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return e}function _t(r,e,t,n){const i=r+" must include a value and format";if(!e){if(!n)throw new Error(i);return n}if(e.value===void 0||!e.format)throw new Error(i);return Et(e.format,e.encoding||"UTF8",t)(e.value)}let mn=class{constructor(e,t,n){const i=n||{};if(this.t=t,this.i=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=e,this.h=[],this.u=0,this.l=!1,this.A=0,this.H=!1,this.S=[],this.p=[]}update(e){let t,n=0;const i=this.m>>>5,s=this.C(e,this.h,this.u),o=s.binLen,a=s.value,u=o>>>5;for(t=0;t<u;t+=i)n+this.m<=o&&(this.U=this.v(a.slice(t,t+i),this.U),n+=this.m);return this.A+=n,this.h=a.slice(n>>>5),this.u=o%this.m,this.l=!0,this}getHash(e,t){let n,i,s=this.R;const o=qs(t);if(this.K){if(o.outputLen===-1)throw new Error("Output length must be specified in options");s=o.outputLen}const a=dn(e,s,this.T,o);if(this.H&&this.g)return a(this.g(o));for(i=this.F(this.h.slice(),this.u,this.A,this.L(this.U),s),n=1;n<this.numRounds;n+=1)this.K&&s%32!=0&&(i[i.length-1]&=16777215>>>24-s%32),i=this.F(i,s,0,this.B(this.o),s);return a(i)}setHMACKey(e,t,n){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");const i=Et(t,(n||{}).encoding||"UTF8",this.T);this.k(i(e))}k(e){const t=this.m>>>3,n=t/4-1;let i;if(this.numRounds!==1)throw new Error(Us);if(this.H)throw new Error("MAC key already set");for(t<e.binLen/8&&(e.value=this.F(e.value,e.binLen,0,this.B(this.o),this.R));e.value.length<=n;)e.value.push(0);for(i=0;i<=n;i+=1)this.S[i]=909522486^e.value[i],this.p[i]=1549556828^e.value[i];this.U=this.v(this.S,this.U),this.A=this.m,this.H=!0}getHMAC(e,t){const n=qs(t);return dn(e,this.R,this.T,n)(this.Y())}Y(){let e;if(!this.H)throw new Error("Cannot call getHMAC without first setting MAC key");const t=this.F(this.h.slice(),this.u,this.A,this.L(this.U),this.R);return e=this.v(this.p,this.B(this.o)),e=this.F(t,this.R,this.m,e,this.R),e}};function Xt(r,e){return r<<e|r>>>32-e}function rt(r,e){return r>>>e|r<<32-e}function js(r,e){return r>>>e}function Qs(r,e,t){return r^e^t}function Vs(r,e,t){return r&e^~r&t}function Hs(r,e,t){return r&e^r&t^e&t}function Ac(r){return rt(r,2)^rt(r,13)^rt(r,22)}function Ne(r,e){const t=(65535&r)+(65535&e);return(65535&(r>>>16)+(e>>>16)+(t>>>16))<<16|65535&t}function Oc(r,e,t,n){const i=(65535&r)+(65535&e)+(65535&t)+(65535&n);return(65535&(r>>>16)+(e>>>16)+(t>>>16)+(n>>>16)+(i>>>16))<<16|65535&i}function Sr(r,e,t,n,i){const s=(65535&r)+(65535&e)+(65535&t)+(65535&n)+(65535&i);return(65535&(r>>>16)+(e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function Cc(r){return rt(r,7)^rt(r,18)^js(r,3)}function Rc(r){return rt(r,6)^rt(r,11)^rt(r,25)}function Nc(r){return[1732584193,4023233417,2562383102,271733878,3285377520]}function Ws(r,e){let t,n,i,s,o,a,u;const f=[];for(t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],u=0;u<80;u+=1)f[u]=u<16?r[u]:Xt(f[u-3]^f[u-8]^f[u-14]^f[u-16],1),a=u<20?Sr(Xt(t,5),Vs(n,i,s),o,1518500249,f[u]):u<40?Sr(Xt(t,5),Qs(n,i,s),o,1859775393,f[u]):u<60?Sr(Xt(t,5),Hs(n,i,s),o,2400959708,f[u]):Sr(Xt(t,5),Qs(n,i,s),o,3395469782,f[u]),o=s,s=i,i=Xt(n,30),n=t,t=a;return e[0]=Ne(t,e[0]),e[1]=Ne(n,e[1]),e[2]=Ne(i,e[2]),e[3]=Ne(s,e[3]),e[4]=Ne(o,e[4]),e}function Dc(r,e,t,n){let i;const s=15+(e+65>>>9<<4),o=e+t;for(;r.length<=s;)r.push(0);for(r[e>>>5]|=128<<24-e%32,r[s]=4294967295&o,r[s-1]=o/ft|0,i=0;i<r.length;i+=16)n=Ws(r.slice(i,i+16),n);return n}let Fc=class extends mn{constructor(e,t,n){if(e!=="SHA-1")throw new Error(_r);super(e,t,n);const i=n||{};this.M=!0,this.g=this.Y,this.T=-1,this.C=Et(this.t,this.i,this.T),this.v=Ws,this.L=function(s){return s.slice()},this.B=Nc,this.F=Dc,this.U=[1732584193,4023233417,2562383102,271733878,3285377520],this.m=512,this.R=160,this.K=!1,i.hmacKey&&this.k(_t("hmacKey",i.hmacKey,this.T))}};function zs(r){let e;return e=r=="SHA-224"?Qe.slice():ht.slice(),e}function Ks(r,e){let t,n,i,s,o,a,u,f,c,d,p;const y=[];for(t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],p=0;p<64;p+=1)y[p]=p<16?r[p]:Oc(rt(v=y[p-2],17)^rt(v,19)^js(v,10),y[p-7],Cc(y[p-15]),y[p-16]),c=Sr(f,Rc(o),Vs(o,a,u),F[p],y[p]),d=Ne(Ac(t),Hs(t,n,i)),f=u,u=a,a=o,o=Ne(s,c),s=i,i=n,n=t,t=Ne(c,d);var v;return e[0]=Ne(t,e[0]),e[1]=Ne(n,e[1]),e[2]=Ne(i,e[2]),e[3]=Ne(s,e[3]),e[4]=Ne(o,e[4]),e[5]=Ne(a,e[5]),e[6]=Ne(u,e[6]),e[7]=Ne(f,e[7]),e}let Mc=class extends mn{constructor(e,t,n){if(e!=="SHA-224"&&e!=="SHA-256")throw new Error(_r);super(e,t,n);const i=n||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=Et(this.t,this.i,this.T),this.v=Ks,this.L=function(s){return s.slice()},this.B=zs,this.F=function(s,o,a,u){return function(f,c,d,p,y){let v,w;const E=15+(c+65>>>9<<4),b=c+d;for(;f.length<=E;)f.push(0);for(f[c>>>5]|=128<<24-c%32,f[E]=4294967295&b,f[E-1]=b/ft|0,v=0;v<f.length;v+=16)p=Ks(f.slice(v,v+16),p);return w=y==="SHA-224"?[p[0],p[1],p[2],p[3],p[4],p[5],p[6]]:p,w}(s,o,a,u,e)},this.U=zs(e),this.m=512,this.R=e==="SHA-224"?224:256,this.K=!1,i.hmacKey&&this.k(_t("hmacKey",i.hmacKey,this.T))}};class T{constructor(e,t){this.N=e,this.I=t}}function Gs(r,e){let t;return e>32?(t=64-e,new T(r.I<<e|r.N>>>t,r.N<<e|r.I>>>t)):e!==0?(t=32-e,new T(r.N<<e|r.I>>>t,r.I<<e|r.N>>>t)):r}function nt(r,e){let t;return e<32?(t=32-e,new T(r.N>>>e|r.I<<t,r.I>>>e|r.N<<t)):(t=64-e,new T(r.I>>>e|r.N<<t,r.N>>>e|r.I<<t))}function Js(r,e){return new T(r.N>>>e,r.I>>>e|r.N<<32-e)}function Bc(r,e,t){return new T(r.N&e.N^r.N&t.N^e.N&t.N,r.I&e.I^r.I&t.I^e.I&t.I)}function $c(r){const e=nt(r,28),t=nt(r,34),n=nt(r,39);return new T(e.N^t.N^n.N,e.I^t.I^n.I)}function Ye(r,e){let t,n;t=(65535&r.I)+(65535&e.I),n=(r.I>>>16)+(e.I>>>16)+(t>>>16);const i=(65535&n)<<16|65535&t;return t=(65535&r.N)+(65535&e.N)+(n>>>16),n=(r.N>>>16)+(e.N>>>16)+(t>>>16),new T((65535&n)<<16|65535&t,i)}function Pc(r,e,t,n){let i,s;i=(65535&r.I)+(65535&e.I)+(65535&t.I)+(65535&n.I),s=(r.I>>>16)+(e.I>>>16)+(t.I>>>16)+(n.I>>>16)+(i>>>16);const o=(65535&s)<<16|65535&i;return i=(65535&r.N)+(65535&e.N)+(65535&t.N)+(65535&n.N)+(s>>>16),s=(r.N>>>16)+(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(i>>>16),new T((65535&s)<<16|65535&i,o)}function Lc(r,e,t,n,i){let s,o;s=(65535&r.I)+(65535&e.I)+(65535&t.I)+(65535&n.I)+(65535&i.I),o=(r.I>>>16)+(e.I>>>16)+(t.I>>>16)+(n.I>>>16)+(i.I>>>16)+(s>>>16);const a=(65535&o)<<16|65535&s;return s=(65535&r.N)+(65535&e.N)+(65535&t.N)+(65535&n.N)+(65535&i.N)+(o>>>16),o=(r.N>>>16)+(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(i.N>>>16)+(s>>>16),new T((65535&o)<<16|65535&s,a)}function kr(r,e){return new T(r.N^e.N,r.I^e.I)}function Uc(r){const e=nt(r,19),t=nt(r,61),n=Js(r,6);return new T(e.N^t.N^n.N,e.I^t.I^n.I)}function qc(r){const e=nt(r,1),t=nt(r,8),n=Js(r,7);return new T(e.N^t.N^n.N,e.I^t.I^n.I)}function jc(r){const e=nt(r,14),t=nt(r,18),n=nt(r,41);return new T(e.N^t.N^n.N,e.I^t.I^n.I)}const Qc=[new T(F[0],3609767458),new T(F[1],602891725),new T(F[2],3964484399),new T(F[3],2173295548),new T(F[4],4081628472),new T(F[5],3053834265),new T(F[6],2937671579),new T(F[7],3664609560),new T(F[8],2734883394),new T(F[9],1164996542),new T(F[10],1323610764),new T(F[11],3590304994),new T(F[12],4068182383),new T(F[13],991336113),new T(F[14],633803317),new T(F[15],3479774868),new T(F[16],2666613458),new T(F[17],944711139),new T(F[18],2341262773),new T(F[19],2007800933),new T(F[20],1495990901),new T(F[21],1856431235),new T(F[22],3175218132),new T(F[23],2198950837),new T(F[24],3999719339),new T(F[25],766784016),new T(F[26],2566594879),new T(F[27],3203337956),new T(F[28],1034457026),new T(F[29],2466948901),new T(F[30],3758326383),new T(F[31],168717936),new T(F[32],1188179964),new T(F[33],1546045734),new T(F[34],1522805485),new T(F[35],2643833823),new T(F[36],2343527390),new T(F[37],1014477480),new T(F[38],1206759142),new T(F[39],344077627),new T(F[40],1290863460),new T(F[41],3158454273),new T(F[42],3505952657),new T(F[43],106217008),new T(F[44],3606008344),new T(F[45],1432725776),new T(F[46],1467031594),new T(F[47],851169720),new T(F[48],3100823752),new T(F[49],1363258195),new T(F[50],3750685593),new T(F[51],3785050280),new T(F[52],3318307427),new T(F[53],3812723403),new T(F[54],2003034995),new T(F[55],3602036899),new T(F[56],1575990012),new T(F[57],1125592928),new T(F[58],2716904306),new T(F[59],442776044),new T(F[60],593698344),new T(F[61],3733110249),new T(F[62],2999351573),new T(F[63],3815920427),new T(3391569614,3928383900),new T(3515267271,566280711),new T(3940187606,3454069534),new T(4118630271,4000239992),new T(116418474,1914138554),new T(174292421,2731055270),new T(289380356,3203993006),new T(460393269,320620315),new T(685471733,587496836),new T(852142971,1086792851),new T(1017036298,365543100),new T(1126000580,2618297676),new T(1288033470,3409855158),new T(1501505948,4234509866),new T(1607167915,987167468),new T(1816402316,1246189591)];function Ys(r){return r==="SHA-384"?[new T(3418070365,Qe[0]),new T(1654270250,Qe[1]),new T(2438529370,Qe[2]),new T(355462360,Qe[3]),new T(1731405415,Qe[4]),new T(41048885895,Qe[5]),new T(3675008525,Qe[6]),new T(1203062813,Qe[7])]:[new T(ht[0],4089235720),new T(ht[1],2227873595),new T(ht[2],4271175723),new T(ht[3],1595750129),new T(ht[4],2917565137),new T(ht[5],725511199),new T(ht[6],4215389547),new T(ht[7],327033209)]}function Xs(r,e){let t,n,i,s,o,a,u,f,c,d,p,y;const v=[];for(t=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],f=e[7],p=0;p<80;p+=1)p<16?(y=2*p,v[p]=new T(r[y],r[y+1])):v[p]=Pc(Uc(v[p-2]),v[p-7],qc(v[p-15]),v[p-16]),c=Lc(f,jc(o),(E=a,b=u,new T((w=o).N&E.N^~w.N&b.N,w.I&E.I^~w.I&b.I)),Qc[p],v[p]),d=Ye($c(t),Bc(t,n,i)),f=u,u=a,a=o,o=Ye(s,c),s=i,i=n,n=t,t=Ye(c,d);var w,E,b;return e[0]=Ye(t,e[0]),e[1]=Ye(n,e[1]),e[2]=Ye(i,e[2]),e[3]=Ye(s,e[3]),e[4]=Ye(o,e[4]),e[5]=Ye(a,e[5]),e[6]=Ye(u,e[6]),e[7]=Ye(f,e[7]),e}let Vc=class extends mn{constructor(e,t,n){if(e!=="SHA-384"&&e!=="SHA-512")throw new Error(_r);super(e,t,n);const i=n||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=Et(this.t,this.i,this.T),this.v=Xs,this.L=function(s){return s.slice()},this.B=Ys,this.F=function(s,o,a,u){return function(f,c,d,p,y){let v,w;const E=31+(c+129>>>10<<5),b=c+d;for(;f.length<=E;)f.push(0);for(f[c>>>5]|=128<<24-c%32,f[E]=4294967295&b,f[E-1]=b/ft|0,v=0;v<f.length;v+=32)p=Xs(f.slice(v,v+32),p);return w=y==="SHA-384"?[p[0].N,p[0].I,p[1].N,p[1].I,p[2].N,p[2].I,p[3].N,p[3].I,p[4].N,p[4].I,p[5].N,p[5].I]:[p[0].N,p[0].I,p[1].N,p[1].I,p[2].N,p[2].I,p[3].N,p[3].I,p[4].N,p[4].I,p[5].N,p[5].I,p[6].N,p[6].I,p[7].N,p[7].I],w}(s,o,a,u,e)},this.U=Ys(e),this.m=1024,this.R=e==="SHA-384"?384:512,this.K=!1,i.hmacKey&&this.k(_t("hmacKey",i.hmacKey,this.T))}};const Hc=[new T(0,1),new T(0,32898),new T(2147483648,32906),new T(2147483648,2147516416),new T(0,32907),new T(0,2147483649),new T(2147483648,2147516545),new T(2147483648,32777),new T(0,138),new T(0,136),new T(0,2147516425),new T(0,2147483658),new T(0,2147516555),new T(2147483648,139),new T(2147483648,32905),new T(2147483648,32771),new T(2147483648,32770),new T(2147483648,128),new T(0,32778),new T(2147483648,2147483658),new T(2147483648,2147516545),new T(2147483648,32896),new T(0,2147483649),new T(2147483648,2147516424)],Wc=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function ai(r){let e;const t=[];for(e=0;e<5;e+=1)t[e]=[new T(0,0),new T(0,0),new T(0,0),new T(0,0),new T(0,0)];return t}function zc(r){let e;const t=[];for(e=0;e<5;e+=1)t[e]=r[e].slice();return t}function gn(r,e){let t,n,i,s;const o=[],a=[];if(r!==null)for(n=0;n<r.length;n+=2)e[(n>>>1)%5][(n>>>1)/5|0]=kr(e[(n>>>1)%5][(n>>>1)/5|0],new T(r[n+1],r[n]));for(t=0;t<24;t+=1){for(s=ai(),n=0;n<5;n+=1)o[n]=(u=e[n][0],f=e[n][1],c=e[n][2],d=e[n][3],p=e[n][4],new T(u.N^f.N^c.N^d.N^p.N,u.I^f.I^c.I^d.I^p.I));for(n=0;n<5;n+=1)a[n]=kr(o[(n+4)%5],Gs(o[(n+1)%5],1));for(n=0;n<5;n+=1)for(i=0;i<5;i+=1)e[n][i]=kr(e[n][i],a[n]);for(n=0;n<5;n+=1)for(i=0;i<5;i+=1)s[i][(2*n+3*i)%5]=Gs(e[n][i],Wc[n][i]);for(n=0;n<5;n+=1)for(i=0;i<5;i+=1)e[n][i]=kr(s[n][i],new T(~s[(n+1)%5][i].N&s[(n+2)%5][i].N,~s[(n+1)%5][i].I&s[(n+2)%5][i].I));e[0][0]=kr(e[0][0],Hc[t])}var u,f,c,d,p;return e}function Zs(r){let e,t,n=0;const i=[0,0],s=[4294967295&r,r/ft&2097151];for(e=6;e>=0;e--)t=s[e>>2]>>>8*e&255,t===0&&n===0||(i[n+1>>2]|=t<<8*(n+1),n+=1);return n=n!==0?n:1,i[0]|=n,{value:n+1>4?i:[i[0]],binLen:8+8*n}}function ui(r){return yn(Zs(r.binLen),r)}function eo(r,e){let t,n=Zs(e);n=yn(n,r);const i=e>>>2,s=(i-n.value.length%i)%i;for(t=0;t<s;t++)n.value.push(0);return n.value}let Kc=class extends mn{constructor(r,e,t){let n=6,i=0;super(r,e,t);const s=t||{};if(this.numRounds!==1){if(s.kmacKey||s.hmacKey)throw new Error(Us);if(this.o==="CSHAKE128"||this.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.T=1,this.C=Et(this.t,this.i,this.T),this.v=gn,this.L=zc,this.B=ai,this.U=ai(),this.K=!1,r){case"SHA3-224":this.m=i=1152,this.R=224,this.M=!0,this.g=this.Y;break;case"SHA3-256":this.m=i=1088,this.R=256,this.M=!0,this.g=this.Y;break;case"SHA3-384":this.m=i=832,this.R=384,this.M=!0,this.g=this.Y;break;case"SHA3-512":this.m=i=576,this.R=512,this.M=!0,this.g=this.Y;break;case"SHAKE128":n=31,this.m=i=1344,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"SHAKE256":n=31,this.m=i=1088,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"KMAC128":n=4,this.m=i=1344,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"KMAC256":n=4,this.m=i=1088,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"CSHAKE128":this.m=i=1344,n=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"CSHAKE256":this.m=i=1088,n=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;default:throw new Error(_r)}this.F=function(o,a,u,f,c){return function(d,p,y,v,w,E,b){let k,S,A=0;const O=[],N=w>>>5,D=p>>>5;for(k=0;k<D&&p>=w;k+=N)v=gn(d.slice(k,k+N),v),p-=w;for(d=d.slice(k),p%=w;d.length<N;)d.push(0);for(k=p>>>3,d[k>>2]^=E<<k%4*8,d[N-1]^=2147483648,v=gn(d,v);32*O.length<b&&(S=v[A%5][A/5|0],O.push(S.I),!(32*O.length>=b));)O.push(S.N),A+=1,64*A%w==0&&(gn(null,v),A=0);return O}(o,a,0,f,i,n,c)},s.hmacKey&&this.k(_t("hmacKey",s.hmacKey,this.T))}O(r,e){const t=function(i){const s=i||{};return{funcName:_t("funcName",s.funcName,1,{value:[],binLen:0}),customization:_t("Customization",s.customization,1,{value:[],binLen:0})}}(r||{});e&&(t.funcName=e);const n=yn(ui(t.funcName),ui(t.customization));if(t.customization.binLen!==0||t.funcName.binLen!==0){const i=eo(n,this.m>>>3);for(let s=0;s<i.length;s+=this.m>>>5)this.U=this.v(i.slice(s,s+(this.m>>>5)),this.U),this.A+=this.m;return 4}return 31}X(r){const e=function(n){const i=n||{};return{kmacKey:_t("kmacKey",i.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:_t("Customization",i.customization,1,{value:[],binLen:0})}}(r||{});this.O(r,e.funcName);const t=eo(ui(e.kmacKey),this.m>>>3);for(let n=0;n<t.length;n+=this.m>>>5)this.U=this.v(t.slice(n,n+(this.m>>>5)),this.U),this.A+=this.m;this.H=!0}_(r){const e=yn({value:this.h.slice(),binLen:this.u},function(t){let n,i,s=0;const o=[0,0],a=[4294967295&t,t/ft&2097151];for(n=6;n>=0;n--)i=a[n>>2]>>>8*n&255,i===0&&s===0||(o[s>>2]|=i<<8*s,s+=1);return s=s!==0?s:1,o[s>>2]|=s<<8*s,{value:s+1>4?o:[o[0]],binLen:8+8*s}}(r.outputLen));return this.F(e.value,e.binLen,this.A,this.L(this.U),r.outputLen)}};class We{constructor(e,t,n){if(e=="SHA-1")this.P=new Fc(e,t,n);else if(e=="SHA-224"||e=="SHA-256")this.P=new Mc(e,t,n);else if(e=="SHA-384"||e=="SHA-512")this.P=new Vc(e,t,n);else{if(e!="SHA3-224"&&e!="SHA3-256"&&e!="SHA3-384"&&e!="SHA3-512"&&e!="SHAKE128"&&e!="SHAKE256"&&e!="CSHAKE128"&&e!="CSHAKE256"&&e!="KMAC128"&&e!="KMAC256")throw new Error(_r);this.P=new Kc(e,t,n)}}update(e){return this.P.update(e),this}getHash(e,t){return this.P.getHash(e,t)}setHMACKey(e,t,n){this.P.setHMACKey(e,t,n)}getHMAC(e,t){return this.P.getHMAC(e,t)}}var to={},vn={};vn.byteLength=Yc,vn.toByteArray=Zc,vn.fromByteArray=rl;for(var it=[],ze=[],Gc=typeof Uint8Array!="undefined"?Uint8Array:Array,ci="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Zt=0,Jc=ci.length;Zt<Jc;++Zt)it[Zt]=ci[Zt],ze[ci.charCodeAt(Zt)]=Zt;ze[45]=62,ze[95]=63;function ro(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Yc(r){var e=ro(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Xc(r,e,t){return(e+t)*3/4-t}function Zc(r){var e,t=ro(r),n=t[0],i=t[1],s=new Gc(Xc(r,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=ze[r.charCodeAt(u)]<<18|ze[r.charCodeAt(u+1)]<<12|ze[r.charCodeAt(u+2)]<<6|ze[r.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=ze[r.charCodeAt(u)]<<2|ze[r.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=ze[r.charCodeAt(u)]<<10|ze[r.charCodeAt(u+1)]<<4|ze[r.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function el(r){return it[r>>18&63]+it[r>>12&63]+it[r>>6&63]+it[r&63]}function tl(r,e,t){for(var n,i=[],s=e;s<t;s+=3)n=(r[s]<<16&16711680)+(r[s+1]<<8&65280)+(r[s+2]&255),i.push(el(n));return i.join("")}function rl(r){for(var e,t=r.length,n=t%3,i=[],s=16383,o=0,a=t-n;o<a;o+=s)i.push(tl(r,o,o+s>a?a:o+s));return n===1?(e=r[t-1],i.push(it[e>>2]+it[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(it[e>>10]+it[e>>4&63]+it[e<<2&63]+"=")),i.join("")}var li={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */li.read=function(r,e,t,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,f=u>>1,c=-7,d=t?i-1:0,p=t?-1:1,y=r[e+d];for(d+=p,s=y&(1<<-c)-1,y>>=-c,c+=a;c>0;s=s*256+r[e+d],d+=p,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=o*256+r[e+d],d+=p,c-=8);if(s===0)s=1-f;else{if(s===u)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-f}return(y?-1:1)*o*Math.pow(2,s-n)},li.write=function(r,e,t,n,i,s){var o,a,u,f=s*8-i-1,c=(1<<f)-1,d=c>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,v=n?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+d>=1?e+=p/u:e+=p*Math.pow(2,1-d),e*u>=2&&(o++,u/=2),o+d>=c?(a=0,o=c):o+d>=1?(a=(e*u-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;r[t+y]=a&255,y+=v,a/=256,i-=8);for(o=o<<i|a,f+=i;f>0;r[t+y]=o&255,y+=v,o/=256,f-=8);r[t+y-v]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const e=vn,t=li,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=c,r.SlowBuffer=O,r.INSPECT_MAX_BYTES=50;const i=2147483647;r.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;c.TYPED_ARRAY_SUPPORT=u(),!c.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function u(){try{const m=new s(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,s.prototype),Object.setPrototypeOf(m,l),m.foo()===42}catch(m){return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function f(m){if(m>i)throw new RangeError('The value "'+m+'" is invalid for option "size"');const l=new s(m);return Object.setPrototypeOf(l,c.prototype),l}function c(m,l,h){if(typeof m=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(m)}return d(m,l,h)}c.poolSize=8192;function d(m,l,h){if(typeof m=="string")return w(m,l);if(o.isView(m))return b(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(lt(m,o)||m&&lt(m.buffer,o)||typeof a!="undefined"&&(lt(m,a)||m&&lt(m.buffer,a)))return k(m,l,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=m.valueOf&&m.valueOf();if(g!=null&&g!==m)return c.from(g,l,h);const _=S(m);if(_)return _;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return c.from(m[Symbol.toPrimitive]("string"),l,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}c.from=function(m,l,h){return d(m,l,h)},Object.setPrototypeOf(c.prototype,s.prototype),Object.setPrototypeOf(c,s);function p(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function y(m,l,h){return p(m),m<=0?f(m):l!==void 0?typeof h=="string"?f(m).fill(l,h):f(m).fill(l):f(m)}c.alloc=function(m,l,h){return y(m,l,h)};function v(m){return p(m),f(m<0?0:A(m)|0)}c.allocUnsafe=function(m){return v(m)},c.allocUnsafeSlow=function(m){return v(m)};function w(m,l){if((typeof l!="string"||l==="")&&(l="utf8"),!c.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const h=N(m,l)|0;let g=f(h);const _=g.write(m,l);return _!==h&&(g=g.slice(0,_)),g}function E(m){const l=m.length<0?0:A(m.length)|0,h=f(l);for(let g=0;g<l;g+=1)h[g]=m[g]&255;return h}function b(m){if(lt(m,s)){const l=new s(m);return k(l.buffer,l.byteOffset,l.byteLength)}return E(m)}function k(m,l,h){if(l<0||m.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<l+(h||0))throw new RangeError('"length" is outside of buffer bounds');let g;return l===void 0&&h===void 0?g=new s(m):h===void 0?g=new s(m,l):g=new s(m,l,h),Object.setPrototypeOf(g,c.prototype),g}function S(m){if(c.isBuffer(m)){const l=A(m.length)|0,h=f(l);return h.length===0||m.copy(h,0,0,l),h}if(m.length!==void 0)return typeof m.length!="number"||Ls(m.length)?f(0):E(m);if(m.type==="Buffer"&&Array.isArray(m.data))return E(m.data)}function A(m){if(m>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return m|0}function O(m){return+m!=m&&(m=0),c.alloc(+m)}c.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==c.prototype},c.compare=function(l,h){if(lt(l,s)&&(l=c.from(l,l.offset,l.byteLength)),lt(h,s)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(l)||!c.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===h)return 0;let g=l.length,_=h.length;for(let I=0,C=Math.min(g,_);I<C;++I)if(l[I]!==h[I]){g=l[I],_=h[I];break}return g<_?-1:_<g?1:0},c.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(l,h){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return c.alloc(0);let g;if(h===void 0)for(h=0,g=0;g<l.length;++g)h+=l[g].length;const _=c.allocUnsafe(h);let I=0;for(g=0;g<l.length;++g){let C=l[g];if(lt(C,s))I+C.length>_.length?(c.isBuffer(C)||(C=c.from(C)),C.copy(_,I)):s.prototype.set.call(_,C,I);else if(c.isBuffer(C))C.copy(_,I);else throw new TypeError('"list" argument must be an Array of Buffers');I+=C.length}return _};function N(m,l){if(c.isBuffer(m))return m.length;if(o.isView(m)||lt(m,o))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&h===0)return 0;let _=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return Ps(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Sc(m).length;default:if(_)return g?-1:Ps(m).length;l=(""+l).toLowerCase(),_=!0}}c.byteLength=N;function D(m,l,h){let g=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,l>>>=0,h<=l))return"";for(m||(m="utf8");;)switch(m){case"hex":return z(this,l,h);case"utf8":case"utf-8":return te(this,l,h);case"ascii":return re(this,l,h);case"latin1":case"binary":return ke(this,l,h);case"base64":return V(this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return je(this,l,h);default:if(g)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),g=!0}}c.prototype._isBuffer=!0;function M(m,l,h){const g=m[l];m[l]=m[h],m[h]=g}c.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<l;h+=2)M(this,h,h+1);return this},c.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<l;h+=4)M(this,h,h+3),M(this,h+1,h+2);return this},c.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<l;h+=8)M(this,h,h+7),M(this,h+1,h+6),M(this,h+2,h+5),M(this,h+3,h+4);return this},c.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?te(this,0,l):D.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(l){if(!c.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:c.compare(this,l)===0},c.prototype.inspect=function(){let l="";const h=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(l+=" ... "),"<Buffer "+l+">"},n&&(c.prototype[n]=c.prototype.inspect),c.prototype.compare=function(l,h,g,_,I){if(lt(l,s)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(h===void 0&&(h=0),g===void 0&&(g=l?l.length:0),_===void 0&&(_=0),I===void 0&&(I=this.length),h<0||g>l.length||_<0||I>this.length)throw new RangeError("out of range index");if(_>=I&&h>=g)return 0;if(_>=I)return-1;if(h>=g)return 1;if(h>>>=0,g>>>=0,_>>>=0,I>>>=0,this===l)return 0;let C=I-_,K=g-h;const ye=Math.min(C,K),fe=this.slice(_,I),me=l.slice(h,g);for(let ae=0;ae<ye;++ae)if(fe[ae]!==me[ae]){C=fe[ae],K=me[ae];break}return C<K?-1:K<C?1:0};function P(m,l,h,g,_){if(m.length===0)return-1;if(typeof h=="string"?(g=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,Ls(h)&&(h=_?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(_)return-1;h=m.length-1}else if(h<0)if(_)h=0;else return-1;if(typeof l=="string"&&(l=c.from(l,g)),c.isBuffer(l))return l.length===0?-1:W(m,l,h,g,_);if(typeof l=="number")return l=l&255,typeof s.prototype.indexOf=="function"?_?s.prototype.indexOf.call(m,l,h):s.prototype.lastIndexOf.call(m,l,h):W(m,[l],h,g,_);throw new TypeError("val must be string, number or Buffer")}function W(m,l,h,g,_){let I=1,C=m.length,K=l.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(m.length<2||l.length<2)return-1;I=2,C/=2,K/=2,h/=2}function ye(me,ae){return I===1?me[ae]:me.readUInt16BE(ae*I)}let fe;if(_){let me=-1;for(fe=h;fe<C;fe++)if(ye(m,fe)===ye(l,me===-1?0:fe-me)){if(me===-1&&(me=fe),fe-me+1===K)return me*I}else me!==-1&&(fe-=fe-me),me=-1}else for(h+K>C&&(h=C-K),fe=h;fe>=0;fe--){let me=!0;for(let ae=0;ae<K;ae++)if(ye(m,fe+ae)!==ye(l,ae)){me=!1;break}if(me)return fe}return-1}c.prototype.includes=function(l,h,g){return this.indexOf(l,h,g)!==-1},c.prototype.indexOf=function(l,h,g){return P(this,l,h,g,!0)},c.prototype.lastIndexOf=function(l,h,g){return P(this,l,h,g,!1)};function X(m,l,h,g){h=Number(h)||0;const _=m.length-h;g?(g=Number(g),g>_&&(g=_)):g=_;const I=l.length;g>I/2&&(g=I/2);let C;for(C=0;C<g;++C){const K=parseInt(l.substr(C*2,2),16);if(Ls(K))return C;m[h+C]=K}return C}function Me(m,l,h,g){return oi(Ps(l,m.length-h),m,h,g)}function se(m,l,h,g){return oi(pm(l),m,h,g)}function Ce(m,l,h,g){return oi(Sc(l),m,h,g)}function Yt(m,l,h,g){return oi(dm(l,m.length-h),m,h,g)}c.prototype.write=function(l,h,g,_){if(h===void 0)_="utf8",g=this.length,h=0;else if(g===void 0&&typeof h=="string")_=h,g=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(g)?(g=g>>>0,_===void 0&&(_="utf8")):(_=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const I=this.length-h;if((g===void 0||g>I)&&(g=I),l.length>0&&(g<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let C=!1;for(;;)switch(_){case"hex":return X(this,l,h,g);case"utf8":case"utf-8":return Me(this,l,h,g);case"ascii":case"latin1":case"binary":return se(this,l,h,g);case"base64":return Ce(this,l,h,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Yt(this,l,h,g);default:if(C)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),C=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(m,l,h){return l===0&&h===m.length?e.fromByteArray(m):e.fromByteArray(m.slice(l,h))}function te(m,l,h){h=Math.min(m.length,h);const g=[];let _=l;for(;_<h;){const I=m[_];let C=null,K=I>239?4:I>223?3:I>191?2:1;if(_+K<=h){let ye,fe,me,ae;switch(K){case 1:I<128&&(C=I);break;case 2:ye=m[_+1],(ye&192)===128&&(ae=(I&31)<<6|ye&63,ae>127&&(C=ae));break;case 3:ye=m[_+1],fe=m[_+2],(ye&192)===128&&(fe&192)===128&&(ae=(I&15)<<12|(ye&63)<<6|fe&63,ae>2047&&(ae<55296||ae>57343)&&(C=ae));break;case 4:ye=m[_+1],fe=m[_+2],me=m[_+3],(ye&192)===128&&(fe&192)===128&&(me&192)===128&&(ae=(I&15)<<18|(ye&63)<<12|(fe&63)<<6|me&63,ae>65535&&ae<1114112&&(C=ae))}}C===null?(C=65533,K=1):C>65535&&(C-=65536,g.push(C>>>10&1023|55296),C=56320|C&1023),g.push(C),_+=K}return j(g)}const Q=4096;function j(m){const l=m.length;if(l<=Q)return String.fromCharCode.apply(String,m);let h="",g=0;for(;g<l;)h+=String.fromCharCode.apply(String,m.slice(g,g+=Q));return h}function re(m,l,h){let g="";h=Math.min(m.length,h);for(let _=l;_<h;++_)g+=String.fromCharCode(m[_]&127);return g}function ke(m,l,h){let g="";h=Math.min(m.length,h);for(let _=l;_<h;++_)g+=String.fromCharCode(m[_]);return g}function z(m,l,h){const g=m.length;(!l||l<0)&&(l=0),(!h||h<0||h>g)&&(h=g);let _="";for(let I=l;I<h;++I)_+=ym[m[I]];return _}function je(m,l,h){const g=m.slice(l,h);let _="";for(let I=0;I<g.length-1;I+=2)_+=String.fromCharCode(g[I]+g[I+1]*256);return _}c.prototype.slice=function(l,h){const g=this.length;l=~~l,h=h===void 0?g:~~h,l<0?(l+=g,l<0&&(l=0)):l>g&&(l=g),h<0?(h+=g,h<0&&(h=0)):h>g&&(h=g),h<l&&(h=l);const _=this.subarray(l,h);return Object.setPrototypeOf(_,c.prototype),_};function oe(m,l,h){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+l>h)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(l,h,g){l=l>>>0,h=h>>>0,g||oe(l,h,this.length);let _=this[l],I=1,C=0;for(;++C<h&&(I*=256);)_+=this[l+C]*I;return _},c.prototype.readUintBE=c.prototype.readUIntBE=function(l,h,g){l=l>>>0,h=h>>>0,g||oe(l,h,this.length);let _=this[l+--h],I=1;for(;h>0&&(I*=256);)_+=this[l+--h]*I;return _},c.prototype.readUint8=c.prototype.readUInt8=function(l,h){return l=l>>>0,h||oe(l,1,this.length),this[l]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(l,h){return l=l>>>0,h||oe(l,2,this.length),this[l]|this[l+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(l,h){return l=l>>>0,h||oe(l,2,this.length),this[l]<<8|this[l+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},c.prototype.readBigUInt64LE=$t(function(l){l=l>>>0,wr(l,"offset");const h=this[l],g=this[l+7];(h===void 0||g===void 0)&&fn(l,this.length-8);const _=h+this[++l]*he(2,8)+this[++l]*he(2,16)+this[++l]*he(2,24),I=this[++l]+this[++l]*he(2,8)+this[++l]*he(2,16)+g*he(2,24);return BigInt(_)+(BigInt(I)<<BigInt(32))}),c.prototype.readBigUInt64BE=$t(function(l){l=l>>>0,wr(l,"offset");const h=this[l],g=this[l+7];(h===void 0||g===void 0)&&fn(l,this.length-8);const _=h*he(2,24)+this[++l]*he(2,16)+this[++l]*he(2,8)+this[++l],I=this[++l]*he(2,24)+this[++l]*he(2,16)+this[++l]*he(2,8)+g;return(BigInt(_)<<BigInt(32))+BigInt(I)}),c.prototype.readIntLE=function(l,h,g){l=l>>>0,h=h>>>0,g||oe(l,h,this.length);let _=this[l],I=1,C=0;for(;++C<h&&(I*=256);)_+=this[l+C]*I;return I*=128,_>=I&&(_-=Math.pow(2,8*h)),_},c.prototype.readIntBE=function(l,h,g){l=l>>>0,h=h>>>0,g||oe(l,h,this.length);let _=h,I=1,C=this[l+--_];for(;_>0&&(I*=256);)C+=this[l+--_]*I;return I*=128,C>=I&&(C-=Math.pow(2,8*h)),C},c.prototype.readInt8=function(l,h){return l=l>>>0,h||oe(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},c.prototype.readInt16LE=function(l,h){l=l>>>0,h||oe(l,2,this.length);const g=this[l]|this[l+1]<<8;return g&32768?g|4294901760:g},c.prototype.readInt16BE=function(l,h){l=l>>>0,h||oe(l,2,this.length);const g=this[l+1]|this[l]<<8;return g&32768?g|4294901760:g},c.prototype.readInt32LE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},c.prototype.readInt32BE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},c.prototype.readBigInt64LE=$t(function(l){l=l>>>0,wr(l,"offset");const h=this[l],g=this[l+7];(h===void 0||g===void 0)&&fn(l,this.length-8);const _=this[l+4]+this[l+5]*he(2,8)+this[l+6]*he(2,16)+(g<<24);return(BigInt(_)<<BigInt(32))+BigInt(h+this[++l]*256+this[++l]*65536+this[++l]*16777216)}),c.prototype.readBigInt64BE=$t(function(l){l=l>>>0,wr(l,"offset");const h=this[l],g=this[l+7];(h===void 0||g===void 0)&&fn(l,this.length-8);const _=(h<<24)+this[++l]*he(2,16)+this[++l]*he(2,8)+this[++l];return(BigInt(_)<<BigInt(32))+BigInt(this[++l]*16777216+this[++l]*65536+this[++l]*256+g)}),c.prototype.readFloatLE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),t.read(this,l,!0,23,4)},c.prototype.readFloatBE=function(l,h){return l=l>>>0,h||oe(l,4,this.length),t.read(this,l,!1,23,4)},c.prototype.readDoubleLE=function(l,h){return l=l>>>0,h||oe(l,8,this.length),t.read(this,l,!0,52,8)},c.prototype.readDoubleBE=function(l,h){return l=l>>>0,h||oe(l,8,this.length),t.read(this,l,!1,52,8)};function xe(m,l,h,g,_,I){if(!c.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>_||l<I)throw new RangeError('"value" argument is out of bounds');if(h+g>m.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(l,h,g,_){if(l=+l,h=h>>>0,g=g>>>0,!_){const K=Math.pow(2,8*g)-1;xe(this,l,h,g,K,0)}let I=1,C=0;for(this[h]=l&255;++C<g&&(I*=256);)this[h+C]=l/I&255;return h+g},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(l,h,g,_){if(l=+l,h=h>>>0,g=g>>>0,!_){const K=Math.pow(2,8*g)-1;xe(this,l,h,g,K,0)}let I=g-1,C=1;for(this[h+I]=l&255;--I>=0&&(C*=256);)this[h+I]=l/C&255;return h+g},c.prototype.writeUint8=c.prototype.writeUInt8=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,1,255,0),this[h]=l&255,h+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,2,65535,0),this[h]=l&255,this[h+1]=l>>>8,h+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,2,65535,0),this[h]=l>>>8,this[h+1]=l&255,h+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,4,4294967295,0),this[h+3]=l>>>24,this[h+2]=l>>>16,this[h+1]=l>>>8,this[h]=l&255,h+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,4,4294967295,0),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4};function wt(m,l,h,g,_){_c(l,g,_,m,h,7);let I=Number(l&BigInt(4294967295));m[h++]=I,I=I>>8,m[h++]=I,I=I>>8,m[h++]=I,I=I>>8,m[h++]=I;let C=Number(l>>BigInt(32)&BigInt(4294967295));return m[h++]=C,C=C>>8,m[h++]=C,C=C>>8,m[h++]=C,C=C>>8,m[h++]=C,h}function Te(m,l,h,g,_){_c(l,g,_,m,h,7);let I=Number(l&BigInt(4294967295));m[h+7]=I,I=I>>8,m[h+6]=I,I=I>>8,m[h+5]=I,I=I>>8,m[h+4]=I;let C=Number(l>>BigInt(32)&BigInt(4294967295));return m[h+3]=C,C=C>>8,m[h+2]=C,C=C>>8,m[h+1]=C,C=C>>8,m[h]=C,h+8}c.prototype.writeBigUInt64LE=$t(function(l,h=0){return wt(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=$t(function(l,h=0){return Te(this,l,h,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(l,h,g,_){if(l=+l,h=h>>>0,!_){const ye=Math.pow(2,8*g-1);xe(this,l,h,g,ye-1,-ye)}let I=0,C=1,K=0;for(this[h]=l&255;++I<g&&(C*=256);)l<0&&K===0&&this[h+I-1]!==0&&(K=1),this[h+I]=(l/C>>0)-K&255;return h+g},c.prototype.writeIntBE=function(l,h,g,_){if(l=+l,h=h>>>0,!_){const ye=Math.pow(2,8*g-1);xe(this,l,h,g,ye-1,-ye)}let I=g-1,C=1,K=0;for(this[h+I]=l&255;--I>=0&&(C*=256);)l<0&&K===0&&this[h+I+1]!==0&&(K=1),this[h+I]=(l/C>>0)-K&255;return h+g},c.prototype.writeInt8=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,1,127,-128),l<0&&(l=255+l+1),this[h]=l&255,h+1},c.prototype.writeInt16LE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,2,32767,-32768),this[h]=l&255,this[h+1]=l>>>8,h+2},c.prototype.writeInt16BE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,2,32767,-32768),this[h]=l>>>8,this[h+1]=l&255,h+2},c.prototype.writeInt32LE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,4,2147483647,-2147483648),this[h]=l&255,this[h+1]=l>>>8,this[h+2]=l>>>16,this[h+3]=l>>>24,h+4},c.prototype.writeInt32BE=function(l,h,g){return l=+l,h=h>>>0,g||xe(this,l,h,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[h]=l>>>24,this[h+1]=l>>>16,this[h+2]=l>>>8,this[h+3]=l&255,h+4},c.prototype.writeBigInt64LE=$t(function(l,h=0){return wt(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=$t(function(l,h=0){return Te(this,l,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function we(m,l,h,g,_,I){if(h+g>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function Bs(m,l,h,g,_){return l=+l,h=h>>>0,_||we(m,l,h,4),t.write(m,l,h,g,23,4),h+4}c.prototype.writeFloatLE=function(l,h,g){return Bs(this,l,h,!0,g)},c.prototype.writeFloatBE=function(l,h,g){return Bs(this,l,h,!1,g)};function si(m,l,h,g,_){return l=+l,h=h>>>0,_||we(m,l,h,8),t.write(m,l,h,g,52,8),h+8}c.prototype.writeDoubleLE=function(l,h,g){return si(this,l,h,!0,g)},c.prototype.writeDoubleBE=function(l,h,g){return si(this,l,h,!1,g)},c.prototype.copy=function(l,h,g,_){if(!c.isBuffer(l))throw new TypeError("argument should be a Buffer");if(g||(g=0),!_&&_!==0&&(_=this.length),h>=l.length&&(h=l.length),h||(h=0),_>0&&_<g&&(_=g),_===g||l.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),l.length-h<_-g&&(_=l.length-h+g);const I=_-g;return this===l&&typeof s.prototype.copyWithin=="function"?this.copyWithin(h,g,_):s.prototype.set.call(l,this.subarray(g,_),h),I},c.prototype.fill=function(l,h,g,_){if(typeof l=="string"){if(typeof h=="string"?(_=h,h=0,g=this.length):typeof g=="string"&&(_=g,g=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!c.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(l.length===1){const C=l.charCodeAt(0);(_==="utf8"&&C<128||_==="latin1")&&(l=C)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(h<0||this.length<h||this.length<g)throw new RangeError("Out of range index");if(g<=h)return this;h=h>>>0,g=g===void 0?this.length:g>>>0,l||(l=0);let I;if(typeof l=="number")for(I=h;I<g;++I)this[I]=l;else{const C=c.isBuffer(l)?l:c.from(l,_),K=C.length;if(K===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(I=0;I<g-h;++I)this[I+h]=C[I%K]}return this};const br={};function $s(m,l,h){br[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}$s("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),$s("ERR_INVALID_ARG_TYPE",function(m,l){return`The "${m}" argument must be of type number. Received type ${typeof l}`},TypeError),$s("ERR_OUT_OF_RANGE",function(m,l,h){let g=`The value of "${m}" is out of range.`,_=h;return Number.isInteger(h)&&Math.abs(h)>4294967296?_=Ec(String(h)):typeof h=="bigint"&&(_=String(h),(h>he(BigInt(2),BigInt(32))||h<-he(BigInt(2),BigInt(32)))&&(_=Ec(_)),_+="n"),g+=` It must be ${l}. Received ${_}`,g},RangeError);function Ec(m){let l="",h=m.length;const g=m[0]==="-"?1:0;for(;h>=g+4;h-=3)l=`_${m.slice(h-3,h)}${l}`;return`${m.slice(0,h)}${l}`}function lm(m,l,h){wr(l,"offset"),(m[l]===void 0||m[l+h]===void 0)&&fn(l,m.length-(h+1))}function _c(m,l,h,g,_,I){if(m>h||m<l){const C=typeof l=="bigint"?"n":"";let K;throw l===0||l===BigInt(0)?K=`>= 0${C} and < 2${C} ** ${(I+1)*8}${C}`:K=`>= -(2${C} ** ${(I+1)*8-1}${C}) and < 2 ** ${(I+1)*8-1}${C}`,new br.ERR_OUT_OF_RANGE("value",K,m)}lm(g,_,I)}function wr(m,l){if(typeof m!="number")throw new br.ERR_INVALID_ARG_TYPE(l,"number",m)}function fn(m,l,h){throw Math.floor(m)!==m?(wr(m,h),new br.ERR_OUT_OF_RANGE("offset","an integer",m)):l<0?new br.ERR_BUFFER_OUT_OF_BOUNDS:new br.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,m)}const fm=/[^+/0-9A-Za-z-_]/g;function hm(m){if(m=m.split("=")[0],m=m.trim().replace(fm,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function Ps(m,l){l=l||1/0;let h;const g=m.length;let _=null;const I=[];for(let C=0;C<g;++C){if(h=m.charCodeAt(C),h>55295&&h<57344){if(!_){if(h>56319){(l-=3)>-1&&I.push(239,191,189);continue}else if(C+1===g){(l-=3)>-1&&I.push(239,191,189);continue}_=h;continue}if(h<56320){(l-=3)>-1&&I.push(239,191,189),_=h;continue}h=(_-55296<<10|h-56320)+65536}else _&&(l-=3)>-1&&I.push(239,191,189);if(_=null,h<128){if((l-=1)<0)break;I.push(h)}else if(h<2048){if((l-=2)<0)break;I.push(h>>6|192,h&63|128)}else if(h<65536){if((l-=3)<0)break;I.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((l-=4)<0)break;I.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return I}function pm(m){const l=[];for(let h=0;h<m.length;++h)l.push(m.charCodeAt(h)&255);return l}function dm(m,l){let h,g,_;const I=[];for(let C=0;C<m.length&&!((l-=2)<0);++C)h=m.charCodeAt(C),g=h>>8,_=h%256,I.push(_),I.push(g);return I}function Sc(m){return e.toByteArray(hm(m))}function oi(m,l,h,g){let _;for(_=0;_<g&&!(_+h>=l.length||_>=m.length);++_)l[_+h]=m[_];return _}function lt(m,l){return m instanceof l||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===l.name}function Ls(m){return m!==m}const ym=function(){const m="0123456789abcdef",l=new Array(256);for(let h=0;h<16;++h){const g=h*16;for(let _=0;_<16;++_)l[g+_]=m[h]+m[_]}return l}();function $t(m){return typeof BigInt=="undefined"?mm:m}function mm(){throw new Error("BigInt not supported")}})(to);const no=to.Buffer;class io{static toHex(e,t){const n=(u,f)=>{const c=f?["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"]:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return c[Math.floor(u/16)]+c[u%16]},i=Object.assign({grouping:0,rowlength:0,uppercase:!1},t||{});let s="",o=0,a=0;for(let u=0;u<e.length&&(s+=n(e[u],i.uppercase),u!==e.length-1);++u)i.grouping>0&&++o===i.grouping&&(o=0,i.rowlength>0&&++a===i.rowlength?(a=0,s+=`
`):s+=" ");return s}static toUint8Array(e){let t=e.toLowerCase().replace(/\s/g,"");t.length%2===1&&(t=`0${t}`);const n=new Uint8Array(Math.floor(t.length/2));let i=-1;for(let s=0;s<t.length;++s){const o=t[s],a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"].indexOf(o);if(a===-1)throw Error("unexpected character");i===-1?i=16*a:(n[Math.floor(s/2)]=i+a,i=-1)}return n}}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.toCamelCase||(String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(r,e)=>e.toUpperCase())}),String.prototype.toSnakeCase||(String.prototype.toSnakeCase=function(){return this.replace(/[A-Z]/g,r=>`_${r.toLowerCase()}`)});function xr(r,e){const t=Math.ceil(r.length/e),n=[];for(let i=0,s=0;i<t;++i,s+=e)n[i]=r.substr(s,e);return n}function bn(r=256,e="abcdef0123456789"){let t=new Uint8Array(r);return t=crypto.getRandomValues(t),t=t.map(n=>e.charCodeAt(n%e.length)),String.fromCharCode.apply(null,t)}function so(r,e,t,n,i){if(n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~`!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?",i=i||n,e>n.length||t>i.length)return console.warn("Strings::charsetBaseConvert() - Can't convert",r,"to base",t,"greater than symbol table length. src-table:",n.length,"dest-table:",i.length),!1;let o=BigInt(0);for(let u=0;u<r.length;u++)o=o*BigInt(e)+BigInt(n.indexOf(r.charAt(u)));let a="";for(;o>0;){const u=o%BigInt(t);a=i.charAt(Number(u))+a,o/=BigInt(t)}return a||"0"}function nl(r){return io.toHex(r,{})}function il(r){return io.toUint8Array(r)}function oo(r){return no.from(r,"hex").toString("base64")}function ao(r){return no.from(r,"base64").toString("hex")}function uo(r){return/^[A-F0-9]+$/i.test(r)}function sl(r){return(typeof r=="number"||typeof r=="string"&&r.trim()!=="")&&!isNaN(r)}let Tr=class{static normalizeMeta(e){const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&e[n]!==null&&t.push({key:n,value:e[n].toString()});return t}static aggregateMeta(e){let t={};if(Array.isArray(e))for(const n of e)t[n.key]=n.value;else t=e;return t}};function co(r,e){let t,n,i;const s=[Array,Date,Number,String,Boolean],o=Object.prototype.toString;for(e=e||[],t=0;t<e.length;t+=2)r===e[t]&&(n=e[t+1]);if(!n&&r&&typeof r=="object"){for(n={},t=0;t<s.length;t++)o.call(r)===o.call(i=new s[t](r))&&(n=t?i:[]);e.push(r,n);for(t in r)e.hasOwnProperty.call(r,t)&&(n[t]=co(r[t],e))}return n||r}function ol(...r){return[].concat(...r.map((e,t)=>{const n=r.slice(0);n.splice(t,1);const i=[...new Set([].concat(...n))];return e.filter(s=>!i.includes(s))}))}function Ir(...r){return r.reduce((e,t)=>e.filter(n=>t.includes(n)))}class fi{constructor(e={},t={}){this.policy=fi.normalizePolicy(e),this.fillDefault(t)}static normalizePolicy(e={}){const t={};for(const[n,i]of Object.entries(e))if(i!==null&&["read","write"].includes(n)){t[n]={};for(const[s,o]of Object.entries(i))t[n][s]=o}return t}fillDefault(e={}){const t=Array.from(this.policy).filter(i=>i.action==="read"),n=Array.from(this.policy).filter(i=>i.action==="write");for(const[i,s]of Object.entries({read:t,write:n})){const o=s.map(a=>a.key);this.policy[i]||(this.policy[i]={});for(const a of ol(e,o))this.policy[i][a]||(this.policy[i][a]=i==="write"&&!["characters","pubkey"].includes(a)?["self"]:["all"])}}get(){return this.policy}toJson(){return JSON.stringify(this.get())}}class Xe{constructor(e={}){this.meta=e}merge(e){return this.meta=Object.assign(this.meta,e),this}addContext(e=null){return this}setAtomWallet(e){const t={pubkey:e.pubkey,characters:e.characters};return e.tokenUnits&&e.tokenUnits.length&&(t.tokenUnits=JSON.stringify(e.getTokenUnitsData())),e.tradeRates&&e.tradeRates.length&&(t.tradeRates=JSON.stringify(e.tradeRates)),this.merge(t),this}setMetaWallet(e){return this.merge({walletTokenSlug:e.token,walletBundleHash:e.bundle,walletAddress:e.address,walletPosition:e.position,walletBatchId:e.batchId,walletPubkey:e.pubkey,walletCharacters:e.characters}),this}setShadowWalletClaim(e){return this.merge({shadowWalletClaim:e*1}),this}setSigningWallet(e){return this.merge({signingWallet:JSON.stringify({tokenSlug:e.token,bundleHash:e.bundle,address:e.address,position:e.position,pubkey:e.pubkey,characters:e.characters})}),this}addPolicy(e){const t=new fi(e,Object.keys(this.meta));return this.merge({policy:t.toJson()}),this}get(){return this.meta}}class ie extends TypeError{constructor(e=null,t=null,n=null){if(super(e,t,n),e===null)throw new this(`Unknown ${this.constructor.name}`);this.name="BaseException"}toString(){return`${this.name}: ${this.message}.
Stack:
${this.stack}`}}class Pt extends ie{constructor(e="The molecule does not contain atoms",t=null,n=null){super(e,t,n),this.name="AtomsMissingException"}}class Lt{static create(e){const t={};for(const n of Object.keys(e))Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return new this(t)}static structure(e){switch(Object.prototype.toString.call(e)){case"[object Array]":{const t=[];for(const n in e)t.push(Lt.isStructure(e[n])?Lt.structure(e[n]):e[n]);return t}case"[object Object]":{const t=[],n=Object.keys(e).sort((i,s)=>i===s?0:i<s?-1:1);for(const i of n)if(Object.prototype.hasOwnProperty.call(e,i)){const s={};s[i]=Lt.isStructure(e[i])?Lt.structure(e[i]):e[i],t.push(s)}if(t.length>0)return t;break}}return e}static isStructure(e){return["[object Object]","[object Array]"].includes(Object.prototype.toString.call(e))}view(){return Lt.structure(this)}}class al extends Lt{constructor({position:e=null,walletAddress:t=null,isotope:n=null,token:i=null,value:s=null,batchId:o=null,metaType:a=null,metaId:u=null,meta:f=null,index:c=null,createdAt:d=null,version:p=null}){super(),this.position=e,this.walletAddress=t,this.isotope=n,this.token=i,this.value=s,this.batchId=o,this.metaType=a,this.metaId=u,this.meta=f,this.index=c,this.createdAt=d,this.version=p}}const wn={4:al};class H{constructor({position:e=null,walletAddress:t=null,isotope:n=null,token:i=null,value:s=null,batchId:o=null,metaType:a=null,metaId:u=null,meta:f=null,otsFragment:c=null,index:d=null,version:p=null}){this.position=e,this.walletAddress=t,this.isotope=n,this.token=i,this.value=s!==null?String(s):null,this.batchId=o,this.metaType=a,this.metaId=u,this.meta=f?Tr.normalizeMeta(f):[],this.index=d,this.otsFragment=c,this.createdAt=String(+new Date),p!==null&&Object.prototype.hasOwnProperty.call(wn,p)&&(this.version=String(p))}static getHashableProps(){return["position","walletAddress","isotope","token","value","batchId","metaType","metaId","meta","createdAt"]}static getUnclaimedProps(){return["otsFragment"]}static create({isotope:e,wallet:t=null,value:n=null,metaType:i=null,metaId:s=null,meta:o=null,batchId:a=null}){return o||(o=new Xe),t&&(o.setAtomWallet(t),a||(a=t.batchId)),new H({position:t?t.position:null,walletAddress:t?t.address:null,isotope:e,token:t?t.token:null,value:n,batchId:a,metaType:i,metaId:s,meta:o.get()})}static jsonToObject(e){const t=Object.assign(new H({}),JSON.parse(e)),n=Object.keys(new H({}));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&!n.includes(i)&&delete t[i];return t}static hashAtoms({atoms:e,output:t="base17"}){const n=new We("SHAKE256","TEXT"),i=H.sortAtoms(e);if(i.length===0)throw new Pt;if(i.map(s=>{if(!(s instanceof H))throw new Pt;return s}),i.every(s=>s.version&&Object.prototype.hasOwnProperty.call(wn,s.version)))n.update(JSON.stringify(i.map(s=>wn[s.version].create(s).view())));else{const s=String(e.length);let o=[];for(const a of i)o.push(s),o=o.concat(a.getHashableValues());for(const a of o)n.update(a)}switch(t){case"hex":return n.getHash("HEX",{outputLen:256});case"array":return n.getHash("ARRAYBUFFER",{outputLen:256});default:return so(n.getHash("HEX",{outputLen:256}),16,17,"0123456789abcdef","0123456789abcdefg").padStart(64,"0")}}static jsonSerialization(e,t){if(!H.getUnclaimedProps().includes(e))return t}static sortAtoms(e){const t=[...e];return t.sort((n,i)=>n.index<i.index?-1:1),t}aggregatedMeta(){return Tr.aggregateMeta(this.meta)}getHashableValues(){const e=[];for(const t of H.getHashableProps()){const n=this[t];if(!(n===null&&!["position","walletAddress"].includes(t)))if(t==="meta")for(const i of n)typeof i.value!="undefined"&&i.value!==null&&(e.push(String(i.key)),e.push(String(i.value)));else e.push(n===null?"":String(n))}return e}}function En(r=null,e=2048){if(r){const t=new We("SHAKE256","TEXT");return t.update(r),t.getHash("HEX",{outputLen:e*2})}else return bn(e)}function Ut(r,e=null){const t=new We("SHAKE256","TEXT");return t.update(r),t.getHash("HEX",{outputLen:256})}function _n({molecularHash:r=null,index:e=null}){return r!==null&&e!==null?Ut(String(r)+String(e),"generateBatchId"):bn(64)}class Ar{constructor(e,t,n){this.id=e,this.name=t,this.metas=n||{}}static createFromGraphQL(e){let t=e.metas||{};return t.length&&(t=JSON.parse(t),t||(t={})),new Ar(e.id,e.name,t)}static createFromDB(e){return new Ar(e[0],e[1],e.length>2?e[2]:{})}getFragmentZone(){return this.metas.fragmentZone||null}getFusedTokenUnits(){return this.metas.fusedTokenUnits||null}toData(){return[this.id,this.name,this.metas]}toGraphQLResponse(){return{id:this.id,name:this.name,metas:JSON.stringify(this.metas)}}}class ul extends ie{constructor(e="Attempting to create a wallet with no credentials (secret or bundle hash)",t=null,n=null){super(e,t,n),this.name="WalletCredentialException"}}function lo(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`positive integer expected, not ${r}`)}function cl(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function Sn(r,...e){if(!cl(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function fo(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ll(r,e){Sn(r);const t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const kn=BigInt(he(2,32)-1),ho=BigInt(32);function fl(r,e=!1){return e?{h:Number(r&kn),l:Number(r>>ho&kn)}:{h:Number(r>>ho&kn)|0,l:Number(r&kn)|0}}function hl(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let i=0;i<r.length;i++){const{h:s,l:o}=fl(r[i],e);[t[i],n[i]]=[s,o]}return[t,n]}const pl=(r,e,t)=>r<<t|e>>>32-t,dl=(r,e,t)=>e<<t|r>>>32-t,yl=(r,e,t)=>e<<t-32|r>>>64-t,ml=(r,e,t)=>r<<t-32|e>>>64-t,hi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const po=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),yo=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,gl=r=>r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255;function mo(r){for(let e=0;e<r.length;e++)r[e]=gl(r[e])}function vl(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function pi(r){return typeof r=="string"&&(r=vl(r)),Sn(r),r}class bl{clone(){return this._cloneInto()}}function wl(r){const e=n=>r().update(pi(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function El(r){const e=(n,i)=>r(i).update(pi(n)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}function _l(r=32){if(hi&&typeof hi.getRandomValues=="function")return hi.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}const go=[],vo=[],bo=[],Sl=BigInt(0),Or=BigInt(1),kl=BigInt(2),xl=BigInt(7),Tl=BigInt(256),Il=BigInt(113);for(let r=0,e=Or,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],go.push(2*(5*n+t)),vo.push((r+1)*(r+2)/2%64);let i=Sl;for(let s=0;s<7;s++)e=(e<<Or^(e>>xl)*Il)%Tl,e&kl&&(i^=Or<<(Or<<BigInt(s))-Or);bo.push(i)}const[Al,Ol]=hl(bo,!0),wo=(r,e,t)=>t>32?yl(r,e,t):pl(r,e,t),Eo=(r,e,t)=>t>32?ml(r,e,t):dl(r,e,t);function Cl(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,f=t[u],c=t[u+1],d=wo(f,c,1)^t[a],p=Eo(f,c,1)^t[a+1];for(let y=0;y<50;y+=10)r[o+y]^=d,r[o+y+1]^=p}let i=r[2],s=r[3];for(let o=0;o<24;o++){const a=vo[o],u=wo(i,s,a),f=Eo(i,s,a),c=go[o];i=r[c],s=r[c+1],r[c]=u,r[c+1]=f}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=Al[n],r[1]^=Ol[n]}t.fill(0)}class xn extends bl{constructor(e,t,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,lo(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=po(this.state)}keccak(){yo||mo(this.state32),Cl(this.state32,this.rounds),yo||mo(this.state32),this.posOut=0,this.pos=0}update(e){fo(this);const{blockLen:t,state:n}=this;e=pi(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:i}=this;e[n]^=t,t&128&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){fo(this,!1),Sn(e),this.finish();const t=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return lo(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ll(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new xn(t,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const _o=(r,e,t)=>wl(()=>new xn(e,r,t)),Rl=_o(6,136,256/8),Nl=_o(6,72,512/8),So=(r,e,t)=>El((n={})=>new xn(e,r,n.dkLen===void 0?t:n.dkLen,!0)),Dl=So(31,168,128/8),ko=So(31,136,256/8);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const St=Sn,xo=_l;function To(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}function Tn(...r){const e=n=>typeof n=="number"?n:n.bytesLen,t=r.reduce((n,i)=>n+e(i),0);return{bytesLen:t,encode:n=>{const i=new Uint8Array(t);for(let s=0,o=0;s<r.length;s++){const a=r[s],u=e(a),f=typeof a=="number"?n[s]:a.encode(n[s]);St(f,u),i.set(f,o),typeof a!="number"&&f.fill(0),o+=u}return i},decode:n=>{St(n,t);const i=[];for(const s of r){const o=e(s),a=n.subarray(0,o);i.push(typeof s=="number"?a:s.decode(a)),n=n.subarray(o)}return i}}}function di(r,e){const t=e*r.bytesLen;return{bytesLen:t,encode:n=>{if(n.length!==e)throw new Error(`vecCoder.encode: wrong length=${n.length}. Expected: ${e}`);const i=new Uint8Array(t);for(let s=0,o=0;s<n.length;s++){const a=r.encode(n[s]);i.set(a,o),a.fill(0),o+=a.length}return i},decode:n=>{St(n,t);const i=[];for(let s=0;s<n.length;s+=r.bytesLen)i.push(r.decode(n.subarray(s,s+r.bytesLen)));return i}}}function qt(...r){for(const e of r)if(Array.isArray(e))for(const t of e)t.fill(0);else e.fill(0)}function Io(r){return(1<<r)-1}/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */function Fl(r,e=8){const i=r.toString(2).padStart(8,"0").slice(-e).padStart(7,"0").split("").reverse().join("");return Number.parseInt(i,2)}const Ml=r=>{const{newPoly:e,N:t,Q:n,F:i,ROOT_OF_UNITY:s,brvBits:o,isKyber:a}=r,u=(E,b=n)=>{const k=E%b|0;return(k>=0?k|0:b+k|0)|0},f=(E,b=n)=>{const k=u(E,b)|0;return(k>b>>1?k-b|0:k)|0};function c(){const E=e(t);for(let b=0;b<t;b++){const k=Fl(b,o),S=he(BigInt(s),BigInt(k))%BigInt(n);E[b]=Number(S)|0}return E}const d=c(),p=a?128:t,y=a?1:0;return{mod:u,smod:f,nttZetas:d,NTT:{encode:E=>{for(let b=1,k=128;k>y;k>>=1)for(let S=0;S<t;S+=2*k){const A=d[b++];for(let O=S;O<S+k;O++){const N=u(A*E[O+k]);E[O+k]=u(E[O]-N)|0,E[O]=u(E[O]+N)|0}}return E},decode:E=>{for(let b=p-1,k=1+y;k<p+y;k<<=1)for(let S=0;S<t;S+=2*k){const A=d[b--];for(let O=S;O<S+k;O++){const N=E[O];E[O]=u(N+E[O+k]),E[O+k]=u(A*(E[O+k]-N))}}for(let b=0;b<E.length;b++)E[b]=u(i*E[b]);return E}},bitsCoder:(E,b)=>{const k=Io(E),S=E*(t/8);return{bytesLen:S,encode:A=>{const O=new Uint8Array(S);for(let N=0,D=0,M=0,P=0;N<A.length;N++)for(D|=(b.encode(A[N])&k)<<M,M+=E;M>=8;M-=8,D>>=8)O[P++]=D&Io(M);return O},decode:A=>{const O=e(t);for(let N=0,D=0,M=0,P=0;N<A.length;N++)for(D|=A[N]<<M,M+=8;M>=E;M-=E,D>>=E)O[P++]=b.decode(D&k);return O}}}}},Bl=(r=>(e,t)=>{t||(t=r.blockLen);const n=new Uint8Array(e.length+2);n.set(e);const i=e.length,s=new Uint8Array(t);let o=r.create({}),a=0,u=0;return{stats:()=>({calls:a,xofs:u}),get:(f,c)=>(n[i+0]=f,n[i+1]=c,o.destroy(),o=r.create({}).update(n),a++,()=>(u++,o.xofInto(s))),clean:()=>{o.destroy(),s.fill(0),n.fill(0)}}})(Dl);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const De=256,pt=3329,$l=3303,Pl=17,{mod:Cr,nttZetas:Ll,NTT:jt,bitsCoder:Ul}=Ml({N:De,Q:pt,F:$l,ROOT_OF_UNITY:Pl,newPoly:r=>new Uint16Array(r),brvBits:7,isKyber:!0}),ql={512:{N:De,Q:pt,K:2,ETA1:3,ETA2:2,du:10,dv:4,RBGstrength:128},768:{N:De,Q:pt,K:3,ETA1:2,ETA2:2,du:10,dv:4,RBGstrength:192},1024:{N:De,Q:pt,K:4,ETA1:2,ETA2:2,du:11,dv:5,RBGstrength:256}},jl=r=>{if(r>=12)return{encode:t=>t,decode:t=>t};const e=he(2,r-1);return{encode:t=>((t<<r)+pt/2)/pt,decode:t=>t*pt+e>>>r}},Rr=r=>Ul(r,jl(r));function Qt(r,e){for(let t=0;t<De;t++)r[t]=Cr(r[t]+e[t])}function Ql(r,e){for(let t=0;t<De;t++)r[t]=Cr(r[t]-e[t])}function Vl(r,e,t,n,i){const s=Cr(e*n*i+r*t),o=Cr(r*n+e*t);return{c0:s,c1:o}}function In(r,e){for(let t=0;t<De/2;t++){let n=Ll[64+(t>>1)];t&1&&(n=-n);const{c0:i,c1:s}=Vl(r[2*t+0],r[2*t+1],e[2*t+0],e[2*t+1],n);r[2*t+0]=i,r[2*t+1]=s}return r}function Ao(r){const e=new Uint16Array(De);for(let t=0;t<De;){const n=r();if(n.length%3)throw new Error("SampleNTT: unaligned block");for(let i=0;t<De&&i+3<=n.length;i+=3){const s=(n[i+0]>>0|n[i+1]<<8)&4095,o=(n[i+1]>>4|n[i+2]<<4)&4095;s<pt&&(e[t++]=s),t<De&&o<pt&&(e[t++]=o)}}return e}function Nr(r,e,t,n){const i=r(n*De/4,e,t),s=new Uint16Array(De),o=po(i);let a=0;for(let u=0,f=0,c=0,d=0;u<o.length;u++){let p=o[u];for(let y=0;y<32;y++)c+=p&1,p>>=1,a+=1,a===n?(d=c,c=0):a===2*n&&(s[f++]=Cr(d-c),c=0,a=0)}if(a)throw new Error(`sampleCBD: leftover bits: ${a}`);return s}const Hl=r=>{const{K:e,PRF:t,XOF:n,HASH512:i,ETA1:s,ETA2:o,du:a,dv:u}=r,f=Rr(1),c=Rr(u),d=Rr(a),p=Tn(di(Rr(12),e),32),y=di(Rr(12),e),v=Tn(di(d,e),c),w=Tn(32,32);return{secretCoder:y,secretKeyLen:y.bytesLen,publicKeyLen:p.bytesLen,cipherTextLen:v.bytesLen,keygen:E=>{const b=new Uint8Array(33);b.set(E),b[32]=e;const k=i(b),[S,A]=w.decode(k),O=[],N=[];for(let P=0;P<e;P++)O.push(jt.encode(Nr(t,A,P,s)));const D=n(S);for(let P=0;P<e;P++){const W=jt.encode(Nr(t,A,e+P,s));for(let X=0;X<e;X++){const Me=Ao(D.get(X,P));Qt(W,In(Me,O[X]))}N.push(W)}D.clean();const M={publicKey:p.encode([N,S]),secretKey:y.encode(O)};return qt(S,A,O,N,b,k),M},encrypt:(E,b,k)=>{const[S,A]=p.decode(E),O=[];for(let X=0;X<e;X++)O.push(jt.encode(Nr(t,k,X,s)));const N=n(A),D=new Uint16Array(De),M=[];for(let X=0;X<e;X++){const Me=Nr(t,k,e+X,o),se=new Uint16Array(De);for(let Ce=0;Ce<e;Ce++){const Yt=Ao(N.get(X,Ce));Qt(se,In(Yt,O[Ce]))}Qt(Me,jt.decode(se)),M.push(Me),Qt(D,In(S[X],O[X])),se.fill(0)}N.clean();const P=Nr(t,k,2*e,o);Qt(P,jt.decode(D));const W=f.decode(b);return Qt(W,P),qt(S,O,D,P),v.encode([M,W])},decrypt:(E,b)=>{const[k,S]=v.decode(E),A=y.decode(b),O=new Uint16Array(De);for(let N=0;N<e;N++)Qt(O,In(A[N],jt.encode(k[N])));return Ql(S,jt.decode(O)),qt(O,A,k),f.encode(S)}}};function Wl(r){const e=Hl(r),{HASH256:t,HASH512:n,KDF:i}=r,{secretCoder:s,cipherTextLen:o}=e,a=e.publicKeyLen,u=Tn(e.secretKeyLen,e.publicKeyLen,32,32),f=u.bytesLen,c=32;return{publicKeyLen:a,msgLen:c,keygen:(d=xo(64))=>{St(d,64);const{publicKey:p,secretKey:y}=e.keygen(d.subarray(0,32)),v=t(p),w=u.encode([y,p,v,d.subarray(32)]);return qt(y,v),{publicKey:p,secretKey:w}},encapsulate:(d,p=xo(32))=>{St(d,a),St(p,c);const y=d.subarray(0,384*r.K),v=s.encode(s.decode(y.slice()));if(!To(v,y))throw qt(v),new Error("ML-KEM.encapsulate: wrong publicKey modulus");qt(v);const w=n.create().update(p).update(t(d)).digest(),E=e.encrypt(d,p,w.subarray(32,64));return w.subarray(32).fill(0),{cipherText:E,sharedSecret:w.subarray(0,32)}},decapsulate:(d,p)=>{St(p,f),St(d,o);const[y,v,w,E]=u.decode(p),b=e.decrypt(d,y),k=n.create().update(b).update(w).digest(),S=k.subarray(0,32),A=e.encrypt(v,b,k.subarray(32,64)),O=To(d,A),N=i.create({dkLen:32}).update(E).update(d).digest();return qt(b,A,O?N:S),O?S:N}}}function zl(r,e,t){return ko.create({dkLen:r}).update(e).update(new Uint8Array([t])).digest()}const yi=Wl(He(He({},{HASH256:Rl,HASH512:Nl,KDF:ko,XOF:Bl,PRF:zl}),ql[768]));class Y{constructor({secret:e=null,bundle:t=null,token:n="USER",address:i=null,position:s=null,batchId:o=null,characters:a=null}){this.token=n,this.balance=0,this.molecules={},this.key=null,this.privkey=null,this.pubkey=null,this.tokenUnits=[],this.tradeRates={},this.address=i,this.position=s,this.bundle=t,this.batchId=o,this.characters=a,e&&(this.bundle=this.bundle||Ut(e,"Wallet::constructor"),this.position=this.position||Y.generatePosition(),this.key=Y.generateKey({secret:e,token:this.token,position:this.position}),this.address=this.address||Y.generateAddress(this.key),this.characters=this.characters||"BASE64",this.initializeMLKEM())}static create({secret:e=null,bundle:t=null,token:n,batchId:i=null,characters:s=null}){let o=null;if(!e&&!t)throw new ul;return e&&!t&&(o=Y.generatePosition(),t=Ut(e,"Wallet::create")),new Y({secret:e,bundle:t,token:n,position:o,batchId:i,characters:s})}static isBundleHash(e){return typeof e!="string"?!1:e.length===64&&uo(e)}static getTokenUnits(e){const t=[];return e.forEach(n=>{t.push(Ar.createFromDB(n))}),t}static generateKey({secret:e,token:t,position:n}){const s=BigInt(`0x${e}`)+BigInt(`0x${n}`),o=new We("SHAKE256","TEXT");o.update(s.toString(16)),t&&o.update(t);const a=new We("SHAKE256","TEXT");return a.update(o.getHash("HEX",{outputLen:8192})),a.getHash("HEX",{outputLen:8192})}static generateAddress(e){const t=xr(e,128),n=new We("SHAKE256","TEXT");for(const s in t){let o=t[s];for(let a=1;a<=16;a++){const u=new We("SHAKE256","TEXT");u.update(o),o=u.getHash("HEX",{outputLen:512})}n.update(o)}const i=new We("SHAKE256","TEXT");return i.update(n.getHash("HEX",{outputLen:8192})),i.getHash("HEX",{outputLen:256})}static generatePosition(e=64){return bn(e,"abcdef0123456789")}initializeMLKEM(){const e=En(this.key,64),t=new Uint8Array(64);for(let s=0;s<64;s++)t[s]=parseInt(e.substr(s*2,2),16);const{publicKey:n,secretKey:i}=yi.keygen(t);this.pubkey=n,this.privkey=i}getTokenUnitsData(){const e=[];return this.tokenUnits.forEach(t=>{e.push(t.toData())}),e}splitUnits(e,t,n=null){if(e.length===0)return;const i=[],s=[];this.tokenUnits.forEach(o=>{e.includes(o.id)?i.push(o):s.push(o)}),this.tokenUnits=i,n!==null&&(n.tokenUnits=i),t.tokenUnits=s}createRemainder(e){const t=Y.create({secret:e,token:this.token,characters:this.characters});return t.initBatchId({sourceWallet:this,isRemainder:!0}),t}isShadow(){return(typeof this.position=="undefined"||this.position===null)&&(typeof this.address=="undefined"||this.address===null)}initBatchId({sourceWallet:e,isRemainder:t=!1}){e.batchId&&(this.batchId=t?e.batchId:_n({}))}encryptMessage(e,t){return L(this,null,function*(){const n=JSON.stringify(e),i=new TextEncoder().encode(n),{cipherText:s,sharedSecret:o}=yi.encapsulate(t),a=yield this.encryptWithSharedSecret(i,o);return{cipherText:s,encryptedMessage:a}})}decryptMessage(e){return L(this,null,function*(){const{cipherText:t,encryptedMessage:n}=e,i=yi.decapsulate(t,this.privkey),s=yield this.decryptWithSharedSecret(n,i),o=new TextDecoder().decode(s);return JSON.parse(o)})}encryptWithSharedSecret(e,t){return L(this,null,function*(){const n=crypto.getRandomValues(new Uint8Array(12)),i={name:"AES-GCM",iv:n},s=yield crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt"]),o=yield crypto.subtle.encrypt(i,s,e),a=new Uint8Array(n.length+o.byteLength);return a.set(n),a.set(new Uint8Array(o),n.length),a})}decryptWithSharedSecret(e,t){return L(this,null,function*(){const i={name:"AES-GCM",iv:e.slice(0,12)},s=yield crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["decrypt"]),o=yield crypto.subtle.decrypt(i,s,e.slice(12));return new Uint8Array(o)})}}class Dr extends ie{constructor(e="There is an atom without an index",t=null,n=null){super(e,t,n),this.name="AtomIndexException"}}class Kl extends ie{constructor(e="The molecular hash does not match",t=null,n=null){super(e,t,n),this.name="MolecularHashMismatchException"}}class Gl extends ie{constructor(e="The molecular hash is missing",t=null,n=null){super(e,t,n),this.name="MolecularHashMissingException"}}class Oo extends ie{constructor(e="",t=null,n=null){super(e,t,n),this.name="PolicyInvalidException"}}class Co extends ie{constructor(e="OTS malformed",t=null,n=null){super(e,t,n),this.name="SignatureMalformedException"}}class Jl extends ie{constructor(e="One-time signature (OTS) does not match!",t=null,n=null){super(e,t,n),this.name="SignatureMismatchException"}}class dt extends ie{constructor(e="Insufficient balance to make transfer",t=null,n=null){super(e,t,n),this.name="TransferBalanceException"}}class Ro extends ie{constructor(e="Token transfer atoms are malformed",t=null,n=null){super(e,t,n),this.name="TransferMalformedException"}}class No extends ie{constructor(e="Token slugs for wallets in transfer do not match!",t=null,n=null){super(e,t,n),this.name="TransferMismatchedException"}}class Do extends ie{constructor(e="Invalid remainder provided",t=null,n=null){super(e,t,n),this.name="TransferRemainderException"}}class Yl extends ie{constructor(e="Sender and recipient(s) cannot be the same",t=null,n=null){super(e,t,n),this.name="TransferToSelfException"}}class Xl extends ie{constructor(e="Token transfer atoms are unbalanced",t=null,n=null){super(e,t,n),this.name="TransferUnbalancedException"}}class kt extends ie{constructor(e="Empty meta data.",t=null,n=null){super(e,t,n),this.name="MetaMissingException"}}class Fr extends ie{constructor(e="Wrong type of token for this isotope",t=null,n=null){super(e,t,n),this.name="WrongTokenTypeException"}}class An extends ie{constructor(e="Incorrect BatchId",t=null,n=null){super(e,t,n),this.name="BatchIdException"}}class Fo{constructor({}){const e=arguments[0];for(const t in e)this[`__${t}`]=e[t]}static toObject(e){return new this(e)}toJSON(){const e={};for(const t of Object.keys(this))t.substring(0,2)==="__"&&(e[t.substring(2,t.length)]=this[t]);return e}}class On extends ie{constructor(e="An incorrect argument!",t=null,n=null){super(e,t,n),this.name="RuleArgumentException"}}class Ke extends ie{constructor(e="Code exception",t=null,n=null){super(e,t,n),this.name="CodeException"}}class Mr{constructor({action:e,metaType:t=null,metaId:n=null,meta:i=null,address:s=null,token:o=null,amount:a=null,comparison:u=null}){if(i&&(this.meta=i),!e)throw new On('Callback structure violated, missing mandatory "action" parameter.');this.__metaId=n,this.__metaType=t,this.__action=e,this.__address=s,this.__token=o,this.__amount=a,this.__comparison=u}set comparison(e){this.__comparison=e}set amount(e){if(!sl(e))throw new Ke("Parameter amount should be a string containing numbers");this.__amount=e}set token(e){this.__token=e}set address(e){this.__address=e}set meta(e){this.__meta=e instanceof Fo?e:Fo.toObject(e)}set metaType(e){this.__metaType=e}set metaId(e){this.__metaId=e}static toObject(e){const t=new Mr({action:e.action});return e.metaType&&(t.metaType=e.metaType),e.metaId&&(t.metaId=e.metaId),e.meta&&(t.meta=e.meta),e.address&&(t.address=e.address),e.token&&(t.token=e.token),e.amount&&(t.amount=e.amount),e.comparison&&(t.comparison=e.comparison),t}toJSON(){const e={action:this.__action};return this.__metaType&&(e.metaType=this.__metaType),this.__metaId&&(e.metaId=this.__metaId),this.__meta&&(e.meta=this.__meta),this.__address&&(e.address=this.__address),this.__token&&(e.token=this.__token),this.__amount&&(e.amount=this.__amount),this.__comparison&&(e.comparison=this.__comparison),e}isReject(){return this._is("reject")}isMeta(){return Ir(Object.keys(this.toJSON()),["action","metaId","metaType","meta"]).length===4&&this._is("meta")}isCollect(){return Ir(Object.keys(this.toJSON()),["action","address","token","amount","comparison"]).length===5&&this._is("collect")}isBuffer(){return Ir(Object.keys(this.toJSON()),["action","address","token","amount","comparison"]).length===5&&this._is("buffer")}isRemit(){return Ir(Object.keys(this.toJSON()),["action","token","amount"]).length===3&&this._is("remit")}isBurn(){return Ir(Object.keys(this.toJSON()),["action","token","amount","comparison"]).length===4&&this._is("burn")}_is(e){return this.__action.toLowerCase()===e.toLowerCase()}}class mi{constructor({key:e,value:t,comparison:n}){if([e,t,n].some(i=>!i))throw new On("Condition::constructor( { key, value, comparison } ) - not all class parameters are initialised!");this.__key=e,this.__value=t,this.__comparison=n}static toObject(e){return new this({key:e.key,value:e.value,comparison:e.comparison})}toJSON(){return{key:this.__key,value:this.__value,comparison:this.__comparison}}}class Br{constructor({condition:e=[],callback:t=[]}){for(const n of e)if(!(n instanceof mi))throw new On;for(const n of t)if(!(n instanceof Mr))throw new On;this.__condition=e,this.__callback=t}set comparison(e){this.__condition.push(e instanceof mi?e:mi.toObject(e))}set callback(e){this.__callback.push(e instanceof Mr?e:Mr.toObject(e))}static toObject(e){if(!e.condition)throw new kt("Rule::toObject() - Incorrect rule format! There is no condition field.");if(!e.callback)throw new kt("Rule::toObject() - Incorrect rule format! There is no callback field.");const t=new Br({});for(const n of e.condition)t.comparison=n;for(const n of e.callback)t.callback=n;return t}toJSON(){return{condition:this.__condition,callback:this.__callback}}}class pe{static __init(e,t){this.arr=String(t).split("."),this.key=this.arr.shift();const n=Number(this.key);Number.isInteger(n)&&(this.key=n),this.__nextKey=this.arr.length,this.__next=this.__tic(e)}static __tic(e){return!Array.isArray(e)&&!(e instanceof Object)?!1:typeof e[this.key]!="undefined"}static has(e,t){return this.__init(e,t),this.__next?this.__nextKey===0?!0:this.has(e[this.key],this.arr.join(".")):!1}static get(e,t,n=null){return this.__init(e,t),this.__next?this.__nextKey===0?e[this.key]:this.get(e[this.key],this.arr.join("."),n):n}static set(e,t,n){const i=t.split(".");let s=e;const o=i.length-1;for(let f=0;f<o;f++){const c=i[f],d=Number(c),p=Number.isInteger(d);(p?d:c in s)||(s[p?d:c]=i[f+1].match(/^\d+$/)?[]:{}),s=s[p?d:c]}const a=i[o],u=Number(a);return s[Number.isInteger(u)?u:a]=n,e}}class Zl{constructor(e){if(e.molecularHash===null)throw new Gl;if(!e.atoms.length)throw new Pt;for(const t of e.atoms)if(t.index===null)throw new Dr;this.molecule=e}verify(e){return this.molecularHash()&&this.ots()&&this.batchId()&&this.continuId()&&this.isotopeM()&&this.isotopeT()&&this.isotopeC()&&this.isotopeU()&&this.isotopeI()&&this.isotopeR()&&this.isotopeV(e)}continuId(){if(this.molecule.atoms[0].token==="USER"&&this.molecule.getIsotopes("I").length<1)throw new Pt("Check::continuId() - Molecule is missing required ContinuID Atom!");return!0}batchId(){if(this.molecule.atoms.length>0){const e=this.molecule.atoms[0];if(e.isotope==="V"&&e.batchId!==null){const t=this.molecule.getIsotopes("V"),n=t[t.length-1];if(e.batchId!==n.batchId)throw new An;for(const i of t)if(i.batchId===null)throw new An}return!0}throw new An}isotopeI(){for(const e of this.molecule.getIsotopes("I")){if(e.token!=="USER")throw new Fr(`Check::isotopeI() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index===0)throw new Dr(`Check::isotopeI() - Isotope "${e.isotope}" Atoms must have a non-zero index!`)}return!0}isotopeU(){for(const e of this.molecule.getIsotopes("U")){if(e.token!=="AUTH")throw new Fr(`Check::isotopeU() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new Dr(`Check::isotopeU() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeM(){const e=["readPolicy","writePolicy"];for(const t of this.molecule.getIsotopes("M")){if(t.meta.length<1)throw new kt;if(t.token!=="USER")throw new Fr(`Check::isotopeM() - "${t.token}" is not a valid Token slug for "${t.isotope}" isotope Atoms!`);const n=Tr.aggregateMeta(t.meta);for(const i of e){let s=n[i];if(s){s=JSON.parse(s);for(const[o,a]of Object.entries(s))if(!e.includes(o)){if(!Object.keys(n).includes(o))throw new Oo(`${o} is missing from the meta.`);for(const u of a)if(!Y.isBundleHash(u)&&!["all","self"].includes(u))throw new Oo(`${u} does not correspond to the format of the policy.`)}}}}return!0}isotopeC(){for(const e of this.molecule.getIsotopes("C")){if(e.token!=="USER")throw new Fr(`Check::isotopeC() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new Dr(`Check::isotopeC() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeT(){for(const e of this.molecule.getIsotopes("T")){const t=e.aggregatedMeta();if(String(e.metaType).toLowerCase()==="wallet"){for(const i of["position","bundle"])if(!Object.prototype.hasOwnProperty.call(t,i)||!t[i])throw new kt(`Check::isotopeT() - Required meta field "${i}" is missing!`)}for(const i of["token"])if(!Object.prototype.hasOwnProperty.call(t,i)||!t[i])throw new kt(`Check::isotopeT() - Required meta field "${i}" is missing!`);if(e.token!=="USER")throw new Fr(`Check::isotopeT() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new Dr(`Check::isotopeT() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeR(){for(const e of this.molecule.getIsotopes("R")){const t=e.aggregatedMeta();if(t.policy){const n=JSON.parse(t.policy);if(!Object.keys(n).every(i=>["read","write"].includes(i)))throw new kt("Check::isotopeR() - Mixing rules with politics!")}if(t.rule){const n=JSON.parse(t.rule);if(!Array.isArray(n))throw new kt("Check::isotopeR() - Incorrect rule format!");for(const i of n)Br.toObject(i);if(n.length<1)throw new kt("Check::isotopeR() - No rules!")}}return!0}isotopeV(e=null){const t=this.molecule.getIsotopes("V");if(t.length===0)return!0;const n=this.molecule.atoms[0];if(n.isotope==="V"&&t.length===2){const o=t[t.length-1];if(n.token!==o.token)throw new No;if(o.value<0)throw new Ro;return!0}let i=0,s=0;for(const o in this.molecule.atoms)if(Object.prototype.hasOwnProperty.call(this.molecule.atoms,o)){const a=this.molecule.atoms[o];if(a.isotope!=="V")continue;if(s=a.value*1,Number.isNaN(s))throw new TypeError('Invalid isotope "V" values');if(a.token!==n.token)throw new No;if(o>0){if(s<0)throw new Ro;if(a.walletAddress===n.walletAddress)throw new Yl}i+=s}if(i!==s)throw new Xl;if(e){if(s=n.value*1,Number.isNaN(s))throw new TypeError('Invalid isotope "V" values');const o=e.balance+s;if(o<0)throw new dt;if(o!==i)throw new Do}else if(s!==0)throw new Do;return!0}molecularHash(){if(this.molecule.molecularHash!==H.hashAtoms({atoms:this.molecule.atoms}))throw new Kl;return!0}ots(){const e=this.molecule.normalizedHash();let t=this.molecule.atoms.map(p=>p.otsFragment).reduce((p,y)=>p+y);if(t.length!==2048&&(t=ao(t),t.length!==2048))throw new Co;const n=xr(t,128);let i="";for(const p in n){let y=n[p];for(let v=0,w=8+e[p];v<w;v++)y=new We("SHAKE256","TEXT").update(y).getHash("HEX",{outputLen:512});i+=y}const s=new We("SHAKE256","TEXT");s.update(i);const o=s.getHash("HEX",{outputLen:8192}),a=new We("SHAKE256","TEXT");a.update(o);const u=a.getHash("HEX",{outputLen:256}),f=this.molecule.atoms[0];let c=f.walletAddress;const d=pe.get(f.aggregatedMeta(),"signingWallet");if(d&&(c=pe.get(JSON.parse(d),"address")),u!==c)throw new Jl;return!0}}class $r extends ie{constructor(e="Insufficient balance for requested transfer",t=null,n=null){super(e,t,n),this.name="BalanceInsufficientException"}}class Mo extends ie{constructor(e="Amount cannot be negative!",t=null,n=null){super(e,t,n),this.name="NegativeAmountException"}}class st{constructor({secret:e=null,bundle:t=null,sourceWallet:n=null,remainderWallet:i=null,cellSlug:s=null,version:o=null}){this.status=null,this.molecularHash=null,this.createdAt=String(+new Date),this.cellSlugOrigin=this.cellSlug=s,this.secret=e,this.bundle=t,this.sourceWallet=n,this.atoms=[],o!==null&&Object.prototype.hasOwnProperty.call(wn,o)&&(this.version=String(o)),(i||n)&&(this.remainderWallet=i||Y.create({secret:e,bundle:t,token:n.token,batchId:n.batchId,characters:n.characters}))}get cellSlugDelimiter(){return"."}static isotopeFilter(e,t){return Array.isArray(e)||(e=[e]),t.filter(n=>e.includes(n.isotope))}static generateNextAtomIndex(e){return e.length}static jsonToObject(e){const t=Object.assign(new st({}),JSON.parse(e)),n=Object.keys(new st({}));if(!Array.isArray(t.atoms))throw new Pt;for(const i in Object.keys(t.atoms)){t.atoms[i]=H.jsonToObject(JSON.stringify(t.atoms[i]));for(const s of["position","walletAddress","isotope"])if(t.atoms[i].isotope.toLowerCase()!=="r"&&(typeof t.atoms[i][s]=="undefined"||t.atoms[i][s]===null))throw new Pt("MolecularStructure::jsonToObject() - Required Atom properties are missing!")}for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&!n.includes(i)&&delete t[i];return t.atoms=H.sortAtoms(t.atoms),t}static enumerate(e){const t={0:-8,1:-7,2:-6,3:-5,4:-4,5:-3,6:-2,7:-1,8:0,9:1,a:2,b:3,c:4,d:5,e:6,f:7,g:8},n=[],i=e.toLowerCase().split("");for(let s=0,o=i.length;s<o;++s){const a=i[s];typeof t[a]!="undefined"&&(n[s]=t[a])}return n}static normalize(e){let t=e.reduce((i,s)=>i+s);const n=t<0;for(;t<0||t>0;)for(const i of Object.keys(e))if((n?e[i]<8:e[i]>-8)&&(n?(++e[i],++t):(--e[i],--t),t===0))break;return e}getIsotopes(e){return st.isotopeFilter(e,this.atoms)}generateIndex(){return st.generateNextAtomIndex(this.atoms)}fill(e){for(const t in Object.keys(e))this[t]=e[t]}addAtom(e){return this.molecularHash=null,e.index=this.generateIndex(),e.version=this.version,this.atoms.push(e),this.atoms=H.sortAtoms(this.atoms),this}addContinuIdAtom(){return this.addAtom(H.create({isotope:"I",wallet:this.remainderWallet,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}addPolicyAtom({metaType:e,metaId:t,meta:n={},policy:i={}}){const s=new Xe(n);s.addPolicy(i);const o=Y.create({secret:this.secret,bundle:this.sourceWallet.bundle,token:"USER"});return this.addAtom(H.create({wallet:o,isotope:"R",metaType:e,metaId:t,meta:s})),this}fuseToken(e,t){const n=e.length;if(this.sourceWallet.balance-n<0)throw new $r;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-n})),this.addAtom(H.create({isotope:"F",wallet:t,value:1,metaType:"walletBundle",metaId:t.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-n,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}burnToken({amount:e,walletBundle:t=null}){if(e<0)throw new Mo("Molecule::burnToken() - Amount to burn must be positive!");if(this.sourceWallet.balance-e<0)throw new $r;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-e})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-e,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}replenishToken({amount:e,units:t=[]}){if(e<0)throw new Mo("Molecule::replenishToken() - Amount to replenish must be positive!");if(t.length){t=Y.getTokenUnits(t),this.remainderWallet.tokenUnits=this.sourceWallet.tokenUnits;for(const n of t)this.remainderWallet.tokenUnits.push(n);this.remainderWallet.balance=this.remainderWallet.tokenUnits.length,this.sourceWallet.tokenUnits=t,this.sourceWallet.balance=this.sourceWallet.tokenUnits.length}else this.remainderWallet.balance=this.sourceWallet.balance+e,this.sourceWallet.balance=e;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:this.sourceWallet.balance})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.remainderWallet.balance,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initValue({recipientWallet:e,amount:t}){if(this.sourceWallet.balance-t<0)throw new $r;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-t})),this.addAtom(H.create({isotope:"V",wallet:e,value:t,metaType:"walletBundle",metaId:e.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-t,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initDepositBuffer({amount:e,tradeRates:t}){if(this.sourceWallet.balance-e<0)throw new $r;const n=Y.create({secret:this.secret,bundle:this.bundle,token:this.sourceWallet.token,batchId:this.sourceWallet.batchId});return n.tradeRates=t,this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-e})),this.addAtom(H.create({isotope:"B",wallet:n,value:e,metaType:"walletBundle",metaId:this.sourceWallet.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-e,metaType:"walletBundle",metaId:this.sourceWallet.bundle})),this}initWithdrawBuffer({recipients:e,signingWallet:t=null}){let n=0;for(const[s,o]of Object.entries(e||{}))n+=o;if(this.sourceWallet.balance-n<0)throw new $r;const i=new Xe;t&&i.setSigningWallet(t),this.addAtom(H.create({isotope:"B",wallet:this.sourceWallet,value:-n,meta:i,metaType:"walletBundle",metaId:this.sourceWallet.bundle}));for(const[s,o]of Object.entries(e||{}))this.addAtom(new H({isotope:"V",token:this.sourceWallet.token,value:o,batchId:this.sourceWallet.batchId?_n({}):null,metaType:"walletBundle",metaId:s}));return this.addAtom(H.create({isotope:"B",wallet:this.remainderWallet,value:this.sourceWallet.balance-n,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initTokenCreation({recipientWallet:e,amount:t,meta:n}){const i=new Xe(n);return i.setMetaWallet(e),this.addAtom(H.create({isotope:"C",wallet:this.sourceWallet,value:t,metaType:"token",metaId:e.token,meta:i,batchId:e.batchId})),this.addContinuIdAtom(),this}createRule({metaType:e,metaId:t,rule:n,policy:i={}}){const s=[];for(const a of n)s.push(a instanceof Br?a:Br.toObject(a));const o=new Xe({rule:JSON.stringify(s)});return o.addPolicy(i),this.addAtom(H.create({isotope:"R",wallet:this.sourceWallet,metaType:e,metaId:t,meta:o})),this.addContinuIdAtom(),this}initWalletCreation(e,t=null){return t||(t=new Xe),t.setMetaWallet(e),this.addAtom(H.create({isotope:"C",wallet:this.sourceWallet,metaType:"wallet",metaId:e.address,meta:t,batchId:e.batchId})),this.addContinuIdAtom(),this}initShadowWalletClaim(e){const t=new Xe().setShadowWalletClaim(!0);return this.initWalletCreation(e,t)}initIdentifierCreation({type:e,contact:t,code:n}){const i={code:n,hash:Ut(t.trim(),"Molecule::initIdentifierCreation")};return this.addAtom(H.create({isotope:"C",wallet:this.sourceWallet,metaType:"identifier",metaId:e,meta:new Xe(i)})),this.addContinuIdAtom(),this}initMeta({meta:e,metaType:t,metaId:n,policy:i}){return this.addAtom(H.create({isotope:"M",wallet:this.sourceWallet,metaType:t,metaId:n,meta:new Xe(e)})),this.addPolicyAtom({metaType:t,metaId:n,meta:e,policy:i}),this.addContinuIdAtom(),this}initTokenRequest({token:e,amount:t,metaType:n,metaId:i,meta:s={},batchId:o=null}){return s.token=e,this.local=1,this.addAtom(H.create({isotope:"T",wallet:this.sourceWallet,value:t,metaType:n,metaId:i,meta:new Xe(s),batchId:o})),this.addContinuIdAtom(),this}initAuthorization({meta:e}){return this.addAtom(H.create({isotope:"U",wallet:this.sourceWallet,meta:new Xe(e)})),this.addContinuIdAtom(),this}sign({bundle:e=null,anonymous:t=!1,compressed:n=!0}){if(this.atoms.length===0||this.atoms.filter(y=>!(y instanceof H)).length!==0)throw new Pt;!t&&!this.bundle&&(this.bundle=e||Ut(this.secret,"Molecule::sign")),this.molecularHash=H.hashAtoms({atoms:this.atoms});const i=this.atoms[0];let s=i.position;const o=pe.get(i.aggregatedMeta(),"signingWallet");if(o&&(s=pe.get(JSON.parse(o),"position")),!s)throw new Co("Signing wallet must have a position!");const a=Y.generateKey({secret:this.secret,token:i.token,position:i.position}),u=xr(a,128),f=this.normalizedHash();let c="";for(const y in u){let v=u[y];for(let w=0,E=8-f[y];w<E;w++)v=new We("SHAKE256","TEXT").update(v).getHash("HEX",{outputLen:512});c+=v}n&&(c=oo(c));const d=xr(c,Math.ceil(c.length/this.atoms.length));let p=null;for(let y=0,v=d.length;y<v;y++)this.atoms[y].otsFragment=d[y],p=this.atoms[y].position;return p}cellSlugBase(){return(this.cellSlug||"").split(this.cellSlugDelimiter)[0]}toJSON(){const e=co(this);for(const t of["remainderWallet","secret","sourceWallet","cellSlugOrigin","version"])Object.prototype.hasOwnProperty.call(e,t)&&delete e[t];return e}check(e=null){new Zl(this).verify(e)}normalizedHash(){return st.normalize(st.enumerate(this.molecularHash))}}const gi=he(10,18);class er{static val(e){return Math.abs(e*gi)<1?0:e}static cmp(e,t,n=!1){const i=er.val(e)*gi,s=er.val(t)*gi;return Math.abs(i-s)<1?0:i>s?1:-1}static equal(e,t){return er.cmp(e,t)===0}}class Pr{constructor({token:e,expiresAt:t,encrypt:n,pubkey:i}){this.$__token=e,this.$__expiresAt=t,this.$__pubkey=i,this.$__encrypt=n}static create(e,t){const n=new Pr(e);return n.setWallet(t),n}static restore(e,t){const n=new Y({secret:t,token:"AUTH",position:e.wallet.position,characters:e.wallet.characters});return Pr.create({token:e.token,expiresAt:e.expiresAt,pubkey:e.pubkey,encrypt:e.encrypt},n)}setWallet(e){this.$__wallet=e}getWallet(){return this.$__wallet}getSnapshot(){return{token:this.$__token,expiresAt:this.$__expiresAt,pubkey:this.$__pubkey,encrypt:this.$__encrypt,wallet:{position:this.$__wallet.position,characters:this.$__wallet.characters}}}getToken(){return this.$__token}getPubkey(){return this.$__pubkey}getExpireInterval(){return this.$__expiresAt*1e3-Date.now()}isExpired(){return!this.$__expiresAt||this.getExpireInterval()<0}getAuthData(){return{token:this.getToken(),pubkey:this.getPubkey(),wallet:this.getWallet()}}}class Lr extends ie{constructor(e="GraphQL did not provide a valid response.",t=null,n=null){super(e,t,n),this.name="InvalidResponseException"}}class vi extends ie{constructor(e="Authorization token missing or invalid.",t=null,n=null){super(e,t,n),this.name="UnauthenticatedException"}}let _e=class{constructor({query:e,json:t,dataKey:n=null}){if(this.dataKey=n,this.errorKey="exception",this.$__payload=null,this.$__query=e,this.$__originResponse=t,this.$__response=t,typeof this.$__response=="undefined"||this.$__response===null)throw new Lr;if(pe.has(this.$__response,this.errorKey)){const i=pe.get(this.$__response,this.errorKey);throw String(i).includes("Unauthenticated")?new vi:new Lr}this.init()}init(){}data(){if(!this.dataKey)return this.response();if(!pe.has(this.response(),this.dataKey))throw new Lr;return pe.get(this.response(),this.dataKey)}response(){return this.$__response}payload(){return null}query(){return this.$__query}status(){return null}};class Pe{constructor(e,t){this.client=e,this.knishIOClient=t,this.$__variables=null,this.$__query=null,this.$__response=null,this.$__request=null}response(){return this.$__response}createResponseRaw(e){return L(this,null,function*(){return this.createResponse(e)})}createResponse(e){return new _e({query:this,json:e})}createQuery({variables:e=null}){if(this.$__variables=this.compiledVariables(e),!this.uri())throw new Ke("Query::createQuery() - Node URI was not initialized for this client instance!");if(this.$__query===null)throw new Ke("Query::createQuery() - GraphQL subscription was not initialized!");return{query:this.$__query,variables:this.variables()}}execute(n){return L(this,arguments,function*({variables:e=null,context:t={}}){this.$__request=this.createQuery({variables:e});const i=He(He({},t),this.createQueryContext());try{const s=yield this.client.query(hn(He({},this.$__request),{context:i}));return this.$__response=yield this.createResponseRaw(s),this.$__response}catch(s){if(s.name==="AbortError")return this.knishIOClient.log("warn","Query was cancelled"),new _e({query:this,json:{data:null,errors:[{message:"Query was cancelled"}]}});throw s}})}compiledVariables(e=null){return e||{}}uri(){return this.client.getUri()}variables(){return this.$__variables}createQueryContext(){return{}}}class ef extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ContinuId"})}payload(){let e=null;const t=this.data();return t&&(e=new Y({secret:null,token:t.tokenSlug}),e.address=t.address,e.position=t.position,e.bundle=t.bundleHash,e.batchId=t.batchId,e.characters=t.characters,e.pubkey=t.pubkey,e.balance=t.amount*1),e}}var bi=function(r,e){return bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},bi(r,e)};function Ge(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");bi(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var x=function(){return x=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},x.apply(this,arguments)};function ot(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function xt(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{f(n.next(c))}catch(d){o(d)}}function u(c){try{f(n.throw(c))}catch(d){o(d)}}function f(c){c.done?s(c.value):i(c.value).then(a,u)}f((n=n.apply(r,e||[])).next())})}function Tt(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(f){return function(c){return u([f,c])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(t=0)),t;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(c){f=[6,c],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function Le(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;var wi="Invariant Violation",Bo=Object.setPrototypeOf,tf=Bo===void 0?function(r,e){return r.__proto__=e,r}:Bo,$o=function(r){Ge(e,r);function e(t){t===void 0&&(t=wi);var n=r.call(this,typeof t=="number"?wi+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return n.framesToPop=1,n.name=wi,tf(n,e.prototype),n}return e}(Error);function Vt(r,e){if(!r)throw new $o(e)}var Po=["debug","log","warn","error","silent"],rf=Po.indexOf("log");function Cn(r){return function(){if(Po.indexOf(r)>=rf){var e=console[r]||console.log;return e.apply(console,arguments)}}}(function(r){r.debug=Cn("debug"),r.log=Cn("log"),r.warn=Cn("warn"),r.error=Cn("error")})(Vt||(Vt={}));var Ei="3.11.8";const It=globalThis||void 0||self;function Ze(r){try{return r()}catch(e){}}const _i=Ze(function(){return globalThis})||Ze(function(){return window})||Ze(function(){return self})||Ze(function(){return It})||Ze(function(){return Ze.constructor("return this")()});var Lo=new Map;function Si(r){var e=Lo.get(r)||1;return Lo.set(r,e+1),"".concat(r,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Uo(r,e){e===void 0&&(e=0);var t=Si("stringifyForDisplay");return JSON.stringify(r,function(n,i){return i===void 0?t:i},e).split(JSON.stringify(t)).join("<undefined>")}function Rn(r){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(typeof e=="number"){var i=e;e=ki(i),e||(e=xi(i,t),t=[])}r.apply(void 0,[e].concat(t))}}var q=Object.assign(function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];e||Vt(e,ki(t,n)||xi(t,n))},{debug:Rn(Vt.debug),log:Rn(Vt.log),warn:Rn(Vt.warn),error:Rn(Vt.error)});function Be(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new $o(ki(r,e)||xi(r,e))}var qo=Symbol.for("ApolloErrorMessageHandler_"+Ei);function jo(r){if(typeof r=="string")return r;try{return Uo(r,2).slice(0,1e3)}catch(e){return"<non-serializable>"}}function ki(r,e){if(e===void 0&&(e=[]),!!r)return _i[qo]&&_i[qo](r,e.map(jo))}function xi(r,e){if(e===void 0&&(e=[]),!!r)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:Ei,message:r,args:e.map(jo)})))}function Nn(r,e){if(!!!r)throw new Error(e)}function nf(r){return typeof r=="object"&&r!==null}function sf(r,e){if(!!!r)throw new Error("Unexpected invariant triggered.")}const of=/\r\n|[\n\r]/g;function Ti(r,e){let t=0,n=1;for(const i of r.body.matchAll(of)){if(typeof i.index=="number"||sf(!1),i.index>=e)break;t=i.index+i[0].length,n+=1}return{line:n,column:e+1-t}}function af(r){return Qo(r.source,Ti(r.source,r.start))}function Qo(r,e){const t=r.locationOffset.column-1,n="".padStart(t)+r.body,i=e.line-1,s=r.locationOffset.line-1,o=e.line+s,a=e.line===1?t:0,u=e.column+a,f=`${r.name}:${o}:${u}
`,c=n.split(/\r\n|[\n\r]/g),d=c[i];if(d.length>120){const p=Math.floor(u/80),y=u%80,v=[];for(let w=0;w<d.length;w+=80)v.push(d.slice(w,w+80));return f+Vo([[`${o} |`,v[0]],...v.slice(1,p+1).map(w=>["|",w]),["|","^".padStart(y)],["|",v[p+1]]])}return f+Vo([[`${o-1} |`,c[i-1]],[`${o} |`,d],["|","^".padStart(u)],[`${o+1} |`,c[i+1]]])}function Vo(r){const e=r.filter(([n,i])=>i!==void 0),t=Math.max(...e.map(([n])=>n.length));return e.map(([n,i])=>n.padStart(t)+(i?" "+i:"")).join(`
`)}function uf(r){const e=r[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:r[1],positions:r[2],path:r[3],originalError:r[4],extensions:r[5]}:e}class Ii extends Error{constructor(e,...t){var n,i,s;const{nodes:o,source:a,positions:u,path:f,originalError:c,extensions:d}=uf(t);super(e),this.name="GraphQLError",this.path=f!=null?f:void 0,this.originalError=c!=null?c:void 0,this.nodes=Ho(Array.isArray(o)?o:o?[o]:void 0);const p=Ho((n=this.nodes)===null||n===void 0?void 0:n.map(v=>v.loc).filter(v=>v!=null));this.source=a!=null?a:p==null||(i=p[0])===null||i===void 0?void 0:i.source,this.positions=u!=null?u:p==null?void 0:p.map(v=>v.start),this.locations=u&&a?u.map(v=>Ti(a,v)):p==null?void 0:p.map(v=>Ti(v.source,v.start));const y=nf(c==null?void 0:c.extensions)?c==null?void 0:c.extensions:void 0;this.extensions=(s=d!=null?d:y)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?Object.defineProperty(this,"stack",{value:c.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,Ii):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+af(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+Qo(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function Ho(r){return r===void 0||r.length===0?void 0:r}function Ie(r,e,t){return new Ii(`Syntax Error: ${t}`,{source:r,positions:[e]})}class cf{constructor(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Wo{constructor(e,t,n,i,s,o){this.kind=e,this.start=t,this.end=n,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const zo={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},lf=new Set(Object.keys(zo));function Ko(r){const e=r==null?void 0:r.kind;return typeof e=="string"&&lf.has(e)}var tr;(function(r){r.QUERY="query",r.MUTATION="mutation",r.SUBSCRIPTION="subscription"})(tr||(tr={}));var Ai;(function(r){r.QUERY="QUERY",r.MUTATION="MUTATION",r.SUBSCRIPTION="SUBSCRIPTION",r.FIELD="FIELD",r.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",r.FRAGMENT_SPREAD="FRAGMENT_SPREAD",r.INLINE_FRAGMENT="INLINE_FRAGMENT",r.VARIABLE_DEFINITION="VARIABLE_DEFINITION",r.SCHEMA="SCHEMA",r.SCALAR="SCALAR",r.OBJECT="OBJECT",r.FIELD_DEFINITION="FIELD_DEFINITION",r.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",r.INTERFACE="INTERFACE",r.UNION="UNION",r.ENUM="ENUM",r.ENUM_VALUE="ENUM_VALUE",r.INPUT_OBJECT="INPUT_OBJECT",r.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Ai||(Ai={}));var B;(function(r){r.NAME="Name",r.DOCUMENT="Document",r.OPERATION_DEFINITION="OperationDefinition",r.VARIABLE_DEFINITION="VariableDefinition",r.SELECTION_SET="SelectionSet",r.FIELD="Field",r.ARGUMENT="Argument",r.FRAGMENT_SPREAD="FragmentSpread",r.INLINE_FRAGMENT="InlineFragment",r.FRAGMENT_DEFINITION="FragmentDefinition",r.VARIABLE="Variable",r.INT="IntValue",r.FLOAT="FloatValue",r.STRING="StringValue",r.BOOLEAN="BooleanValue",r.NULL="NullValue",r.ENUM="EnumValue",r.LIST="ListValue",r.OBJECT="ObjectValue",r.OBJECT_FIELD="ObjectField",r.DIRECTIVE="Directive",r.NAMED_TYPE="NamedType",r.LIST_TYPE="ListType",r.NON_NULL_TYPE="NonNullType",r.SCHEMA_DEFINITION="SchemaDefinition",r.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",r.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",r.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",r.FIELD_DEFINITION="FieldDefinition",r.INPUT_VALUE_DEFINITION="InputValueDefinition",r.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",r.UNION_TYPE_DEFINITION="UnionTypeDefinition",r.ENUM_TYPE_DEFINITION="EnumTypeDefinition",r.ENUM_VALUE_DEFINITION="EnumValueDefinition",r.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",r.DIRECTIVE_DEFINITION="DirectiveDefinition",r.SCHEMA_EXTENSION="SchemaExtension",r.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",r.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",r.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",r.UNION_TYPE_EXTENSION="UnionTypeExtension",r.ENUM_TYPE_EXTENSION="EnumTypeExtension",r.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(B||(B={}));function Oi(r){return r===9||r===32}function Ur(r){return r>=48&&r<=57}function Go(r){return r>=97&&r<=122||r>=65&&r<=90}function Jo(r){return Go(r)||r===95}function ff(r){return Go(r)||Ur(r)||r===95}function hf(r){var e;let t=Number.MAX_SAFE_INTEGER,n=null,i=-1;for(let o=0;o<r.length;++o){var s;const a=r[o],u=pf(a);u!==a.length&&(n=(s=n)!==null&&s!==void 0?s:o,i=o,o!==0&&u<t&&(t=u))}return r.map((o,a)=>a===0?o:o.slice(t)).slice((e=n)!==null&&e!==void 0?e:0,i+1)}function pf(r){let e=0;for(;e<r.length&&Oi(r.charCodeAt(e));)++e;return e}function df(r,e){const t=r.replace(/"""/g,'\\"""'),n=t.split(/\r\n|[\n\r]/g),i=n.length===1,s=n.length>1&&n.slice(1).every(y=>y.length===0||Oi(y.charCodeAt(0))),o=t.endsWith('\\"""'),a=r.endsWith('"')&&!o,u=r.endsWith("\\"),f=a||u,c=!i||r.length>70||f||s||o;let d="";const p=i&&Oi(r.charCodeAt(0));return(c&&!p||s)&&(d+=`
`),d+=t,(c||f)&&(d+=`
`),'"""'+d+'"""'}var R;(function(r){r.SOF="<SOF>",r.EOF="<EOF>",r.BANG="!",r.DOLLAR="$",r.AMP="&",r.PAREN_L="(",r.PAREN_R=")",r.SPREAD="...",r.COLON=":",r.EQUALS="=",r.AT="@",r.BRACKET_L="[",r.BRACKET_R="]",r.BRACE_L="{",r.PIPE="|",r.BRACE_R="}",r.NAME="Name",r.INT="Int",r.FLOAT="Float",r.STRING="String",r.BLOCK_STRING="BlockString",r.COMMENT="Comment"})(R||(R={}));class yf{constructor(e){const t=new Wo(R.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==R.EOF)do if(e.next)e=e.next;else{const t=gf(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===R.COMMENT);return e}}function mf(r){return r===R.BANG||r===R.DOLLAR||r===R.AMP||r===R.PAREN_L||r===R.PAREN_R||r===R.SPREAD||r===R.COLON||r===R.EQUALS||r===R.AT||r===R.BRACKET_L||r===R.BRACKET_R||r===R.BRACE_L||r===R.PIPE||r===R.BRACE_R}function rr(r){return r>=0&&r<=55295||r>=57344&&r<=1114111}function Dn(r,e){return Yo(r.charCodeAt(e))&&Xo(r.charCodeAt(e+1))}function Yo(r){return r>=55296&&r<=56319}function Xo(r){return r>=56320&&r<=57343}function Ht(r,e){const t=r.source.body.codePointAt(e);if(t===void 0)return R.EOF;if(t>=32&&t<=126){const n=String.fromCodePoint(t);return n==='"'?`'"'`:`"${n}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function be(r,e,t,n,i){const s=r.line,o=1+t-r.lineStart;return new Wo(e,t,n,s,o,i)}function gf(r,e){const t=r.source.body,n=t.length;let i=e;for(;i<n;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++r.line,r.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++r.line,r.lineStart=i;continue;case 35:return vf(r,i);case 33:return be(r,R.BANG,i,i+1);case 36:return be(r,R.DOLLAR,i,i+1);case 38:return be(r,R.AMP,i,i+1);case 40:return be(r,R.PAREN_L,i,i+1);case 41:return be(r,R.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return be(r,R.SPREAD,i,i+3);break;case 58:return be(r,R.COLON,i,i+1);case 61:return be(r,R.EQUALS,i,i+1);case 64:return be(r,R.AT,i,i+1);case 91:return be(r,R.BRACKET_L,i,i+1);case 93:return be(r,R.BRACKET_R,i,i+1);case 123:return be(r,R.BRACE_L,i,i+1);case 124:return be(r,R.PIPE,i,i+1);case 125:return be(r,R.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?kf(r,i):wf(r,i)}if(Ur(s)||s===45)return bf(r,i,s);if(Jo(s))return xf(r,i);throw Ie(r.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:rr(s)||Dn(t,i)?`Unexpected character: ${Ht(r,i)}.`:`Invalid character: ${Ht(r,i)}.`)}return be(r,R.EOF,n,n)}function vf(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(s===10||s===13)break;if(rr(s))++i;else if(Dn(t,i))i+=2;else break}return be(r,R.COMMENT,e,i,t.slice(e+1,i))}function bf(r,e,t){const n=r.source.body;let i=e,s=t,o=!1;if(s===45&&(s=n.charCodeAt(++i)),s===48){if(s=n.charCodeAt(++i),Ur(s))throw Ie(r.source,i,`Invalid number, unexpected digit after 0: ${Ht(r,i)}.`)}else i=Ci(r,i,s),s=n.charCodeAt(i);if(s===46&&(o=!0,s=n.charCodeAt(++i),i=Ci(r,i,s),s=n.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=n.charCodeAt(++i),(s===43||s===45)&&(s=n.charCodeAt(++i)),i=Ci(r,i,s),s=n.charCodeAt(i)),s===46||Jo(s))throw Ie(r.source,i,`Invalid number, expected digit but got: ${Ht(r,i)}.`);return be(r,o?R.FLOAT:R.INT,e,i,n.slice(e,i))}function Ci(r,e,t){if(!Ur(t))throw Ie(r.source,e,`Invalid number, expected digit but got: ${Ht(r,e)}.`);const n=r.source.body;let i=e+1;for(;Ur(n.charCodeAt(i));)++i;return i}function wf(r,e){const t=r.source.body,n=t.length;let i=e+1,s=i,o="";for(;i<n;){const a=t.charCodeAt(i);if(a===34)return o+=t.slice(s,i),be(r,R.STRING,e,i+1,o);if(a===92){o+=t.slice(s,i);const u=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?Ef(r,i):_f(r,i):Sf(r,i);o+=u.value,i+=u.size,s=i;continue}if(a===10||a===13)break;if(rr(a))++i;else if(Dn(t,i))i+=2;else throw Ie(r.source,i,`Invalid character within String: ${Ht(r,i)}.`)}throw Ie(r.source,i,"Unterminated string.")}function Ef(r,e){const t=r.source.body;let n=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(s===125){if(i<5||!rr(n))break;return{value:String.fromCodePoint(n),size:i}}if(n=n<<4|qr(s),n<0)break}throw Ie(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function _f(r,e){const t=r.source.body,n=Zo(t,e+2);if(rr(n))return{value:String.fromCodePoint(n),size:6};if(Yo(n)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=Zo(t,e+8);if(Xo(i))return{value:String.fromCodePoint(n,i),size:12}}throw Ie(r.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function Zo(r,e){return qr(r.charCodeAt(e))<<12|qr(r.charCodeAt(e+1))<<8|qr(r.charCodeAt(e+2))<<4|qr(r.charCodeAt(e+3))}function qr(r){return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:-1}function Sf(r,e){const t=r.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Ie(r.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function kf(r,e){const t=r.source.body,n=t.length;let i=r.lineStart,s=e+3,o=s,a="";const u=[];for(;s<n;){const f=t.charCodeAt(s);if(f===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){a+=t.slice(o,s),u.push(a);const c=be(r,R.BLOCK_STRING,e,s+3,hf(u).join(`
`));return r.line+=u.length-1,r.lineStart=i,c}if(f===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){a+=t.slice(o,s),o=s+1,s+=4;continue}if(f===10||f===13){a+=t.slice(o,s),u.push(a),f===13&&t.charCodeAt(s+1)===10?s+=2:++s,a="",o=s,i=s;continue}if(rr(f))++s;else if(Dn(t,s))s+=2;else throw Ie(r.source,s,`Invalid character within String: ${Ht(r,s)}.`)}throw Ie(r.source,s,"Unterminated string.")}function xf(r,e){const t=r.source.body,n=t.length;let i=e+1;for(;i<n;){const s=t.charCodeAt(i);if(ff(s))++i;else break}return be(r,R.NAME,e,i,t.slice(e,i))}const Tf=10,ea=2;function Ri(r){return Fn(r,[])}function Fn(r,e){switch(typeof r){case"string":return JSON.stringify(r);case"function":return r.name?`[function ${r.name}]`:"[function]";case"object":return If(r,e);default:return String(r)}}function If(r,e){if(r===null)return"null";if(e.includes(r))return"[Circular]";const t=[...e,r];if(Af(r)){const n=r.toJSON();if(n!==r)return typeof n=="string"?n:Fn(n,t)}else if(Array.isArray(r))return Cf(r,t);return Of(r,t)}function Af(r){return typeof r.toJSON=="function"}function Of(r,e){const t=Object.entries(r);return t.length===0?"{}":e.length>ea?"["+Rf(r)+"]":"{ "+t.map(([i,s])=>i+": "+Fn(s,e)).join(", ")+" }"}function Cf(r,e){if(r.length===0)return"[]";if(e.length>ea)return"[Array]";const t=Math.min(Tf,r.length),n=r.length-t,i=[];for(let s=0;s<t;++s)i.push(Fn(r[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push(`... ${n} more items`),"["+i.join(", ")+"]"}function Rf(r){const e=Object.prototype.toString.call(r).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof r.constructor=="function"){const t=r.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const Nf=globalThis.process&&!0==="production"?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var n;const i=t.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(n=e.constructor)===null||n===void 0?void 0:n.name;if(i===s){const o=Ri(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class ta{constructor(e,t="GraphQL request",n={line:1,column:1}){typeof e=="string"||Nn(!1,`Body must be a string. Received: ${Ri(e)}.`),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Nn(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Nn(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function Df(r){return Nf(r,ta)}function Ff(r,e){return new Mf(r,e).parseDocument()}class Mf{constructor(e,t={}){const n=Df(e)?e:new ta(e);this._lexer=new yf(n),this._options=t,this._tokenCounter=0}parseName(){const e=this.expectToken(R.NAME);return this.node(e,{kind:B.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:B.DOCUMENT,definitions:this.many(R.SOF,this.parseDefinition,R.EOF)})}parseDefinition(){if(this.peek(R.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===R.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw Ie(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(R.BRACE_L))return this.node(e,{kind:B.OPERATION_DEFINITION,operation:tr.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let n;return this.peek(R.NAME)&&(n=this.parseName()),this.node(e,{kind:B.OPERATION_DEFINITION,operation:t,name:n,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(R.NAME);switch(e.value){case"query":return tr.QUERY;case"mutation":return tr.MUTATION;case"subscription":return tr.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(R.PAREN_L,this.parseVariableDefinition,R.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:B.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(R.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(R.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(R.DOLLAR),this.node(e,{kind:B.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:B.SELECTION_SET,selections:this.many(R.BRACE_L,this.parseSelection,R.BRACE_R)})}parseSelection(){return this.peek(R.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let n,i;return this.expectOptionalToken(R.COLON)?(n=t,i=this.parseName()):i=t,this.node(e,{kind:B.FIELD,alias:n,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(R.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(R.PAREN_L,t,R.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,n=this.parseName();return this.expectToken(R.COLON),this.node(t,{kind:B.ARGUMENT,name:n,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(R.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(R.NAME)?this.node(e,{kind:B.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:B.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:B.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:B.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case R.BRACKET_L:return this.parseList(e);case R.BRACE_L:return this.parseObject(e);case R.INT:return this.advanceLexer(),this.node(t,{kind:B.INT,value:t.value});case R.FLOAT:return this.advanceLexer(),this.node(t,{kind:B.FLOAT,value:t.value});case R.STRING:case R.BLOCK_STRING:return this.parseStringLiteral();case R.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:B.BOOLEAN,value:!0});case"false":return this.node(t,{kind:B.BOOLEAN,value:!1});case"null":return this.node(t,{kind:B.NULL});default:return this.node(t,{kind:B.ENUM,value:t.value})}case R.DOLLAR:if(e)if(this.expectToken(R.DOLLAR),this._lexer.token.kind===R.NAME){const n=this._lexer.token.value;throw Ie(this._lexer.source,t.start,`Unexpected variable "$${n}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:B.STRING,value:e.value,block:e.kind===R.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:B.LIST,values:this.any(R.BRACKET_L,t,R.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:B.OBJECT,fields:this.any(R.BRACE_L,t,R.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,n=this.parseName();return this.expectToken(R.COLON),this.node(t,{kind:B.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(R.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(R.AT),this.node(t,{kind:B.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(R.BRACKET_L)){const n=this.parseTypeReference();this.expectToken(R.BRACKET_R),t=this.node(e,{kind:B.LIST_TYPE,type:n})}else t=this.parseNamedType();return this.expectOptionalToken(R.BANG)?this.node(e,{kind:B.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:B.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(R.STRING)||this.peek(R.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const n=this.parseConstDirectives(),i=this.many(R.BRACE_L,this.parseOperationTypeDefinition,R.BRACE_R);return this.node(e,{kind:B.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(R.COLON);const n=this.parseNamedType();return this.node(e,{kind:B.OPERATION_TYPE_DEFINITION,operation:t,type:n})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const n=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:B.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:B.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(R.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(R.BRACE_L,this.parseFieldDefinition,R.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),i=this.parseArgumentDefs();this.expectToken(R.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:B.FIELD_DEFINITION,description:t,name:n,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(R.PAREN_L,this.parseInputValueDef,R.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(R.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(R.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:B.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const n=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:B.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:B.UNION_TYPE_DEFINITION,description:t,name:n,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(R.EQUALS)?this.delimitedMany(R.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:B.ENUM_TYPE_DEFINITION,description:t,name:n,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(R.BRACE_L,this.parseEnumValueDefinition,R.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),n=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:B.ENUM_VALUE_DEFINITION,description:t,name:n,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Ie(this._lexer.source,this._lexer.token.start,`${Mn(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const n=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:B.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(R.BRACE_L,this.parseInputValueDef,R.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===R.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),n=this.optionalMany(R.BRACE_L,this.parseOperationTypeDefinition,R.BRACE_R);if(t.length===0&&n.length===0)throw this.unexpected();return this.node(e,{kind:B.SCHEMA_EXTENSION,directives:t,operationTypes:n})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),n=this.parseConstDirectives();if(n.length===0)throw this.unexpected();return this.node(e,{kind:B.SCALAR_TYPE_EXTENSION,name:t,directives:n})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:B.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),n=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(n.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:B.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:B.UNION_TYPE_EXTENSION,name:t,directives:n,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:B.ENUM_TYPE_EXTENSION,name:t,directives:n,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),n=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(n.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:B.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(R.AT);const n=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:B.DIRECTIVE_DEFINITION,description:t,name:n,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(R.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Ai,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new cf(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw Ie(this._lexer.source,t.start,`Expected ${ra(e)}, found ${Mn(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===R.NAME&&t.value===e)this.advanceLexer();else throw Ie(this._lexer.source,t.start,`Expected "${e}", found ${Mn(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===R.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e!=null?e:this._lexer.token;return Ie(this._lexer.source,t.start,`Unexpected ${Mn(t)}.`)}any(e,t,n){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(n);)i.push(t.call(this));return i}optionalMany(e,t,n){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}return[]}many(e,t,n){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(n));return i}delimitedMany(e,t){this.expectOptionalToken(e);const n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(e!==void 0&&t.kind!==R.EOF&&(++this._tokenCounter,this._tokenCounter>e))throw Ie(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function Mn(r){const e=r.value;return ra(r.kind)+(e!=null?` "${e}"`:"")}function ra(r){return mf(r)?`"${r}"`:r}function Bf(r){return`"${r.replace($f,Pf)}"`}const $f=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Pf(r){return Lf[r.charCodeAt(0)]}const Lf=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Ni=Object.freeze({});function yt(r,e,t=zo){const n=new Map;for(const b of Object.values(B))n.set(b,Uf(e,b));let i,s=Array.isArray(r),o=[r],a=-1,u=[],f=r,c,d;const p=[],y=[];do{a++;const b=a===o.length,k=b&&u.length!==0;if(b){if(c=y.length===0?void 0:p[p.length-1],f=d,d=y.pop(),k)if(s){f=f.slice();let A=0;for(const[O,N]of u){const D=O-A;N===null?(f.splice(D,1),A++):f[D]=N}}else{f=Object.defineProperties({},Object.getOwnPropertyDescriptors(f));for(const[A,O]of u)f[A]=O}a=i.index,o=i.keys,u=i.edits,s=i.inArray,i=i.prev}else if(d){if(c=s?a:o[a],f=d[c],f==null)continue;p.push(c)}let S;if(!Array.isArray(f)){var v,w;Ko(f)||Nn(!1,`Invalid AST Node: ${Ri(f)}.`);const A=b?(v=n.get(f.kind))===null||v===void 0?void 0:v.leave:(w=n.get(f.kind))===null||w===void 0?void 0:w.enter;if(S=A==null?void 0:A.call(e,f,c,d,p,y),S===Ni)break;if(S===!1){if(!b){p.pop();continue}}else if(S!==void 0&&(u.push([c,S]),!b))if(Ko(S))f=S;else{p.pop();continue}}if(S===void 0&&k&&u.push([c,f]),b)p.pop();else{var E;i={inArray:s,index:a,keys:o,edits:u,prev:i},s=Array.isArray(f),o=s?f:(E=t[f.kind])!==null&&E!==void 0?E:[],a=-1,u=[],d&&y.push(d),d=f}}while(i!==void 0);return u.length!==0?u[u.length-1][1]:r}function Uf(r,e){const t=r[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:r.enter,leave:r.leave}}function na(r){return yt(r,jf)}const qf=80,jf={Name:{leave:r=>r.value},Variable:{leave:r=>"$"+r.name},Document:{leave:r=>$(r.definitions,`

`)},OperationDefinition:{leave(r){const e=G("(",$(r.variableDefinitions,", "),")"),t=$([r.operation,$([r.name,e]),$(r.directives," ")]," ");return(t==="query"?"":t+" ")+r.selectionSet}},VariableDefinition:{leave:({variable:r,type:e,defaultValue:t,directives:n})=>r+": "+e+G(" = ",t)+G(" ",$(n," "))},SelectionSet:{leave:({selections:r})=>et(r)},Field:{leave({alias:r,name:e,arguments:t,directives:n,selectionSet:i}){const s=G("",r,": ")+e;let o=s+G("(",$(t,", "),")");return o.length>qf&&(o=s+G(`(
`,Bn($(t,`
`)),`
)`)),$([o,$(n," "),i]," ")}},Argument:{leave:({name:r,value:e})=>r+": "+e},FragmentSpread:{leave:({name:r,directives:e})=>"..."+r+G(" ",$(e," "))},InlineFragment:{leave:({typeCondition:r,directives:e,selectionSet:t})=>$(["...",G("on ",r),$(e," "),t]," ")},FragmentDefinition:{leave:({name:r,typeCondition:e,variableDefinitions:t,directives:n,selectionSet:i})=>`fragment ${r}${G("(",$(t,", "),")")} on ${e} ${G("",$(n," ")," ")}`+i},IntValue:{leave:({value:r})=>r},FloatValue:{leave:({value:r})=>r},StringValue:{leave:({value:r,block:e})=>e?df(r):Bf(r)},BooleanValue:{leave:({value:r})=>r?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:r})=>r},ListValue:{leave:({values:r})=>"["+$(r,", ")+"]"},ObjectValue:{leave:({fields:r})=>"{"+$(r,", ")+"}"},ObjectField:{leave:({name:r,value:e})=>r+": "+e},Directive:{leave:({name:r,arguments:e})=>"@"+r+G("(",$(e,", "),")")},NamedType:{leave:({name:r})=>r},ListType:{leave:({type:r})=>"["+r+"]"},NonNullType:{leave:({type:r})=>r+"!"},SchemaDefinition:{leave:({description:r,directives:e,operationTypes:t})=>G("",r,`
`)+$(["schema",$(e," "),et(t)]," ")},OperationTypeDefinition:{leave:({operation:r,type:e})=>r+": "+e},ScalarTypeDefinition:{leave:({description:r,name:e,directives:t})=>G("",r,`
`)+$(["scalar",e,$(t," ")]," ")},ObjectTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>G("",r,`
`)+$(["type",e,G("implements ",$(t," & ")),$(n," "),et(i)]," ")},FieldDefinition:{leave:({description:r,name:e,arguments:t,type:n,directives:i})=>G("",r,`
`)+e+(ia(t)?G(`(
`,Bn($(t,`
`)),`
)`):G("(",$(t,", "),")"))+": "+n+G(" ",$(i," "))},InputValueDefinition:{leave:({description:r,name:e,type:t,defaultValue:n,directives:i})=>G("",r,`
`)+$([e+": "+t,G("= ",n),$(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:r,name:e,interfaces:t,directives:n,fields:i})=>G("",r,`
`)+$(["interface",e,G("implements ",$(t," & ")),$(n," "),et(i)]," ")},UnionTypeDefinition:{leave:({description:r,name:e,directives:t,types:n})=>G("",r,`
`)+$(["union",e,$(t," "),G("= ",$(n," | "))]," ")},EnumTypeDefinition:{leave:({description:r,name:e,directives:t,values:n})=>G("",r,`
`)+$(["enum",e,$(t," "),et(n)]," ")},EnumValueDefinition:{leave:({description:r,name:e,directives:t})=>G("",r,`
`)+$([e,$(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:r,name:e,directives:t,fields:n})=>G("",r,`
`)+$(["input",e,$(t," "),et(n)]," ")},DirectiveDefinition:{leave:({description:r,name:e,arguments:t,repeatable:n,locations:i})=>G("",r,`
`)+"directive @"+e+(ia(t)?G(`(
`,Bn($(t,`
`)),`
)`):G("(",$(t,", "),")"))+(n?" repeatable":"")+" on "+$(i," | ")},SchemaExtension:{leave:({directives:r,operationTypes:e})=>$(["extend schema",$(r," "),et(e)]," ")},ScalarTypeExtension:{leave:({name:r,directives:e})=>$(["extend scalar",r,$(e," ")]," ")},ObjectTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>$(["extend type",r,G("implements ",$(e," & ")),$(t," "),et(n)]," ")},InterfaceTypeExtension:{leave:({name:r,interfaces:e,directives:t,fields:n})=>$(["extend interface",r,G("implements ",$(e," & ")),$(t," "),et(n)]," ")},UnionTypeExtension:{leave:({name:r,directives:e,types:t})=>$(["extend union",r,$(e," "),G("= ",$(t," | "))]," ")},EnumTypeExtension:{leave:({name:r,directives:e,values:t})=>$(["extend enum",r,$(e," "),et(t)]," ")},InputObjectTypeExtension:{leave:({name:r,directives:e,fields:t})=>$(["extend input",r,$(e," "),et(t)]," ")}};function $(r,e=""){var t;return(t=r==null?void 0:r.filter(n=>n).join(e))!==null&&t!==void 0?t:""}function et(r){return G(`{
`,Bn($(r,`
`)),`
}`)}function G(r,e,t=""){return e!=null&&e!==""?r+e+t:""}function Bn(r){return G("  ",r.replace(/\n/g,`
  `))}function ia(r){var e;return(e=r==null?void 0:r.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function sa(r){return r.kind===B.FIELD||r.kind===B.FRAGMENT_SPREAD||r.kind===B.INLINE_FRAGMENT}function jr(r,e){var t=r.directives;return!t||!t.length?!0:Hf(t).every(function(n){var i=n.directive,s=n.ifArgument,o=!1;return s.value.kind==="Variable"?(o=e&&e[s.value.name.value],q(o!==void 0,70,i.name.value)):o=s.value.value,i.name.value==="skip"?!o:o})}function Qr(r,e,t){var n=new Set(r),i=n.size;return yt(e,{Directive:function(s){if(n.delete(s.name.value)&&(!t||!n.size))return Ni}}),t?!n.size:n.size<i}function Qf(r){return r&&Qr(["client","export"],r,!0)}function Vf(r){var e=r.name.value;return e==="skip"||e==="include"}function Hf(r){var e=[];return r&&r.length&&r.forEach(function(t){if(Vf(t)){var n=t.arguments,i=t.name.value;q(n&&n.length===1,71,i);var s=n[0];q(s.name&&s.name.value==="if",72,i);var o=s.value;q(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),73,i),e.push({directive:t,ifArgument:s})}}),e}const Wf=()=>Object.create(null),{forEach:zf,slice:oa}=Array.prototype,{hasOwnProperty:Kf}=Object.prototype;let nr=class Ic{constructor(e=!0,t=Wf){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return zf.call(e,n=>t=t.getChildTrie(n)),Kf.call(t,"data")?t.data:t.data=this.makeData(oa.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let n=0,i=e.length;t&&n<i;++n){const s=t.mapFor(e[n],!1);t=s&&s.get(e[n])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const n=e[0],i=this.mapFor(n,!1),s=i&&i.get(n);s&&(t=s.removeArray(oa.call(e,1)),!s.data&&!s.weak&&!(s.strong&&s.strong.size)&&i.delete(n))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let n=t.get(e);return n||t.set(e,n=new Ic(this.weakness,this.makeData)),n}mapFor(e,t){return this.weakness&&Gf(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}};function Gf(r){switch(typeof r){case"object":if(r===null)break;case"function":return!0}return!1}var Jf=Ze(function(){return navigator.product})=="ReactNative",ir=typeof WeakMap=="function"&&!(Jf&&!It.HermesInternal),aa=typeof WeakSet=="function",ua=typeof Symbol=="function"&&typeof Symbol.for=="function",$n=ua&&Symbol.asyncIterator;Ze(function(){return window.document.createElement}),Ze(function(){return navigator.userAgent.indexOf("jsdom")>=0});function le(r){return r!==null&&typeof r=="object"}function Yf(r,e){var t=e,n=[];r.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw Be(74,s.operation,s.name?" named '".concat(s.name.value,"'"):"");s.kind==="FragmentDefinition"&&n.push(s)}),typeof t=="undefined"&&(q(n.length===1,75,n.length),t=n[0].name.value);var i=x(x({},r),{definitions:Le([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],r.definitions,!0)});return i}function Pn(r){r===void 0&&(r=[]);var e={};return r.forEach(function(t){e[t.name.value]=t}),e}function Ln(r,e){switch(r.kind){case"InlineFragment":return r;case"FragmentSpread":{var t=r.name.value;if(typeof e=="function")return e(t);var n=e&&e[t];return q(n,76,t),n||null}default:return null}}function Xf(){}class Di{constructor(e=1/0,t=Xf){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:n,newer:i}=t;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function Fi(){}const Zf=Fi,eh=typeof WeakRef!="undefined"?WeakRef:function(r){return{deref:()=>r}},th=typeof WeakMap!="undefined"?WeakMap:Map,rh=typeof FinalizationRegistry!="undefined"?FinalizationRegistry:function(){return{register:Fi,unregister:Fi}},nh=10024;class Un{constructor(e=1/0,t=Zf){this.max=e,this.dispose=t,this.map=new th,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const n=this.unfinalizedNodes.values();for(let i=0;i<nh;i++){const s=n.next().value;if(!s)break;this.unfinalizedNodes.delete(s);const o=s.key;delete s.key,s.keyRef=new eh(o),this.registry.register(o,s,s)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new rh(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:n,newer:i}=t;i&&(i.older=n),n&&(n.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let n=this.getNode(e);return n?n.value=t:(n={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.scheduleFinalization(n),this.map.set(e,n),this.size++,n.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var Mi=new WeakSet;function ca(r){r.size<=(r.max||-1)||Mi.has(r)||(Mi.add(r),setTimeout(function(){r.clean(),Mi.delete(r)},100))}var la=function(r,e){var t=new Un(r,e);return t.set=function(n,i){var s=Un.prototype.set.call(this,n,i);return ca(this),s},t},ih=function(r,e){var t=new Di(r,e);return t.set=function(n,i){var s=Di.prototype.set.call(this,n,i);return ca(this),s},t},sh=Symbol.for("apollo.cacheSize"),mt=x({},_i[sh]),Wt={};function fa(r,e){Wt[r]=e}var oh=globalThis.__DEV__!==!1?lh:void 0,ah=globalThis.__DEV__!==!1?fh:void 0,uh=globalThis.__DEV__!==!1?ha:void 0;function ch(){var r={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(r).map(function(e){var t=e[0],n=e[1];return[t,mt[t]||n]}))}function lh(){var r,e,t,n,i;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:ch(),sizes:x({print:(r=Wt.print)===null||r===void 0?void 0:r.call(Wt),parser:(e=Wt.parser)===null||e===void 0?void 0:e.call(Wt),canonicalStringify:(t=Wt.canonicalStringify)===null||t===void 0?void 0:t.call(Wt),links:$i(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:da(this.queryManager.documentTransform)}},(i=(n=this.cache).getMemoryInternals)===null||i===void 0?void 0:i.call(n))}}function ha(){return{cache:{fragmentQueryDocuments:At(this.getFragmentDoc)}}}function fh(){var r=this.config.fragments;return x(x({},ha.apply(this)),{addTypenameDocumentTransform:da(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:At(this.storeReader.executeSelectionSet),executeSubSelectedArray:At(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:At(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:At(r==null?void 0:r.findFragmentSpreads),lookup:At(r==null?void 0:r.lookup),transform:At(r==null?void 0:r.transform)}})}function hh(r){return!!r&&"dirtyKey"in r}function At(r){return hh(r)?r.size:void 0}function pa(r){return r!=null}function da(r){return Bi(r).map(function(e){return{cache:e}})}function Bi(r){return r?Le(Le([At(r==null?void 0:r.performWork)],Bi(r==null?void 0:r.left),!0),Bi(r==null?void 0:r.right),!0).filter(pa):[]}function $i(r){var e;return r?Le(Le([(e=r==null?void 0:r.getMemoryInternals)===null||e===void 0?void 0:e.call(r)],$i(r==null?void 0:r.left),!0),$i(r==null?void 0:r.right),!0).filter(pa):[]}var Ot=Object.assign(function(e){return JSON.stringify(e,ph)},{reset:function(){sr=new ih(mt.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&fa("canonicalStringify",function(){return sr.size});var sr;Ot.reset();function ph(r,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var n=Object.keys(e);if(n.every(dh))return e;var i=JSON.stringify(n),s=sr.get(i);if(!s){n.sort();var o=JSON.stringify(n);s=sr.get(o)||n,sr.set(i,s),sr.set(o,s)}var a=Object.create(t);return s.forEach(function(u){a[u]=e[u]}),a}}return e}function dh(r,e,t){return e===0||t[e-1]<=r}function or(r){return{__ref:String(r)}}function Z(r){return!!(r&&typeof r=="object"&&typeof r.__ref=="string")}function yh(r){return le(r)&&r.kind==="Document"&&Array.isArray(r.definitions)}function mh(r){return r.kind==="StringValue"}function gh(r){return r.kind==="BooleanValue"}function vh(r){return r.kind==="IntValue"}function bh(r){return r.kind==="FloatValue"}function wh(r){return r.kind==="Variable"}function Eh(r){return r.kind==="ObjectValue"}function _h(r){return r.kind==="ListValue"}function Sh(r){return r.kind==="EnumValue"}function kh(r){return r.kind==="NullValue"}function ar(r,e,t,n){if(vh(t)||bh(t))r[e.value]=Number(t.value);else if(gh(t)||mh(t))r[e.value]=t.value;else if(Eh(t)){var i={};t.fields.map(function(o){return ar(i,o.name,o.value,n)}),r[e.value]=i}else if(wh(t)){var s=(n||{})[t.name.value];r[e.value]=s}else if(_h(t))r[e.value]=t.values.map(function(o){var a={};return ar(a,e,o,n),a[e.value]});else if(Sh(t))r[e.value]=t.value;else if(kh(t))r[e.value]=null;else throw Be(85,e.value,t.kind)}function xh(r,e){var t=null;r.directives&&(t={},r.directives.forEach(function(i){t[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var o=s.name,a=s.value;return ar(t[i.name.value],o,a,e)})}));var n=null;return r.arguments&&r.arguments.length&&(n={},r.arguments.forEach(function(i){var s=i.name,o=i.value;return ar(n,s,o,e)})),ya(r.name.value,n,t)}var Th=["connection","include","skip","client","rest","export","nonreactive"],Vr=Ot,ya=Object.assign(function(r,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var n=t.connection.filter?t.connection.filter:[];n.sort();var i={};return n.forEach(function(a){i[a]=e[a]}),"".concat(t.connection.key,"(").concat(Vr(i),")")}else return t.connection.key;var s=r;if(e){var o=Vr(e);s+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(a){Th.indexOf(a)===-1&&(t[a]&&Object.keys(t[a]).length?s+="@".concat(a,"(").concat(Vr(t[a]),")"):s+="@".concat(a))}),s},{setStringify:function(r){var e=Vr;return Vr=r,e}});function qn(r,e){if(r.arguments&&r.arguments.length){var t={};return r.arguments.forEach(function(n){var i=n.name,s=n.value;return ar(t,i,s,e)}),t}return null}function Ct(r){return r.alias?r.alias.value:r.name.value}function Pi(r,e,t){for(var n,i=0,s=e.selections;i<s.length;i++){var o=s[i];if(Rt(o)){if(o.name.value==="__typename")return r[Ct(o)]}else n?n.push(o):n=[o]}if(typeof r.__typename=="string")return r.__typename;if(n)for(var a=0,u=n;a<u.length;a++){var o=u[a],f=Pi(r,Ln(o,t).selectionSet,t);if(typeof f=="string")return f}}function Rt(r){return r.kind==="Field"}function Ih(r){return r.kind==="InlineFragment"}function Hr(r){q(r&&r.kind==="Document",77);var e=r.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw Be(78,t.kind);return t});return q(e.length<=1,79,e.length),r}function Wr(r){return Hr(r),r.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Li(r){return r.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function jn(r){return r.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function ma(r){var e=Wr(r);return q(e&&e.operation==="query",80),e}function Ah(r){q(r.kind==="Document",81),q(r.definitions.length<=1,82);var e=r.definitions[0];return q(e.kind==="FragmentDefinition",83),e}function ur(r){Hr(r);for(var e,t=0,n=r.definitions;t<n.length;t++){var i=n[t];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw Be(84)}function Ui(r){var e=Object.create(null),t=r&&r.variableDefinitions;return t&&t.length&&t.forEach(function(n){n.defaultValue&&ar(e,n.variable.name,n.defaultValue)}),e}const Oh=()=>Object.create(null),{forEach:Ch,slice:Rh}=Array.prototype,{hasOwnProperty:Nh}=Object.prototype;class qi{constructor(e=!0,t=Oh){this.weakness=e,this.makeData=t}lookup(...e){return this.lookupArray(e)}lookupArray(e){let t=this;return Ch.call(e,n=>t=t.getChildTrie(n)),Nh.call(t,"data")?t.data:t.data=this.makeData(Rh.call(e))}peek(...e){return this.peekArray(e)}peekArray(e){let t=this;for(let n=0,i=e.length;t&&n<i;++n){const s=this.weakness&&ga(e[n])?t.weak:t.strong;t=s&&s.get(e[n])}return t&&t.data}getChildTrie(e){const t=this.weakness&&ga(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map);let n=t.get(e);return n||t.set(e,n=new qi(this.weakness,this.makeData)),n}}function ga(r){switch(typeof r){case"object":if(r===null)break;case"function":return!0}return!1}let Re=null;const va={};let Dh=1;const Fh=()=>class{constructor(){this.id=["slot",Dh++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=Re;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===va)break;return e!==Re&&(Re.slots[this.id]=t),!0}return Re&&(Re.slots[this.id]=va),!1}getValue(){if(this.hasValue())return Re.slots[this.id]}withValue(e,t,n,i){const s={__proto__:null,[this.id]:e},o=Re;Re={parent:o,slots:s};try{return t.apply(i,n)}finally{Re=o}}static bind(e){const t=Re;return function(){const n=Re;try{return Re=t,e.apply(this,arguments)}finally{Re=n}}}static noContext(e,t,n){if(Re){const i=Re;try{return Re=null,e.apply(n,t)}finally{Re=i}}else return e.apply(n,t)}};function ba(r){try{return r()}catch(e){}}const ji="@wry/context:Slot",wa=ba(()=>globalThis)||ba(()=>It)||Object.create(null),Ea=wa[ji]||Array[ji]||function(r){try{Object.defineProperty(wa,ji,{value:r,enumerable:!1,writable:!1,configurable:!0})}finally{return r}}(Fh()),Qn=new Ea,{hasOwnProperty:Mh}=Object.prototype,Qi=Array.from||function(r){const e=[];return r.forEach(t=>e.push(t)),e};function Vi(r){const{unsubscribe:e}=r;typeof e=="function"&&(r.unsubscribe=void 0,e())}const zr=[],Bh=100;function cr(r,e){if(!r)throw new Error(e||"assertion failure")}function _a(r,e){const t=r.length;return t>0&&t===e.length&&r[t-1]===e[t-1]}function Sa(r){switch(r.length){case 0:throw new Error("unknown value");case 1:return r[0];case 2:throw r[1]}}function ka(r){return r.slice(0)}class Vn{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++Vn.count}peek(){if(this.value.length===1&&!Nt(this))return xa(this),this.value[0]}recompute(e){return cr(!this.recomputing,"already recomputing"),xa(this),Nt(this)?$h(this,e):Sa(this.value)}setDirty(){this.dirty||(this.dirty=!0,Ta(this),Vi(this))}dispose(){this.setDirty(),Ra(this),Hi(this,(e,t)=>{e.setDirty(),Na(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=zr.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(Qi(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),zr.push(this.deps),this.deps=null)}}Vn.count=0;function xa(r){const e=Qn.getValue();if(e)return r.parents.add(e),e.childValues.has(r)||e.childValues.set(r,[]),Nt(r)?Aa(e,r):Oa(e,r),e}function $h(r,e){return Ra(r),Qn.withValue(r,Ph,[r,e]),Uh(r,e)&&Lh(r),Sa(r.value)}function Ph(r,e){r.recomputing=!0;const{normalizeResult:t}=r;let n;t&&r.value.length===1&&(n=ka(r.value)),r.value.length=0;try{if(r.value[0]=r.fn.apply(null,e),t&&n&&!_a(n,r.value))try{r.value[0]=t(r.value[0],n[0])}catch(i){}}catch(i){r.value[1]=i}r.recomputing=!1}function Nt(r){return r.dirty||!!(r.dirtyChildren&&r.dirtyChildren.size)}function Lh(r){r.dirty=!1,!Nt(r)&&Ia(r)}function Ta(r){Hi(r,Aa)}function Ia(r){Hi(r,Oa)}function Hi(r,e){const t=r.parents.size;if(t){const n=Qi(r.parents);for(let i=0;i<t;++i)e(n[i],r)}}function Aa(r,e){cr(r.childValues.has(e)),cr(Nt(e));const t=!Nt(r);if(!r.dirtyChildren)r.dirtyChildren=zr.pop()||new Set;else if(r.dirtyChildren.has(e))return;r.dirtyChildren.add(e),t&&Ta(r)}function Oa(r,e){cr(r.childValues.has(e)),cr(!Nt(e));const t=r.childValues.get(e);t.length===0?r.childValues.set(e,ka(e.value)):_a(t,e.value)||r.setDirty(),Ca(r,e),!Nt(r)&&Ia(r)}function Ca(r,e){const t=r.dirtyChildren;t&&(t.delete(e),t.size===0&&(zr.length<Bh&&zr.push(t),r.dirtyChildren=null))}function Ra(r){r.childValues.size>0&&r.childValues.forEach((e,t)=>{Na(r,t)}),r.forgetDeps(),cr(r.dirtyChildren===null)}function Na(r,e){e.parents.delete(r),r.childValues.delete(e),Ca(r,e)}function Uh(r,e){if(typeof r.subscribe=="function")try{Vi(r),r.unsubscribe=r.subscribe.apply(null,e)}catch(t){return r.setDirty(),!1}return!0}const qh={setDirty:!0,dispose:!0,forget:!0};function Da(r){const e=new Map;function t(n){const i=Qn.getValue();if(i){let s=e.get(n);s||e.set(n,s=new Set),i.dependOn(s)}}return t.dirty=function(i,s){const o=e.get(i);if(o){const a=s&&Mh.call(qh,s)?s:"setDirty";Qi(o).forEach(u=>u[a]()),e.delete(i),Vi(o)}},t}let Fa;function jh(...r){return(Fa||(Fa=new qi(typeof WeakMap=="function"))).lookupArray(r)}const Wi=new Set;function Kr(r,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:n=jh,normalizeResult:i,subscribe:s,cache:o=Di}=Object.create(null)){const a=typeof o=="function"?new o(e,p=>p.dispose()):o,u=function(){const p=n.apply(null,t?t.apply(null,arguments):arguments);if(p===void 0)return r.apply(null,arguments);let y=a.get(p);y||(a.set(p,y=new Vn(r)),y.normalizeResult=i,y.subscribe=s,y.forget=()=>a.delete(p));const v=y.recompute(Array.prototype.slice.call(arguments));return a.set(p,y),Wi.add(a),Qn.hasValue()||(Wi.forEach(w=>w.clean()),Wi.clear()),v};Object.defineProperty(u,"size",{get:()=>a.size,configurable:!1,enumerable:!1}),Object.freeze(u.options={max:e,keyArgs:t,makeCacheKey:n,normalizeResult:i,subscribe:s,cache:a});function f(p){const y=p&&a.get(p);y&&y.setDirty()}u.dirtyKey=f,u.dirty=function(){f(n.apply(null,arguments))};function c(p){const y=p&&a.get(p);if(y)return y.peek()}u.peekKey=c,u.peek=function(){return c(n.apply(null,arguments))};function d(p){return p?a.delete(p):!1}return u.forgetKey=d,u.forget=function(){return d(n.apply(null,arguments))},u.makeCacheKey=n,u.getKey=t?function(){return n.apply(null,t.apply(null,arguments))}:n,Object.freeze(u)}function Qh(r){return r}var Ma=function(){function r(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=aa?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return r.prototype.getCacheKey=function(e){return[e]},r.identity=function(){return new r(Qh,{cache:!1})},r.split=function(e,t,n){return n===void 0&&(n=r.identity()),Object.assign(new r(function(i){var s=e(i)?t:n;return s.transformDocument(i)},{cache:!1}),{left:t,right:n})},r.prototype.resetCache=function(){var e=this;if(this.cached){var t=new nr(ir);this.performWork=Kr(r.prototype.performWork.bind(this),{makeCacheKey:function(n){var i=e.getCacheKey(n);if(i)return q(Array.isArray(i),69),t.lookupArray(i)},max:mt["documentTransform.cache"],cache:Un})}},r.prototype.performWork=function(e){return Hr(e),this.transform(e)},r.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},r.prototype.concat=function(e){var t=this;return Object.assign(new r(function(n){return e.transformDocument(t.transformDocument(n))},{cache:!1}),{left:this,right:e})},r}(),Gr,Jr=Object.assign(function(r){var e=Gr.get(r);return e||(e=na(r),Gr.set(r,e)),e},{reset:function(){Gr=new la(mt.print||2e3)}});Jr.reset(),globalThis.__DEV__!==!1&&fa("print",function(){return Gr?Gr.size:0});var de=Array.isArray;function at(r){return Array.isArray(r)&&r.length>0}var Ba={kind:B.FIELD,name:{kind:B.NAME,value:"__typename"}};function $a(r,e){return!r||r.selectionSet.selections.every(function(t){return t.kind===B.FRAGMENT_SPREAD&&$a(e[t.name.value],e)})}function Vh(r){return $a(Wr(r)||Ah(r),Pn(jn(r)))?null:r}function Hh(r){var e=new Map,t=new Map;return r.forEach(function(n){n&&(n.name?e.set(n.name,n):n.test&&t.set(n.test,n))}),function(n){var i=e.get(n.name.value);return!i&&t.size&&t.forEach(function(s,o){o(n)&&(i=s)}),i}}function Pa(r){var e=new Map;return function(n){n===void 0&&(n=r);var i=e.get(n);return i||e.set(n,i={variables:new Set,fragmentSpreads:new Set}),i}}function La(r,e){Hr(e);for(var t=Pa(""),n=Pa(""),i=function(b){for(var k=0,S=void 0;k<b.length&&(S=b[k]);++k)if(!de(S)){if(S.kind===B.OPERATION_DEFINITION)return t(S.name&&S.name.value);if(S.kind===B.FRAGMENT_DEFINITION)return n(S.name.value)}return globalThis.__DEV__!==!1&&q.error(86),null},s=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===B.OPERATION_DEFINITION&&++s;var a=Hh(r),u=function(b){return at(b)&&b.map(a).some(function(k){return k&&k.remove})},f=new Map,c=!1,d={enter:function(b){if(u(b.directives))return c=!0,null}},p=yt(e,{Field:d,InlineFragment:d,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(b,k,S,A,O){var N=i(O);N&&N.variables.add(b.name.value)}},FragmentSpread:{enter:function(b,k,S,A,O){if(u(b.directives))return c=!0,null;var N=i(O);N&&N.fragmentSpreads.add(b.name.value)}},FragmentDefinition:{enter:function(b,k,S,A){f.set(JSON.stringify(A),b)},leave:function(b,k,S,A){var O=f.get(JSON.stringify(A));if(b===O)return b;if(s>0&&b.selectionSet.selections.every(function(N){return N.kind===B.FIELD&&N.name.value==="__typename"}))return n(b.name.value).removed=!0,c=!0,null}},Directive:{leave:function(b){if(a(b))return c=!0,null}}});if(!c)return e;var y=function(b){return b.transitiveVars||(b.transitiveVars=new Set(b.variables),b.removed||b.fragmentSpreads.forEach(function(k){y(n(k)).transitiveVars.forEach(function(S){b.transitiveVars.add(S)})})),b},v=new Set;p.definitions.forEach(function(b){b.kind===B.OPERATION_DEFINITION?y(t(b.name&&b.name.value)).fragmentSpreads.forEach(function(k){v.add(k)}):b.kind===B.FRAGMENT_DEFINITION&&s===0&&!n(b.name.value).removed&&v.add(b.name.value)}),v.forEach(function(b){y(n(b)).fragmentSpreads.forEach(function(k){v.add(k)})});var w=function(b){return!!(!v.has(b)||n(b).removed)},E={enter:function(b){if(w(b.name.value))return null}};return Vh(yt(p,{FragmentSpread:E,FragmentDefinition:E,OperationDefinition:{leave:function(b){if(b.variableDefinitions){var k=y(t(b.name&&b.name.value)).transitiveVars;if(k.size<b.variableDefinitions.length)return x(x({},b),{variableDefinitions:b.variableDefinitions.filter(function(S){return k.has(S.variable.name.value)})})}}}}))}var zi=Object.assign(function(r){return yt(r,{SelectionSet:{enter:function(e,t,n){if(!(n&&n.kind===B.OPERATION_DEFINITION)){var i=e.selections;if(i){var s=i.some(function(a){return Rt(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!s){var o=n;if(!(Rt(o)&&o.directives&&o.directives.some(function(a){return a.name.value==="export"})))return x(x({},e),{selections:Le(Le([],i,!0),[Ba],!1)})}}}}}})},{added:function(r){return r===Ba}});function Wh(r){var e=ur(r),t=e.operation;if(t==="query")return r;var n=yt(r,{OperationDefinition:{enter:function(i){return x(x({},i),{operation:"query"})}}});return n}function Ua(r){Hr(r);var e=La([{test:function(t){return t.name.value==="client"},remove:!0}],r);return e}var zh=Object.prototype.hasOwnProperty;function qa(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return Hn(r)}function Hn(r){var e=r[0]||{},t=r.length;if(t>1)for(var n=new Dt,i=1;i<t;++i)e=n.merge(e,r[i]);return e}var Kh=function(r,e,t){return this.merge(r[t],e[t])},Dt=function(){function r(e){e===void 0&&(e=Kh),this.reconciler=e,this.isObject=le,this.pastCopies=new Set}return r.prototype.merge=function(e,t){for(var n=this,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return le(t)&&le(e)?(Object.keys(t).forEach(function(o){if(zh.call(e,o)){var a=e[o];if(t[o]!==a){var u=n.reconciler.apply(n,Le([e,t,o],i,!1));u!==a&&(e=n.shallowCopyForMerge(e),e[o]=u)}}else e=n.shallowCopyForMerge(e),e[o]=t[o]}),e):t},r.prototype.shallowCopyForMerge=function(e){return le(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=x({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},r}();function Gh(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=Jh(r))||e){t&&(r=t);var n=0;return function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jh(r,e){if(r){if(typeof r=="string")return ja(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ja(r,e)}}function ja(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Qa(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ki(r,e,t){return e&&Qa(r.prototype,e),t&&Qa(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}var Gi=function(){return typeof Symbol=="function"},Ji=function(r){return Gi()&&!!Symbol[r]},Yi=function(r){return Ji(r)?Symbol[r]:"@@"+r};Gi()&&!Ji("observable")&&(Symbol.observable=Symbol("observable"));var Yh=Yi("iterator"),Xi=Yi("observable"),Va=Yi("species");function Wn(r,e){var t=r[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function Yr(r){var e=r.constructor;return e!==void 0&&(e=e[Va],e===null&&(e=void 0)),e!==void 0?e:ee}function Xh(r){return r instanceof ee}function lr(r){lr.log?lr.log(r):setTimeout(function(){throw r})}function zn(r){Promise.resolve().then(function(){try{r()}catch(e){lr(e)}})}function Ha(r){var e=r._cleanup;if(e!==void 0&&(r._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Wn(e,"unsubscribe");t&&t.call(e)}}catch(n){lr(n)}}function Zi(r){r._observer=void 0,r._queue=void 0,r._state="closed"}function Zh(r){var e=r._queue;if(e){r._queue=void 0,r._state="ready";for(var t=0;t<e.length&&(Wa(r,e[t].type,e[t].value),r._state!=="closed");++t);}}function Wa(r,e,t){r._state="running";var n=r._observer;try{var i=Wn(n,e);switch(e){case"next":i&&i.call(n,t);break;case"error":if(Zi(r),i)i.call(n,t);else throw t;break;case"complete":Zi(r),i&&i.call(n);break}}catch(s){lr(s)}r._state==="closed"?Ha(r):r._state==="running"&&(r._state="ready")}function es(r,e,t){if(r._state!=="closed"){if(r._state==="buffering"){r._queue.push({type:e,value:t});return}if(r._state!=="ready"){r._state="buffering",r._queue=[{type:e,value:t}],zn(function(){return Zh(r)});return}Wa(r,e,t)}}var ep=function(){function r(t,n){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new tp(this);try{this._cleanup=n.call(void 0,i)}catch(s){i.error(s)}this._state==="initializing"&&(this._state="ready")}var e=r.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Zi(this),Ha(this))},Ki(r,[{key:"closed",get:function(){return this._state==="closed"}}]),r}(),tp=function(){function r(t){this._subscription=t}var e=r.prototype;return e.next=function(n){es(this._subscription,"next",n)},e.error=function(n){es(this._subscription,"error",n)},e.complete=function(){es(this._subscription,"complete")},Ki(r,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),r}(),ee=function(){function r(t){if(!(this instanceof r))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=r.prototype;return e.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new ep(n,this._subscriber)},e.forEach=function(n){var i=this;return new Promise(function(s,o){if(typeof n!="function"){o(new TypeError(n+" is not a function"));return}function a(){u.unsubscribe(),s()}var u=i.subscribe({next:function(f){try{n(f,a)}catch(c){o(c),u.unsubscribe()}},error:o,complete:s})})},e.map=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var s=Yr(this);return new s(function(o){return i.subscribe({next:function(a){try{a=n(a)}catch(u){return o.error(u)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.filter=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var s=Yr(this);return new s(function(o){return i.subscribe({next:function(a){try{if(!n(a))return}catch(u){return o.error(u)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.reduce=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var s=Yr(this),o=arguments.length>1,a=!1,u=arguments[1],f=u;return new s(function(c){return i.subscribe({next:function(d){var p=!a;if(a=!0,!p||o)try{f=n(f,d)}catch(y){return c.error(y)}else f=d},error:function(d){c.error(d)},complete:function(){if(!a&&!o)return c.error(new TypeError("Cannot reduce an empty sequence"));c.next(f),c.complete()}})})},e.concat=function(){for(var n=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=Yr(this);return new a(function(u){var f,c=0;function d(p){f=p.subscribe({next:function(y){u.next(y)},error:function(y){u.error(y)},complete:function(){c===s.length?(f=void 0,u.complete()):d(a.from(s[c++]))}})}return d(n),function(){f&&(f.unsubscribe(),f=void 0)}})},e.flatMap=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var s=Yr(this);return new s(function(o){var a=[],u=i.subscribe({next:function(c){if(n)try{c=n(c)}catch(p){return o.error(p)}var d=s.from(c).subscribe({next:function(p){o.next(p)},error:function(p){o.error(p)},complete:function(){var p=a.indexOf(d);p>=0&&a.splice(p,1),f()}});a.push(d)},error:function(c){o.error(c)},complete:function(){f()}});function f(){u.closed&&a.length===0&&o.complete()}return function(){a.forEach(function(c){return c.unsubscribe()}),u.unsubscribe()}})},e[Xi]=function(){return this},r.from=function(n){var i=typeof this=="function"?this:r;if(n==null)throw new TypeError(n+" is not an object");var s=Wn(n,Xi);if(s){var o=s.call(n);if(Object(o)!==o)throw new TypeError(o+" is not an object");return Xh(o)&&o.constructor===i?o:new i(function(a){return o.subscribe(a)})}if(Ji("iterator")&&(s=Wn(n,Yh),s))return new i(function(a){zn(function(){if(!a.closed){for(var u=Gh(s.call(n)),f;!(f=u()).done;){var c=f.value;if(a.next(c),a.closed)return}a.complete()}})});if(Array.isArray(n))return new i(function(a){zn(function(){if(!a.closed){for(var u=0;u<n.length;++u)if(a.next(n[u]),a.closed)return;a.complete()}})});throw new TypeError(n+" is not observable")},r.of=function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=typeof this=="function"?this:r;return new o(function(a){zn(function(){if(!a.closed){for(var u=0;u<i.length;++u)if(a.next(i[u]),a.closed)return;a.complete()}})})},Ki(r,null,[{key:Va,get:function(){return this}}]),r}();Gi()&&Object.defineProperty(ee,Symbol("extensions"),{value:{symbol:Xi,hostReportError:lr},configurable:!0});function rp(r){var e,t=r.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch(n){}}else e="@@observable";return e}var fr;typeof self!="undefined"?fr=self:typeof window!="undefined"?fr=window:typeof It!="undefined"?fr=It:typeof module!="undefined"?fr=module:fr=Function("return this")(),rp(fr);var za=ee.prototype,Ka="@@observable";za[Ka]||(za[Ka]=function(){return this});var np=Object.prototype.toString;function Ga(r){return ts(r)}function ts(r,e){switch(np.call(r)){case"[object Array]":{if(e=e||new Map,e.has(r))return e.get(r);var t=r.slice(0);return e.set(r,t),t.forEach(function(i,s){t[s]=ts(i,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(r))return e.get(r);var n=Object.create(Object.getPrototypeOf(r));return e.set(r,n),Object.keys(r).forEach(function(i){n[i]=ts(r[i],e)}),n}default:return r}}function ip(r){var e=new Set([r]);return e.forEach(function(t){le(t)&&sp(t)===t&&Object.getOwnPropertyNames(t).forEach(function(n){le(t[n])&&e.add(t[n])})}),r}function sp(r){if(globalThis.__DEV__!==!1&&!Object.isFrozen(r))try{Object.freeze(r)}catch(e){if(e instanceof TypeError)return null;throw e}return r}function rs(r){return globalThis.__DEV__!==!1&&ip(r),r}function Xr(r,e,t){var n=[];r.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](t)})}function ns(r,e,t){return new ee(function(n){var i={then:function(u){return new Promise(function(f){return f(u())})}};function s(u,f){return function(c){if(u){var d=function(){return n.closed?0:u(c)};i=i.then(d,d).then(function(p){return n.next(p)},function(p){return n.error(p)})}else n[f](c)}}var o={next:s(e,"next"),error:s(t,"error"),complete:function(){i.then(function(){return n.complete()})}},a=r.subscribe(o);return function(){return a.unsubscribe()}})}function Ja(r){function e(t){Object.defineProperty(r,t,{value:ee})}return ua&&Symbol.species&&e(Symbol.species),e("@@species"),r}function Ya(r){return r&&typeof r.then=="function"}var hr=function(r){Ge(e,r);function e(t){var n=r.call(this,function(i){return n.addObserver(i),function(){return n.removeObserver(i)}})||this;return n.observers=new Set,n.promise=new Promise(function(i,s){n.resolve=i,n.reject=s}),n.handlers={next:function(i){n.sub!==null&&(n.latest=["next",i],n.notify("next",i),Xr(n.observers,"next",i))},error:function(i){var s=n.sub;s!==null&&(s&&setTimeout(function(){return s.unsubscribe()}),n.sub=null,n.latest=["error",i],n.reject(i),n.notify("error",i),Xr(n.observers,"error",i))},complete:function(){var i=n,s=i.sub,o=i.sources,a=o===void 0?[]:o;if(s!==null){var u=a.shift();u?Ya(u)?u.then(function(f){return n.sub=f.subscribe(n.handlers)},n.handlers.error):n.sub=u.subscribe(n.handlers):(s&&setTimeout(function(){return s.unsubscribe()}),n.sub=null,n.latest&&n.latest[0]==="next"?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),Xr(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(i){n.reject(i),n.sources=[],n.handlers.error(i)},n.promise.catch(function(i){}),typeof t=="function"&&(t=[new ee(t)]),Ya(t)?t.then(function(i){return n.start(i)},n.handlers.error):n.start(t),n}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var n=this.latest[0],i=t[n];i&&i.call(t,this.latest[1]),this.sub===null&&n==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,n){var i=this.nextResultListeners;i.size&&(this.nextResultListeners=new Set,i.forEach(function(s){return s(t,n)}))},e.prototype.beforeNext=function(t){var n=!1;this.nextResultListeners.add(function(i,s){n||(n=!0,t(i,s))})},e}(ee);Ja(hr);function pr(r){return"incremental"in r}function op(r){return"hasNext"in r&&"data"in r}function ap(r){return pr(r)||op(r)}function up(r){return le(r)&&"payload"in r}function Xa(r,e){var t=r,n=new Dt;return pr(e)&&at(e.incremental)&&e.incremental.forEach(function(i){for(var s=i.data,o=i.path,a=o.length-1;a>=0;--a){var u=o[a],f=!isNaN(+u),c=f?[]:{};c[u]=s,s=c}t=n.merge(t,s)}),t}function Kn(r){var e=is(r);return at(e)}function is(r){var e=at(r.errors)?r.errors.slice(0):[];return pr(r)&&at(r.incremental)&&r.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function dr(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=Object.create(null);return r.forEach(function(n){n&&Object.keys(n).forEach(function(i){var s=n[i];s!==void 0&&(t[i]=s)})}),t}function ss(r,e){return dr(r,e,e.variables&&{variables:dr(x(x({},r&&r.variables),e.variables))})}function os(r){return new ee(function(e){e.error(r)})}var Za=function(r,e,t){var n=new Error(t);throw n.name="ServerError",n.response=r,n.statusCode=r.status,n.result=e,n};function cp(r){for(var e=["query","operationName","variables","extensions","context"],t=0,n=Object.keys(r);t<n.length;t++){var i=n[t];if(e.indexOf(i)<0)throw Be(44,i)}return r}function lp(r,e){var t=x({},r),n=function(s){typeof s=="function"?t=x(x({},t),s(t)):t=x(x({},t),s)},i=function(){return x({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),e}function fp(r){var e={variables:r.variables||{},extensions:r.extensions||{},operationName:r.operationName,query:r.query};return e.operationName||(e.operationName=typeof e.query!="string"?Li(e.query)||void 0:""),e}function hp(r,e){var t=x({},r),n=new Set(Object.keys(r));return yt(e,{Variable:function(i,s,o){o&&o.kind!=="VariableDefinition"&&n.delete(i.name.value)}}),n.forEach(function(i){delete t[i]}),t}function eu(r,e){return e?e(r):ee.of()}function Zr(r){return typeof r=="function"?new Je(r):r}function Gn(r){return r.request.length<=1}var Je=function(){function r(e){e&&(this.request=e)}return r.empty=function(){return new r(function(){return ee.of()})},r.from=function(e){return e.length===0?r.empty():e.map(Zr).reduce(function(t,n){return t.concat(n)})},r.split=function(e,t,n){var i=Zr(t),s=Zr(n||new r(eu)),o;return Gn(i)&&Gn(s)?o=new r(function(a){return e(a)?i.request(a)||ee.of():s.request(a)||ee.of()}):o=new r(function(a,u){return e(a)?i.request(a,u)||ee.of():s.request(a,u)||ee.of()}),Object.assign(o,{left:i,right:s})},r.execute=function(e,t){return e.request(lp(t.context,fp(cp(t))))||ee.of()},r.concat=function(e,t){var n=Zr(e);if(Gn(n))return globalThis.__DEV__!==!1&&q.warn(36,n),n;var i=Zr(t),s;return Gn(i)?s=new r(function(o){return n.request(o,function(a){return i.request(a)||ee.of()})||ee.of()}):s=new r(function(o,a){return n.request(o,function(u){return i.request(u,a)||ee.of()})||ee.of()}),Object.assign(s,{left:n,right:i})},r.prototype.split=function(e,t,n){return this.concat(r.split(e,t,n||new r(eu)))},r.prototype.concat=function(e){return r.concat(this,e)},r.prototype.request=function(e,t){throw Be(37)},r.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},r.prototype.setOnError=function(e){return this.onError=e,this},r}(),tu=Je.from,pp=Je.split,as=Je.execute;function dp(r){var e,t=r[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function yp(r){var e=null,t=null,n=!1,i=[],s=[];function o(d){if(!t){if(s.length){var p=s.shift();if(Array.isArray(p)&&p[0])return p[0]({value:d,done:!1})}i.push(d)}}function a(d){t=d;var p=s.slice();p.forEach(function(y){y[1](d)}),!e||e()}function u(){n=!0;var d=s.slice();d.forEach(function(p){p[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,r.removeListener("data",o),r.removeListener("error",a),r.removeListener("end",u),r.removeListener("finish",u),r.removeListener("close",u)},r.on("data",o),r.on("error",a),r.on("end",u),r.on("finish",u),r.on("close",u);function f(){return new Promise(function(d,p){if(t)return p(t);if(i.length)return d({value:i.shift(),done:!1});if(n)return d({value:void 0,done:!0});s.push([d,p])})}var c={next:function(){return f()}};return $n&&(c[Symbol.asyncIterator]=function(){return this}),c}function mp(r){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(n,i){r.then(function(s){n({value:s,done:!1})}).catch(i)}))}};return $n&&(t[Symbol.asyncIterator]=function(){return this}),t}function ru(r){var e={next:function(){return r.read()}};return $n&&(e[Symbol.asyncIterator]=function(){return this}),e}function gp(r){return!!r.body}function vp(r){return!!r.getReader}function bp(r){return!!($n&&r[Symbol.asyncIterator])}function wp(r){return!!r.stream}function Ep(r){return!!r.arrayBuffer}function _p(r){return!!r.pipe}function Sp(r){var e=r;if(gp(r)&&(e=r.body),bp(e))return dp(e);if(vp(e))return ru(e.getReader());if(wp(e))return ru(e.stream().getReader());if(Ep(e))return mp(e.arrayBuffer());if(_p(e))return yp(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var us=Symbol();function kp(r){return r.extensions?Array.isArray(r.extensions[us]):!1}function nu(r){return r.hasOwnProperty("graphQLErrors")}var xp=function(r){var e=Le(Le(Le([],r.graphQLErrors,!0),r.clientErrors,!0),r.protocolErrors,!0);return r.networkError&&e.push(r.networkError),e.map(function(t){return le(t)&&t.message||"Error message not found."}).join(`
`)},Ft=function(r){Ge(e,r);function e(t){var n=t.graphQLErrors,i=t.protocolErrors,s=t.clientErrors,o=t.networkError,a=t.errorMessage,u=t.extraInfo,f=r.call(this,a)||this;return f.name="ApolloError",f.graphQLErrors=n||[],f.protocolErrors=i||[],f.clientErrors=s||[],f.networkError=o||null,f.message=a||xp(f),f.extraInfo=u,f.cause=Le(Le(Le([o],n||[],!0),i||[],!0),s||[],!0).find(function(c){return!!c})||null,f.__proto__=e.prototype,f}return e}(Error),iu=Object.prototype.hasOwnProperty;function Tp(r,e){return xt(this,void 0,void 0,function(){var t,n,i,s,o,a,u,f,c,d,p,y,v,w,E,b,k,S,A,O,N,D,M,P;return Tt(this,function(W){switch(W.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),n=(P=r.headers)===null||P===void 0?void 0:P.get("content-type"),i="boundary=",s=n!=null&&n.includes(i)?n==null?void 0:n.substring((n==null?void 0:n.indexOf(i))+i.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(s),a="",u=Sp(r),f=!0,W.label=1;case 1:return f?[4,u.next()]:[3,3];case 2:for(c=W.sent(),d=c.value,p=c.done,y=typeof d=="string"?d:t.decode(d),v=a.length-o.length+1,f=!p,a+=y,w=a.indexOf(o,v);w>-1;){if(E=void 0,D=[a.slice(0,w),a.slice(w+o.length)],E=D[0],a=D[1],b=E.indexOf(`\r
\r
`),k=Ip(E.slice(0,b)),S=k["content-type"],S&&S.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(A=E.slice(b),A){if(O=su(r,A),Object.keys(O).length>1||"data"in O||"incremental"in O||"errors"in O||"payload"in O)if(up(O)){if(N={},"payload"in O){if(Object.keys(O).length===1&&O.payload===null)return[2];N=x({},O.payload)}"errors"in O&&(N=x(x({},N),{extensions:x(x({},"extensions"in N?N.extensions:null),(M={},M[us]=O.errors,M))})),e(N)}else e(O);else if(Object.keys(O).length===1&&"hasNext"in O&&!O.hasNext)return[2]}w=a.indexOf(o)}return[3,1];case 3:return[2]}})})}function Ip(r){var e={};return r.split(`
`).forEach(function(t){var n=t.indexOf(":");if(n>-1){var i=t.slice(0,n).trim().toLowerCase(),s=t.slice(n+1).trim();e[i]=s}}),e}function su(r,e){if(r.status>=300){var t=function(){try{return JSON.parse(e)}catch(i){return e}};Za(r,t(),"Response not successful: Received status code ".concat(r.status))}try{return JSON.parse(e)}catch(i){var n=i;throw n.name="ServerParseError",n.response=r,n.statusCode=r.status,n.bodyText=e,n}}function Ap(r,e){r.result&&r.result.errors&&r.result.data&&e.next(r.result),e.error(r)}function Op(r){return function(e){return e.text().then(function(t){return su(e,t)}).then(function(t){return!Array.isArray(t)&&!iu.call(t,"data")&&!iu.call(t,"errors")&&Za(e,t,"Server response was missing for query '".concat(Array.isArray(r)?r.map(function(n){return n.operationName}):r.operationName,"'.")),t})}}var cs=function(r,e){var t;try{t=JSON.stringify(r)}catch(i){var n=Be(40,e,i.message);throw n.parseError=i,n}return t},Cp={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},Rp={accept:"*/*","content-type":"application/json"},Np={method:"POST"},Dp={http:Cp,headers:Rp,options:Np},Fp=function(r,e){return e(r)};function Mp(r,e){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i={},s={};t.forEach(function(d){i=x(x(x({},i),d.options),{headers:x(x({},i.headers),d.headers)}),d.credentials&&(i.credentials=d.credentials),s=x(x({},s),d.http)}),i.headers&&(i.headers=Bp(i.headers,s.preserveHeaderCase));var o=r.operationName,a=r.extensions,u=r.variables,f=r.query,c={operationName:o,variables:u};return s.includeExtensions&&(c.extensions=a),s.includeQuery&&(c.query=e(f,Jr)),{options:i,body:c}}function Bp(r,e){if(!e){var t={};return Object.keys(Object(r)).forEach(function(s){t[s.toLowerCase()]=r[s]}),t}var n={};Object.keys(Object(r)).forEach(function(s){n[s.toLowerCase()]={originalName:s,value:r[s]}});var i={};return Object.keys(n).forEach(function(s){i[n[s].originalName]=n[s].value}),i}var $p=function(r){if(!r&&typeof fetch=="undefined")throw Be(38)},Pp=function(r,e){var t=r.getContext(),n=t.uri;return n||(typeof e=="function"?e(r):e||"/graphql")};function Lp(r,e){var t=[],n=function(d,p){t.push("".concat(d,"=").concat(encodeURIComponent(p)))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=cs(e.variables,"Variables map")}catch(d){return{parseError:d}}n("variables",i)}if(e.extensions){var s=void 0;try{s=cs(e.extensions,"Extensions map")}catch(d){return{parseError:d}}n("extensions",s)}var o="",a=r,u=r.indexOf("#");u!==-1&&(o=r.substr(u),a=r.substr(0,u));var f=a.indexOf("?")===-1?"?":"&",c=a+f+t.join("&")+o;return{newURI:c}}var ou=Ze(function(){return fetch}),au=function(r){r===void 0&&(r={});var e=r.uri,t=e===void 0?"/graphql":e,n=r.fetch,i=r.print,s=i===void 0?Fp:i,o=r.includeExtensions,a=r.preserveHeaderCase,u=r.useGETForQueries,f=r.includeUnusedVariables,c=f===void 0?!1:f,d=ot(r,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&$p(n||ou);var p={http:{includeExtensions:o,preserveHeaderCase:a},options:d.fetchOptions,credentials:d.credentials,headers:d.headers};return new Je(function(y){var v=Pp(y,t),w=y.getContext(),E={};if(w.clientAwareness){var b=w.clientAwareness,k=b.name,S=b.version;k&&(E["apollographql-client-name"]=k),S&&(E["apollographql-client-version"]=S)}var A=x(x({},E),w.headers),O={http:w.http,options:w.fetchOptions,credentials:w.credentials,headers:A};if(Qr(["client"],y.query)){var N=Ua(y.query);if(!N)return os(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));y.query=N}var D=Mp(y,s,Dp,p,O),M=D.options,P=D.body;P.variables&&!c&&(P.variables=hp(P.variables,y.query));var W;!M.signal&&typeof AbortController!="undefined"&&(W=new AbortController,M.signal=W.signal);var X=function(j){return j.kind==="OperationDefinition"&&j.operation==="mutation"},Me=function(j){return j.kind==="OperationDefinition"&&j.operation==="subscription"},se=Me(ur(y.query)),Ce=Qr(["defer"],y.query);if(u&&!y.query.definitions.some(X)&&(M.method="GET"),Ce||se){M.headers=M.headers||{};var Yt="multipart/mixed;";se&&Ce&&globalThis.__DEV__!==!1&&q.warn(39),se?Yt+="boundary=graphql;subscriptionSpec=1.0,application/json":Ce&&(Yt+="deferSpec=20220824,application/json"),M.headers.accept=Yt}if(M.method==="GET"){var V=Lp(v,P),te=V.newURI,Q=V.parseError;if(Q)return os(Q);v=te}else try{M.body=cs(P,"Payload")}catch(j){return os(j)}return new ee(function(j){var re=n||Ze(function(){return fetch})||ou,ke=j.next.bind(j);return re(v,M).then(function(z){var je;y.setContext({response:z});var oe=(je=z.headers)===null||je===void 0?void 0:je.get("content-type");return oe!==null&&/^multipart\/mixed/i.test(oe)?Tp(z,ke):Op(y)(z).then(ke)}).then(function(){W=void 0,j.complete()}).catch(function(z){W=void 0,Ap(z,j)}),function(){W&&W.abort()}})})},Up=function(r){Ge(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,au(t).request)||this;return n.options=t,n}return e}(Je);const{toString:uu,hasOwnProperty:qp}=Object.prototype,cu=Function.prototype.toString,ls=new Map;function ce(r,e){try{return fs(r,e)}finally{ls.clear()}}function fs(r,e){if(r===e)return!0;const t=uu.call(r),n=uu.call(e);if(t!==n)return!1;switch(t){case"[object Array]":if(r.length!==e.length)return!1;case"[object Object]":{if(fu(r,e))return!0;const i=lu(r),s=lu(e),o=i.length;if(o!==s.length)return!1;for(let a=0;a<o;++a)if(!qp.call(e,i[a]))return!1;for(let a=0;a<o;++a){const u=i[a];if(!fs(r[u],e[u]))return!1}return!0}case"[object Error]":return r.name===e.name&&r.message===e.message;case"[object Number]":if(r!==r)return e!==e;case"[object Boolean]":case"[object Date]":return+r==+e;case"[object RegExp]":case"[object String]":return r==`${e}`;case"[object Map]":case"[object Set]":{if(r.size!==e.size)return!1;if(fu(r,e))return!0;const i=r.entries(),s=t==="[object Map]";for(;;){const o=i.next();if(o.done)break;const[a,u]=o.value;if(!e.has(a)||s&&!fs(u,e.get(a)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":r=new Uint8Array(r),e=new Uint8Array(e);case"[object DataView]":{let i=r.byteLength;if(i===e.byteLength)for(;i--&&r[i]===e[i];);return i===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const i=cu.call(r);return i!==cu.call(e)?!1:!Vp(i,Qp)}}return!1}function lu(r){return Object.keys(r).filter(jp,r)}function jp(r){return this[r]!==void 0}const Qp="{ [native code] }";function Vp(r,e){const t=r.length-e.length;return t>=0&&r.indexOf(e,t)===t}function fu(r,e){let t=ls.get(r);if(t){if(t.has(e))return!0}else ls.set(r,t=new Set);return t.add(e),!1}function hu(r,e,t,n){var i=e.data,s=ot(e,["data"]),o=t.data,a=ot(t,["data"]);return ce(s,a)&&Jn(ur(r).selectionSet,i,o,{fragmentMap:Pn(jn(r)),variables:n})}function Jn(r,e,t,n){if(e===t)return!0;var i=new Set;return r.selections.every(function(s){if(i.has(s)||(i.add(s),!jr(s,n.variables))||pu(s))return!0;if(Rt(s)){var o=Ct(s),a=e&&e[o],u=t&&t[o],f=s.selectionSet;if(!f)return ce(a,u);var c=Array.isArray(a),d=Array.isArray(u);if(c!==d)return!1;if(c&&d){var p=a.length;if(u.length!==p)return!1;for(var y=0;y<p;++y)if(!Jn(f,a[y],u[y],n))return!1;return!0}return Jn(f,a,u,n)}else{var v=Ln(s,n.fragmentMap);if(v)return pu(v)?!0:Jn(v.selectionSet,e,t,n)}})}function pu(r){return!!r.directives&&r.directives.some(Hp)}function Hp(r){return r.name.value==="nonreactive"}var du=function(){function r(){this.assumeImmutableResults=!1,this.getFragmentDoc=Kr(Yf,{max:mt["cache.fragmentQueryDocuments"]||1e3,cache:Un})}return r.prototype.batch=function(e){var t=this,n=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,i;return this.performTransaction(function(){return i=e.update(t)},n),i},r.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},r.prototype.transformDocument=function(e){return e},r.prototype.transformForLink=function(e){return e},r.prototype.identify=function(e){},r.prototype.gc=function(){return[]},r.prototype.modify=function(e){return!1},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(x(x({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},r.prototype.watchFragment=function(e){var t=this,n=e.fragment,i=e.fragmentName,s=e.from,o=e.optimistic,a=o===void 0?!0:o,u=ot(e,["fragment","fragmentName","from","optimistic"]),f=this.getFragmentDoc(n,i),c=x(x({},u),{returnPartialData:!0,id:typeof s=="undefined"||typeof s=="string"?s:this.identify(s),query:f,optimistic:a}),d;return new ee(function(p){return t.watch(x(x({},c),{immediate:!0,callback:function(y){if(!(d&&hu(f,{data:d==null?void 0:d.result},{data:y.result}))){var v={data:y.result,complete:!!y.complete};y.missing&&(v.missing=Hn(y.missing.map(function(w){return w.missing}))),d=y,p.next(v)}}}))})},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(x(x({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},r.prototype.writeQuery=function(e){var t=e.id,n=e.data,i=ot(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:n}))},r.prototype.writeFragment=function(e){var t=e.id,n=e.data,i=e.fragment,s=e.fragmentName,o=ot(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,s),dataId:t,result:n}))},r.prototype.updateQuery=function(e,t){return this.batch({update:function(n){var i=n.readQuery(e),s=t(i);return s==null?i:(n.writeQuery(x(x({},e),{data:s})),s)}})},r.prototype.updateFragment=function(e,t){return this.batch({update:function(n){var i=n.readFragment(e),s=t(i);return s==null?i:(n.writeFragment(x(x({},e),{data:s})),s)}})},r}();globalThis.__DEV__!==!1&&(du.prototype.getMemoryInternals=uh);var yu=function(r){Ge(e,r);function e(t,n,i,s){var o,a=r.call(this,t)||this;if(a.message=t,a.path=n,a.query=i,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var u=a.path.length-1;u>=0;--u)a.missing=(o={},o[a.path[u]]=a.missing,o)}else a.missing=a.path;return a.__proto__=e.prototype,a}return e}(Error),Ae=Object.prototype.hasOwnProperty;function en(r){return r==null}function mu(r,e){var t=r.__typename,n=r.id,i=r._id;if(typeof t=="string"&&(e&&(e.keyObject=en(n)?en(i)?void 0:{_id:i}:{id:n}),en(n)&&!en(i)&&(n=i),!en(n)))return"".concat(t,":").concat(typeof n=="number"||typeof n=="string"?n:JSON.stringify(n))}var gu={dataIdFromObject:mu,addTypename:!0,resultCaching:!0,canonizeResults:!1};function Wp(r){return dr(gu,r)}function vu(r){var e=r.canonizeResults;return e===void 0?gu.canonizeResults:e}function zp(r,e){return Z(e)?r.get(e.__ref,"__typename"):e&&e.__typename}var bu=/^[_a-z][_0-9a-z]*/i;function Mt(r){var e=r.match(bu);return e?e[0]:r}function hs(r,e,t){return le(e)?de(e)?e.every(function(n){return hs(r,n,t)}):r.selections.every(function(n){if(Rt(n)&&jr(n,t)){var i=Ct(n);return Ae.call(e,i)&&(!n.selectionSet||hs(n.selectionSet,e[i],t))}return!0}):!1}function yr(r){return le(r)&&!Z(r)&&!de(r)}function Kp(){return new Dt}function wu(r,e){var t=Pn(jn(r));return{fragmentMap:t,lookupFragment:function(n){var i=t[n];return!i&&e&&(i=e.lookup(n)),i||null}}}var Yn=Object.create(null),ps=function(){return Yn},Eu=Object.create(null),tn=function(){function r(e,t){var n=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,s){return rs(Z(i)?n.get(i.__ref,s):i&&i[s])},this.canRead=function(i){return Z(i)?n.has(i.__ref):typeof i=="object"},this.toReference=function(i,s){if(typeof i=="string")return or(i);if(Z(i))return i;var o=n.policies.identify(i)[0];if(o){var a=or(o);return s&&n.merge(o,i),a}}}return r.prototype.toObject=function(){return x({},this.data)},r.prototype.has=function(e){return this.lookup(e,!0)!==void 0},r.prototype.get=function(e,t){if(this.group.depend(e,t),Ae.call(this.data,e)){var n=this.data[e];if(n&&Ae.call(n,t))return n[t]}if(t==="__typename"&&Ae.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof Bt)return this.parent.get(e,t)},r.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),Ae.call(this.data,e))return this.data[e];if(this instanceof Bt)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},r.prototype.merge=function(e,t){var n=this,i;Z(e)&&(e=e.__ref),Z(t)&&(t=t.__ref);var s=typeof e=="string"?this.lookup(i=e):e,o=typeof t=="string"?this.lookup(i=t):t;if(o){q(typeof i=="string",1);var a=new Dt(Jp).merge(s,o);if(this.data[i]=a,a!==s&&(delete this.refs[i],this.group.caching)){var u=Object.create(null);s||(u.__exists=1),Object.keys(o).forEach(function(f){if(!s||s[f]!==a[f]){u[f]=1;var c=Mt(f);c!==f&&!n.policies.hasKeyArgs(a.__typename,c)&&(u[c]=1),a[f]===void 0&&!(n instanceof Bt)&&delete a[f]}}),u.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[i]===a.__typename&&delete u.__typename,Object.keys(u).forEach(function(f){return n.group.dirty(i,f)})}}},r.prototype.modify=function(e,t){var n=this,i=this.lookup(e);if(i){var s=Object.create(null),o=!1,a=!0,u={DELETE:Yn,INVALIDATE:Eu,isReference:Z,toReference:this.toReference,canRead:this.canRead,readField:function(f,c){return n.policies.readField(typeof f=="string"?{fieldName:f,from:c||or(e)}:f,{store:n})}};if(Object.keys(i).forEach(function(f){var c=Mt(f),d=i[f];if(d!==void 0){var p=typeof t=="function"?t:t[f]||t[c];if(p){var y=p===ps?Yn:p(rs(d),x(x({},u),{fieldName:c,storeFieldName:f,storage:n.getStorage(e,f)}));if(y===Eu)n.group.dirty(e,f);else if(y===Yn&&(y=void 0),y!==d&&(s[f]=y,o=!0,d=y,globalThis.__DEV__!==!1)){var v=function(O){if(n.lookup(O.__ref)===void 0)return globalThis.__DEV__!==!1&&q.warn(2,O),!0};if(Z(y))v(y);else if(Array.isArray(y))for(var w=!1,E=void 0,b=0,k=y;b<k.length;b++){var S=k[b];if(Z(S)){if(w=!0,v(S))break}else if(typeof S=="object"&&S){var A=n.policies.identify(S)[0];A&&(E=S)}if(w&&E!==void 0){globalThis.__DEV__!==!1&&q.warn(3,E);break}}}}d!==void 0&&(a=!1)}}),o)return this.merge(e,s),a&&(this instanceof Bt?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},r.prototype.delete=function(e,t,n){var i,s=this.lookup(e);if(s){var o=this.getFieldValue(s,"__typename"),a=t&&n?this.policies.getStoreFieldName({typename:o,fieldName:t,args:n}):t;return this.modify(e,a?(i={},i[a]=ps,i):ps)}return!1},r.prototype.evict=function(e,t){var n=!1;return e.id&&(Ae.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof Bt&&this!==t&&(n=this.parent.evict(e,t)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},r.prototype.clear=function(){this.replace(null)},r.prototype.extract=function(){var e=this,t=this.toObject(),n=[];return this.getRootIdSet().forEach(function(i){Ae.call(e.policies.rootTypenamesById,i)||n.push(i)}),n.length&&(t.__META={extraRootIds:n.sort()}),t},r.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(s){e&&Ae.call(e,s)||t.delete(s)}),e){var n=e.__META,i=ot(e,["__META"]);Object.keys(i).forEach(function(s){t.merge(s,i[s])}),n&&n.extraRootIds.forEach(this.retain,this)}},r.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},r.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},r.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof Bt?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},r.prototype.gc=function(){var e=this,t=this.getRootIdSet(),n=this.toObject();t.forEach(function(o){Ae.call(n,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete n[o])});var i=Object.keys(n);if(i.length){for(var s=this;s instanceof Bt;)s=s.parent;i.forEach(function(o){return s.delete(o)})}return i},r.prototype.findChildRefIds=function(e){if(!Ae.call(this.refs,e)){var t=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return t;var i=new Set([n]);i.forEach(function(s){Z(s)&&(t[s.__ref]=!0),le(s)&&Object.keys(s).forEach(function(o){var a=s[o];le(a)&&i.add(a)})})}return this.refs[e]},r.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},r}(),_u=function(){function r(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return r.prototype.resetCaching=function(){this.d=this.caching?Da():null,this.keyMaker=new nr(ir)},r.prototype.depend=function(e,t){if(this.d){this.d(ds(e,t));var n=Mt(t);n!==t&&this.d(ds(e,n)),this.parent&&this.parent.depend(e,t)}},r.prototype.dirty=function(e,t){this.d&&this.d.dirty(ds(e,t),t==="__exists"?"forget":"setDirty")},r}();function ds(r,e){return e+"#"+r}function Su(r,e){rn(r)&&r.group.depend(e,"__exists")}(function(r){var e=function(t){Ge(n,t);function n(i){var s=i.policies,o=i.resultCaching,a=o===void 0?!0:o,u=i.seed,f=t.call(this,s,new _u(a))||this;return f.stump=new Gp(f),f.storageTrie=new nr(ir),u&&f.replace(u),f}return n.prototype.addLayer=function(i,s){return this.stump.addLayer(i,s)},n.prototype.removeLayer=function(){return this},n.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},n}(r);r.Root=e})(tn||(tn={}));var Bt=function(r){Ge(e,r);function e(t,n,i,s){var o=r.call(this,n.policies,s)||this;return o.id=t,o.parent=n,o.replay=i,o.group=s,i(o),o}return e.prototype.addLayer=function(t,n){return new e(t,this,n,this.group)},e.prototype.removeLayer=function(t){var n=this,i=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var o=n.data[s],a=i.lookup(s);a?o?o!==a&&Object.keys(o).forEach(function(u){ce(o[u],a[u])||n.group.dirty(s,u)}):(n.group.dirty(s,"__exists"),Object.keys(a).forEach(function(u){n.group.dirty(s,u)})):n.delete(s)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return x(x({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var n=this.parent.findChildRefIds(t);return Ae.call(this.data,t)?x(x({},n),r.prototype.findChildRefIds.call(this,t)):n},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(tn),Gp=function(r){Ge(e,r);function e(t){return r.call(this,"EntityStore.Stump",t,function(){},new _u(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,n){return this.parent.merge(t,n)},e}(Bt);function Jp(r,e,t){var n=r[t],i=e[t];return ce(n,i)?n:i}function rn(r){return!!(r instanceof tn&&r.group.caching)}function Yp(r){return le(r)?de(r)?r.slice(0):x({__proto__:Object.getPrototypeOf(r)},r):r}var ku=function(){function r(){this.known=new(aa?WeakSet:Set),this.pool=new nr(ir),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return r.prototype.isKnown=function(e){return le(e)&&this.known.has(e)},r.prototype.pass=function(e){if(le(e)){var t=Yp(e);return this.passes.set(t,e),t}return e},r.prototype.admit=function(e){var t=this;if(le(e)){var n=this.passes.get(e);if(n)return n;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:{if(this.known.has(e))return e;var s=e.map(this.admit,this),o=this.pool.lookupArray(s);return o.array||(this.known.add(o.array=s),globalThis.__DEV__!==!1&&Object.freeze(s)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),u=[a],f=this.sortedKeys(e);u.push(f.json);var c=u.length;f.sorted.forEach(function(y){u.push(t.admit(e[y]))});var o=this.pool.lookupArray(u);if(!o.object){var d=o.object=Object.create(a);this.known.add(d),f.sorted.forEach(function(y,v){d[y]=u[c+v]}),globalThis.__DEV__!==!1&&Object.freeze(d)}return o.object}}}return e},r.prototype.sortedKeys=function(e){var t=Object.keys(e),n=this.pool.lookupArray(t);if(!n.keys){t.sort();var i=JSON.stringify(t);(n.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,n.keys={sorted:t,json:i})}return n.keys},r}();function xu(r){return[r.selectionSet,r.objectOrReference,r.context,r.context.canonizeResults]}var Xp=function(){function r(e){var t=this;this.knownResults=new(ir?WeakMap:Map),this.config=dr(e,{addTypename:e.addTypename!==!1,canonizeResults:vu(e)}),this.canon=e.canon||new ku,this.executeSelectionSet=Kr(function(n){var i,s=n.context.canonizeResults,o=xu(n);o[3]=!s;var a=(i=t.executeSelectionSet).peek.apply(i,o);return a?s?x(x({},a),{result:t.canon.admit(a.result)}):a:(Su(n.context.store,n.enclosingRef.__ref),t.execSelectionSetImpl(n))},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:xu,makeCacheKey:function(n,i,s,o){if(rn(s.store))return s.store.makeCacheKey(n,Z(i)?i.__ref:i,s.varString,o)}}),this.executeSubSelectedArray=Kr(function(n){return Su(n.context.store,n.enclosingRef.__ref),t.execSubSelectedArrayImpl(n)},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(n){var i=n.field,s=n.array,o=n.context;if(rn(o.store))return o.store.makeCacheKey(i,s,o.varString)}})}return r.prototype.resetCanon=function(){this.canon=new ku},r.prototype.diffQueryAgainstStore=function(e){var t=e.store,n=e.query,i=e.rootId,s=i===void 0?"ROOT_QUERY":i,o=e.variables,a=e.returnPartialData,u=a===void 0?!0:a,f=e.canonizeResults,c=f===void 0?this.config.canonizeResults:f,d=this.config.cache.policies;o=x(x({},Ui(ma(n))),o);var p=or(s),y=this.executeSelectionSet({selectionSet:ur(n).selectionSet,objectOrReference:p,enclosingRef:p,context:x({store:t,query:n,policies:d,variables:o,varString:Ot(o),canonizeResults:c},wu(n,this.config.fragments))}),v;if(y.missing&&(v=[new yu(Zp(y.missing),y.missing,n,o)],!u))throw v[0];return{result:y.result,complete:!v,missing:v}},r.prototype.isFresh=function(e,t,n,i){if(rn(i.store)&&this.knownResults.get(e)===n){var s=this.executeSelectionSet.peek(n,t,i,this.canon.isKnown(e));if(s&&e===s.result)return!0}return!1},r.prototype.execSelectionSetImpl=function(e){var t=this,n=e.selectionSet,i=e.objectOrReference,s=e.enclosingRef,o=e.context;if(Z(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var a=o.variables,u=o.policies,f=o.store,c=f.getFieldValue(i,"__typename"),d=[],p,y=new Dt;this.config.addTypename&&typeof c=="string"&&!u.rootIdsByTypename[c]&&d.push({__typename:c});function v(S,A){var O;return S.missing&&(p=y.merge(p,(O={},O[A]=S.missing,O))),S.result}var w=new Set(n.selections);w.forEach(function(S){var A,O;if(jr(S,a))if(Rt(S)){var N=u.readField({fieldName:S.name.value,field:S,variables:o.variables,from:i},o),D=Ct(S);N===void 0?zi.added(S)||(p=y.merge(p,(A={},A[D]="Can't find field '".concat(S.name.value,"' on ").concat(Z(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),A))):de(N)?N.length>0&&(N=v(t.executeSubSelectedArray({field:S,array:N,enclosingRef:s,context:o}),D)):S.selectionSet?N!=null&&(N=v(t.executeSelectionSet({selectionSet:S.selectionSet,objectOrReference:N,enclosingRef:Z(N)?N:s,context:o}),D)):o.canonizeResults&&(N=t.canon.pass(N)),N!==void 0&&d.push((O={},O[D]=N,O))}else{var M=Ln(S,o.lookupFragment);if(!M&&S.kind===B.FRAGMENT_SPREAD)throw Be(9,S.name.value);M&&u.fragmentMatches(M,c)&&M.selectionSet.selections.forEach(w.add,w)}});var E=Hn(d),b={result:E,missing:p},k=o.canonizeResults?this.canon.admit(b):rs(b);return k.result&&this.knownResults.set(k.result,n),k},r.prototype.execSubSelectedArrayImpl=function(e){var t=this,n=e.field,i=e.array,s=e.enclosingRef,o=e.context,a,u=new Dt;function f(c,d){var p;return c.missing&&(a=u.merge(a,(p={},p[d]=c.missing,p))),c.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map(function(c,d){return c===null?null:de(c)?f(t.executeSubSelectedArray({field:n,array:c,enclosingRef:s,context:o}),d):n.selectionSet?f(t.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:c,enclosingRef:Z(c)?c:s,context:o}),d):(globalThis.__DEV__!==!1&&ed(o.store,n,c),c)}),{result:o.canonizeResults?this.canon.admit(i):i,missing:a}},r}();function Zp(r){try{JSON.stringify(r,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function ed(r,e,t){if(!e.selectionSet){var n=new Set([t]);n.forEach(function(i){le(i)&&(q(!Z(i),10,zp(r,i),e.name.value),Object.values(i).forEach(n.add,n))})}}var ys=new Ea,Tu=new WeakMap;function nn(r){var e=Tu.get(r);return e||Tu.set(r,e={vars:new Set,dep:Da()}),e}function Iu(r){nn(r).vars.forEach(function(e){return e.forgetCache(r)})}function td(r){nn(r).vars.forEach(function(e){return e.attachCache(r)})}function rd(r){var e=new Set,t=new Set,n=function(s){if(arguments.length>0){if(r!==s){r=s,e.forEach(function(u){nn(u).dep.dirty(n),nd(u)});var o=Array.from(t);t.clear(),o.forEach(function(u){return u(r)})}}else{var a=ys.getValue();a&&(i(a),nn(a).dep(n))}return r};n.onNextChange=function(s){return t.add(s),function(){t.delete(s)}};var i=n.attachCache=function(s){return e.add(s),nn(s).vars.add(n),n};return n.forgetCache=function(s){return e.delete(s)},n}function nd(r){r.broadcastWatches&&r.broadcastWatches()}var Au=Object.create(null);function ms(r){var e=JSON.stringify(r);return Au[e]||(Au[e]=Object.create(null))}function Ou(r){var e=ms(r);return e.keyFieldsFn||(e.keyFieldsFn=function(t,n){var i=function(o,a){return n.readField(a,o)},s=n.keyObject=gs(r,function(o){var a=mr(n.storeObject,o,i);return a===void 0&&t!==n.storeObject&&Ae.call(t,o[0])&&(a=mr(t,o,Nu)),q(a!==void 0,4,o.join("."),t),a});return"".concat(n.typename,":").concat(JSON.stringify(s))})}function Cu(r){var e=ms(r);return e.keyArgsFn||(e.keyArgsFn=function(t,n){var i=n.field,s=n.variables,o=n.fieldName,a=gs(r,function(f){var c=f[0],d=c.charAt(0);if(d==="@"){if(i&&at(i.directives)){var p=c.slice(1),y=i.directives.find(function(b){return b.name.value===p}),v=y&&qn(y,s);return v&&mr(v,f.slice(1))}return}if(d==="$"){var w=c.slice(1);if(s&&Ae.call(s,w)){var E=f.slice(0);return E[0]=w,mr(s,E)}return}if(t)return mr(t,f)}),u=JSON.stringify(a);return(t||u!=="{}")&&(o+=":"+u),o})}function gs(r,e){var t=new Dt;return Ru(r).reduce(function(n,i){var s,o=e(i);if(o!==void 0){for(var a=i.length-1;a>=0;--a)o=(s={},s[i[a]]=o,s);n=t.merge(n,o)}return n},Object.create(null))}function Ru(r){var e=ms(r);if(!e.paths){var t=e.paths=[],n=[];r.forEach(function(i,s){de(i)?(Ru(i).forEach(function(o){return t.push(n.concat(o))}),n.length=0):(n.push(i),de(r[s+1])||(t.push(n.slice(0)),n.length=0))})}return e.paths}function Nu(r,e){return r[e]}function mr(r,e,t){return t=t||Nu,Du(e.reduce(function n(i,s){return de(i)?i.map(function(o){return n(o,s)}):i&&t(i,s)},r))}function Du(r){return le(r)?de(r)?r.map(Du):gs(Object.keys(r).sort(),function(e){return mr(r,e)}):r}function vs(r){return r.args!==void 0?r.args:r.field?qn(r.field,r.variables):null}var id=function(){},Fu=function(r,e){return e.fieldName},Mu=function(r,e,t){var n=t.mergeObjects;return n(r,e)},Bu=function(r,e){return e},sd=function(){function r(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=x({dataIdFromObject:mu},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return r.prototype.identify=function(e,t){var n,i=this,s=t&&(t.typename||((n=t.storeObject)===null||n===void 0?void 0:n.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o=t&&t.storeObject||e,a=x(x({},t),{typename:s,storeObject:o,readField:t&&t.readField||function(){var p=bs(arguments,o);return i.readField(p,{store:i.cache.data,variables:p.variables})}}),u,f=s&&this.getTypePolicy(s),c=f&&f.keyFn||this.config.dataIdFromObject;c;){var d=c(x(x({},e),o),a);if(de(d))c=Ou(d);else{u=d;break}}return u=u?String(u):void 0,a.keyObject?[u,a.keyObject]:[u]},r.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(n){var i=e[n],s=i.queryType,o=i.mutationType,a=i.subscriptionType,u=ot(i,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",n),o&&t.setRootTypename("Mutation",n),a&&t.setRootTypename("Subscription",n),Ae.call(t.toBeAdded,n)?t.toBeAdded[n].push(u):t.toBeAdded[n]=[u]})},r.prototype.updateTypePolicy=function(e,t){var n=this,i=this.getTypePolicy(e),s=t.keyFields,o=t.fields;function a(u,f){u.merge=typeof f=="function"?f:f===!0?Mu:f===!1?Bu:u.merge}a(i,t.merge),i.keyFn=s===!1?id:de(s)?Ou(s):typeof s=="function"?s:i.keyFn,o&&Object.keys(o).forEach(function(u){var f=n.getFieldPolicy(e,u,!0),c=o[u];if(typeof c=="function")f.read=c;else{var d=c.keyArgs,p=c.read,y=c.merge;f.keyFn=d===!1?Fu:de(d)?Cu(d):typeof d=="function"?d:f.keyFn,typeof p=="function"&&(f.read=p),a(f,y)}f.read&&f.merge&&(f.keyFn=f.keyFn||Fu)})},r.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var n="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[n];t!==i&&(q(!i||i===e,5,e),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=n,this.rootTypenamesById[n]=t)},r.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(n){t.getSupertypeSet(n,!0),e[n].forEach(function(i){t.getSupertypeSet(i,!0).add(n);var s=i.match(bu);(!s||s[0]!==i)&&t.fuzzySubtypes.set(i,new RegExp(i))})})},r.prototype.getTypePolicy=function(e){var t=this;if(!Ae.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var i=this.supertypeMap.get(e);!i&&this.fuzzySubtypes.size&&(i=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,a){if(o.test(e)){var u=t.supertypeMap.get(a);u&&u.forEach(function(f){return i.add(f)})}})),i&&i.size&&i.forEach(function(o){var a=t.getTypePolicy(o),u=a.fields,f=ot(a,["fields"]);Object.assign(n,f),Object.assign(n.fields,u)})}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},r.prototype.getFieldPolicy=function(e,t,n){if(e){var i=this.getTypePolicy(e).fields;return i[t]||n&&(i[t]=Object.create(null))}},r.prototype.getSupertypeSet=function(e,t){var n=this.supertypeMap.get(e);return!n&&t&&this.supertypeMap.set(e,n=new Set),n},r.prototype.fragmentMatches=function(e,t,n,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),u=[a],f=function(v){var w=s.getSupertypeSet(v,!1);w&&w.size&&u.indexOf(w)<0&&u.push(w)},c=!!(n&&this.fuzzySubtypes.size),d=!1,p=0;p<u.length;++p){var y=u[p];if(y.has(o))return a.has(o)||(d&&globalThis.__DEV__!==!1&&q.warn(6,t,o),a.add(o)),!0;y.forEach(f),c&&p===u.length-1&&hs(e.selectionSet,n,i)&&(c=!1,d=!0,this.fuzzySubtypes.forEach(function(v,w){var E=t.match(v);E&&E[0]===t&&f(w)}))}return!1},r.prototype.hasKeyArgs=function(e,t){var n=this.getFieldPolicy(e,t,!1);return!!(n&&n.keyFn)},r.prototype.getStoreFieldName=function(e){var t=e.typename,n=e.fieldName,i=this.getFieldPolicy(t,n,!1),s,o=i&&i.keyFn;if(o&&t)for(var a={typename:t,fieldName:n,field:e.field||null,variables:e.variables},u=vs(e);o;){var f=o(u,a);if(de(f))o=Cu(f);else{s=f||n;break}}return s===void 0&&(s=e.field?xh(e.field,e.variables):ya(n,vs(e))),s===!1?n:n===Mt(s)?s:n+":"+s},r.prototype.readField=function(e,t){var n=e.from;if(n){var i=e.field||e.fieldName;if(i){if(e.typename===void 0){var s=t.store.getFieldValue(n,"__typename");s&&(e.typename=s)}var o=this.getStoreFieldName(e),a=Mt(o),u=t.store.getFieldValue(n,o),f=this.getFieldPolicy(e.typename,a,!1),c=f&&f.read;if(c){var d=$u(this,n,e,t,t.store.getStorage(Z(n)?n.__ref:n,o));return ys.withValue(this.cache,c,[u,d])}return u}}},r.prototype.getReadFunction=function(e,t){var n=this.getFieldPolicy(e,t,!1);return n&&n.read},r.prototype.getMergeFunction=function(e,t,n){var i=this.getFieldPolicy(e,t,!1),s=i&&i.merge;return!s&&n&&(i=this.getTypePolicy(n),s=i&&i.merge),s},r.prototype.runMergeFunction=function(e,t,n,i,s){var o=n.field,a=n.typename,u=n.merge;return u===Mu?Pu(i.store)(e,t):u===Bu?t:(i.overwrite&&(e=void 0),u(e,t,$u(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:i.variables},i,s||Object.create(null))))},r}();function $u(r,e,t,n,i){var s=r.getStoreFieldName(t),o=Mt(s),a=t.variables||n.variables,u=n.store,f=u.toReference,c=u.canRead;return{args:vs(t),field:t.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:Z,toReference:f,storage:i,cache:r.cache,canRead:c,readField:function(){return r.readField(bs(arguments,e,a),n)},mergeObjects:Pu(n.store)}}function bs(r,e,t){var n=r[0],i=r[1],s=r.length,o;return typeof n=="string"?o={fieldName:n,from:s>1?i:e}:(o=x({},n),Ae.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&q.warn(7,Uo(Array.from(r))),o.variables===void 0&&(o.variables=t),o}function Pu(r){return function(t,n){if(de(t)||de(n))throw Be(8);if(le(t)&&le(n)){var i=r.getFieldValue(t,"__typename"),s=r.getFieldValue(n,"__typename"),o=i&&s&&i!==s;if(o)return n;if(Z(t)&&yr(n))return r.merge(t.__ref,n),t;if(yr(t)&&Z(n))return r.merge(t,n.__ref),n;if(yr(t)&&yr(n))return x(x({},t),n)}return n}}function ws(r,e,t){var n="".concat(e).concat(t),i=r.flavors.get(n);return i||r.flavors.set(n,i=r.clientOnly===e&&r.deferred===t?r:x(x({},r),{clientOnly:e,deferred:t})),i}var od=function(){function r(e,t,n){this.cache=e,this.reader=t,this.fragments=n}return r.prototype.writeToStore=function(e,t){var n=this,i=t.query,s=t.result,o=t.dataId,a=t.variables,u=t.overwrite,f=Wr(i),c=Kp();a=x(x({},Ui(f)),a);var d=x(x({store:e,written:Object.create(null),merge:function(y,v){return c.merge(y,v)},variables:a,varString:Ot(a)},wu(i,this.fragments)),{overwrite:!!u,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),p=this.processSelectionSet({result:s||Object.create(null),dataId:o,selectionSet:f.selectionSet,mergeTree:{map:new Map},context:d});if(!Z(p))throw Be(11,s);return d.incomingById.forEach(function(y,v){var w=y.storeObject,E=y.mergeTree,b=y.fieldNodeSet,k=or(v);if(E&&E.map.size){var S=n.applyMerges(E,k,w,d);if(Z(S))return;w=S}if(globalThis.__DEV__!==!1&&!d.overwrite){var A=Object.create(null);b.forEach(function(D){D.selectionSet&&(A[D.name.value]=!0)});var O=function(D){return A[Mt(D)]===!0},N=function(D){var M=E&&E.map.get(D);return!!(M&&M.info&&M.info.merge)};Object.keys(w).forEach(function(D){O(D)&&!N(D)&&ad(k,w,D,d.store)})}e.merge(v,w)}),e.retain(p.__ref),p},r.prototype.processSelectionSet=function(e){var t=this,n=e.dataId,i=e.result,s=e.selectionSet,o=e.context,a=e.mergeTree,u=this.cache.policies,f=Object.create(null),c=n&&u.rootTypenamesById[n]||Pi(i,s,o.fragmentMap)||n&&o.store.get(n,"__typename");typeof c=="string"&&(f.__typename=c);var d=function(){var S=bs(arguments,f,o.variables);if(Z(S.from)){var A=o.incomingById.get(S.from.__ref);if(A){var O=u.readField(x(x({},S),{from:A.storeObject}),o);if(O!==void 0)return O}}return u.readField(S,o)},p=new Set;this.flattenFields(s,i,o,c).forEach(function(S,A){var O,N=Ct(A),D=i[N];if(p.add(A),D!==void 0){var M=u.getStoreFieldName({typename:c,fieldName:A.name.value,field:A,variables:S.variables}),P=Uu(a,M),W=t.processFieldValue(D,A,A.selectionSet?ws(S,!1,!1):S,P),X=void 0;A.selectionSet&&(Z(W)||yr(W))&&(X=d("__typename",W));var Me=u.getMergeFunction(c,A.name.value,X);Me?P.info={field:A,typename:c,merge:Me}:qu(a,M),f=S.merge(f,(O={},O[M]=W,O))}else globalThis.__DEV__!==!1&&!S.clientOnly&&!S.deferred&&!zi.added(A)&&!u.getReadFunction(c,A.name.value)&&globalThis.__DEV__!==!1&&q.error(12,Ct(A),i)});try{var y=u.identify(i,{typename:c,selectionSet:s,fragmentMap:o.fragmentMap,storeObject:f,readField:d}),v=y[0],w=y[1];n=n||v,w&&(f=o.merge(f,w))}catch(S){if(!n)throw S}if(typeof n=="string"){var E=or(n),b=o.written[n]||(o.written[n]=[]);if(b.indexOf(s)>=0||(b.push(s),this.reader&&this.reader.isFresh(i,E,s,o)))return E;var k=o.incomingById.get(n);return k?(k.storeObject=o.merge(k.storeObject,f),k.mergeTree=Es(k.mergeTree,a),p.forEach(function(S){return k.fieldNodeSet.add(S)})):o.incomingById.set(n,{storeObject:f,mergeTree:Xn(a)?void 0:a,fieldNodeSet:p}),E}return f},r.prototype.processFieldValue=function(e,t,n,i){var s=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?Ga(e):e:de(e)?e.map(function(o,a){var u=s.processFieldValue(o,t,n,Uu(i,a));return qu(i,a),u}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:n,mergeTree:i})},r.prototype.flattenFields=function(e,t,n,i){i===void 0&&(i=Pi(t,e,n.fragmentMap));var s=new Map,o=this.cache.policies,a=new nr(!1);return function u(f,c){var d=a.lookup(f,c.clientOnly,c.deferred);d.visited||(d.visited=!0,f.selections.forEach(function(p){if(jr(p,n.variables)){var y=c.clientOnly,v=c.deferred;if(!(y&&v)&&at(p.directives)&&p.directives.forEach(function(b){var k=b.name.value;if(k==="client"&&(y=!0),k==="defer"){var S=qn(b,n.variables);(!S||S.if!==!1)&&(v=!0)}}),Rt(p)){var w=s.get(p);w&&(y=y&&w.clientOnly,v=v&&w.deferred),s.set(p,ws(n,y,v))}else{var E=Ln(p,n.lookupFragment);if(!E&&p.kind===B.FRAGMENT_SPREAD)throw Be(13,p.name.value);E&&o.fragmentMatches(E,i,t,n.variables)&&u(E.selectionSet,ws(n,y,v))}}}))}(e,n),s},r.prototype.applyMerges=function(e,t,n,i,s){var o,a=this;if(e.map.size&&!Z(n)){var u=!de(n)&&(Z(t)||yr(t))?t:void 0,f=n;u&&!s&&(s=[Z(u)?u.__ref:u]);var c,d=function(p,y){return de(p)?typeof y=="number"?p[y]:void 0:i.store.getFieldValue(p,String(y))};e.map.forEach(function(p,y){var v=d(u,y),w=d(f,y);if(w!==void 0){s&&s.push(y);var E=a.applyMerges(p,v,w,i,s);E!==w&&(c=c||new Map,c.set(y,E)),s&&q(s.pop()===y)}}),c&&(n=de(f)?f.slice(0):x({},f),c.forEach(function(p,y){n[y]=p}))}return e.info?this.cache.policies.runMergeFunction(t,n,e.info,i,s&&(o=i.store).getStorage.apply(o,s)):n},r}(),Lu=[];function Uu(r,e){var t=r.map;return t.has(e)||t.set(e,Lu.pop()||{map:new Map}),t.get(e)}function Es(r,e){if(r===e||!e||Xn(e))return r;if(!r||Xn(r))return e;var t=r.info&&e.info?x(x({},r.info),e.info):r.info||e.info,n=r.map.size&&e.map.size,i=n?new Map:r.map.size?r.map:e.map,s={info:t,map:i};if(n){var o=new Set(e.map.keys());r.map.forEach(function(a,u){s.map.set(u,Es(a,e.map.get(u))),o.delete(u)}),o.forEach(function(a){s.map.set(a,Es(e.map.get(a),r.map.get(a)))})}return s}function Xn(r){return!r||!(r.info||r.map.size)}function qu(r,e){var t=r.map,n=t.get(e);n&&Xn(n)&&(Lu.push(n),t.delete(e))}var ju=new Set;function ad(r,e,t,n){var i=function(d){var p=n.getFieldValue(d,t);return typeof p=="object"&&p},s=i(r);if(s){var o=i(e);if(o&&!Z(s)&&!ce(s,o)&&!Object.keys(s).every(function(d){return n.getFieldValue(o,d)!==void 0})){var a=n.getFieldValue(r,"__typename")||n.getFieldValue(e,"__typename"),u=Mt(t),f="".concat(a,".").concat(u);if(!ju.has(f)){ju.add(f);var c=[];!de(s)&&!de(o)&&[s,o].forEach(function(d){var p=n.getFieldValue(d,"__typename");typeof p=="string"&&!c.includes(p)&&c.push(p)}),globalThis.__DEV__!==!1&&q.warn(14,u,a,c.length?"either ensure all objects of type "+c.join(" and ")+" have an ID or a custom merge function, or ":"",f,x({},s),x({},o))}}}}var Qu=function(r){Ge(e,r);function e(t){t===void 0&&(t={});var n=r.call(this)||this;return n.watches=new Set,n.addTypenameTransform=new Ma(zi),n.assumeImmutableResults=!0,n.makeVar=rd,n.txCount=0,n.config=Wp(t),n.addTypename=!!n.config.addTypename,n.policies=new sd({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return e.prototype.init=function(){var t=this.data=new tn.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var n=this,i=this.storeReader,s=this.config.fragments;this.storeWriter=new od(this,this.storeReader=new Xp({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:vu(this.config),canon:t?void 0:i&&i.canon,fragments:s}),s),this.maybeBroadcastWatch=Kr(function(o,a){return n.broadcastWatch(o,a)},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var a=o.optimistic?n.optimisticData:n.data;if(rn(a)){var u=o.optimistic,f=o.id,c=o.variables;return a.makeCacheKey(o.query,o.callback,Ot({optimistic:u,id:f,variables:c}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var n=t.returnPartialData,i=n===void 0?!1:n;try{return this.storeReader.diffQueryAgainstStore(x(x({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(s){if(s instanceof yu)return null;throw s}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(Ae.call(t,"id")&&!t.id)return!1;var n=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,n.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(x(x({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var n=this;return this.watches.size||td(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){n.watches.delete(t)&&!n.watches.size&&Iu(n),n.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var n;Ot.reset(),Jr.reset(),this.addTypenameTransform.resetCache(),(n=this.config.fragments)===null||n===void 0||n.resetCaches();var i=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),i},e.prototype.retain=function(t,n){return(n?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,n){return(n?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(Z(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(n){globalThis.__DEV__!==!1&&q.warn(n)}},e.prototype.evict=function(t){if(!t.id){if(Ae.call(t,"id"))return!1;t=x(x({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var n=this;return this.init(),Ot.reset(),t&&t.discardWatches?(this.watches.forEach(function(i){return n.maybeBroadcastWatch.forget(i)}),this.watches.clear(),Iu(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var n=this.optimisticData.removeLayer(t);n!==this.optimisticData&&(this.optimisticData=n,this.broadcastWatches())},e.prototype.batch=function(t){var n=this,i=t.update,s=t.optimistic,o=s===void 0?!0:s,a=t.removeOptimistic,u=t.onWatchUpdated,f,c=function(p){var y=n,v=y.data,w=y.optimisticData;++n.txCount,p&&(n.data=n.optimisticData=p);try{return f=i(n)}finally{--n.txCount,n.data=v,n.optimisticData=w}},d=new Set;return u&&!this.txCount&&this.broadcastWatches(x(x({},t),{onWatchUpdated:function(p){return d.add(p),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,c):o===!1?c(this.data):c(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),u&&d.size?(this.broadcastWatches(x(x({},t),{onWatchUpdated:function(p,y){var v=u.call(this,p,y);return v!==!1&&d.delete(p),v}})),d.size&&d.forEach(function(p){return n.maybeBroadcastWatch.dirty(p)})):this.broadcastWatches(t),f},e.prototype.performTransaction=function(t,n){return this.batch({update:t,optimistic:n||n!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.broadcastWatches=function(t){var n=this;this.txCount||this.watches.forEach(function(i){return n.maybeBroadcastWatch(i,t)})},e.prototype.addFragmentsToDocument=function(t){var n=this.config.fragments;return n?n.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,n){var i=t.lastDiff,s=this.diff(t);n&&(t.optimistic&&typeof n.optimistic=="string"&&(s.fromOptimisticTransaction=!0),n.onWatchUpdated&&n.onWatchUpdated.call(this,t,s,i)===!1)||(!i||!ce(i.result,s.result))&&t.callback(t.lastDiff=s,i)},e}(du);globalThis.__DEV__!==!1&&(Qu.prototype.getMemoryInternals=ah);var ne;(function(r){r[r.loading=1]="loading",r[r.setVariables=2]="setVariables",r[r.fetchMore=3]="fetchMore",r[r.refetch=4]="refetch",r[r.poll=6]="poll",r[r.ready=7]="ready",r[r.error=8]="error"})(ne||(ne={}));function sn(r){return r?r<7:!1}var Vu=Object.assign,ud=Object.hasOwnProperty,_s=function(r){Ge(e,r);function e(t){var n=t.queryManager,i=t.queryInfo,s=t.options,o=r.call(this,function(E){try{var b=E._subscription._observer;b&&!b.error&&(b.error=cd)}catch(A){}var k=!o.observers.size;o.observers.add(E);var S=o.last;return S&&S.error?E.error&&E.error(S.error):S&&S.result&&E.next&&E.next(S.result),k&&o.reobserve().catch(function(){}),function(){o.observers.delete(E)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=i,o.queryManager=n,o.waitForOwnResult=Ss(s.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o);var a=n.defaultOptions.watchQuery,u=a===void 0?{}:a,f=u.fetchPolicy,c=f===void 0?"cache-first":f,d=s.fetchPolicy,p=d===void 0?c:d,y=s.initialFetchPolicy,v=y===void 0?p==="standby"?c:p:y;o.options=x(x({},s),{initialFetchPolicy:v,fetchPolicy:p}),o.queryId=i.queryId||n.generateQueryId();var w=Wr(o.query);return o.queryName=w&&w.name&&w.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(n,i){var s={next:function(a){n(a),t.observers.delete(s),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=t.subscribe(s)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentResult=function(t){t===void 0&&(t=!0);var n=this.getLastResult(!0),i=this.queryInfo.networkStatus||n&&n.networkStatus||ne.ready,s=x(x({},n),{loading:sn(i),networkStatus:i}),o=this.options.fetchPolicy,a=o===void 0?"cache-first":o;if(!(Ss(a)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var u=this.queryInfo.getDiff();(u.complete||this.options.returnPartialData)&&(s.data=u.result),ce(s.data,{})&&(s.data=void 0),u.complete?(delete s.partial,u.complete&&s.networkStatus===ne.loading&&(a==="cache-first"||a==="cache-only")&&(s.networkStatus=ne.ready,s.loading=!1)):s.partial=!0,globalThis.__DEV__!==!1&&!u.complete&&!this.options.partialRefetch&&!s.loading&&!s.data&&!s.error&&Wu(u.missing)}return t&&this.updateLastResult(s),s},e.prototype.isDifferentFromLastResult=function(t,n){if(!this.last)return!0;var i=this.queryManager.getDocumentInfo(this.query).hasNonreactiveDirective?!hu(this.query,this.last.result,t,this.variables):!ce(this.last.result,t);return i||n&&!ce(this.last.variables,n)},e.prototype.getLast=function(t,n){var i=this.last;if(i&&i[t]&&(!n||ce(i.variables,this.variables)))return i[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var n,i={pollInterval:0},s=this.options.fetchPolicy;if(s==="cache-and-network"?i.fetchPolicy=s:s==="no-cache"?i.fetchPolicy="no-cache":i.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&ud.call(t,"variables")){var o=ma(this.query),a=o.variableDefinitions;(!a||!a.some(function(u){return u.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&q.warn(20,t,((n=o.name)===null||n===void 0?void 0:n.value)||o)}return t&&!ce(this.options.variables,t)&&(i.variables=this.options.variables=x(x({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(i,ne.refetch)},e.prototype.fetchMore=function(t){var n=this,i=x(x({},t.query?t:x(x(x(x({},this.options),{query:this.options.query}),t),{variables:x(x({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});i.query=this.transformDocument(i.query);var s=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):i.query;var o=this.queryInfo,a=o.networkStatus;o.networkStatus=ne.fetchMore,i.notifyOnNetworkStatusChange&&this.observe();var u=new Set,f=t==null?void 0:t.updateQuery,c=this.options.fetchPolicy!=="no-cache";return c||q(f,21),this.queryManager.fetchQuery(s,i,ne.fetchMore).then(function(d){if(n.queryManager.removeQuery(s),o.networkStatus===ne.fetchMore&&(o.networkStatus=a),c)n.queryManager.cache.batch({update:function(v){var w=t.updateQuery;w?v.updateQuery({query:n.query,variables:n.variables,returnPartialData:!0,optimistic:!1},function(E){return w(E,{fetchMoreResult:d.data,variables:i.variables})}):v.writeQuery({query:i.query,variables:i.variables,data:d.data})},onWatchUpdated:function(v){u.add(v.query)}});else{var p=n.getLast("result"),y=f(p.data,{fetchMoreResult:d.data,variables:i.variables});n.reportResult(x(x({},p),{data:y}),n.variables)}return d}).finally(function(){c&&!u.has(n.query)&&Hu(n)})},e.prototype.subscribeToMore=function(t){var n=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(s){var o=t.updateQuery;o&&n.updateQuery(function(a,u){var f=u.variables;return o(a,{subscriptionData:s,variables:f})})},error:function(s){if(t.onError){t.onError(s);return}globalThis.__DEV__!==!1&&q.error(22,s)}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var n=dr(this.options,t||{});Vu(this.options,n)},e.prototype.setVariables=function(t){return ce(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},ne.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var n=this.queryManager,i=n.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,s=t(i,{variables:this.variables});s&&(n.cache.writeQuery({query:this.options.query,data:s,variables:this.variables}),n.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,n){if(n.nextFetchPolicy){var i=n.fetchPolicy,s=i===void 0?"cache-first":i,o=n.initialFetchPolicy,a=o===void 0?s:o;s==="standby"||(typeof n.nextFetchPolicy=="function"?n.fetchPolicy=n.nextFetchPolicy(s,{reason:t,options:n,observable:this,initialFetchPolicy:a}):t==="variables-changed"?n.fetchPolicy=a:n.fetchPolicy=n.nextFetchPolicy)}return n.fetchPolicy},e.prototype.fetch=function(t,n,i){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,n,i)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var n=this,i=n.pollingInfo,s=n.options.pollInterval;if(!s||!this.hasObservers()){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===s)){q(s,23);var o=i||(this.pollingInfo={});o.interval=s;var a=function(){var f,c;t.pollingInfo&&(!sn(t.queryInfo.networkStatus)&&!(!((c=(f=t.options).skipPollAttempt)===null||c===void 0)&&c.call(f))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},ne.poll).then(u,u):u())},u=function(){var f=t.pollingInfo;f&&(clearTimeout(f.timeout),f.timeout=setTimeout(a,f.interval))};u()}}},e.prototype.updateLastResult=function(t,n){n===void 0&&(n=this.variables);var i=this.getLastError();return i&&this.last&&!ce(n,this.last.variables)&&(i=void 0),this.last=x({result:this.queryManager.assumeImmutableResults?t:Ga(t),variables:n},i?{error:i}:null)},e.prototype.reobserveAsConcast=function(t,n){var i=this;this.isTornDown=!1;var s=n===ne.refetch||n===ne.fetchMore||n===ne.poll,o=this.options.variables,a=this.options.fetchPolicy,u=dr(this.options,t||{}),f=s?u:Vu(this.options,u),c=this.transformDocument(f.query);this.lastQuery=c,s||(this.updatePolling(),t&&t.variables&&!ce(t.variables,o)&&f.fetchPolicy!=="standby"&&(f.fetchPolicy===a||typeof f.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",f),n===void 0&&(n=ne.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=Ss(f.fetchPolicy));var d=function(){i.concast===v&&(i.waitForOwnResult=!1)},p=f.variables&&x({},f.variables),y=this.fetch(f,n,c),v=y.concast,w=y.fromLink,E={next:function(b){ce(i.variables,p)&&(d(),i.reportResult(b,p))},error:function(b){ce(i.variables,p)&&(nu(b)||(b=new Ft({networkError:b})),d(),i.reportError(b,p))}};return!s&&(w||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=v,this.observer=E),v.addObserver(E),v},e.prototype.reobserve=function(t,n){return this.reobserveAsConcast(t,n).promise},e.prototype.resubscribeAfterError=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.last;this.resetLastResults();var s=this.subscribe.apply(this,t);return this.last=i,s},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(t,n){var i=this.getLastError(),s=this.isDifferentFromLastResult(t,n);(i||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,n),(i||s)&&Xr(this.observers,"next",t)},e.prototype.reportError=function(t,n){var i=x(x({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:ne.error,loading:!1});this.updateLastResult(i,n),Xr(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e}(ee);Ja(_s);function Hu(r){var e=r.options,t=e.fetchPolicy,n=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?r.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(i,s){return this.nextFetchPolicy=n,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(i,s):t}}):r.reobserve()}function cd(r){globalThis.__DEV__!==!1&&q.error(24,r.message,r.stack)}function Wu(r){globalThis.__DEV__!==!1&&r&&globalThis.__DEV__!==!1&&q.debug(25,r)}function Ss(r){return r==="network-only"||r==="no-cache"||r==="standby"}var gr=new(ir?WeakMap:Map);function ks(r,e){var t=r[e];typeof t=="function"&&(r[e]=function(){return gr.set(r,(gr.get(r)+1)%1e15),t.apply(this,arguments)})}function zu(r){r.notifyTimeout&&(clearTimeout(r.notifyTimeout),r.notifyTimeout=void 0)}var xs=function(){function r(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;gr.has(n)||(gr.set(n,0),ks(n,"evict"),ks(n,"modify"),ks(n,"reset"))}return r.prototype.init=function(e){var t=e.networkStatus||ne.loading;return this.variables&&this.networkStatus!==ne.loading&&!ce(this.variables,e.variables)&&(t=ne.setVariables),ce(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},r.prototype.reset=function(){zu(this),this.dirty=!1},r.prototype.resetDiff=function(){this.lastDiff=void 0},r.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&ce(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&t.options.fetchPolicy==="no-cache")return{complete:!1};var n=this.cache.diff(e);return this.updateLastDiff(n,e),n},r.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},r.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},r.prototype.setDiff=function(e){var t=this,n,i=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&(!((n=this.observableQuery)===null||n===void 0)&&n.getLastError())||(this.updateLastDiff(e),!this.dirty&&!ce(i&&i.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0))))},r.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var n=t.getDiff();n.fromOptimisticTransaction?e.observe():Hu(e)})):delete this.oqListener)},r.prototype.notify=function(){var e=this;zu(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},r.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(sn(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},r.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=r.prototype.cancel;var e=this.observableQuery;e&&e.stopPolling()}},r.prototype.cancel=function(){},r.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var n=this.observableQuery;if(!(n&&n.options.fetchPolicy==="no-cache")){var i=x(x({},this.getDiffOptions(e)),{watcher:this,callback:function(s){return t.setDiff(s)}});(!this.lastWatch||!ce(i,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},r.prototype.resetLastWrite=function(){this.lastWrite=void 0},r.prototype.shouldWrite=function(e,t){var n=this.lastWrite;return!(n&&n.dmCount===gr.get(this.cache)&&ce(t,n.variables)&&ce(e.data,n.result.data))},r.prototype.markResult=function(e,t,n,i){var s=this,o=new Dt,a=at(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&at(e.incremental)){var u=Xa(this.getDiff().result,e);e.data=u}else if("hasNext"in e&&e.hasNext){var f=this.getDiff();e.data=o.merge(f.result,e.data)}this.graphQLErrors=a,n.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(n.variables)):i!==0&&(Ts(e,n.errorPolicy)?this.cache.performTransaction(function(c){if(s.shouldWrite(e,n.variables))c.writeQuery({query:t,data:e.data,variables:n.variables,overwrite:i===1}),s.lastWrite={result:e,variables:n.variables,dmCount:gr.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete){e.data=s.lastDiff.diff.result;return}var d=s.getDiffOptions(n.variables),p=c.diff(d);!s.stopped&&ce(s.variables,n.variables)&&s.updateWatch(n.variables),s.updateLastDiff(p,d),p.complete&&(e.data=p.result)}):this.lastWrite=void 0)},r.prototype.markReady=function(){return this.networkError=null,this.networkStatus=ne.ready},r.prototype.markError=function(e){return this.networkStatus=ne.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},r}();function Ts(r,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",n=!Kn(r);return!n&&t&&r.data&&(n=!0),n}var ld=Object.prototype.hasOwnProperty,Ku=Object.create(null),fd=function(){function r(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new la(mt["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new nr(!1);var n=new Ma(function(s){return t.cache.transformDocument(s)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults;var i=e.documentTransform;this.documentTransform=i?n.concat(i).concat(n):n,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return r.prototype.stop=function(){var e=this;this.queries.forEach(function(t,n){e.stopQueryNoBroadcast(n)}),this.cancelPendingFetches(Be(26))},r.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},r.prototype.mutate=function(e){return xt(this,arguments,void 0,function(t){var n,i,s,o,a,u,f,c=t.mutation,d=t.variables,p=t.optimisticResponse,y=t.updateQueries,v=t.refetchQueries,w=v===void 0?[]:v,E=t.awaitRefetchQueries,b=E===void 0?!1:E,k=t.update,S=t.onQueryUpdated,A=t.fetchPolicy,O=A===void 0?((u=this.defaultOptions.mutate)===null||u===void 0?void 0:u.fetchPolicy)||"network-only":A,N=t.errorPolicy,D=N===void 0?((f=this.defaultOptions.mutate)===null||f===void 0?void 0:f.errorPolicy)||"none":N,M=t.keepRootFields,P=t.context;return Tt(this,function(W){switch(W.label){case 0:return q(c,27),q(O==="network-only"||O==="no-cache",28),n=this.generateMutationId(),c=this.cache.transformForLink(this.transform(c)),i=this.getDocumentInfo(c).hasClientExports,d=this.getVariables(c,d),i?[4,this.localState.addExportedVariables(c,d,P)]:[3,2];case 1:d=W.sent(),W.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[n]={mutation:c,variables:d,loading:!0,error:null}),o=p&&this.markMutationOptimistic(p,{mutationId:n,document:c,variables:d,fetchPolicy:O,errorPolicy:D,context:P,updateQueries:y,update:k,keepRootFields:M}),this.broadcastQueries(),a=this,[2,new Promise(function(X,Me){return ns(a.getObservableFromLink(c,x(x({},P),{optimisticResponse:o?p:void 0}),d,{},!1),function(se){if(Kn(se)&&D==="none")throw new Ft({graphQLErrors:is(se)});s&&(s.loading=!1,s.error=null);var Ce=x({},se);return typeof w=="function"&&(w=w(Ce)),D==="ignore"&&Kn(Ce)&&delete Ce.errors,a.markMutationResult({mutationId:n,result:Ce,document:c,variables:d,fetchPolicy:O,errorPolicy:D,context:P,update:k,updateQueries:y,awaitRefetchQueries:b,refetchQueries:w,removeOptimistic:o?n:void 0,onQueryUpdated:S,keepRootFields:M})}).subscribe({next:function(se){a.broadcastQueries(),(!("hasNext"in se)||se.hasNext===!1)&&X(se)},error:function(se){s&&(s.loading=!1,s.error=se),o&&a.cache.removeOptimistic(n),a.broadcastQueries(),Me(se instanceof Ft?se:new Ft({networkError:se}))}})})]}})})},r.prototype.markMutationResult=function(e,t){var n=this;t===void 0&&(t=this.cache);var i=e.result,s=[],o=e.fetchPolicy==="no-cache";if(!o&&Ts(i,e.errorPolicy)){if(pr(i)||s.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),pr(i)&&at(i.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),u=void 0;a.result&&(u=Xa(a.result,i)),typeof u!="undefined"&&(i.data=u,s.push({result:u,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var f=e.updateQueries;f&&this.queries.forEach(function(d,p){var y=d.observableQuery,v=y&&y.queryName;if(!(!v||!ld.call(f,v))){var w=f[v],E=n.queries.get(p),b=E.document,k=E.variables,S=t.diff({query:b,variables:k,returnPartialData:!0,optimistic:!1}),A=S.result,O=S.complete;if(O&&A){var N=w(A,{mutationResult:i,queryName:b&&Li(b)||void 0,queryVariables:k});N&&s.push({result:N,dataId:"ROOT_QUERY",query:b,variables:k})}}})}if(s.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var c=[];if(this.refetchQueries({updateCache:function(d){o||s.forEach(function(w){return d.write(w)});var p=e.update,y=!ap(i)||pr(i)&&!i.hasNext;if(p){if(!o){var v=d.diff({id:"ROOT_MUTATION",query:n.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});v.complete&&(i=x(x({},i),{data:v.result}),"incremental"in i&&delete i.incremental,"hasNext"in i&&delete i.hasNext)}y&&p(d,i,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&y&&d.modify({id:"ROOT_MUTATION",fields:function(w,E){var b=E.fieldName,k=E.DELETE;return b==="__typename"?w:k}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(d){return c.push(d)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(c).then(function(){return i})}return Promise.resolve(i)},r.prototype.markMutationOptimistic=function(e,t){var n=this,i=typeof e=="function"?e(t.variables,{IGNORE:Ku}):e;return i===Ku?!1:(this.cache.recordOptimisticTransaction(function(s){try{n.markMutationResult(x(x({},t),{result:{data:i}}),s)}catch(o){globalThis.__DEV__!==!1&&q.error(o)}},t.mutationId),!0)},r.prototype.fetchQuery=function(e,t,n){return this.fetchConcastWithInfo(e,t,n).concast.promise},r.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,n){e[n]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},r.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},r.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},r.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var n={hasClientExports:Qf(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:Qr(["nonreactive"],e),clientQuery:this.localState.clientQuery(e),serverQuery:La([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"}],e),defaultVars:Ui(Wr(e)),asQuery:x(x({},e),{definitions:e.definitions.map(function(i){return i.kind==="OperationDefinition"&&i.operation!=="query"?x(x({},i),{operation:"query"}):i})})};t.set(e,n)}return t.get(e)},r.prototype.getVariables=function(e,t){return x(x({},this.getDocumentInfo(e).defaultVars),t)},r.prototype.watchQuery=function(e){var t=this.transform(e.query);e=x(x({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=new xs(this),i=new _s({queryManager:this,queryInfo:n,options:e});return i.lastQuery=t,this.queries.set(i.queryId,n),n.init({document:t,observableQuery:i,variables:i.variables}),i},r.prototype.query=function(e,t){var n=this;return t===void 0&&(t=this.generateQueryId()),q(e.query,29),q(e.query.kind==="Document",30),q(!e.returnPartialData,31),q(!e.pollInterval,32),this.fetchQuery(t,x(x({},e),{query:this.transform(e.query)})).finally(function(){return n.stopQuery(t)})},r.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},r.prototype.generateRequestId=function(){return this.requestIdCounter++},r.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},r.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},r.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(Be(33)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=ne.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},r.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var n=new Map,i=new Map,s=new Set;return Array.isArray(e)&&e.forEach(function(o){typeof o=="string"?i.set(o,!1):yh(o)?i.set(t.transform(o),!1):le(o)&&o.query&&s.add(o)}),this.queries.forEach(function(o,a){var u=o.observableQuery,f=o.document;if(u){if(e==="all"){n.set(a,u);return}var c=u.queryName,d=u.options.fetchPolicy;if(d==="standby"||e==="active"&&!u.hasObservers())return;(e==="active"||c&&i.has(c)||f&&i.has(f))&&(n.set(a,u),c&&i.set(c,!0),f&&i.set(f,!0))}}),s.size&&s.forEach(function(o){var a=Si("legacyOneTimeQuery"),u=t.getQuery(a).init({document:o.query,variables:o.variables}),f=new _s({queryManager:t,queryInfo:u,options:x(x({},o),{fetchPolicy:"network-only"})});q(f.queryId===a),u.setObservableQuery(f),n.set(a,f)}),globalThis.__DEV__!==!1&&i.size&&i.forEach(function(o,a){o||globalThis.__DEV__!==!1&&q.warn(typeof a=="string"?34:35,a)}),n},r.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,s){var o=i.options.fetchPolicy;i.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&n.push(i.refetch()),t.getQuery(s).setDiff(null)}),this.broadcastQueries(),Promise.all(n)},r.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},r.prototype.startGraphQLSubscription=function(e){var t=this,n=e.query,i=e.fetchPolicy,s=e.errorPolicy,o=s===void 0?"none":s,a=e.variables,u=e.context,f=u===void 0?{}:u,c=e.extensions,d=c===void 0?{}:c;n=this.transform(n),a=this.getVariables(n,a);var p=function(v){return t.getObservableFromLink(n,f,v,d).map(function(w){i!=="no-cache"&&(Ts(w,o)&&t.cache.write({query:n,result:w.data,dataId:"ROOT_SUBSCRIPTION",variables:v}),t.broadcastQueries());var E=Kn(w),b=kp(w);if(E||b){var k={};if(E&&(k.graphQLErrors=w.errors),b&&(k.protocolErrors=w.extensions[us]),o==="none"||b)throw new Ft(k)}return o==="ignore"&&delete w.errors,w})};if(this.getDocumentInfo(n).hasClientExports){var y=this.localState.addExportedVariables(n,a,f).then(p);return new ee(function(v){var w=null;return y.then(function(E){return w=E.subscribe(v)},v.error),function(){return w&&w.unsubscribe()}})}return p(a)},r.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},r.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},r.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},r.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},r.prototype.getLocalState=function(){return this.localState},r.prototype.getObservableFromLink=function(e,t,n,i,s){var o=this,a;s===void 0&&(s=(a=t==null?void 0:t.queryDeduplication)!==null&&a!==void 0?a:this.queryDeduplication);var u,f=this.getDocumentInfo(e),c=f.serverQuery,d=f.clientQuery;if(c){var p=this,y=p.inFlightLinkObservables,v=p.link,w={query:c,variables:n,operationName:Li(c)||void 0,context:this.prepareContext(x(x({},t),{forceFetch:!s})),extensions:i};if(t=w.context,s){var E=Jr(c),b=Ot(n),k=y.lookup(E,b);if(u=k.observable,!u){var S=new hr([as(v,w)]);u=k.observable=S,S.beforeNext(function(){y.remove(E,b)})}}else u=new hr([as(v,w)])}else u=new hr([ee.of({data:{}})]),t=this.prepareContext(t);return d&&(u=ns(u,function(A){return o.localState.runResolvers({document:d,remoteResult:A,context:t,variables:n})})),u},r.prototype.getResultsFromLink=function(e,t,n){var i=e.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(n.query);return ns(this.getObservableFromLink(s,n.context,n.variables),function(o){var a=is(o),u=a.length>0,f=n.errorPolicy;if(i>=e.lastRequestId){if(u&&f==="none")throw e.markError(new Ft({graphQLErrors:a}));e.markResult(o,s,n,t),e.markReady()}var c={data:o.data,loading:!1,networkStatus:ne.ready};return u&&f==="none"&&(c.data=void 0),u&&f!=="ignore"&&(c.errors=a,c.networkStatus=ne.error),c},function(o){var a=nu(o)?o:new Ft({networkError:o});throw i>=e.lastRequestId&&e.markError(a),a})},r.prototype.fetchConcastWithInfo=function(e,t,n,i){var s=this;n===void 0&&(n=ne.loading),i===void 0&&(i=t.query);var o=this.getVariables(i,t.variables),a=this.getQuery(e),u=this.defaultOptions.watchQuery,f=t.fetchPolicy,c=f===void 0?u&&u.fetchPolicy||"cache-first":f,d=t.errorPolicy,p=d===void 0?u&&u.errorPolicy||"none":d,y=t.returnPartialData,v=y===void 0?!1:y,w=t.notifyOnNetworkStatusChange,E=w===void 0?!1:w,b=t.context,k=b===void 0?{}:b,S=Object.assign({},t,{query:i,variables:o,fetchPolicy:c,errorPolicy:p,returnPartialData:v,notifyOnNetworkStatusChange:E,context:k}),A=function(P){S.variables=P;var W=s.fetchQueryByPolicy(a,S,n);return S.fetchPolicy!=="standby"&&W.sources.length>0&&a.observableQuery&&a.observableQuery.applyNextFetchPolicy("after-fetch",t),W},O=function(){return s.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(P){O(),setTimeout(function(){return N.cancel(P)})});var N,D;if(this.getDocumentInfo(S.query).hasClientExports)N=new hr(this.localState.addExportedVariables(S.query,S.variables,S.context).then(A).then(function(P){return P.sources})),D=!0;else{var M=A(S.variables);D=M.fromLink,N=new hr(M.sources)}return N.promise.then(O,O),{concast:N,fromLink:D}},r.prototype.refetchQueries=function(e){var t=this,n=e.updateCache,i=e.include,s=e.optimistic,o=s===void 0?!1:s,a=e.removeOptimistic,u=a===void 0?o?Si("refetchQueries"):void 0:a,f=e.onQueryUpdated,c=new Map;i&&this.getObservableQueries(i).forEach(function(p,y){c.set(y,{oq:p,lastDiff:t.getQuery(y).getDiff()})});var d=new Map;return n&&this.cache.batch({update:n,optimistic:o&&u||!1,removeOptimistic:u,onWatchUpdated:function(p,y,v){var w=p.watcher instanceof xs&&p.watcher.observableQuery;if(w){if(f){c.delete(w.queryId);var E=f(w,y,v);return E===!0&&(E=w.refetch()),E!==!1&&d.set(w,E),E}f!==null&&c.set(w.queryId,{oq:w,lastDiff:v,diff:y})}}}),c.size&&c.forEach(function(p,y){var v=p.oq,w=p.lastDiff,E=p.diff,b;if(f){if(!E){var k=v.queryInfo;k.reset(),E=k.getDiff()}b=f(v,E,w)}(!f||b===!0)&&(b=v.refetch()),b!==!1&&d.set(v,b),y.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(y)}),u&&this.cache.removeOptimistic(u),d},r.prototype.fetchQueryByPolicy=function(e,t,n){var i=this,s=t.query,o=t.variables,a=t.fetchPolicy,u=t.refetchWritePolicy,f=t.errorPolicy,c=t.returnPartialData,d=t.context,p=t.notifyOnNetworkStatusChange,y=e.networkStatus;e.init({document:s,variables:o,networkStatus:n});var v=function(){return e.getDiff()},w=function(A,O){O===void 0&&(O=e.networkStatus||ne.loading);var N=A.result;globalThis.__DEV__!==!1&&!c&&!ce(N,{})&&Wu(A.missing);var D=function(M){return ee.of(x({data:M,loading:sn(O),networkStatus:O},A.complete?null:{partial:!0}))};return N&&i.getDocumentInfo(s).hasForcedResolvers?i.localState.runResolvers({document:s,remoteResult:{data:N},context:d,variables:o,onlyRunForcedResolvers:!0}).then(function(M){return D(M.data||void 0)}):f==="none"&&O===ne.refetch&&Array.isArray(A.missing)?D(void 0):D(N)},E=a==="no-cache"?0:n===ne.refetch&&u!=="merge"?1:2,b=function(){return i.getResultsFromLink(e,E,{query:s,variables:o,context:d,fetchPolicy:a,errorPolicy:f})},k=p&&typeof y=="number"&&y!==n&&sn(n);switch(a){default:case"cache-first":{var S=v();return S.complete?{fromLink:!1,sources:[w(S,e.markReady())]}:c||k?{fromLink:!0,sources:[w(S),b()]}:{fromLink:!0,sources:[b()]}}case"cache-and-network":{var S=v();return S.complete||c||k?{fromLink:!0,sources:[w(S),b()]}:{fromLink:!0,sources:[b()]}}case"cache-only":return{fromLink:!1,sources:[w(v(),e.markReady())]};case"network-only":return k?{fromLink:!0,sources:[w(v()),b()]}:{fromLink:!0,sources:[b()]};case"no-cache":return k?{fromLink:!0,sources:[w(e.getDiff()),b()]}:{fromLink:!0,sources:[b()]};case"standby":return{fromLink:!1,sources:[]}}},r.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new xs(this,e)),this.queries.get(e)},r.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return x(x(x({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},r}(),hd=function(){function r(e){var t=e.cache,n=e.client,i=e.resolvers,s=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,n&&(this.client=n),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return r.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){t.resolvers=qa(t.resolvers,n)}):this.resolvers=qa(this.resolvers,e)},r.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},r.prototype.getResolvers=function(){return this.resolvers||{}},r.prototype.runResolvers=function(e){return xt(this,arguments,void 0,function(t){var n=t.document,i=t.remoteResult,s=t.context,o=t.variables,a=t.onlyRunForcedResolvers,u=a===void 0?!1:a;return Tt(this,function(f){return n?[2,this.resolveDocument(n,i.data,s,o,this.fragmentMatcher,u).then(function(c){return x(x({},i),{data:c.result})})]:[2,i]})})},r.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},r.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},r.prototype.clientQuery=function(e){return Qr(["client"],e)&&this.resolvers?e:null},r.prototype.serverQuery=function(e){return Ua(e)},r.prototype.prepareContext=function(e){var t=this.cache;return x(x({},e),{cache:t,getCacheKey:function(n){return t.identify(n)}})},r.prototype.addExportedVariables=function(e){return xt(this,arguments,void 0,function(t,n,i){return n===void 0&&(n={}),i===void 0&&(i={}),Tt(this,function(s){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,n)||{},this.prepareContext(i),n).then(function(o){return x(x({},n),o.exportedVariables)})]:[2,x({},n)]})})},r.prototype.shouldForceResolvers=function(e){var t=!1;return yt(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(t=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),t))return Ni}}}),t},r.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Wh(e),variables:t,returnPartialData:!0,optimistic:!1}).result},r.prototype.resolveDocument=function(e,t){return xt(this,arguments,void 0,function(n,i,s,o,a,u){var f,c,d,p,y,v,w,E,b,k,S;return s===void 0&&(s={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),u===void 0&&(u=!1),Tt(this,function(A){return f=ur(n),c=jn(n),d=Pn(c),p=this.collectSelectionsToResolve(f,d),y=f.operation,v=y?y.charAt(0).toUpperCase()+y.slice(1):"Query",w=this,E=w.cache,b=w.client,k={fragmentMap:d,context:x(x({},s),{cache:E,client:b}),variables:o,fragmentMatcher:a,defaultOperationType:v,exportedVariables:{},selectionsToResolve:p,onlyRunForcedResolvers:u},S=!1,[2,this.resolveSelectionSet(f.selectionSet,S,i,k).then(function(O){return{result:O,exportedVariables:k.exportedVariables}})]})})},r.prototype.resolveSelectionSet=function(e,t,n,i){return xt(this,void 0,void 0,function(){var s,o,a,u,f,c=this;return Tt(this,function(d){return s=i.fragmentMap,o=i.context,a=i.variables,u=[n],f=function(p){return xt(c,void 0,void 0,function(){var y,v;return Tt(this,function(w){return!t&&!i.selectionsToResolve.has(p)?[2]:jr(p,a)?Rt(p)?[2,this.resolveField(p,t,n,i).then(function(E){var b;typeof E!="undefined"&&u.push((b={},b[Ct(p)]=E,b))})]:(Ih(p)?y=p:(y=s[p.name.value],q(y,18,p.name.value)),y&&y.typeCondition&&(v=y.typeCondition.name.value,i.fragmentMatcher(n,v,o))?[2,this.resolveSelectionSet(y.selectionSet,t,n,i).then(function(E){u.push(E)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(f)).then(function(){return Hn(u)})]})})},r.prototype.resolveField=function(e,t,n,i){return xt(this,void 0,void 0,function(){var s,o,a,u,f,c,d,p,y,v=this;return Tt(this,function(w){return n?(s=i.variables,o=e.name.value,a=Ct(e),u=o!==a,f=n[a]||n[o],c=Promise.resolve(f),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(d=n.__typename||i.defaultOperationType,p=this.resolvers&&this.resolvers[d],p&&(y=p[u?o:a],y&&(c=Promise.resolve(ys.withValue(this.cache,y,[n,qn(e,s),i.context,{field:e,fragmentMap:i.fragmentMap}]))))),[2,c.then(function(E){var b,k;if(E===void 0&&(E=f),e.directives&&e.directives.forEach(function(A){A.name.value==="export"&&A.arguments&&A.arguments.forEach(function(O){O.name.value==="as"&&O.value.kind==="StringValue"&&(i.exportedVariables[O.value.value]=E)})}),!e.selectionSet||E==null)return E;var S=(k=(b=e.directives)===null||b===void 0?void 0:b.some(function(A){return A.name.value==="client"}))!==null&&k!==void 0?k:!1;if(Array.isArray(E))return v.resolveSubSelectedArray(e,t||S,E,i);if(e.selectionSet)return v.resolveSelectionSet(e.selectionSet,t||S,E,i)})]):[2,null]})})},r.prototype.resolveSubSelectedArray=function(e,t,n,i){var s=this;return Promise.all(n.map(function(o){if(o===null)return null;if(Array.isArray(o))return s.resolveSubSelectedArray(e,t,o,i);if(e.selectionSet)return s.resolveSelectionSet(e.selectionSet,t,o,i)}))},r.prototype.collectSelectionsToResolve=function(e,t){var n=function(o){return!Array.isArray(o)},i=this.selectionsToResolveCache;function s(o){if(!i.has(o)){var a=new Set;i.set(o,a),yt(o,{Directive:function(u,f,c,d,p){u.name.value==="client"&&p.forEach(function(y){n(y)&&sa(y)&&a.add(y)})},FragmentSpread:function(u,f,c,d,p){var y=t[u.name.value];q(y,19,u.name.value);var v=s(y);v.size>0&&(p.forEach(function(w){n(w)&&sa(w)&&a.add(w)}),a.add(u),v.forEach(function(w){a.add(w)}))}})}return i.get(o)}return s(e)},r}(),Gu=!1,Ju=function(){function r(e){var t=this;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw Be(15);var n=e.uri,i=e.credentials,s=e.headers,o=e.cache,a=e.documentTransform,u=e.ssrMode,f=u===void 0?!1:u,c=e.ssrForceFetchDelay,d=c===void 0?0:c,p=e.connectToDevTools,y=e.queryDeduplication,v=y===void 0?!0:y,w=e.defaultOptions,E=e.defaultContext,b=e.assumeImmutableResults,k=b===void 0?o.assumeImmutableResults:b,S=e.resolvers,A=e.typeDefs,O=e.fragmentMatcher,N=e.name,D=e.version,M=e.devtools,P=e.link;P||(P=n?new Up({uri:n,credentials:i,headers:s}):Je.empty()),this.link=P,this.cache=o,this.disableNetworkFetches=f||d>0,this.queryDeduplication=v,this.defaultOptions=w||Object.create(null),this.typeDefs=A,this.devtoolsConfig=x(x({},M),{enabled:(M==null?void 0:M.enabled)||p}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),d&&setTimeout(function(){return t.disableNetworkFetches=!1},d),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=Ei,this.localState=new hd({cache:o,client:this,resolvers:S,fragmentMatcher:O}),this.queryManager=new fd({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:E,documentTransform:a,queryDeduplication:v,ssrMode:f,clientAwareness:{name:N,version:D},localState:this.localState,assumeImmutableResults:k,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return r.prototype.connectToDevTools=function(){if(typeof window!="undefined"){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!Gu&&globalThis.__DEV__!==!1&&(Gu=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var n=window.navigator,i=n&&n.userAgent,s=void 0;typeof i=="string"&&(i.indexOf("Chrome/")>-1?s="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":i.indexOf("Firefox/")>-1&&(s="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),s&&globalThis.__DEV__!==!1&&q.log("Download the Apollo DevTools for a better development experience: %s",s)}},1e4))}},Object.defineProperty(r.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),r.prototype.stop=function(){this.queryManager.stop()},r.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=ss(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=x(x({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},r.prototype.query=function(e){return this.defaultOptions.query&&(e=ss(this.defaultOptions.query,e)),q(e.fetchPolicy!=="cache-and-network",16),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=x(x({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},r.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=ss(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},r.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},r.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},r.prototype.watchFragment=function(e){return this.cache.watchFragment(e)},r.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},r.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},r.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},r.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},r.prototype.__requestRaw=function(e){return as(this.link,e)},r.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},r.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},r.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(n){return n!==e})}},r.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(n){return n!==e})}},r.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},r.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),n=[],i=[];t.forEach(function(o,a){n.push(a),i.push(o)});var s=Promise.all(i);return s.queries=n,s.results=i,s.catch(function(o){globalThis.__DEV__!==!1&&q.debug(17,o)}),s},r.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},r.prototype.extract=function(e){return this.cache.extract(e)},r.prototype.restore=function(e){return this.cache.restore(e)},r.prototype.addResolvers=function(e){this.localState.addResolvers(e)},r.prototype.setResolvers=function(e){this.localState.setResolvers(e)},r.prototype.getResolvers=function(){return this.localState.getResolvers()},r.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},r.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(r.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),r}();globalThis.__DEV__!==!1&&(Ju.prototype.getMemoryInternals=oh);var Zn=new Map,Is=new Map,Yu=!0,ei=!1;function Xu(r){return r.replace(/[\s,]+/g," ").trim()}function pd(r){return Xu(r.source.body.substring(r.start,r.end))}function dd(r){var e=new Set,t=[];return r.definitions.forEach(function(n){if(n.kind==="FragmentDefinition"){var i=n.name.value,s=pd(n.loc),o=Is.get(i);o&&!o.has(s)?Yu&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||Is.set(i,o=new Set),o.add(s),e.has(s)||(e.add(s),t.push(n))}else t.push(n)}),x(x({},r),{definitions:t})}function yd(r){var e=new Set(r.definitions);e.forEach(function(n){n.loc&&delete n.loc,Object.keys(n).forEach(function(i){var s=n[i];s&&typeof s=="object"&&e.add(s)})});var t=r.loc;return t&&(delete t.startToken,delete t.endToken),r}function md(r){var e=Xu(r);if(!Zn.has(e)){var t=Ff(r,{experimentalFragmentVariables:ei,allowLegacyFragmentVariables:ei});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Zn.set(e,yd(dd(t)))}return Zn.get(e)}function ue(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof r=="string"&&(r=[r]);var n=r[0];return e.forEach(function(i,s){i&&i.kind==="Document"?n+=i.loc.source.body:n+=i,n+=r[s+1]}),md(n)}function gd(){Zn.clear(),Is.clear()}function vd(){Yu=!1}function bd(){ei=!0}function wd(){ei=!1}var on={gql:ue,resetCaches:gd,disableFragmentWarnings:vd,enableExperimentalFragmentVariables:bd,disableExperimentalFragmentVariables:wd};(function(r){r.gql=on.gql,r.resetCaches=on.resetCaches,r.disableFragmentWarnings=on.disableFragmentWarnings,r.enableExperimentalFragmentVariables=on.enableExperimentalFragmentVariables,r.disableExperimentalFragmentVariables=on.disableExperimentalFragmentVariables})(ue||(ue={})),ue.default=ue;class Ed extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query ($bundle: String!) {
      ContinuId(bundle: $bundle) {
        address,
        bundleHash,
        tokenSlug,
        position,
        batchId,
        characters,
        pubkey,
        amount,
        createdAt
      }
    }`}createResponse(e){return new ef({query:this,json:e})}}class _d extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.WalletBundle"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={};return e.forEach(n=>{n.metas=Tr.aggregateMeta(n.metas),t[n.bundleHash]=n}),t}}class Sd extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $bundleHashes: [ String! ] ) {
      WalletBundle( bundleHashes: $bundleHashes ) {
        bundleHash,
        metas {
          molecularHash,
          position,
          key,
          value,
          createdAt
        },
        createdAt
      }
    }`}createResponse(e){return new _d({query:this,json:e})}}class ti extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Wallet"})}static toClientWallet({data:e,secret:t=null}){let n;if(e.position===null||typeof e.position=="undefined"?n=Y.create({bundle:e.bundleHash,token:e.tokenSlug,batchId:e.batchId,characters:e.characters}):(n=new Y({secret:t,token:e.tokenSlug,position:e.position,batchId:e.batchId,characters:e.characters}),n.address=e.address,n.bundle=e.bundleHash),e.token&&(n.tokenName=e.token.name,n.tokenAmount=e.token.amount,n.tokenSupply=e.token.supply,n.tokenFungibility=e.token.fungibility),e.tokenUnits.length)for(const i of e.tokenUnits)n.tokenUnits.push(Ar.createFromGraphQL(i));if(e.tradeRates.length)for(const i of e.tradeRates)n.tradeRates[i.tokenSlug]=i.amount;return n.balance=Number(e.amount),n.pubkey=e.pubkey,n.createdAt=e.createdAt,n}getWallets(e=null){const t=this.data();if(!t)return null;const n=[];for(const i of t)n.push(ti.toClientWallet({data:i,secret:e}));return n}payload(){return this.getWallets()}}class kd extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $bundleHash: String, $tokenSlug: String ) {
      Wallet( bundleHash: $bundleHash, tokenSlug: $tokenSlug ) {
        address,
        bundleHash,
        token {
          name,
          amount,
          fungibility,
          supply
        },
        tokenSlug,
        batchId,
        position,
        amount,
        characters,
        pubkey,
        createdAt,
        tokenUnits {
          id,
          name,
          metas
        },
        tradeRates {
          tokenSlug,
          amount
        }
      }
    }`}createResponse(e){return new ti({query:this,json:e})}}class xd extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Balance"})}payload(){const e=this.data();return!e||!e.bundleHash||!e.tokenSlug?null:ti.toClientWallet({data:e})}}class Td extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $address: String, $bundleHash: String, $type: String, $token: String, $position: String ) {
      Balance( address: $address, bundleHash: $bundleHash, type: $type, token: $token, position: $position ) {
        address,
        bundleHash,
        type,
        tokenSlug,
        batchId,
        position,
        amount,
        characters,
        pubkey,
        createdAt,
        tokenUnits {
          id,
          name,
          metas
        },
        tradeRates {
          tokenSlug,
          amount
        }
      }
    }`}createResponse(e){return new xd({query:this,json:e})}}class Id extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.MetaType"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={instances:{},instanceCount:{},paginatorInfo:{}},n=e.pop();return n.instances&&(t.instances=n.instances),n.instanceCount&&(t.instanceCount=n.instanceCount),n.paginatorInfo&&(t.paginatorInfo=n.paginatorInfo),t}}class Zu extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $metaType: String, $metaTypes: [ String! ], $metaId: String, $metaIds: [ String! ], $key: String, $keys: [ String! ], $value: String, $values: [ String! ], $count: String, $latest: Boolean, $filter: [ MetaFilter! ], $latestMetas: Boolean, $queryArgs: QueryArgs, $countBy: String ) {
      MetaType( metaType: $metaType, metaTypes: $metaTypes, metaId: $metaId, metaIds: $metaIds, key: $key, keys: $keys, value: $value, values: $values, count: $count, filter: $filter, latestMetas: $latestMetas, queryArgs: $queryArgs, countBy: $countBy ) {
        metaType,
        instanceCount {
          key,
          value
        },
        instances {
          metaType,
          metaId,
          createdAt,
          metas(latest:$latest) {
            molecularHash,
            position,
            key,
            value,
            createdAt
          }
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({metaType:e=null,metaId:t=null,key:n=null,value:i=null,latest:s=null,latestMetas:o=!0,filter:a=null,queryArgs:u=null,count:f=null,countBy:c=null}){const d={};return e&&(d[typeof e=="string"?"metaType":"metaTypes"]=e),t&&(d[typeof t=="string"?"metaId":"metaIds"]=t),n&&(d[typeof n=="string"?"key":"keys"]=n),i&&(d[typeof i=="string"?"value":"values"]=i),s&&(d.latest=!!s),o&&(d.latestMetas=!!o),a&&(d.filter=a),u&&((typeof u.limit=="undefined"||u.limit===0)&&(u.limit="*"),d.queryArgs=u),f&&(d.count=f),c&&(d.countBy=c),d}createResponse(e){return new Id({query:this,json:e})}}class an extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $batchId: String ) {
      Batch( batchId: $batchId ) {
        ${an.getFields()},
        children {
          ${an.getFields()}
        }
      }
    }`}static getFields(){return`batchId,
              molecularHash,
              type,
              status,
              createdAt,
              wallet {
                  address,
                  bundleHash,
                  amount,
                  tokenSlug,
                  token {
                      name,
                      amount
                  },
                  tokenUnits {
                      id,
                      name,
                      metas
                  }
              },
              fromWallet {
                  address,
                  bundleHash,
                  amount,
                  batchId
              },
              toWallet {
                  address,
                  bundleHash,
                  amount,
                  batchId
              },
              sourceTokenUnits {
                  id,
                  name,
                  metas
              },
              transferTokenUnits {
                  id,
                  name,
                  metas
              },
              metas {
                  key,
                  value,
              },
              throughMetas {
                  key,
                  value
              }`}createResponse(e){const t=new _e({query:this,json:e});return t.dataKey="data.Batch",t}}class Ad extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $batchId: String ) {
      BatchHistory( batchId: $batchId ) {
        ${an.getFields()}
      }
    }`}createResponse(e){const t=new _e({query:this,json:e});return t.dataKey="data.BatchHistory",t}}class ut extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ProposeMolecule"}),this.$__clientMolecule=e.molecule()}init(){const e=pe.get(this.data(),"payload");try{this.$__payload=Object.prototype.toString.call(e)==="[object String]"?JSON.parse(e):e}catch(t){this.$__payload=null}}clientMolecule(){return this.$__clientMolecule}molecule(){const e=this.data();if(!e)return null;const t=new st({});return t.molecularHash=pe.get(e,"molecularHash"),t.status=pe.get(e,"status"),t.createdAt=pe.get(e,"createdAt"),t}success(){return this.status()==="accepted"}status(){return pe.get(this.data(),"status","rejected")}reason(){return pe.get(this.data(),"reason","Invalid response from server")}payload(){return this.$__payload}}class As extends Pe{createQuery({variables:e=null}){const t=super.createQuery({variables:e});return t.mutation=t.query,delete t.query,t}execute(n){return L(this,arguments,function*({variables:e={},context:t={}}){this.$__request=this.createQuery({variables:e});const i=He(He({},t),this.createQueryContext());try{const s=hn(He({},this.$__request),{context:i}),o=yield this.client.mutate(s);return this.$__response=yield this.createResponseRaw(o),this.$__response}catch(s){if(s.name==="AbortError")return this.knishIOClient.log("warn","Mutation was cancelled"),new _e({query:this,json:{data:null,errors:[{message:"Mutation was cancelled"}]}});throw s}})}createQueryContext(){return{}}}class Oe extends As{constructor(e,t,n){super(e,t),this.$__molecule=n,this.$__remainderWallet=null,this.$__query=ue`mutation( $molecule: MoleculeInput! ) {
      ProposeMolecule( molecule: $molecule ) {
        molecularHash,
        height,
        depth,
        status,
        reason,
        payload,
        createdAt,
        receivedAt,
        processedAt,
        broadcastedAt,
      }
    }`}compiledVariables(e){const t=super.compiledVariables(e);return hn(He({},t),{molecule:this.molecule()})}createResponse(e){return new ut({query:this,json:e})}execute(t){return L(this,arguments,function*({variables:e=null}){return e=e||{},e.molecule=this.molecule(),Tc(Oe.prototype,this,"execute").call(this,{variables:e})})}remainderWallet(){return this.$__remainderWallet}molecule(){return this.$__molecule}}class Od extends ut{payloadKey(e){if(!pe.has(this.payload(),e))throw new Lr(`ResponseRequestAuthorization::payloadKey() - '${e}' key was not found in the payload!`);return pe.get(this.payload(),e)}token(){return this.payloadKey("token")}time(){return this.payloadKey("time")}encrypt(){return this.payloadKey("encrypt")}pubKey(){return this.payloadKey("key")}}class Cd extends Oe{fillMolecule({meta:e}){this.$__molecule.initAuthorization({meta:e}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Od({query:this,json:e})}}class Rd extends ut{}class Nd extends Oe{fillMolecule({recipientWallet:e,amount:t,meta:n=null}){this.$__molecule.initTokenCreation({recipientWallet:e,amount:t,meta:n||{}}),this.$__molecule.sign({bundle:e.bundle}),this.$__molecule.check()}createResponse(e){return new Rd({query:this,json:e})}}class Dd extends ut{}class Fd extends Oe{fillMolecule({token:e,amount:t,metaType:n,metaId:i,meta:s=null,batchId:o=null}){this.$__molecule.initTokenRequest({token:e,amount:t,metaType:n,metaId:i,meta:s||{},batchId:o}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Dd({query:this,json:e})}}class Md extends ut{payload(){const e={reason:null,status:null},t=this.data();return e.reason=typeof t.reason=="undefined"?"Invalid response from server":t.reason,e.status=typeof t.status=="undefined"?"rejected":t.status,e}}class Bd extends Oe{fillMolecule({recipientWallet:e,amount:t}){this.$__molecule.initValue({recipientWallet:e,amount:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}createResponse(e){return new Md({query:this,json:e})}}class $d extends ut{}class Pd extends Oe{fillMolecule({type:e,contact:t,code:n}){this.$__molecule.initIdentifierCreation({type:e,contact:t,code:n}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new $d({query:this,json:e})}}class Ld extends ut{}class Ud extends Oe{fillMolecule({token:e,batchId:t=null}){const n=Y.create({secret:this.$__molecule.secret,bundle:this.$__molecule.bundle,token:e,batchId:t});this.$__molecule.initShadowWalletClaim(n),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Ld({query:this,json:e})}}class qd extends ut{}class jd extends Oe{fillMolecule({metaType:e,metaId:t,meta:n,policy:i}){this.$__molecule.initMeta({meta:n,metaType:e,metaId:t,policy:i}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new qd({query:this,json:e})}}class Qd extends ut{}class Vd extends Oe{fillMolecule(e){this.$__molecule.initWalletCreation(e),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Qd({query:this,json:e})}}class Hd extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.AccessToken"})}reason(){return"Invalid response from server"}success(){return this.payload()!==null}payload(){return this.data()}payloadKey(e){if(!pe.has(this.payload(),e))throw new Lr(`ResponseAuthorizationGuest::payloadKey() - '${e}' key is not found in the payload!`);return pe.get(this.payload(),e)}token(){return this.payloadKey("token")}time(){return this.payloadKey("time")}pubKey(){return this.payloadKey("key")}encrypt(){return this.payloadKey("encrypt")}}class Wd extends As{constructor(e,t){super(e,t),this.$__query=ue`mutation( $cellSlug: String, $pubkey: String, $encrypt: Boolean ) {
      AccessToken( cellSlug: $cellSlug, pubkey: $pubkey, encrypt: $encrypt ) {
        token,
        pubkey,
        expiresAt
      }
    }`}createResponse(e){return new Hd({query:this,json:e})}}class ec extends ie{constructor(e="The shadow wallet does not exist",t=null,n=null){super(e,t,n),this.name="WalletShadowException"}}class zd extends ie{constructor(e="Stackable tokens with unit IDs cannot have decimal places!",t=null,n=null){super(e,t,n),this.name="StackableUnitDecimalsException"}}class ri extends ie{constructor(e="Stackable tokens with unit IDs cannot have an amount!",t=null,n=null){super(e,t,n),this.name="StackableUnitAmountException"}}function tc(r){return new Je(function(e,t){return new ee(function(n){var i,s,o;try{i=t(e).subscribe({next:function(a){if(a.errors&&(o=r({graphQLErrors:a.errors,response:a,operation:e,forward:t}),o)){s=o.subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return}n.next(a)},error:function(a){if(o=r({operation:e,networkError:a,graphQLErrors:a&&a.result&&a.result.errors||void 0,forward:t}),o){s=o.subscribe({next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return}n.error(a)},complete:function(){o||n.complete.bind(n)()}})}catch(a){r({networkError:a,operation:e,forward:t}),n.error(a)}return function(){i&&i.unsubscribe(),s&&i.unsubscribe()}})})}(function(r){Ge(e,r);function e(t){var n=r.call(this)||this;return n.link=tc(t),n}return e.prototype.request=function(t,n){return this.link.request(t,n)},e})(Je);function Kd(r){return new Je(function(e,t){var n=ot(e,[]);return new ee(function(i){var s,o=!1;return Promise.resolve(n).then(function(a){return r(a,e.getContext())}).then(e.setContext).then(function(){o||(s=t(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)}))}).catch(i.error.bind(i)),function(){o=!0,s&&s.unsubscribe()}})})}function Gd(r){return le(r)&&"code"in r&&"reason"in r}function Jd(r){var e;return le(r)&&((e=r.target)===null||e===void 0?void 0:e.readyState)===WebSocket.CLOSED}var Yd=function(r){Ge(e,r);function e(t){var n=r.call(this)||this;return n.client=t,n}return e.prototype.request=function(t){var n=this;return new ee(function(i){return n.client.subscribe(x(x({},t),{query:Jr(t.query)}),{next:i.next.bind(i),complete:i.complete.bind(i),error:function(s){if(s instanceof Error)return i.error(s);var o=Gd(s);return o||Jd(s)?i.error(new Error("Socket closed".concat(o?" with event ".concat(s.code):"").concat(o?" ".concat(s.reason):""))):i.error(new Ft({graphQLErrors:Array.isArray(s)?s:[s]}))}})})},e}(Je);function Ue(r){return r===null?"null":Array.isArray(r)?"array":typeof r}function zt(r){return Ue(r)==="object"}function Xd(r){return Array.isArray(r)&&r.length>0&&r.every(e=>"message"in e)}function rc(r,e){return r.length<124?r:e}const Zd="graphql-transport-ws";var Ve;(function(r){r[r.InternalServerError=4500]="InternalServerError",r[r.InternalClientError=4005]="InternalClientError",r[r.BadRequest=4400]="BadRequest",r[r.BadResponse=4004]="BadResponse",r[r.Unauthorized=4401]="Unauthorized",r[r.Forbidden=4403]="Forbidden",r[r.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",r[r.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",r[r.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",r[r.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",r[r.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(Ve||(Ve={}));var ge;(function(r){r.ConnectionInit="connection_init",r.ConnectionAck="connection_ack",r.Ping="ping",r.Pong="pong",r.Subscribe="subscribe",r.Next="next",r.Error="error",r.Complete="complete"})(ge||(ge={}));function nc(r){if(!zt(r))throw new Error(`Message is expected to be an object, but got ${Ue(r)}`);if(!r.type)throw new Error("Message is missing the 'type' property");if(typeof r.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${Ue(r.type)}`);switch(r.type){case ge.ConnectionInit:case ge.ConnectionAck:case ge.Ping:case ge.Pong:{if(r.payload!=null&&!zt(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${r.payload}"`);break}case ge.Subscribe:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${Ue(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!zt(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object, but got ${Ue(r.payload)}`);if(typeof r.payload.query!="string")throw new Error(`"${r.type}" message payload expects the 'query' property to be a string, but got ${Ue(r.payload.query)}`);if(r.payload.variables!=null&&!zt(r.payload.variables))throw new Error(`"${r.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${Ue(r.payload.variables)}`);if(r.payload.operationName!=null&&Ue(r.payload.operationName)!=="string")throw new Error(`"${r.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${Ue(r.payload.operationName)}`);if(r.payload.extensions!=null&&!zt(r.payload.extensions))throw new Error(`"${r.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${Ue(r.payload.extensions)}`);break}case ge.Next:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${Ue(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!zt(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an object, but got ${Ue(r.payload)}`);break}case ge.Error:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${Ue(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);if(!Xd(r.payload))throw new Error(`"${r.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(r.payload)}`);break}case ge.Complete:{if(typeof r.id!="string")throw new Error(`"${r.type}" message expects the 'id' property to be a string, but got ${Ue(r.id)}`);if(!r.id)throw new Error(`"${r.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${r.type}"`)}return r}function ey(r,e){return nc(typeof r=="string"?JSON.parse(r,e):r)}function un(r,e){return nc(r),JSON.stringify(r,e)}var vr=function(r){return this instanceof vr?(this.v=r,this):new vr(r)},ty=function(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(p){n[p]&&(i[p]=function(y){return new Promise(function(v,w){s.push([p,y,v,w])>1||a(p,y)})})}function a(p,y){try{u(n[p](y))}catch(v){d(s[0][3],v)}}function u(p){p.value instanceof vr?Promise.resolve(p.value.v).then(f,c):d(s[0][2],p)}function f(p){a("next",p)}function c(p){a("throw",p)}function d(p,y){p(y),s.shift(),s.length&&a(s[0][0],s[0][1])}};function ry(r){const{url:e,connectionParams:t,lazy:n=!0,onNonLazyError:i=console.error,lazyCloseTimeout:s=0,keepAlive:o=0,disablePong:a,connectionAckWaitTimeout:u=0,retryAttempts:f=5,retryWait:c=function(te){return L(this,null,function*(){let Q=1e3;for(let j=0;j<te;j++)Q*=2;yield new Promise(j=>setTimeout(j,Q+Math.floor(Math.random()*2700+300)))})},shouldRetry:d=Os,isFatalConnectionProblem:p,on:y,webSocketImpl:v,generateID:w=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,te=>{const Q=Math.random()*16|0;return(te=="x"?Q:Q&3|8).toString(16)})},jsonMessageReplacer:E,jsonMessageReviver:b}=r;let k;if(v){if(!iy(v))throw new Error("Invalid WebSocket implementation provided");k=v}else typeof WebSocket!="undefined"?k=WebSocket:typeof It!="undefined"?k=It.WebSocket||It.MozWebSocket:typeof window!="undefined"&&(k=window.WebSocket||window.MozWebSocket);if(!k)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const S=k,A=(()=>{const V=(()=>{const Q={};return{on(j,re){return Q[j]=re,()=>{delete Q[j]}},emit(j){var re;"id"in j&&((re=Q[j.id])===null||re===void 0||re.call(Q,j))}}})(),te={connecting:y!=null&&y.connecting?[y.connecting]:[],opened:y!=null&&y.opened?[y.opened]:[],connected:y!=null&&y.connected?[y.connected]:[],ping:y!=null&&y.ping?[y.ping]:[],pong:y!=null&&y.pong?[y.pong]:[],message:y!=null&&y.message?[V.emit,y.message]:[V.emit],closed:y!=null&&y.closed?[y.closed]:[],error:y!=null&&y.error?[y.error]:[]};return{onMessage:V.on,on(Q,j){const re=te[Q];return re.push(j),()=>{re.splice(re.indexOf(j),1)}},emit(Q,...j){for(const re of[...te[Q]])re(...j)}}})();function O(V){const te=[A.on("error",Q=>{te.forEach(j=>j()),V(Q)}),A.on("closed",Q=>{te.forEach(j=>j()),V(Q)})]}let N,D=0,M,P=!1,W=0,X=!1;function Me(){return L(this,null,function*(){clearTimeout(M);const[V,te]=yield N!=null?N:N=new Promise((re,ke)=>L(this,null,function*(){if(P){if(yield c(W),!D)return N=void 0,ke({code:1e3,reason:"All Subscriptions Gone"});W++}A.emit("connecting",P);const z=new S(typeof e=="function"?yield e():e,Zd);let je,oe;function xe(){isFinite(o)&&o>0&&(clearTimeout(oe),oe=setTimeout(()=>{z.readyState===S.OPEN&&(z.send(un({type:ge.Ping})),A.emit("ping",!1,void 0))},o))}O(Te=>{N=void 0,clearTimeout(je),clearTimeout(oe),ke(Te),Te instanceof ic&&(z.close(4499,"Terminated"),z.onerror=null,z.onclose=null)}),z.onerror=Te=>A.emit("error",Te),z.onclose=Te=>A.emit("closed",Te),z.onopen=()=>L(this,null,function*(){try{A.emit("opened",z);const Te=typeof t=="function"?yield t():t;if(z.readyState!==S.OPEN)return;z.send(un(Te?{type:ge.ConnectionInit,payload:Te}:{type:ge.ConnectionInit},E)),isFinite(u)&&u>0&&(je=setTimeout(()=>{z.close(Ve.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},u)),xe()}catch(Te){A.emit("error",Te),z.close(Ve.InternalClientError,rc(Te instanceof Error?Te.message:new Error(Te).message,"Internal client error"))}});let wt=!1;z.onmessage=({data:Te})=>{try{const we=ey(Te,b);if(A.emit("message",we),we.type==="ping"||we.type==="pong"){A.emit(we.type,!0,we.payload),we.type==="pong"?xe():a||(z.send(un(we.payload?{type:ge.Pong,payload:we.payload}:{type:ge.Pong})),A.emit("pong",!1,we.payload));return}if(wt)return;if(we.type!==ge.ConnectionAck)throw new Error(`First message cannot be of type ${we.type}`);clearTimeout(je),wt=!0,A.emit("connected",z,we.payload,P),P=!1,W=0,re([z,new Promise((Bs,si)=>O(si))])}catch(we){z.onmessage=null,A.emit("error",we),z.close(Ve.BadResponse,rc(we instanceof Error?we.message:new Error(we).message,"Bad response"))}}}));V.readyState===S.CLOSING&&(yield te);let Q=()=>{};const j=new Promise(re=>Q=re);return[V,Q,Promise.race([j.then(()=>{if(!D){const re=()=>V.close(1e3,"Normal Closure");isFinite(s)&&s>0?M=setTimeout(()=>{V.readyState===S.OPEN&&re()},s):re()}}),te])]})}function se(V){if(Os(V)&&(ny(V.code)||[Ve.InternalServerError,Ve.InternalClientError,Ve.BadRequest,Ve.BadResponse,Ve.Unauthorized,Ve.SubprotocolNotAcceptable,Ve.SubscriberAlreadyExists,Ve.TooManyInitialisationRequests].includes(V.code)))throw V;if(X)return!1;if(Os(V)&&V.code===1e3)return D>0;if(!f||W>=f||!d(V)||p!=null&&p(V))throw V;return P=!0}n||L(this,null,function*(){for(D++;;)try{const[,,V]=yield Me();yield V}catch(V){try{if(!se(V))return}catch(te){return i==null?void 0:i(te)}}});function Ce(V,te){const Q=w(V);let j=!1,re=!1,ke=()=>{D--,j=!0};return L(this,null,function*(){for(D++;;)try{const[z,je,oe]=yield Me();if(j)return je();const xe=A.onMessage(Q,wt=>{switch(wt.type){case ge.Next:{te.next(wt.payload);return}case ge.Error:{re=!0,j=!0,te.error(wt.payload),ke();return}case ge.Complete:{j=!0,ke();return}}});z.send(un({id:Q,type:ge.Subscribe,payload:V},E)),ke=()=>{!j&&z.readyState===S.OPEN&&z.send(un({id:Q,type:ge.Complete},E)),D--,j=!0,je()},yield oe.finally(xe);return}catch(z){if(!se(z))return}}).then(()=>{re||te.complete()}).catch(z=>{te.error(z)}),()=>{j||ke()}}return{on:A.on,subscribe:Ce,iterate(V){const te=[],Q={done:!1,error:null,resolve:()=>{}},j=Ce(V,{next(ke){te.push(ke),Q.resolve()},error(ke){Q.done=!0,Q.error=ke,Q.resolve()},complete(){Q.done=!0,Q.resolve()}}),re=function(){return ty(this,arguments,function*(){for(;;){for(te.length||(yield vr(new Promise(je=>Q.resolve=je)));te.length;)yield yield vr(te.shift());if(Q.error)throw Q.error;if(Q.done)return yield vr(void 0)}})}();return re.throw=ke=>L(this,null,function*(){return Q.done||(Q.done=!0,Q.error=ke,Q.resolve()),{done:!0,value:void 0}}),re.return=()=>L(this,null,function*(){return j(),{done:!0,value:void 0}}),re},dispose(){return L(this,null,function*(){if(X=!0,N){const[V]=yield N;V.close(1e3,"Normal Closure")}})},terminate(){N&&A.emit("closed",new ic)}}}class ic extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function Os(r){return zt(r)&&"code"in r&&"reason"in r}function ny(r){return[1e3,1001,1006,1005,1012,1013,1014].includes(r)?!1:r>=1e3&&r<=1999}function iy(r){return typeof r=="function"&&"constructor"in r&&"CLOSED"in r&&"CLOSING"in r&&"CONNECTING"in r&&"OPEN"in r}function sy(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Fe=typeof globalThis!="undefined"&&globalThis||typeof self!="undefined"&&self||typeof Fe!="undefined"&&Fe,qe={searchParams:"URLSearchParams"in Fe,iterable:"Symbol"in Fe&&"iterator"in Symbol,blob:"FileReader"in Fe&&"Blob"in Fe&&function(){try{return new Blob,!0}catch(r){return!1}}(),formData:"FormData"in Fe,arrayBuffer:"ArrayBuffer"in Fe};function oy(r){return r&&DataView.prototype.isPrototypeOf(r)}if(qe.arrayBuffer)var ay=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],uy=ArrayBuffer.isView||function(r){return r&&ay.indexOf(Object.prototype.toString.call(r))>-1};function cn(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(r)||r==="")throw new TypeError('Invalid character in header field name: "'+r+'"');return r.toLowerCase()}function Cs(r){return typeof r!="string"&&(r=String(r)),r}function Rs(r){var e={next:function(){var t=r.shift();return{done:t===void 0,value:t}}};return qe.iterable&&(e[Symbol.iterator]=function(){return e}),e}function Se(r){this.map={},r instanceof Se?r.forEach(function(e,t){this.append(t,e)},this):Array.isArray(r)?r.forEach(function(e){this.append(e[0],e[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(e){this.append(e,r[e])},this)}Se.prototype.append=function(r,e){r=cn(r),e=Cs(e);var t=this.map[r];this.map[r]=t?t+", "+e:e},Se.prototype.delete=function(r){delete this.map[cn(r)]},Se.prototype.get=function(r){return r=cn(r),this.has(r)?this.map[r]:null},Se.prototype.has=function(r){return this.map.hasOwnProperty(cn(r))},Se.prototype.set=function(r,e){this.map[cn(r)]=Cs(e)},Se.prototype.forEach=function(r,e){for(var t in this.map)this.map.hasOwnProperty(t)&&r.call(e,this.map[t],t,this)},Se.prototype.keys=function(){var r=[];return this.forEach(function(e,t){r.push(t)}),Rs(r)},Se.prototype.values=function(){var r=[];return this.forEach(function(e){r.push(e)}),Rs(r)},Se.prototype.entries=function(){var r=[];return this.forEach(function(e,t){r.push([t,e])}),Rs(r)},qe.iterable&&(Se.prototype[Symbol.iterator]=Se.prototype.entries);function Ns(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function sc(r){return new Promise(function(e,t){r.onload=function(){e(r.result)},r.onerror=function(){t(r.error)}})}function cy(r){var e=new FileReader,t=sc(e);return e.readAsArrayBuffer(r),t}function ly(r){var e=new FileReader,t=sc(e);return e.readAsText(r),t}function fy(r){for(var e=new Uint8Array(r),t=new Array(e.length),n=0;n<e.length;n++)t[n]=String.fromCharCode(e[n]);return t.join("")}function oc(r){if(r.slice)return r.slice(0);var e=new Uint8Array(r.byteLength);return e.set(new Uint8Array(r)),e.buffer}function ac(){return this.bodyUsed=!1,this._initBody=function(r){this.bodyUsed=this.bodyUsed,this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:qe.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:qe.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:qe.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():qe.arrayBuffer&&qe.blob&&oy(r)?(this._bodyArrayBuffer=oc(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):qe.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||uy(r))?this._bodyArrayBuffer=oc(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):qe.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},qe.blob&&(this.blob=function(){var r=Ns(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var r=Ns(this);return r||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(cy)}),this.text=function(){var r=Ns(this);if(r)return r;if(this._bodyBlob)return ly(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(fy(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},qe.formData&&(this.formData=function(){return this.text().then(dy)}),this.json=function(){return this.text().then(JSON.parse)},this}var hy=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function py(r){var e=r.toUpperCase();return hy.indexOf(e)>-1?e:r}function Kt(r,e){if(!(this instanceof Kt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var t=e.body;if(r instanceof Kt){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,e.headers||(this.headers=new Se(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!t&&r._bodyInit!=null&&(t=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new Se(e.headers)),this.method=py(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&t)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(t),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var n=/([?&])_=[^&]*/;if(n.test(this.url))this.url=this.url.replace(n,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Kt.prototype.clone=function(){return new Kt(this,{body:this._bodyInit})};function dy(r){var e=new FormData;return r.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),s=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function yy(r){var e=new Se,t=r.replace(/\r?\n[\t ]+/g," ");return t.split("\r").map(function(n){return n.indexOf(`
`)===0?n.substr(1,n.length):n}).forEach(function(n){var i=n.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();e.append(s,o)}}),e}ac.call(Kt.prototype);function ct(r,e){if(!(this instanceof ct))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new Se(e.headers),this.url=e.url||"",this._initBody(r)}ac.call(ct.prototype),ct.prototype.clone=function(){return new ct(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Se(this.headers),url:this.url})},ct.error=function(){var r=new ct(null,{status:0,statusText:""});return r.type="error",r};var my=[301,302,303,307,308];ct.redirect=function(r,e){if(my.indexOf(e)===-1)throw new RangeError("Invalid status code");return new ct(null,{status:e,headers:{location:r}})};var Gt=Fe.DOMException;try{new Gt}catch(r){Gt=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack},Gt.prototype=Object.create(Error.prototype),Gt.prototype.constructor=Gt}function uc(r,e){return new Promise(function(t,n){var i=new Kt(r,e);if(i.signal&&i.signal.aborted)return n(new Gt("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var u={status:s.status,statusText:s.statusText,headers:yy(s.getAllResponseHeaders()||"")};u.url="responseURL"in s?s.responseURL:u.headers.get("X-Request-URL");var f="response"in s?s.response:s.responseText;setTimeout(function(){t(new ct(f,u))},0)},s.onerror=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){n(new TypeError("Network request failed"))},0)},s.onabort=function(){setTimeout(function(){n(new Gt("Aborted","AbortError"))},0)};function a(u){try{return u===""&&Fe.location.href?Fe.location.href:u}catch(f){return u}}s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(qe.blob?s.responseType="blob":qe.arrayBuffer&&i.headers.get("Content-Type")&&i.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof Se)?Object.getOwnPropertyNames(e.headers).forEach(function(u){s.setRequestHeader(u,Cs(e.headers[u]))}):i.headers.forEach(function(u,f){s.setRequestHeader(f,u)}),i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit=="undefined"?null:i._bodyInit)})}uc.polyfill=!0,Fe.fetch||(Fe.fetch=uc,Fe.Headers=Se,Fe.Request=Kt,Fe.Response=ct);var gy=self.fetch.bind(self);const vy=sy(gy);function by({graphQLErrors:r,networkError:e,operation:t,forward:n,response:i}){if(r&&r.forEach(({message:s,debugMessage:o,locations:a,path:u})=>console.error(`[GraphQL error]: ${s}`,`
  Message : ${o}`,`
  Path    : ${u}`,`
  Location: ${JSON.stringify(a)}`)),e){const{name:s,statusCode:o,result:a={}}=e;console.error(`[Network error]: ${s}, status code: ${o}`)}}function wy(r){return r.query.definitions.find(n=>n.kind==="OperationDefinition").selectionSet.selections.find(n=>n.kind==="Field").name.value}function Ey(r){return r.query.definitions.find(t=>t.kind==="OperationDefinition").operation}class _y extends Je{constructor(){super(),this.__wallet=null,this.__pubkey=null}setWallet(e){this.__wallet=e}getWallet(){return this.__wallet}setPubKey(e){this.__pubkey=e}getPubKey(){return this.__pubkey}request(e,t){const n=wy(e),i=Ey(e),s=i==="mutation"&&n==="ProposeMolecule";if([i==="query"&&["__schema","ContinuId"].includes(n),i==="mutation"&&n==="AccessToken",s&&pe.get(e,"variables.molecule.atoms.0.isotope")==="U"].some(c=>c))return t(e);const a=this.getWallet(),u=this.getPubKey();if(!u)throw new Ke("CipherLink::request() - Node public key missing!");if(!a)throw new Ke("CipherLink::request() - Authorized wallet missing!");const f={query:na(e.query),variables:JSON.stringify(e.variables)};return e.operationName=null,e.query=ue`query ($Hash: String!) { CipherHash(Hash: $Hash) { hash } }`,e.variables={Hash:JSON.stringify(a.encryptMessage(f,u))},t(e).map(c=>{let d=c.data;if(d.data&&(d=d.data),d.CipherHash&&d.CipherHash.hash){const p=JSON.parse(d.CipherHash.hash),y=a.decryptMessage(p);if(y===null)throw new Ke("CipherLink::request() - Unable to decrypt response!");return y}return c})}}class ni extends Ju{constructor({serverUri:e,soketi:t=null,encrypt:n=!1}){const i=au({uri:e,fetch:vy}),s="",o=Kd((d,{headers:p})=>({headers:hn(He({},p),{"X-Auth-Token":s})})),a=tc(by);let u=tu([o,a,i]),f;n&&(f=new _y,u=tu([f,u]));let c;t&&t.socketUri&&(c=new Yd(ry({url:t.socketUri,connectionParams:()=>({authToken:s})})),u=pp(({query:d})=>{const p=ur(d);return p.kind==="OperationDefinition"&&p.operation==="subscription"},c,u)),super({link:u,cache:new Qu,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),this.serverUri=e,this.soketi=t,this.authToken=s,this.pubkey=null,this.wallet=null,this.cipherLink=f,this.wsLink=c}setAuthData({token:e,pubkey:t,wallet:n}){this.authToken=e,this.pubkey=t,this.wallet=n,this.cipherLink&&(this.cipherLink.setWallet(n),this.cipherLink.setPubKey(t)),this.wsLink&&(this.wsLink.client.connectionParams=()=>({authToken:this.authToken}))}socketDisconnect(){this.wsLink&&this.wsLink.client.dispose()}getAuthToken(){return this.authToken}getPubKey(){return this.pubkey}getWallet(){return this.wallet}getServerUri(){return this.serverUri}getSocketUri(){return this.soketi?this.soketi.socketUri:null}}class Sy{constructor(e){this.$__client=e,this.$__subscribers={}}setClient(e){this.$__client=e}subscribe(e,t){const n=this.$__client.subscribe(e).subscribe(t);return this.$__subscribers[e.operationName]=n,n}unsubscribe(e){this.$__subscribers[e]&&(this.$__subscribers[e].unsubscribe(),this.$__client.unsubscribeFromChannel(e),delete this.$__subscribers[e])}unsubscribeAll(){Object.keys(this.$__subscribers).forEach(this.unsubscribe.bind(this))}clear(){this.$__subscribers={}}}class ky{constructor({serverUri:e,socket:t=null,encrypt:n=!1}){this.$__client=new ni({serverUri:e,soketi:t,encrypt:n}),this.$__subscriptionManager=new Sy(this.$__client)}setEncryption(e=!1){const t={serverUri:this.$__client.getServerUri(),soketi:{socketUri:this.$__client.getSocketUri(),appKey:"knishio"},encrypt:e};this.$__client=new ni(t),this.$__subscriptionManager.setClient(this.$__client)}unsubscribe(e){this.$__subscriptionManager.unsubscribe(e)}unsubscribeAll(){this.$__subscriptionManager.unsubscribeAll()}socketDisconnect(){this.$__client.socketDisconnect(),this.$__subscriptionManager.clear()}subscribe(e,t){return this.$__subscriptionManager.subscribe(e,t)}query(e){return L(this,null,function*(){return this.$__client.query(e)})}mutate(e){return L(this,null,function*(){return this.$__client.mutate(e)})}setAuthData({token:e,pubkey:t,wallet:n}){this.$__client.setAuthData({token:e,pubkey:t,wallet:n})}getAuthToken(){return this.$__client.getAuthToken()}getUri(){return this.$__client?this.$__client.getServerUri():null}getSocketUri(){return this.$__client.getSocketUri()}setUri(e){const t={serverUri:e,soketi:{socketUri:this.$__client.getSocketUri(),appKey:"knishio"},encrypt:!!this.$__client.cipherLink};this.$__client=new ni(t),this.$__subscriptionManager.setClient(this.$__client)}setSocketUri({socketUri:e,appKey:t}){const n={serverUri:this.$__client.getServerUri(),soketi:{socketUri:e,appKey:t},encrypt:!!this.$__client.cipherLink};this.$__client=new ni(n),this.$__subscriptionManager.setClient(this.$__client)}}class ii{constructor(e){this.client=e,this.$__variables=null,this.$__subscribe=null}createSubscribe({variables:e=null}){if(this.$__variables=this.compiledVariables(e),!this.uri())throw new Ke("Subscribe::createSubscribe() - Node URI was not initialized for this client instance!");if(this.$__subscribe===null)throw new Ke("Subscribe::createSubscribe() - GraphQL subscription was not initialized!");return{query:this.$__subscribe,variables:this.variables(),fetchPolicy:"no-cache"}}execute(n){return L(this,arguments,function*({variables:e=null,closure:t}){if(!t)throw new Ke(`${this.constructor.name}::execute() - closure parameter is required!`);return this.$__request=this.createSubscribe({variables:e}),this.client.subscribe(this.$__request,t)})}compiledVariables(e=null){return e||{}}uri(){return this.client.getUri()}variables(){return this.$__variables}}class xy extends ii{constructor(e){super(e),this.$__subscribe=ue`
      subscription onCreateMolecule ( $bundle: String! ) {
        CreateMolecule( bundle: $bundle ) {
          molecularHash,
          cellSlug,
          counterparty,
          bundleHash,
          status,
          local,
          height,
          depth,
          createdAt,
          receivedAt,
          processedAt,
          broadcastedAt,
          reason,
          reasonPayload,
          payload,
          status,
          atoms {
            molecularHash,
            position,
            isotope,
            walletAddress,
            tokenSlug,
            batchId,
            value,
            index,
            metaType,
            metaId,
            metasJson,
            otsFragment,
            createdAt,
            metas {
              molecularHash,
              position,
              metaType,
              metaId,
              key,
              value,
              createdAt,
            }
          }
        }
      }
    `}}class Ty extends ii{constructor(e){super(e),this.$__subscribe=ue`
      subscription onWalletStatus ( $bundle: String!, $token: String! ) {
        WalletStatus( bundle: $bundle, token: $token ) {
          bundle,
          token,
          admission,
          balance,
        }
      }
    `}}class Iy extends ii{constructor(e){super(e),this.$__subscribe=ue`
      subscription onActiveWallet ( $bundle: String! ) {
        ActiveWallet( bundle: $bundle ) {
          address,
          bundleHash,
          walletBundle {
            bundleHash,
            slug,
            createdAt,
          },
          tokenSlug,
          token {
            slug,
            name,
            fungibility,
            supply,
            decimals,
            amount,
            icon,
            createdAt
          },
          batchId,
          position,
          characters,
          pubkey,
          amount,
          createdAt,
          metas {
            molecularHash,
            position,
            metaType,
            metaId,
            key,
            value,
            createdAt,
          }
        }
      }
    `}}class Ay extends ii{constructor(e){super(e),this.$__subscribe=ue`
      subscription onActiveUser ( $metaType: String!, $metaId: String! ) {
        ActiveUser( metaType: $metaType, metaId: $metaId ) {
          bundleHash,
          metaType,
          metaId,
          jsonData,
          createdAt,
          updatedAt
        }
      }`}}class Oy extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ActiveSession"})}}class Cy extends As{constructor(e,t){super(e,t),this.$__query=ue`mutation(
      $bundleHash: String!,
      $metaType: String!,
      $metaId: String!,
      $ipAddress: String,
      $browser: String,
      $osCpu: String,
      $resolution: String,
      $timeZone: String,
      $json: String ) {
      ActiveSession(
        bundleHash: $bundleHash,
        metaType: $metaType,
        metaId: $metaId,
        ipAddress: $ipAddress,
        browser: $browser,
        osCpu: $osCpu,
        resolution: $resolution,
        timeZone: $timeZone,
        json: $json
      ) {
        bundleHash,
        metaType,
        metaId,
        jsonData,
        createdAt,
        updatedAt
      }
    }`}createResponse(e){return new Oy({query:this,json:e})}}class Ry extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ActiveUser"})}payload(){const e=this.data();if(!e)return null;const t=[];for(const n of e){const i=He({},n);i.jsonData&&(i.jsonData=JSON.parse(i.jsonData)),i.createdAt&&(i.createdAt=new Date(i.createdAt)),i.updatedAt&&(i.updatedAt=new Date(i.updatedAt)),t.push(i)}return t}}class Ny extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query ActiveUserQuery ($bundleHash:String, $metaType: String, $metaId: String) {
      ActiveUser (bundleHash: $bundleHash, metaType: $metaType, metaId: $metaId) {
        bundleHash,
        metaType,
        metaId,
        jsonData,
        createdAt,
        updatedAt
      }
    }`}createResponse(e){return new Ry({query:this,json:e})}}class Dy extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.UserActivity"})}payload(){const e=JSON.parse(JSON.stringify(this.data()));if(e.instances)for(const t of e.instances)t.jsonData=JSON.parse(t.jsonData);return e}}class Fy extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query UserActivity (
      $bundleHash:String,
      $metaType: String,
      $metaId: String,
      $ipAddress: String,
      $browser: String,
      $osCpu: String,
      $resolution: String,
      $timeZone: String,
      $countBy: [CountByUserActivity],
      $interval: span
    ) {
      UserActivity (
        bundleHash: $bundleHash,
        metaType: $metaType,
        metaId: $metaId,
        ipAddress: $ipAddress,
        browser: $browser,
        osCpu: $osCpu,
        resolution: $resolution,
        timeZone: $timeZone,
        countBy: $countBy,
        interval: $interval
      ) {
        createdAt,
        bundleHash,
        metaType,
        metaId,
        instances {
          bundleHash,
          metaType,
          metaId,
          jsonData,
          createdAt,
          updatedAt
        },
        instanceCount {
          ...SubFields,
          ...Recursive
        }
      }
    }

    fragment SubFields on InstanceCountType {
      id,
      count
    }

    fragment Recursive on InstanceCountType {
      instances {
        ...SubFields
        instances {
          ...SubFields,
          instances {
            ...SubFields
            instances {
              ...SubFields
              instances {
                ...SubFields
                instances {
                  ...SubFields
                  instances {
                    ...SubFields
                    instances {
                      ...SubFields
                    }
                  }
                }
              }
            }
          }
        }
      }
    }`}createResponse(e){return new Dy({query:this,json:e})}}class My extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $slug: String, $slugs: [ String! ], $limit: Int, $order: String ) {
      Token( slug: $slug, slugs: $slugs, limit: $limit, order: $order ) {
        slug,
        name,
        fungibility,
        supply,
        decimals,
        amount,
        icon,
      }
    }`}createResponse(e){return new _e({query:this,json:e,dataKey:"data.Token"})}}class cc extends ie{constructor(e="Authorization attempt rejected by ledger.",t=null,n=null){super(e,t,n),this.name="AuthorizationRejectedException"}}class By extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Atom"})}payload(){const e=this.data();if(!e)return null;const t={instances:[],instanceCount:{},paginatorInfo:{}};if(e.instances){t.instances=e.instances;for(const n in t.instances){const i=t.instances[n];i.metasJson&&(t.instances[n].metas=JSON.parse(i.metasJson))}}return e.instanceCount&&(t.instanceCount=e.instanceCount),e.paginatorInfo&&(t.paginatorInfo=e.paginatorInfo),t}metas(){const e=this.payload(),t=[];if(e&&e.instances)for(const n of e.instances)n.metasJson&&t.push(JSON.parse(n.metasJson));return t}}class lc extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query(
      $molecularHashes: [String!],
      $bundleHashes: [String!],
      $positions:[String!],
      $walletAddresses: [String!],
      $isotopes: [String!],
      $tokenSlugs: [String!],
      $cellSlugs: [String!],
      $batchIds: [String!],
      $values: [String!],
      $metaTypes: [String!],
      $metaIds: [String!],
      $indexes: [String!],
      $filter: [ MetaFilter! ],
      $latest: Boolean,
      $queryArgs: QueryArgs,
    ) {
      Atom(
        molecularHashes: $molecularHashes,
        bundleHashes: $bundleHashes,
        positions: $positions,
        walletAddresses: $walletAddresses,
        isotopes: $isotopes,
        tokenSlugs: $tokenSlugs,
        cellSlugs: $cellSlugs,
        batchIds: $batchIds,
        values: $values,
        metaTypes: $metaTypes,
        metaIds: $metaIds,
        indexes: $indexes,
        filter: $filter,
        latest: $latest,
        queryArgs: $queryArgs,
      ) {
        instances {
          position,
          walletAddress,
          tokenSlug,
          isotope,
          index,
          molecularHash,
          metaId,
          metaType,
          metasJson,
          batchId,
          value,
          bundleHashes,
          cellSlugs,
          createdAt,
          otsFragment
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({molecularHashes:e,molecularHash:t,bundleHashes:n,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:u,isotopes:f,isotope:c,tokenSlugs:d,tokenSlug:p,cellSlugs:y,cellSlug:v,batchIds:w,batchId:E,values:b,value:k,metaTypes:S,metaType:A,metaIds:O,metaId:N,indexes:D,index:M,filter:P,latest:W,queryArgs:X}){return t&&(e=e||[],e.push(t)),i&&(n=n||[],n.push(i)),o&&(s=s||[],s.push(o)),u&&(a=a||[],a.push(u)),c&&(f=f||[],f.push(c)),p&&(d=d||[],d.push(p)),v&&(y=y||[],y.push(v)),E&&(w=w||[],w.push(E)),k&&(b=b||[],b.push(k)),A&&(S=S||[],S.push(A)),N&&(O=O||[],O.push(N)),M&&(D=D||[],D.push(M)),{molecularHashes:e,bundleHashes:n,positions:s,walletAddresses:a,isotopes:f,tokenSlugs:d,cellSlugs:y,batchIds:w,values:b,metaTypes:S,metaIds:O,indexes:D,filter:P,latest:W,queryArgs:X}}createResponse(e){return new By({query:this,json:e})}}class $y extends _e{constructor({query:e,json:t}){super({query:e,json:t}),this.dataKey="data.Policy",this.init()}payload(){const e=this.data();return e&&e.callback?JSON.parse(e.callback):null}}class Py extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query( $metaType: String, $metaId: String, ) {
      Policy( metaType: $metaType, metaId: $metaId ) {
        molecularHash,
        position,
        metaType,
        metaId,
        conditions,
        callback,
        rule,
        createdAt
      }
    }`}createResponse(e){return new $y({query:this,json:e})}}class Ly extends _e{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.MetaTypeViaAtom"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={instances:{},instanceCount:{},paginatorInfo:{}},n=e.pop();return n.instances&&(t.instances=n.instances),n.instanceCount&&(t.instanceCount=n.instanceCount),n.paginatorInfo&&(t.paginatorInfo=n.paginatorInfo),t}}class fc extends Pe{constructor(e,t){super(e,t),this.$__query=ue`query ($metaTypes: [String!], $metaIds: [String!], $values: [String!], $keys: [String!], $latest: Boolean, $filter: [MetaFilter!], $queryArgs: QueryArgs, $countBy: String, $atomValues: [String!] ) {
      MetaTypeViaAtom(
        metaTypes: $metaTypes
        metaIds: $metaIds
        atomValues: $atomValues
        filter: $filter,
        latest: $latest,
        queryArgs: $queryArgs
        countBy: $countBy
      ) {
        metaType,
        instanceCount {
          key,
          value
        },
        instances {
          metaType,
          metaId,
          createdAt,
          metas( values: $values, keys: $keys ) {
            molecularHash,
            position,
            key,
            value,
            createdAt
          }
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({metaType:e=null,metaId:t=null,key:n=null,value:i=null,keys:s=null,values:o=null,atomValues:a=null,latest:u=null,latestMetas:f=!0,filter:c=null,queryArgs:d=null,countBy:p=null}){const y={};return a&&(y.atomValues=a),s&&(y.keys=s),o&&(y.values=o),e&&(y.metaTypes=typeof e=="string"?[e]:e),t&&(y.metaIds=typeof t=="string"?[t]:t),p&&(y.countBy=p),c&&(y.filter=c),n&&i&&(y.filter=y.filter||[],y.filter.push({key:n,value:i,comparison:"="})),u&&(y.latest=!!u,y.latest=!!f),d&&((typeof d.limit=="undefined"||d.limit===0)&&(d.limit="*"),y.queryArgs=d),y}createResponse(e){return new Ly({query:this,json:e})}}class Uy extends ut{}class qy extends Oe{fillMolecule({metaType:e,metaId:t,rule:n,policy:i}){this.$__molecule.createRule({metaType:e,metaId:t,rule:n,policy:i}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Uy({query:this,json:e})}}class jy extends Oe{fillMolecule({amount:e,tradeRates:t}){this.$__molecule.initDepositBuffer({amount:e,tradeRates:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}}class Qy extends Oe{fillMolecule({recipients:e,signingWallet:t}){this.$__molecule.initWithdrawBuffer({recipients:e,signingWallet:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}}function gt(r,e,t,n){return new(t||(t=Promise))(function(i,s){function o(f){try{u(n.next(f))}catch(c){s(c)}}function a(f){try{u(n.throw(f))}catch(c){s(c)}}function u(f){var c;f.done?i(f.value):(c=f.value,c instanceof t?c:new t(function(d){d(c)})).then(o,a)}u((n=n.apply(r,[])).next())})}function vt(r,e){var t,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(f){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(o=0)),o;)try{if(t=1,n&&(i=2&c[0]?n.return:c[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,c[1])).done)return i;switch(n=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,n=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(r,o)}catch(d){c=[6,d],n=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,f])}}}typeof SuppressedError=="function"&&SuppressedError;var bt={exclude:[]},hc={},Vy={timeout:"true"},tt=function(r,e){typeof window!="undefined"&&(hc[r]=e)},Hy=function(){return Object.fromEntries(Object.entries(hc).filter(function(r){var e,t=r[0];return!(!((e=bt==null?void 0:bt.exclude)===null||e===void 0)&&e.includes(t))}).map(function(r){return[r[0],(0,r[1])()]}))},pc=3432918353,dc=461845907,Wy=3864292196,zy=2246822507,Ky=3266489909;function Ds(r,e){return r<<e|r>>>32-e}function Fs(r,e){e===void 0&&(e=0);for(var t=e,n=0,i=3&r.length,s=r.length-i,o=0;o<s;)n=255&r.charCodeAt(o)|(255&r.charCodeAt(++o))<<8|(255&r.charCodeAt(++o))<<16|(255&r.charCodeAt(++o))<<24,++o,n=Ds(n=Math.imul(n,pc),15),t=Ds(t^=n=Math.imul(n,dc),13),t=Math.imul(t,5)+Wy;switch(n=0,i){case 3:n^=(255&r.charCodeAt(o+2))<<16;case 2:n^=(255&r.charCodeAt(o+1))<<8;case 1:n^=255&r.charCodeAt(o),n=Ds(n=Math.imul(n,pc),15),t^=n=Math.imul(n,dc)}return((t=function(a){return a^=a>>>16,a=Math.imul(a,zy),a^=a>>>13,a=Math.imul(a,Ky),a^a>>>16}(t^=r.length))>>>0).toString(36)}function Gy(r,e){return new Promise(function(t){setTimeout(function(){return t(e)},r)})}function Jy(r,e,t){return Promise.all(r.map(function(n){return Promise.race([n,Gy(e,t)])}))}function yc(){return gt(this,void 0,void 0,function(){var r,e,t,n,i;return vt(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),r=Hy(),e=Object.keys(r),[4,Jy(Object.values(r),(bt==null?void 0:bt.timeout)||1e3,Vy)];case 1:return t=s.sent(),n=t.filter(function(o){return o!==void 0}),i={},n.forEach(function(o,a){i[e[a]]=o}),[2,mc(i,bt.exclude||[])];case 2:throw s.sent();case 3:return[2]}})})}function mc(r,e){var t={},n=function(s){if(r.hasOwnProperty(s)){var o=r[s];if(typeof o!="object"||Array.isArray(o))e.includes(s)||(t[s]=o);else{var a=mc(o,e.map(function(u){return u.startsWith(s+".")?u.slice(s.length+1):u}));Object.keys(a).length>0&&(t[s]=a)}}};for(var i in r)n(i);return t}function Yy(r){return gt(this,void 0,void 0,function(){var e,t;return vt(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,yc()];case 1:return e=n.sent(),t=Fs(JSON.stringify(e)),[2,t.toString()];case 2:throw n.sent();case 3:return[2]}})})}function Xy(r){for(var e=0,t=0;t<r.length;++t)e+=Math.abs(r[t]);return e}function gc(r,e,t){for(var n=[],i=0;i<r[0].data.length;i++){for(var s=[],o=0;o<r.length;o++)s.push(r[o].data[i]);n.push(Zy(s))}var a=new Uint8ClampedArray(n);return new ImageData(a,e,t)}function Zy(r){if(r.length===0)return 0;for(var e={},t=0,n=r;t<n.length;t++)e[s=n[t]]=(e[s]||0)+1;var i=r[0];for(var s in e)e[s]>e[i]&&(i=parseInt(s,10));return i}function ln(){if(typeof navigator=="undefined")return{name:"unknown",version:"unknown"};for(var r=navigator.userAgent,e={Edg:"Edge",OPR:"Opera"},t=0,n=[new RegExp("(?<name>Edge|Edg)\\/(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\\/(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\\/(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>Safari)\\/(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>MSIE|Trident|IEMobile).+?(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>[A-Za-z]+)\\/(?<version>\\d+(?:\\.\\d+)?)"),new RegExp("(?<name>SamsungBrowser)\\/(?<version>\\d+(?:\\.\\d+)?)")];t<n.length;t++){var i=n[t],s=r.match(i);if(s&&s.groups)return{name:e[s.groups.name]||s.groups.name,version:s.groups.version}}return{name:"unknown",version:"unknown"}}tt("audio",function(){return gt(this,void 0,void 0,function(){return vt(this,function(r){return[2,new Promise(function(e,t){try{var n=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),i=n.createBufferSource(),s=n.createOscillator();s.frequency.value=1e3;var o,a=n.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.2,s.connect(a),a.connect(n.destination),s.start(),n.oncomplete=function(u){o=u.renderedBuffer.getChannelData(0),e({sampleHash:Xy(o),oscillator:s.type,maxChannels:n.destination.maxChannelCount,channelCountMode:i.channelCountMode})},n.startRendering()}catch(u){console.error("Error creating audio fingerprint:",u),t(u)}})]})})});var em=ln().name!=="SamsungBrowser"?1:3,vc=280,bc=20;ln().name!="Firefox"&&tt("canvas",function(){return document.createElement("canvas").getContext("2d"),new Promise(function(r){var e=Array.from({length:em},function(){return function(){var t=document.createElement("canvas"),n=t.getContext("2d");if(!n)return new ImageData(1,1);t.width=vc,t.height=bc;var i=n.createLinearGradient(0,0,t.width,t.height);i.addColorStop(0,"red"),i.addColorStop(.16666666666666666,"orange"),i.addColorStop(.3333333333333333,"yellow"),i.addColorStop(.5,"green"),i.addColorStop(.6666666666666666,"blue"),i.addColorStop(.8333333333333334,"indigo"),i.addColorStop(1,"violet"),n.fillStyle=i,n.fillRect(0,0,t.width,t.height);var s="Random Text WMwmil10Oo";n.font="23.123px Arial",n.fillStyle="black",n.fillText(s,-5,15),n.fillStyle="rgba(0, 0, 255, 0.5)",n.fillText(s,-3.3,17.7),n.beginPath(),n.moveTo(0,0),n.lineTo(2*t.width/7,t.height),n.strokeStyle="white",n.lineWidth=2,n.stroke();var o=n.getImageData(0,0,t.width,t.height);return o}()});r({commonImageDataHash:Fs(gc(e,vc,bc).data.toString()).toString()})})});var Ms,tm=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],rm=["monospace","sans-serif","serif"];function wc(r,e){if(!r)throw new Error("Canvas context not supported");return r.font,r.font="72px ".concat(e),r.measureText("WwMmLli0Oo").width}function nm(){var r,e=document.createElement("canvas"),t=(r=e.getContext("webgl"))!==null&&r!==void 0?r:e.getContext("experimental-webgl");if(t&&"getParameter"in t){var n=t.getExtension("WEBGL_debug_renderer_info");return{vendor:(t.getParameter(t.VENDOR)||"").toString(),vendorUnmasked:n?(t.getParameter(n.UNMASKED_VENDOR_WEBGL)||"").toString():"",renderer:(t.getParameter(t.RENDERER)||"").toString(),rendererUnmasked:n?(t.getParameter(n.UNMASKED_RENDERER_WEBGL)||"").toString():"",version:(t.getParameter(t.VERSION)||"").toString(),shadingLanguageVersion:(t.getParameter(t.SHADING_LANGUAGE_VERSION)||"").toString()}}return"undefined"}function im(){var r=new Float32Array(1),e=new Uint8Array(r.buffer);return r[0]=1/0,r[0]=r[0]-r[0],e[3]}function sm(r,e){var t={};return e.forEach(function(n){var i=function(s){if(s.length===0)return null;var o={};s.forEach(function(f){var c=String(f);o[c]=(o[c]||0)+1});var a=s[0],u=1;return Object.keys(o).forEach(function(f){o[f]>u&&(a=f,u=o[f])}),a}(r.map(function(s){return n in s?s[n]:void 0}).filter(function(s){return s!==void 0}));i&&(t[n]=i)}),t}function om(){var r=[],e={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(e).forEach(function(t){e[t].forEach(function(n){matchMedia("(".concat(t,": ").concat(n,")")).matches&&r.push("".concat(t,": ").concat(n))})}),r}function am(){if(window.location.protocol==="https:"&&typeof window.ApplePaySession=="function")try{for(var r=window.ApplePaySession.supportsVersion,e=15;e>0;e--)if(r(e))return e}catch(t){return 0}return 0}ln().name!="Firefox"&&tt("fonts",function(){var r=this;return new Promise(function(e,t){try{(function(n){var i;gt(this,void 0,void 0,function(){var s,o,a;return vt(this,function(u){switch(u.label){case 0:return document.body?[3,2]:[4,(f=50,new Promise(function(d){return setTimeout(d,f,c)}))];case 1:return u.sent(),[3,0];case 2:if((s=document.createElement("iframe")).setAttribute("frameBorder","0"),(o=s.style).setProperty("position","fixed"),o.setProperty("display","block","important"),o.setProperty("visibility","visible"),o.setProperty("border","0"),o.setProperty("opacity","0"),s.src="about:blank",document.body.appendChild(s),!(a=s.contentDocument||((i=s.contentWindow)===null||i===void 0?void 0:i.document)))throw new Error("Iframe document is not accessible");return n({iframe:a}),setTimeout(function(){document.body.removeChild(s)},0),[2]}var f,c})})})(function(n){var i=n.iframe;return gt(r,void 0,void 0,function(){var s,o,a,u;return vt(this,function(f){return s=i.createElement("canvas"),o=s.getContext("2d"),a=rm.map(function(c){return wc(o,c)}),u={},tm.forEach(function(c){var d=wc(o,c);a.includes(d)||(u[c]=d)}),e(u),[2]})})})}catch(n){t({error:"unsupported"})}})}),tt("hardware",function(){return new Promise(function(r,e){var t=navigator.deviceMemory!==void 0?navigator.deviceMemory:0,n=window.performance&&window.performance.memory?window.performance.memory:0;r({videocard:nm(),architecture:im(),deviceMemory:t.toString()||"undefined",jsHeapSizeLimit:n.jsHeapSizeLimit||0})})}),tt("locales",function(){return new Promise(function(r){r({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})}),tt("permissions",function(){return gt(this,void 0,void 0,function(){var r;return vt(this,function(e){return Ms=(bt==null?void 0:bt.permissions_to_check)||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],r=Array.from({length:(bt==null?void 0:bt.retries)||3},function(){return function(){return gt(this,void 0,void 0,function(){var t,n,i,s,o;return vt(this,function(a){switch(a.label){case 0:t={},n=0,i=Ms,a.label=1;case 1:if(!(n<i.length))return[3,6];s=i[n],a.label=2;case 2:return a.trys.push([2,4,,5]),[4,navigator.permissions.query({name:s})];case 3:return o=a.sent(),t[s]=o.state.toString(),[3,5];case 4:return a.sent(),[3,5];case 5:return n++,[3,1];case 6:return[2,t]}})})}()}),[2,Promise.all(r).then(function(t){return sm(t,Ms)})]})})}),tt("plugins",function(){var r=[];if(navigator.plugins)for(var e=0;e<navigator.plugins.length;e++){var t=navigator.plugins[e];r.push([t.name,t.filename,t.description].join("|"))}return new Promise(function(n){n({plugins:r})})}),tt("screen",function(){return new Promise(function(r){r({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:om()})})}),tt("system",function(){return new Promise(function(r){var e=ln();r({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,browser:{name:e.name,version:e.version},applePayVersion:am()})})});var $e,um=ln().name!=="SamsungBrowser"?1:3,U=null;typeof document!="undefined"&&(($e=document.createElement("canvas")).width=200,$e.height=100,U=$e.getContext("webgl")),tt("webgl",function(){return gt(this,void 0,void 0,function(){var r;return vt(this,function(e){try{if(!U)throw new Error("WebGL not supported");return r=Array.from({length:um},function(){return function(){try{if(!U)throw new Error("WebGL not supported");var t=`
          attribute vec2 position;
          void main() {
              gl_Position = vec4(position, 0.0, 1.0);
          }
      `,n=`
          precision mediump float;
          void main() {
              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color
          }
      `,i=U.createShader(U.VERTEX_SHADER),s=U.createShader(U.FRAGMENT_SHADER);if(!i||!s)throw new Error("Failed to create shaders");if(U.shaderSource(i,t),U.shaderSource(s,n),U.compileShader(i),!U.getShaderParameter(i,U.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+U.getShaderInfoLog(i));if(U.compileShader(s),!U.getShaderParameter(s,U.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+U.getShaderInfoLog(s));var o=U.createProgram();if(!o)throw new Error("Failed to create shader program");if(U.attachShader(o,i),U.attachShader(o,s),U.linkProgram(o),!U.getProgramParameter(o,U.LINK_STATUS))throw new Error("Shader program linking failed: "+U.getProgramInfoLog(o));U.useProgram(o);for(var a=137,u=new Float32Array(4*a),f=2*Math.PI/a,c=0;c<a;c++){var d=c*f;u[4*c]=0,u[4*c+1]=0,u[4*c+2]=Math.cos(d)*($e.width/2),u[4*c+3]=Math.sin(d)*($e.height/2)}var p=U.createBuffer();U.bindBuffer(U.ARRAY_BUFFER,p),U.bufferData(U.ARRAY_BUFFER,u,U.STATIC_DRAW);var y=U.getAttribLocation(o,"position");U.enableVertexAttribArray(y),U.vertexAttribPointer(y,2,U.FLOAT,!1,0,0),U.viewport(0,0,$e.width,$e.height),U.clearColor(0,0,0,1),U.clear(U.COLOR_BUFFER_BIT),U.drawArrays(U.LINES,0,2*a);var v=new Uint8ClampedArray($e.width*$e.height*4);return U.readPixels(0,0,$e.width,$e.height,U.RGBA,U.UNSIGNED_BYTE,v),new ImageData(v,$e.width,$e.height)}catch(w){return new ImageData(1,1)}finally{U&&(U.bindBuffer(U.ARRAY_BUFFER,null),U.useProgram(null),U.viewport(0,0,U.drawingBufferWidth,U.drawingBufferHeight),U.clearColor(0,0,0,0))}}()}),[2,{commonImageHash:Fs(gc(r,$e.width,$e.height).data.toString()).toString()}]}catch(t){return[2,{webgl:"unsupported"}]}return[2]})})});var Jt=function(r,e,t,n){for(var i=(t-e)/n,s=0,o=0;o<n;o++)s+=r(e+(o+.5)*i);return s*i};tt("math",function(){return gt(void 0,void 0,void 0,function(){return vt(this,function(r){return[2,{acos:Math.acos(.5),asin:Jt(Math.asin,-1,1,97),atan:Jt(Math.atan,-1,1,97),cos:Jt(Math.cos,0,Math.PI,97),cosh:Math.cosh(1.2857142857142858),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:Jt(Math.sin,-Math.PI,Math.PI,97),sinh:Jt(Math.sinh,-1.2857142857142858,.7777777777777778,97),sqrt:Math.sqrt(2),tan:Jt(Math.tan,0,2*Math.PI,97),tanh:Jt(Math.tanh,-1.2857142857142858,.7777777777777778,97)}]})})});class cm{constructor({uri:e,cellSlug:t=null,client:n=null,socket:i=null,serverSdkVersion:s=3,logging:o=!1}){this.initialize({uri:e,cellSlug:t,socket:i,client:n,serverSdkVersion:s,logging:o})}initialize({uri:e,cellSlug:t=null,socket:n=null,client:i=null,serverSdkVersion:s=3,logging:o=!1}){this.reset(),this.$__logging=o,this.$__uris=typeof e=="object"?e:[e],this.$__authTokenObjects={},this.$__authInProcess=!1,this.abortControllers=new Map,t&&this.setCellSlug(t);for(const a in this.$__uris){const u=this.$__uris[a];this.$__authTokenObjects[u]=null}this.log("info",`KnishIOClient::initialize() - Initializing new Knish.IO client session for SDK version ${s}...`),this.$__client=i||new ky({socket:He({socketUri:null,appKey:"knishio"},n||{}),serverUri:this.getRandomUri()}),this.$__serverSdkVersion=s}getRandomUri(){const e=Math.floor(Math.random()*this.$__uris.length);return this.$__uris[e]}switchEncryption(e){return this.$__encrypt===e?!1:(this.log("info",`KnishIOClient::switchEncryption() - Forcing encryption ${e?"on":"off"} to match node...`),this.$__encrypt=e,this.$__client.setEncryption(e),!0)}deinitialize(){this.log("info","KnishIOClient::deinitialize() - Clearing the Knish.IO client session..."),this.reset()}subscribe(){if(!this.client().getSocketUri())throw new Ke("KnishIOClient::subscribe() - Socket client not initialized!");return this.client()}getServerSdkVersion(){return this.$__serverSdkVersion}reset(){this.$__secret="",this.$__bundle="",this.remainderWallet=null}cellSlug(){return this.$__cellSlug||null}setCellSlug(e){this.$__cellSlug=e}uri(){return this.$__client.getUri()}client(){if(!this.$__authInProcess){const e=this.getRandomUri();this.$__client.setUri(e);const t=this.$__authTokenObjects[e];t?this.$__client.setAuthData(t.getAuthData()):this.requestAuthToken({secret:this.$__secret,cellSlug:this.$__cellSlug,encrypt:this.$__encrypt}).then(()=>{})}return this.$__client}hasSecret(){return!!this.$__secret}setSecret(e){this.$__secret=e,this.$__bundle=this.hashSecret(e,"setSecret")}hashSecret(e,t=null){return console.info(`KnishIOClient::hashSecret(${t?`source: ${t}`:""}) - Computing wallet bundle from secret...`),Ut(e)}getSecret(){if(!this.hasSecret())throw new vi("KnishIOClient::getSecret() - Unable to find a stored secret! Have you set a secret?");return this.$__secret}hasBundle(){return!!this.$__bundle}getBundle(){if(!this.hasBundle())throw new vi("KnishIOClient::getBundle() - Unable to find a stored bundle! Have you set a secret?");return this.$__bundle}getFingerprint(){return Yy()}getFingerprintData(){return yc()}getSourceWallet(){return L(this,null,function*(){let e=(yield this.queryContinuId({bundle:this.getBundle()})).payload();return e?e.key=Y.generateKey({secret:this.getSecret(),token:e.token,position:e.position}):e=new Y({secret:this.getSecret()}),e})}getRemainderWallet(){return this.remainderWallet}createMolecule(s){return L(this,arguments,function*({secret:e=null,bundle:t=null,sourceWallet:n=null,remainderWallet:i=null}){return this.log("info","KnishIOClient::createMolecule() - Creating a new molecule..."),e=e||this.getSecret(),t=t||this.getBundle(),!n&&this.lastMoleculeQuery&&this.getRemainderWallet().token==="USER"&&this.lastMoleculeQuery.response()&&this.lastMoleculeQuery.response().success()&&(n=this.getRemainderWallet()),n===null&&(n=yield this.getSourceWallet()),this.remainderWallet=i||Y.create({secret:e,bundle:t,token:"USER",batchId:n.batchId,characters:n.characters}),new st({secret:e,sourceWallet:n,remainderWallet:this.getRemainderWallet(),cellSlug:this.cellSlug(),version:this.getServerSdkVersion()})})}createQuery(e){return new e(this.client(),this)}createSubscribe(e){return new e(this.subscribe())}createMoleculeMutation(n){return L(this,arguments,function*({mutationClass:e,molecule:t=null}){this.log("info",`KnishIOClient::createMoleculeQuery() - Creating a new ${e.name} query...`);const i=t||(yield this.createMolecule({})),s=new e(this.client(),this,i);if(!(s instanceof Oe))throw new Ke(`${this.constructor.name}::createMoleculeMutation() - This method only accepts MutationProposeMolecule!`);return this.lastMoleculeQuery=s,s})}executeQuery(e,t=null){return L(this,null,function*(){this.$__authToken&&this.$__authToken.isExpired()&&(this.log("info","KnishIOClient::executeQuery() - Access token is expired. Getting new one..."),yield this.requestAuthToken({secret:this.$__secret,cellSlug:this.$__cellSlug,encrypt:this.$__encrypt}));const n=new AbortController,i=JSON.stringify({query:e.$__query,variables:t});this.abortControllers.set(i,n);try{const s=yield e.execute({variables:t,context:{fetchOptions:{signal:n.signal}}});return this.abortControllers.delete(i),s}catch(s){if(s.name==="AbortError")this.log("warn","Query was cancelled");else throw s}})}cancelQuery(e,t=null){const n=JSON.stringify({query:e.$__query,variables:t}),i=this.abortControllers.get(n);i&&(i.abort(),this.abortControllers.delete(n))}cancelAllQueries(){for(const e of this.abortControllers.values())e.abort();this.abortControllers.clear()}queryBalance(i){return L(this,arguments,function*({token:e,bundle:t=null,type:n="regular"}){const s=this.createQuery(Td);return this.executeQuery(s,{bundleHash:t||this.getBundle(),token:e,type:n})})}querySourceWallet(i){return L(this,arguments,function*({token:e,amount:t,type:n="regular"}){const s=(yield this.queryBalance({token:e,type:n})).payload();if(s===null||er.cmp(s.balance,t)<0)throw new dt;if(!s.position||!s.address)throw new dt("Source wallet can not be a shadow wallet.");return s})}subscribeCreateMolecule(n){return L(this,arguments,function*({bundle:e,closure:t}){return yield this.createSubscribe(xy).execute({variables:{bundle:e||this.getBundle()},closure:t})})}subscribeWalletStatus({bundle:e,token:t,closure:n}){if(!t)throw new Ke(`${this.constructor.name}::subscribeWalletStatus() - Token parameter is required!`);return this.createSubscribe(Ty).execute({variables:{bundle:e||this.getBundle(),token:t},closure:n})}subscribeActiveWallet({bundle:e,closure:t}){return this.createSubscribe(Iy).execute({variables:{bundle:e||this.getBundle()},closure:t})}subscribeActiveSession({metaType:e,metaId:t,closure:n}){return this.createSubscribe(Ay).execute({variables:{metaType:e,metaId:t},closure:n})}unsubscribe(e){this.subscribe().unsubscribe(e)}unsubscribeAll(){this.subscribe().unsubscribeAll()}queryMeta({metaType:e,metaId:t=null,key:n=null,value:i=null,latest:s=!0,latestMetas:o=!0,fields:a=null,filter:u=null,queryArgs:f=null,count:c=null,countBy:d=null,throughAtom:p=!0,values:y=null,keys:v=null,atomValues:w=null}){this.log("info",`KnishIOClient::queryMeta() - Querying metaType: ${e}, metaId: ${t}...`);let E,b;return p?(E=this.createQuery(fc),b=fc.createVariables({metaType:e,metaId:t,key:n,value:i,latest:s,latestMetas:o,filter:u,queryArgs:f,countBy:d,values:y,keys:v,atomValues:w})):(E=this.createQuery(Zu),b=Zu.createVariables({metaType:e,metaId:t,key:n,value:i,latest:s,latestMetas:o,filter:u,queryArgs:f,count:c,countBy:d})),this.executeQuery(E,b).then(k=>k.payload())}queryBatch(t){return L(this,arguments,function*({batchId:e}){this.log("info",`KnishIOClient::queryBatch() - Querying cascading meta instances for batchId: ${e}...`);const n=this.createQuery(an);return yield this.executeQuery(n,{batchId:e})})}queryBatchHistory(t){return L(this,arguments,function*({batchId:e}){this.log("info",`KnishIOClient::queryBatchHistory() - Querying cascading meta instances for batchId: ${e}...`);const n=this.createQuery(Ad);return yield this.executeQuery(n,{batchId:e})})}queryAtom(Me){return L(this,arguments,function*({molecularHashes:e,molecularHash:t,bundleHashes:n,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:u,isotopes:f,isotope:c,tokenSlugs:d,tokenSlug:p,cellSlugs:y,cellSlug:v,batchIds:w,batchId:E,values:b,value:k,metaTypes:S,metaType:A,metaIds:O,metaId:N,indexes:D,index:M,filter:P,latest:W,queryArgs:X={limit:15,offset:1}}){this.log("info","KnishIOClient::queryAtom() - Querying atom instances");const se=this.createQuery(lc);return yield this.executeQuery(se,lc.createVariables({molecularHashes:e,molecularHash:t,bundleHashes:n,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:u,isotopes:f,isotope:c,tokenSlugs:d,tokenSlug:p,cellSlugs:y,cellSlug:v,batchIds:w,batchId:E,values:b,value:k,metaTypes:S,metaType:A,metaIds:O,metaId:N,indexes:D,index:M,filter:P,latest:W,queryArgs:X}))})}createWallet(t){return L(this,arguments,function*({token:e}){const n=new Y({secret:this.getSecret(),token:e}),i=yield this.createMoleculeMutation({mutationClass:Vd});return i.fillMolecule(n),yield this.executeQuery(i)})}queryActiveSession(i){return L(this,arguments,function*({bundleHash:e,metaType:t,metaId:n}){const s=this.createQuery(Ny);return yield this.executeQuery(s,{bundleHash:e,metaType:t,metaId:n})})}queryUserActivity(d){return L(this,arguments,function*({bundleHash:e,metaType:t,metaId:n,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:u,countBy:f,interval:c}){const p=this.createQuery(Fy);return yield this.executeQuery(p,{bundleHash:e,metaType:t,metaId:n,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:u,countBy:f,interval:c})})}activeSession(c){return L(this,arguments,function*({bundle:e,metaType:t,metaId:n,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:u,json:f={}}){const d=this.createQuery(Cy);return yield this.executeQuery(d,{bundleHash:e,metaType:t,metaId:n,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:u,json:JSON.stringify(f)})})}createToken(o){return L(this,arguments,function*({token:e,amount:t=null,meta:n=null,batchId:i=null,units:s=[]}){const a=pe.get(n||{},"fungibility");if(a==="stackable"&&(n.batchId=i||_n({})),["nonfungible","stackable"].includes(a)&&s.length>0){if(pe.get(n||{},"decimals")>0)throw new zd;if(t>0)throw new ri;t=s.length,n.splittable=1,n.decimals=0,n.tokenUnits=JSON.stringify(s)}const u=new Y({secret:this.getSecret(),bundle:this.getBundle(),token:e,batchId:i}),f=yield this.createMoleculeMutation({mutationClass:Nd});return f.fillMolecule({recipientWallet:u,amount:t,meta:n||{}}),yield this.executeQuery(f)})}createRule(s){return L(this,arguments,function*({metaType:e,metaId:t,rule:n,policy:i={}}){const o=yield this.createMoleculeMutation({mutationClass:qy,molecule:yield this.createMolecule({secret:this.getSecret(),sourceWallet:yield this.getSourceWallet()})});return o.fillMolecule({metaType:e,metaId:t,rule:n,policy:i}),yield this.executeQuery(o)})}createMeta(s){return L(this,arguments,function*({metaType:e,metaId:t,meta:n=null,policy:i={}}){const o=yield this.createMoleculeMutation({mutationClass:jd,molecule:yield this.createMolecule({secret:this.getSecret(),sourceWallet:yield this.getSourceWallet()})}),a=n||{};return o.fillMolecule({metaType:e,metaId:t,meta:a,policy:i}),yield this.executeQuery(o)})}createIdentifier(i){return L(this,arguments,function*({type:e,contact:t,code:n}){const s=yield this.createMoleculeMutation({mutationClass:Pd});return s.fillMolecule({type:e,contact:t,code:n}),yield this.executeQuery(s)})}createPolicy(i){return L(this,arguments,function*({metaType:e,metaId:t,policy:n={}}){const s=yield this.createMolecule({});s.addPolicyAtom({metaType:e,metaId:t,meta:{},policy:n}),s.addContinuIdAtom(),s.sign({bundle:this.getBundle()}),s.check();const o=yield this.createMoleculeMutation({mutationClass:Oe,molecule:s});return yield this.executeQuery(o)})}queryPolicy(n){return L(this,arguments,function*({metaType:e,metaId:t}){const i=this.createQuery(Py);return yield this.executeQuery(i,{metaType:e,metaId:t})})}queryWallets({bundle:e=null,token:t=null,unspent:n=!0}){this.log("info",`KnishIOClient::queryWallets() - Querying wallets${e?` for ${e}`:""}...`);const i=this.createQuery(kd);return this.executeQuery(i,{bundleHash:e||this.getBundle(),tokenSlug:t,unspent:n}).then(s=>s.payload())}queryBundle({bundle:e=null,fields:t=null,raw:n=!1}){this.log("info",`KnishIOClient::queryBundle() - Querying wallet bundle metadata${e?` for ${e}`:""}...`),e||(e=this.getBundle()),typeof e=="string"&&(e=[e]);const i=this.createQuery(Sd);return this.executeQuery(i,{bundleHashes:e}).then(s=>n?s:s.payload())}queryContinuId(t){return L(this,arguments,function*({bundle:e}){const n=this.createQuery(Ed);return this.executeQuery(n,{bundle:e})})}requestTokens(a){return L(this,arguments,function*({token:e,to:t,amount:n=null,units:i=[],meta:s=null,batchId:o=null}){let u,f;s=s||{};const c=this.createQuery(My),d=yield this.executeQuery(c,{slug:e}),p=pe.get(d.data(),"0.fungibility")==="stackable";if(!p&&o!==null)throw new An("Expected Batch ID = null for non-stackable tokens.");if(p&&o===null&&(o=_n({})),i.length>0){if(n>0)throw new ri;n=i.length,s.tokenUnits=JSON.stringify(i)}t?(Object.prototype.toString.call(t)==="[object String]"&&(Y.isBundleHash(t)?(u="walletBundle",f=t):t=Y.create({secret:t,token:e})),t instanceof Y&&(u="wallet",s.position=t.position,s.bundle=t.bundle,f=t.address)):(u="walletBundle",f=this.getBundle());const y=yield this.createMoleculeMutation({mutationClass:Fd});return y.fillMolecule({token:e,amount:n,metaType:u,metaId:f,meta:s,batchId:o}),yield this.executeQuery(y)})}claimShadowWallet(i){return L(this,arguments,function*({token:e,batchId:t=null,molecule:n=null}){const s=yield this.createMoleculeMutation({mutationClass:Ud,molecule:n});return s.fillMolecule({token:e,batchId:t}),yield this.executeQuery(s)})}claimShadowWallets(t){return L(this,arguments,function*({token:e}){const n=yield this.queryWallets({token:e});if(!n||!Array.isArray(n))throw new ec;n.forEach(s=>{if(!s.isShadow())throw new ec});const i=[];for(const s of n)i.push(yield this.claimShadowWallet({token:e,batchId:s.batchId}));return i})}transferToken(a){return L(this,arguments,function*({bundleHash:e,token:t,amount:n=null,units:i=[],batchId:s=null,sourceWallet:o=null}){if(i.length>0){if(n>0)throw new ri;n=i.length}if(o===null&&(o=yield this.querySourceWallet({token:t,amount:n})),o===null||er.cmp(o.balance,n)<0)throw new dt;const u=Y.create({bundle:e,token:t});s!==null?u.batchId=s:u.initBatchId({sourceWallet:o});const f=o.createRemainder(this.getSecret());o.splitUnits(i,f,u);const c=yield this.createMolecule({sourceWallet:o,remainderWallet:f}),d=yield this.createMoleculeMutation({mutationClass:Bd,molecule:c});return d.fillMolecule({recipientWallet:u,amount:n}),yield this.executeQuery(d)})}depositBufferToken(s){return L(this,arguments,function*({tokenSlug:e,amount:t,tradeRates:n,sourceWallet:i=null}){i===null&&(i=yield this.querySourceWallet({token:e,amount:t}));const o=i.createRemainder(this.getSecret()),a=yield this.createMolecule({sourceWallet:i,remainderWallet:o}),u=yield this.createMoleculeMutation({mutationClass:jy,molecule:a});return u.fillMolecule({amount:t,tradeRates:n}),yield this.executeQuery(u)})}withdrawBufferToken(s){return L(this,arguments,function*({tokenSlug:e,amount:t,sourceWallet:n=null,signingWallet:i=null}){n===null&&(n=yield this.querySourceWallet({token:e,amount:t,type:"buffer"}));const o=n,a=yield this.createMolecule({sourceWallet:n,remainderWallet:o}),u=yield this.createMoleculeMutation({mutationClass:Qy,molecule:a}),f={};return f[this.getBundle()]=t,u.fillMolecule({recipients:f,signingWallet:i}),yield this.executeQuery(u)})}burnTokens(s){return L(this,arguments,function*({token:e,amount:t=null,units:n=[],sourceWallet:i=null}){i===null&&(i=yield this.querySourceWallet({token:e,amount:t}));const o=i.createRemainder(this.getSecret());if(n.length>0){if(t>0)throw new ri;t=n.length,i.splitUnits(n,o)}const a=yield this.createMolecule({sourceWallet:i,remainderWallet:o});a.burnToken({amount:t}),a.sign({bundle:this.getBundle()}),a.check();const u=yield this.createMoleculeMutation({mutationClass:Oe,molecule:a});return this.executeQuery(u)})}replenishToken(s){return L(this,arguments,function*({token:e,amount:t=null,units:n=[],sourceWallet:i=null}){if(i===null&&(i=(yield this.queryBalance({token:e})).payload()),!i)throw new dt("Source wallet is missing or invalid.");const o=i.createRemainder(this.getSecret()),a=yield this.createMolecule({sourceWallet:i,remainderWallet:o});a.replenishToken({amount:t,units:n}),a.sign({bundle:this.getBundle()}),a.check();const u=yield this.createMoleculeMutation({mutationClass:Oe,molecule:a});return this.executeQuery(u)})}fuseToken(o){return L(this,arguments,function*({bundleHash:e,tokenSlug:t,newTokenUnit:n,fusedTokenUnitIds:i,sourceWallet:s=null}){if(s===null&&(s=(yield this.queryBalance({token:t})).payload()),s===null)throw new dt("Source wallet is missing or invalid.");if(!s.tokenUnits||!s.tokenUnits.length)throw new dt("Source wallet does not have token units.");if(!i.length)throw new dt("Fused token unit list is empty.");const a=[];s.tokenUnits.forEach(p=>{a.push(p.id)}),i.forEach(p=>{if(!a.includes(p))throw new dt(`Fused token unit ID = ${p} does not found in the source wallet.`)});const u=Y.create({bundle:e,token:t});u.initBatchId({sourceWallet:s});const f=s.createRemainder(this.getSecret());s.splitUnits(i,f),n.metas.fusedTokenUnits=s.getTokenUnitsData(),u.tokenUnits=[n];const c=yield this.createMolecule({sourceWallet:s,remainderWallet:f});c.fuseToken(s.tokenUnits,u),c.sign({bundle:this.getBundle()}),c.check();const d=yield this.createMoleculeMutation({mutationClass:Oe,molecule:c});return this.executeQuery(d)})}requestGuestAuthToken(n){return L(this,arguments,function*({cellSlug:e,encrypt:t}){this.setCellSlug(e);const i=new Y({secret:En(yield this.getFingerprint()),token:"AUTH"}),s=yield this.createQuery(Wd),o={cellSlug:e,pubkey:i.pubkey,encrypt:t},a=yield s.execute({variables:o});if(a.success()){const u=Pr.create(a.payload(),i);this.setAuthToken(u)}else throw new cc(`KnishIOClient::requestGuestAuthToken() - Authorization attempt rejected by ledger. Reason: ${a.reason()}`);return a})}requestProfileAuthToken(n){return L(this,arguments,function*({secret:e,encrypt:t}){this.setSecret(e);const i=new Y({secret:e,token:"AUTH"}),s=yield this.createMolecule({secret:e,sourceWallet:i}),o=yield this.createMoleculeMutation({mutationClass:Cd,molecule:s});o.fillMolecule({meta:{encrypt:t?"true":"false"}});const a=yield o.execute({});if(a.success()){const u=Pr.create(a.payload(),i);this.setAuthToken(u)}else throw new cc(`KnishIOClient::requestProfileAuthToken() - Authorization attempt rejected by ledger. Reason: ${a.reason()}`);return a})}requestAuthToken(s){return L(this,arguments,function*({secret:e=null,seed:t=null,cellSlug:n=null,encrypt:i=!1}){if(this.$__serverSdkVersion<3)return this.log("warn","KnishIOClient::authorize() - Server SDK version does not require an authorization..."),null;e===null&&t&&(e=En(t)),this.$__authInProcess=!0;let o;return e?o=yield this.requestProfileAuthToken({secret:e,encrypt:i}):o=yield this.requestGuestAuthToken({cellSlug:n,encrypt:i}),this.log("info",`KnishIOClient::authorize() - Successfully retrieved auth token ${this.$__authToken.getToken()}...`),this.switchEncryption(i),this.$__authInProcess=!1,o})}setAuthToken(e){if(!e){this.log("info","KnishIOClient::setAuthToken() - authToken object is empty.");return}this.$__authTokenObjects[this.uri()]=e,this.client().setAuthData(e.getAuthData()),this.$__authToken=e}getAuthToken(){return this.$__authToken}log(e,t){if(this.$__logging)switch(e){case"info":console.info(t);break;case"warn":console.warn(t);break;case"error":console.error(t);break;default:console.log(t)}}}return J.Atom=H,J.KnishIOClient=cm,J.Meta=Tr,J.Molecule=st,J.Wallet=Y,J.base64ToHex=ao,J.bufferToHexString=nl,J.charsetBaseConvert=so,J.chunkSubstr=xr,J.generateBundleHash=Ut,J.generateSecret=En,J.hexStringToBuffer=il,J.hexToBase64=oo,J.isHex=uo,J.randomString=bn,Object.defineProperty(J,Symbol.toStringTag,{value:"Module"}),J}({});
//# sourceMappingURL=client.iife.js.map
