"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Sa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ka="ARRAYBUFFER not supported by this environment",xa="UINT8ARRAY not supported by this environment";function $s(n,e,t,r){let i,s,o;const a=e||[0],c=(t=t||0)>>>3,l=r===-1?3:0;for(i=0;i<n.length;i+=1)o=i+c,s=o>>>2,a.length<=s&&a.push(0),a[s]|=n[i]<<8*(l+r*(o%4));return{value:a,binLen:8*n.length+t}}function mn(n,e,t){switch(e){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":return function(r,i,s){return function(o,a,c,l){let u,p,d,y;if(o.length%2!=0)throw new Error("String of HEX type must be in byte increments");const b=a||[0],E=(c=c||0)>>>3,w=l===-1?3:0;for(u=0;u<o.length;u+=2){if(p=parseInt(o.substr(u,2),16),isNaN(p))throw new Error("String of HEX type contains invalid characters");for(y=(u>>>1)+E,d=y>>>2;b.length<=d;)b.push(0);b[d]|=p<<8*(w+l*(y%4))}return{value:b,binLen:4*o.length+c}}(r,i,s,t)};case"TEXT":return function(r,i,s){return function(o,a,c,l,u){let p,d,y,b,E,w,v,k,S=0;const I=c||[0],O=(l=l||0)>>>3;if(a==="UTF8")for(v=u===-1?3:0,y=0;y<o.length;y+=1)for(p=o.charCodeAt(y),d=[],128>p?d.push(p):2048>p?(d.push(192|p>>>6),d.push(128|63&p)):55296>p||57344<=p?d.push(224|p>>>12,128|p>>>6&63,128|63&p):(y+=1,p=65536+((1023&p)<<10|1023&o.charCodeAt(y)),d.push(240|p>>>18,128|p>>>12&63,128|p>>>6&63,128|63&p)),b=0;b<d.length;b+=1){for(w=S+O,E=w>>>2;I.length<=E;)I.push(0);I[E]|=d[b]<<8*(v+u*(w%4)),S+=1}else for(v=u===-1?2:0,k=a==="UTF16LE"&&u!==1||a!=="UTF16LE"&&u===1,y=0;y<o.length;y+=1){for(p=o.charCodeAt(y),k===!0&&(b=255&p,p=b<<8|p>>>8),w=S+O,E=w>>>2;I.length<=E;)I.push(0);I[E]|=p<<8*(v+u*(w%4)),S+=2}return{value:I,binLen:8*S+l}}(r,e,i,s,t)};case"B64":return function(r,i,s){return function(o,a,c,l){let u,p,d,y,b,E,w,v=0;const k=a||[0],S=(c=c||0)>>>3,I=l===-1?3:0,O=o.indexOf("=");if(o.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(o=o.replace(/=/g,""),O!==-1&&O<o.length)throw new Error("Invalid '=' found in base-64 string");for(p=0;p<o.length;p+=4){for(b=o.substr(p,4),y=0,d=0;d<b.length;d+=1)u=Sa.indexOf(b.charAt(d)),y|=u<<18-6*d;for(d=0;d<b.length-1;d+=1){for(w=v+S,E=w>>>2;k.length<=E;)k.push(0);k[E]|=(y>>>16-8*d&255)<<8*(I+l*(w%4)),v+=1}}return{value:k,binLen:8*v+c}}(r,i,s,t)};case"BYTES":return function(r,i,s){return function(o,a,c,l){let u,p,d,y;const b=a||[0],E=(c=c||0)>>>3,w=l===-1?3:0;for(p=0;p<o.length;p+=1)u=o.charCodeAt(p),y=p+E,d=y>>>2,b.length<=d&&b.push(0),b[d]|=u<<8*(w+l*(y%4));return{value:b,binLen:8*o.length+c}}(r,i,s,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(ka)}return function(r,i,s){return function(o,a,c,l){return $s(new Uint8Array(o),a,c,l)}(r,i,s,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(xa)}return function(r,i,s){return $s(r,i,s,t)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function Ls(n,e,t,r){switch(n){case"HEX":return function(i){return function(s,o,a,c){const l="0123456789abcdef";let u,p,d="";const y=o/8,b=a===-1?3:0;for(u=0;u<y;u+=1)p=s[u>>>2]>>>8*(b+a*(u%4)),d+=l.charAt(p>>>4&15)+l.charAt(15&p);return c.outputUpper?d.toUpperCase():d}(i,e,t,r)};case"B64":return function(i){return function(s,o,a,c){let l,u,p,d,y,b="";const E=o/8,w=a===-1?3:0;for(l=0;l<E;l+=3)for(d=l+1<E?s[l+1>>>2]:0,y=l+2<E?s[l+2>>>2]:0,p=(s[l>>>2]>>>8*(w+a*(l%4))&255)<<16|(d>>>8*(w+a*((l+1)%4))&255)<<8|y>>>8*(w+a*((l+2)%4))&255,u=0;u<4;u+=1)b+=8*l+6*u<=o?Sa.charAt(p>>>6*(3-u)&63):c.b64Pad;return b}(i,e,t,r)};case"BYTES":return function(i){return function(s,o,a){let c,l,u="";const p=o/8,d=a===-1?3:0;for(c=0;c<p;c+=1)l=s[c>>>2]>>>8*(d+a*(c%4))&255,u+=String.fromCharCode(l);return u}(i,e,t)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error(ka)}return function(i){return function(s,o,a){let c;const l=o/8,u=new ArrayBuffer(l),p=new Uint8Array(u),d=a===-1?3:0;for(c=0;c<l;c+=1)p[c]=s[c>>>2]>>>8*(d+a*(c%4))&255;return u}(i,e,t)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error(xa)}return function(i){return function(s,o,a){let c;const l=o/8,u=a===-1?3:0,p=new Uint8Array(l);for(c=0;c<l;c+=1)p[c]=s[c>>>2]>>>8*(u+a*(c%4))&255;return p}(i,e,t)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const or=4294967296,B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],ct=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],lt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ar="Chosen SHA variant is not supported",Ta="Cannot set numRounds with MAC";function Nr(n,e){let t,r;const i=n.binLen>>>3,s=e.binLen>>>3,o=i<<3,a=4-i<<3;if(i%4!=0){for(t=0;t<s;t+=4)r=i+t>>>2,n.value[r]|=e.value[t>>>2]<<o,n.value.push(0),n.value[r+1]|=e.value[t>>>2]>>>a;return(n.value.length<<2)-4>=s+i&&n.value.pop(),{value:n.value,binLen:n.binLen+e.binLen}}return{value:n.value.concat(e.value),binLen:n.binLen+e.binLen}}function Us(n){const e={outputUpper:!1,b64Pad:"=",outputLen:-1},t=n||{},r="Output length must be a multiple of 8";if(e.outputUpper=t.outputUpper||!1,t.b64Pad&&(e.b64Pad=t.b64Pad),t.outputLen){if(t.outputLen%8!=0)throw new Error(r);e.outputLen=t.outputLen}else if(t.shakeLen){if(t.shakeLen%8!=0)throw new Error(r);e.outputLen=t.shakeLen}if(typeof e.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof e.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return e}function Tt(n,e,t,r){const i=n+" must include a value and format";if(!e){if(!r)throw new Error(i);return r}if(e.value===void 0||!e.format)throw new Error(i);return mn(e.format,e.encoding||"UTF8",t)(e.value)}let qr=class{constructor(e,t,r){const i=r||{};if(this.t=t,this.i=i.encoding||"UTF8",this.numRounds=i.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.o=e,this.h=[],this.u=0,this.l=!1,this.A=0,this.H=!1,this.S=[],this.p=[]}update(e){let t,r=0;const i=this.m>>>5,s=this.C(e,this.h,this.u),o=s.binLen,a=s.value,c=o>>>5;for(t=0;t<c;t+=i)r+this.m<=o&&(this.U=this.v(a.slice(t,t+i),this.U),r+=this.m);return this.A+=r,this.h=a.slice(r>>>5),this.u=o%this.m,this.l=!0,this}getHash(e,t){let r,i,s=this.R;const o=Us(t);if(this.K){if(o.outputLen===-1)throw new Error("Output length must be specified in options");s=o.outputLen}const a=Ls(e,s,this.T,o);if(this.H&&this.g)return a(this.g(o));for(i=this.F(this.h.slice(),this.u,this.A,this.L(this.U),s),r=1;r<this.numRounds;r+=1)this.K&&s%32!=0&&(i[i.length-1]&=16777215>>>24-s%32),i=this.F(i,s,0,this.B(this.o),s);return a(i)}setHMACKey(e,t,r){if(!this.M)throw new Error("Variant does not support HMAC");if(this.l)throw new Error("Cannot set MAC key after calling update");const i=mn(t,(r||{}).encoding||"UTF8",this.T);this.k(i(e))}k(e){const t=this.m>>>3,r=t/4-1;let i;if(this.numRounds!==1)throw new Error(Ta);if(this.H)throw new Error("MAC key already set");for(t<e.binLen/8&&(e.value=this.F(e.value,e.binLen,0,this.B(this.o),this.R));e.value.length<=r;)e.value.push(0);for(i=0;i<=r;i+=1)this.S[i]=909522486^e.value[i],this.p[i]=1549556828^e.value[i];this.U=this.v(this.S,this.U),this.A=this.m,this.H=!0}getHMAC(e,t){const r=Us(t);return Ls(e,this.R,this.T,r)(this.Y())}Y(){let e;if(!this.H)throw new Error("Cannot call getHMAC without first setting MAC key");const t=this.F(this.h.slice(),this.u,this.A,this.L(this.U),this.R);return e=this.v(this.p,this.B(this.o)),e=this.F(t,this.R,this.m,e,this.R),e}};function Jt(n,e){return n<<e|n>>>32-e}function nt(n,e){return n>>>e|n<<32-e}function Ia(n,e){return n>>>e}function qs(n,e,t){return n^e^t}function Aa(n,e,t){return n&e^~n&t}function Oa(n,e,t){return n&e^n&t^e&t}function Dc(n){return nt(n,2)^nt(n,13)^nt(n,22)}function Oe(n,e){const t=(65535&n)+(65535&e);return(65535&(n>>>16)+(e>>>16)+(t>>>16))<<16|65535&t}function Fc(n,e,t,r){const i=(65535&n)+(65535&e)+(65535&t)+(65535&r);return(65535&(n>>>16)+(e>>>16)+(t>>>16)+(r>>>16)+(i>>>16))<<16|65535&i}function Pn(n,e,t,r,i){const s=(65535&n)+(65535&e)+(65535&t)+(65535&r)+(65535&i);return(65535&(n>>>16)+(e>>>16)+(t>>>16)+(r>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function Bc(n){return nt(n,7)^nt(n,18)^Ia(n,3)}function Pc(n){return nt(n,6)^nt(n,11)^nt(n,25)}function $c(n){return[1732584193,4023233417,2562383102,271733878,3285377520]}function Ca(n,e){let t,r,i,s,o,a,c;const l=[];for(t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],c=0;c<80;c+=1)l[c]=c<16?n[c]:Jt(l[c-3]^l[c-8]^l[c-14]^l[c-16],1),a=c<20?Pn(Jt(t,5),Aa(r,i,s),o,1518500249,l[c]):c<40?Pn(Jt(t,5),qs(r,i,s),o,1859775393,l[c]):c<60?Pn(Jt(t,5),Oa(r,i,s),o,2400959708,l[c]):Pn(Jt(t,5),qs(r,i,s),o,3395469782,l[c]),o=s,s=i,i=Jt(r,30),r=t,t=a;return e[0]=Oe(t,e[0]),e[1]=Oe(r,e[1]),e[2]=Oe(i,e[2]),e[3]=Oe(s,e[3]),e[4]=Oe(o,e[4]),e}function Lc(n,e,t,r){let i;const s=15+(e+65>>>9<<4),o=e+t;for(;n.length<=s;)n.push(0);for(n[e>>>5]|=128<<24-e%32,n[s]=4294967295&o,n[s-1]=o/or|0,i=0;i<n.length;i+=16)r=Ca(n.slice(i,i+16),r);return r}let Uc=class extends qr{constructor(e,t,r){if(e!=="SHA-1")throw new Error(ar);super(e,t,r);const i=r||{};this.M=!0,this.g=this.Y,this.T=-1,this.C=mn(this.t,this.i,this.T),this.v=Ca,this.L=function(s){return s.slice()},this.B=$c,this.F=Lc,this.U=[1732584193,4023233417,2562383102,271733878,3285377520],this.m=512,this.R=160,this.K=!1,i.hmacKey&&this.k(Tt("hmacKey",i.hmacKey,this.T))}};function js(n){let e;return e=n=="SHA-224"?ct.slice():lt.slice(),e}function Vs(n,e){let t,r,i,s,o,a,c,l,u,p,d;const y=[];for(t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=0;d<64;d+=1)y[d]=d<16?n[d]:Fc(nt(b=y[d-2],17)^nt(b,19)^Ia(b,10),y[d-7],Bc(y[d-15]),y[d-16]),u=Pn(l,Pc(o),Aa(o,a,c),B[d],y[d]),p=Oe(Dc(t),Oa(t,r,i)),l=c,c=a,a=o,o=Oe(s,u),s=i,i=r,r=t,t=Oe(u,p);var b;return e[0]=Oe(t,e[0]),e[1]=Oe(r,e[1]),e[2]=Oe(i,e[2]),e[3]=Oe(s,e[3]),e[4]=Oe(o,e[4]),e[5]=Oe(a,e[5]),e[6]=Oe(c,e[6]),e[7]=Oe(l,e[7]),e}let qc=class extends qr{constructor(e,t,r){if(e!=="SHA-224"&&e!=="SHA-256")throw new Error(ar);super(e,t,r);const i=r||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=mn(this.t,this.i,this.T),this.v=Vs,this.L=function(s){return s.slice()},this.B=js,this.F=function(s,o,a,c){return function(l,u,p,d,y){let b,E;const w=15+(u+65>>>9<<4),v=u+p;for(;l.length<=w;)l.push(0);for(l[u>>>5]|=128<<24-u%32,l[w]=4294967295&v,l[w-1]=v/or|0,b=0;b<l.length;b+=16)d=Vs(l.slice(b,b+16),d);return E=y==="SHA-224"?[d[0],d[1],d[2],d[3],d[4],d[5],d[6]]:d,E}(s,o,a,c,e)},this.U=js(e),this.m=512,this.R=e==="SHA-224"?224:256,this.K=!1,i.hmacKey&&this.k(Tt("hmacKey",i.hmacKey,this.T))}};class T{constructor(e,t){this.N=e,this.I=t}}function Qs(n,e){let t;return e>32?(t=64-e,new T(n.I<<e|n.N>>>t,n.N<<e|n.I>>>t)):e!==0?(t=32-e,new T(n.N<<e|n.I>>>t,n.I<<e|n.N>>>t)):n}function rt(n,e){let t;return e<32?(t=32-e,new T(n.N>>>e|n.I<<t,n.I>>>e|n.N<<t)):(t=64-e,new T(n.I>>>e|n.N<<t,n.N>>>e|n.I<<t))}function Ra(n,e){return new T(n.N>>>e,n.I>>>e|n.N<<32-e)}function jc(n,e,t){return new T(n.N&e.N^n.N&t.N^e.N&t.N,n.I&e.I^n.I&t.I^e.I&t.I)}function Vc(n){const e=rt(n,28),t=rt(n,34),r=rt(n,39);return new T(e.N^t.N^r.N,e.I^t.I^r.I)}function Ke(n,e){let t,r;t=(65535&n.I)+(65535&e.I),r=(n.I>>>16)+(e.I>>>16)+(t>>>16);const i=(65535&r)<<16|65535&t;return t=(65535&n.N)+(65535&e.N)+(r>>>16),r=(n.N>>>16)+(e.N>>>16)+(t>>>16),new T((65535&r)<<16|65535&t,i)}function Qc(n,e,t,r){let i,s;i=(65535&n.I)+(65535&e.I)+(65535&t.I)+(65535&r.I),s=(n.I>>>16)+(e.I>>>16)+(t.I>>>16)+(r.I>>>16)+(i>>>16);const o=(65535&s)<<16|65535&i;return i=(65535&n.N)+(65535&e.N)+(65535&t.N)+(65535&r.N)+(s>>>16),s=(n.N>>>16)+(e.N>>>16)+(t.N>>>16)+(r.N>>>16)+(i>>>16),new T((65535&s)<<16|65535&i,o)}function Hc(n,e,t,r,i){let s,o;s=(65535&n.I)+(65535&e.I)+(65535&t.I)+(65535&r.I)+(65535&i.I),o=(n.I>>>16)+(e.I>>>16)+(t.I>>>16)+(r.I>>>16)+(i.I>>>16)+(s>>>16);const a=(65535&o)<<16|65535&s;return s=(65535&n.N)+(65535&e.N)+(65535&t.N)+(65535&r.N)+(65535&i.N)+(o>>>16),o=(n.N>>>16)+(e.N>>>16)+(t.N>>>16)+(r.N>>>16)+(i.N>>>16)+(s>>>16),new T((65535&o)<<16|65535&s,a)}function Sn(n,e){return new T(n.N^e.N,n.I^e.I)}function Wc(n){const e=rt(n,19),t=rt(n,61),r=Ra(n,6);return new T(e.N^t.N^r.N,e.I^t.I^r.I)}function zc(n){const e=rt(n,1),t=rt(n,8),r=Ra(n,7);return new T(e.N^t.N^r.N,e.I^t.I^r.I)}function Kc(n){const e=rt(n,14),t=rt(n,18),r=rt(n,41);return new T(e.N^t.N^r.N,e.I^t.I^r.I)}const Gc=[new T(B[0],3609767458),new T(B[1],602891725),new T(B[2],3964484399),new T(B[3],2173295548),new T(B[4],4081628472),new T(B[5],3053834265),new T(B[6],2937671579),new T(B[7],3664609560),new T(B[8],2734883394),new T(B[9],1164996542),new T(B[10],1323610764),new T(B[11],3590304994),new T(B[12],4068182383),new T(B[13],991336113),new T(B[14],633803317),new T(B[15],3479774868),new T(B[16],2666613458),new T(B[17],944711139),new T(B[18],2341262773),new T(B[19],2007800933),new T(B[20],1495990901),new T(B[21],1856431235),new T(B[22],3175218132),new T(B[23],2198950837),new T(B[24],3999719339),new T(B[25],766784016),new T(B[26],2566594879),new T(B[27],3203337956),new T(B[28],1034457026),new T(B[29],2466948901),new T(B[30],3758326383),new T(B[31],168717936),new T(B[32],1188179964),new T(B[33],1546045734),new T(B[34],1522805485),new T(B[35],2643833823),new T(B[36],2343527390),new T(B[37],1014477480),new T(B[38],1206759142),new T(B[39],344077627),new T(B[40],1290863460),new T(B[41],3158454273),new T(B[42],3505952657),new T(B[43],106217008),new T(B[44],3606008344),new T(B[45],1432725776),new T(B[46],1467031594),new T(B[47],851169720),new T(B[48],3100823752),new T(B[49],1363258195),new T(B[50],3750685593),new T(B[51],3785050280),new T(B[52],3318307427),new T(B[53],3812723403),new T(B[54],2003034995),new T(B[55],3602036899),new T(B[56],1575990012),new T(B[57],1125592928),new T(B[58],2716904306),new T(B[59],442776044),new T(B[60],593698344),new T(B[61],3733110249),new T(B[62],2999351573),new T(B[63],3815920427),new T(3391569614,3928383900),new T(3515267271,566280711),new T(3940187606,3454069534),new T(4118630271,4000239992),new T(116418474,1914138554),new T(174292421,2731055270),new T(289380356,3203993006),new T(460393269,320620315),new T(685471733,587496836),new T(852142971,1086792851),new T(1017036298,365543100),new T(1126000580,2618297676),new T(1288033470,3409855158),new T(1501505948,4234509866),new T(1607167915,987167468),new T(1816402316,1246189591)];function Hs(n){return n==="SHA-384"?[new T(3418070365,ct[0]),new T(1654270250,ct[1]),new T(2438529370,ct[2]),new T(355462360,ct[3]),new T(1731405415,ct[4]),new T(41048885895,ct[5]),new T(3675008525,ct[6]),new T(1203062813,ct[7])]:[new T(lt[0],4089235720),new T(lt[1],2227873595),new T(lt[2],4271175723),new T(lt[3],1595750129),new T(lt[4],2917565137),new T(lt[5],725511199),new T(lt[6],4215389547),new T(lt[7],327033209)]}function Ws(n,e){let t,r,i,s,o,a,c,l,u,p,d,y;const b=[];for(t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],d=0;d<80;d+=1)d<16?(y=2*d,b[d]=new T(n[y],n[y+1])):b[d]=Qc(Wc(b[d-2]),b[d-7],zc(b[d-15]),b[d-16]),u=Hc(l,Kc(o),(w=a,v=c,new T((E=o).N&w.N^~E.N&v.N,E.I&w.I^~E.I&v.I)),Gc[d],b[d]),p=Ke(Vc(t),jc(t,r,i)),l=c,c=a,a=o,o=Ke(s,u),s=i,i=r,r=t,t=Ke(u,p);var E,w,v;return e[0]=Ke(t,e[0]),e[1]=Ke(r,e[1]),e[2]=Ke(i,e[2]),e[3]=Ke(s,e[3]),e[4]=Ke(o,e[4]),e[5]=Ke(a,e[5]),e[6]=Ke(c,e[6]),e[7]=Ke(l,e[7]),e}let Jc=class extends qr{constructor(e,t,r){if(e!=="SHA-384"&&e!=="SHA-512")throw new Error(ar);super(e,t,r);const i=r||{};this.g=this.Y,this.M=!0,this.T=-1,this.C=mn(this.t,this.i,this.T),this.v=Ws,this.L=function(s){return s.slice()},this.B=Hs,this.F=function(s,o,a,c){return function(l,u,p,d,y){let b,E;const w=31+(u+129>>>10<<5),v=u+p;for(;l.length<=w;)l.push(0);for(l[u>>>5]|=128<<24-u%32,l[w]=4294967295&v,l[w-1]=v/or|0,b=0;b<l.length;b+=32)d=Ws(l.slice(b,b+32),d);return E=y==="SHA-384"?[d[0].N,d[0].I,d[1].N,d[1].I,d[2].N,d[2].I,d[3].N,d[3].I,d[4].N,d[4].I,d[5].N,d[5].I]:[d[0].N,d[0].I,d[1].N,d[1].I,d[2].N,d[2].I,d[3].N,d[3].I,d[4].N,d[4].I,d[5].N,d[5].I,d[6].N,d[6].I,d[7].N,d[7].I],E}(s,o,a,c,e)},this.U=Hs(e),this.m=1024,this.R=e==="SHA-384"?384:512,this.K=!1,i.hmacKey&&this.k(Tt("hmacKey",i.hmacKey,this.T))}};const Yc=[new T(0,1),new T(0,32898),new T(2147483648,32906),new T(2147483648,2147516416),new T(0,32907),new T(0,2147483649),new T(2147483648,2147516545),new T(2147483648,32777),new T(0,138),new T(0,136),new T(0,2147516425),new T(0,2147483658),new T(0,2147516555),new T(2147483648,139),new T(2147483648,32905),new T(2147483648,32771),new T(2147483648,32770),new T(2147483648,128),new T(0,32778),new T(2147483648,2147483658),new T(2147483648,2147516545),new T(2147483648,32896),new T(0,2147483649),new T(2147483648,2147516424)],Xc=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function Mi(n){let e;const t=[];for(e=0;e<5;e+=1)t[e]=[new T(0,0),new T(0,0),new T(0,0),new T(0,0),new T(0,0)];return t}function Zc(n){let e;const t=[];for(e=0;e<5;e+=1)t[e]=n[e].slice();return t}function hr(n,e){let t,r,i,s;const o=[],a=[];if(n!==null)for(r=0;r<n.length;r+=2)e[(r>>>1)%5][(r>>>1)/5|0]=Sn(e[(r>>>1)%5][(r>>>1)/5|0],new T(n[r+1],n[r]));for(t=0;t<24;t+=1){for(s=Mi(),r=0;r<5;r+=1)o[r]=(c=e[r][0],l=e[r][1],u=e[r][2],p=e[r][3],d=e[r][4],new T(c.N^l.N^u.N^p.N^d.N,c.I^l.I^u.I^p.I^d.I));for(r=0;r<5;r+=1)a[r]=Sn(o[(r+4)%5],Qs(o[(r+1)%5],1));for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)e[r][i]=Sn(e[r][i],a[r]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)s[i][(2*r+3*i)%5]=Qs(e[r][i],Xc[r][i]);for(r=0;r<5;r+=1)for(i=0;i<5;i+=1)e[r][i]=Sn(s[r][i],new T(~s[(r+1)%5][i].N&s[(r+2)%5][i].N,~s[(r+1)%5][i].I&s[(r+2)%5][i].I));e[0][0]=Sn(e[0][0],Yc[t])}var c,l,u,p,d;return e}function Na(n){let e,t,r=0;const i=[0,0],s=[4294967295&n,n/or&2097151];for(e=6;e>=0;e--)t=s[e>>2]>>>8*e&255,t===0&&r===0||(i[r+1>>2]|=t<<8*(r+1),r+=1);return r=r!==0?r:1,i[0]|=r,{value:r+1>4?i:[i[0]],binLen:8+8*r}}function ci(n){return Nr(Na(n.binLen),n)}function zs(n,e){let t,r=Na(e);r=Nr(r,n);const i=e>>>2,s=(i-r.value.length%i)%i;for(t=0;t<s;t++)r.value.push(0);return r.value}let el=class extends qr{constructor(n,e,t){let r=6,i=0;super(n,e,t);const s=t||{};if(this.numRounds!==1){if(s.kmacKey||s.hmacKey)throw new Error(Ta);if(this.o==="CSHAKE128"||this.o==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.T=1,this.C=mn(this.t,this.i,this.T),this.v=hr,this.L=Zc,this.B=Mi,this.U=Mi(),this.K=!1,n){case"SHA3-224":this.m=i=1152,this.R=224,this.M=!0,this.g=this.Y;break;case"SHA3-256":this.m=i=1088,this.R=256,this.M=!0,this.g=this.Y;break;case"SHA3-384":this.m=i=832,this.R=384,this.M=!0,this.g=this.Y;break;case"SHA3-512":this.m=i=576,this.R=512,this.M=!0,this.g=this.Y;break;case"SHAKE128":r=31,this.m=i=1344,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"SHAKE256":r=31,this.m=i=1088,this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"KMAC128":r=4,this.m=i=1344,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"KMAC256":r=4,this.m=i=1088,this.X(t),this.R=-1,this.K=!0,this.M=!1,this.g=this._;break;case"CSHAKE128":this.m=i=1344,r=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;case"CSHAKE256":this.m=i=1088,r=this.O(t),this.R=-1,this.K=!0,this.M=!1,this.g=null;break;default:throw new Error(ar)}this.F=function(o,a,c,l,u){return function(p,d,y,b,E,w,v){let k,S,I=0;const O=[],C=E>>>5,M=d>>>5;for(k=0;k<M&&d>=E;k+=C)b=hr(p.slice(k,k+C),b),d-=E;for(p=p.slice(k),d%=E;p.length<C;)p.push(0);for(k=d>>>3,p[k>>2]^=w<<k%4*8,p[C-1]^=2147483648,b=hr(p,b);32*O.length<v&&(S=b[I%5][I/5|0],O.push(S.I),!(32*O.length>=v));)O.push(S.N),I+=1,64*I%E==0&&(hr(null,b),I=0);return O}(o,a,0,l,i,r,u)},s.hmacKey&&this.k(Tt("hmacKey",s.hmacKey,this.T))}O(n,e){const t=function(i){const s=i;return{funcName:Tt("funcName",s.funcName,1,{value:[],binLen:0}),customization:Tt("Customization",s.customization,1,{value:[],binLen:0})}}(n||{});e&&(t.funcName=e);const r=Nr(ci(t.funcName),ci(t.customization));if(t.customization.binLen!==0||t.funcName.binLen!==0){const i=zs(r,this.m>>>3);for(let s=0;s<i.length;s+=this.m>>>5)this.U=this.v(i.slice(s,s+(this.m>>>5)),this.U),this.A+=this.m;return 4}return 31}X(n){const e=function(r){const i=r;return{kmacKey:Tt("kmacKey",i.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:Tt("Customization",i.customization,1,{value:[],binLen:0})}}(n||{});this.O(n,e.funcName);const t=zs(ci(e.kmacKey),this.m>>>3);for(let r=0;r<t.length;r+=this.m>>>5)this.U=this.v(t.slice(r,r+(this.m>>>5)),this.U),this.A+=this.m;this.H=!0}_(n){const e=Nr({value:this.h.slice(),binLen:this.u},function(t){let r,i,s=0;const o=[0,0],a=[4294967295&t,t/or&2097151];for(r=6;r>=0;r--)i=a[r>>2]>>>8*r&255,i===0&&s===0||(o[s>>2]|=i<<8*s,s+=1);return s=s!==0?s:1,o[s>>2]|=s<<8*s,{value:s+1>4?o:[o[0]],binLen:8+8*s}}(n.outputLen));return this.F(e.value,e.binLen,this.A,this.L(this.U),n.outputLen)}};class Ve{constructor(e,t,r){if(e=="SHA-1")this.P=new Uc(e,t,r);else if(e=="SHA-224"||e=="SHA-256")this.P=new qc(e,t,r);else if(e=="SHA-384"||e=="SHA-512")this.P=new Jc(e,t,r);else{if(e!="SHA3-224"&&e!="SHA3-256"&&e!="SHA3-384"&&e!="SHA3-512"&&e!="SHAKE128"&&e!="SHAKE256"&&e!="CSHAKE128"&&e!="CSHAKE256"&&e!="KMAC128"&&e!="KMAC256")throw new Error(ar);this.P=new el(e,t,r)}}update(e){return this.P.update(e),this}getHash(e,t){return this.P.getHash(e,t)}setHMACKey(e,t,r){this.P.setHMACKey(e,t,r)}getHMAC(e,t){return this.P.getHMAC(e,t)}}var Ma={},jr={};jr.byteLength=rl;jr.toByteArray=sl;jr.fromByteArray=ul;var tt=[],je=[],tl=typeof Uint8Array<"u"?Uint8Array:Array,li="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Yt=0,nl=li.length;Yt<nl;++Yt)tt[Yt]=li[Yt],je[li.charCodeAt(Yt)]=Yt;je[45]=62;je[95]=63;function Da(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var r=t===e?0:4-t%4;return[t,r]}function rl(n){var e=Da(n),t=e[0],r=e[1];return(t+r)*3/4-r}function il(n,e,t){return(e+t)*3/4-t}function sl(n){var e,t=Da(n),r=t[0],i=t[1],s=new tl(il(n,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=je[n.charCodeAt(c)]<<18|je[n.charCodeAt(c+1)]<<12|je[n.charCodeAt(c+2)]<<6|je[n.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=je[n.charCodeAt(c)]<<2|je[n.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=je[n.charCodeAt(c)]<<10|je[n.charCodeAt(c+1)]<<4|je[n.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function ol(n){return tt[n>>18&63]+tt[n>>12&63]+tt[n>>6&63]+tt[n&63]}function al(n,e,t){for(var r,i=[],s=e;s<t;s+=3)r=(n[s]<<16&16711680)+(n[s+1]<<8&65280)+(n[s+2]&255),i.push(ol(r));return i.join("")}function ul(n){for(var e,t=n.length,r=t%3,i=[],s=16383,o=0,a=t-r;o<a;o+=s)i.push(al(n,o,o+s>a?a:o+s));return r===1?(e=n[t-1],i.push(tt[e>>2]+tt[e<<4&63]+"==")):r===2&&(e=(n[t-2]<<8)+n[t-1],i.push(tt[e>>10]+tt[e>>4&63]+tt[e<<2&63]+"=")),i.join("")}var os={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */os.read=function(n,e,t,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,p=t?i-1:0,d=t?-1:1,y=n[e+p];for(p+=d,s=y&(1<<-u)-1,y>>=-u,u+=a;u>0;s=s*256+n[e+p],p+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+n[e+p],p+=d,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(y?-1:1)*o*Math.pow(2,s-r)};os.write=function(n,e,t,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,p=u>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=r?0:s-1,b=r?1:-1,E=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+p>=1?e+=d/c:e+=d*Math.pow(2,1-p),e*c>=2&&(o++,c/=2),o+p>=u?(a=0,o=u):o+p>=1?(a=(e*c-1)*Math.pow(2,i),o=o+p):(a=e*Math.pow(2,p-1)*Math.pow(2,i),o=0));i>=8;n[t+y]=a&255,y+=b,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[t+y]=o&255,y+=b,o/=256,l-=8);n[t+y-b]|=E*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=jr,t=os,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=u,n.SlowBuffer=O,n.INSPECT_MAX_BYTES=50;const i=2147483647;n.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const m=new s(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,s.prototype),Object.setPrototypeOf(m,f),m.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(m){if(m>i)throw new RangeError('The value "'+m+'" is invalid for option "size"');const f=new s(m);return Object.setPrototypeOf(f,u.prototype),f}function u(m,f,h){if(typeof m=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(m)}return p(m,f,h)}u.poolSize=8192;function p(m,f,h){if(typeof m=="string")return E(m,f);if(o.isView(m))return v(m);if(m==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m);if(Ze(m,o)||m&&Ze(m.buffer,o)||typeof a<"u"&&(Ze(m,a)||m&&Ze(m.buffer,a)))return k(m,f,h);if(typeof m=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const g=m.valueOf&&m.valueOf();if(g!=null&&g!==m)return u.from(g,f,h);const _=S(m);if(_)return _;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof m[Symbol.toPrimitive]=="function")return u.from(m[Symbol.toPrimitive]("string"),f,h);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof m)}u.from=function(m,f,h){return p(m,f,h)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function d(m){if(typeof m!="number")throw new TypeError('"size" argument must be of type number');if(m<0)throw new RangeError('The value "'+m+'" is invalid for option "size"')}function y(m,f,h){return d(m),m<=0?l(m):f!==void 0?typeof h=="string"?l(m).fill(f,h):l(m).fill(f):l(m)}u.alloc=function(m,f,h){return y(m,f,h)};function b(m){return d(m),l(m<0?0:I(m)|0)}u.allocUnsafe=function(m){return b(m)},u.allocUnsafeSlow=function(m){return b(m)};function E(m,f){if((typeof f!="string"||f==="")&&(f="utf8"),!u.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const h=C(m,f)|0;let g=l(h);const _=g.write(m,f);return _!==h&&(g=g.slice(0,_)),g}function w(m){const f=m.length<0?0:I(m.length)|0,h=l(f);for(let g=0;g<f;g+=1)h[g]=m[g]&255;return h}function v(m){if(Ze(m,s)){const f=new s(m);return k(f.buffer,f.byteOffset,f.byteLength)}return w(m)}function k(m,f,h){if(f<0||m.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(m.byteLength<f+(h||0))throw new RangeError('"length" is outside of buffer bounds');let g;return f===void 0&&h===void 0?g=new s(m):h===void 0?g=new s(m,f):g=new s(m,f,h),Object.setPrototypeOf(g,u.prototype),g}function S(m){if(u.isBuffer(m)){const f=I(m.length)|0,h=l(f);return h.length===0||m.copy(h,0,0,f),h}if(m.length!==void 0)return typeof m.length!="number"||ui(m.length)?l(0):w(m);if(m.type==="Buffer"&&Array.isArray(m.data))return w(m.data)}function I(m){if(m>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return m|0}function O(m){return+m!=m&&(m=0),u.alloc(+m)}u.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==u.prototype},u.compare=function(f,h){if(Ze(f,s)&&(f=u.from(f,f.offset,f.byteLength)),Ze(h,s)&&(h=u.from(h,h.offset,h.byteLength)),!u.isBuffer(f)||!u.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===h)return 0;let g=f.length,_=h.length;for(let A=0,R=Math.min(g,_);A<R;++A)if(f[A]!==h[A]){g=f[A],_=h[A];break}return g<_?-1:_<g?1:0},u.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(f,h){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return u.alloc(0);let g;if(h===void 0)for(h=0,g=0;g<f.length;++g)h+=f[g].length;const _=u.allocUnsafe(h);let A=0;for(g=0;g<f.length;++g){let R=f[g];if(Ze(R,s))A+R.length>_.length?(u.isBuffer(R)||(R=u.from(R)),R.copy(_,A)):s.prototype.set.call(_,R,A);else if(u.isBuffer(R))R.copy(_,A);else throw new TypeError('"list" argument must be an Array of Buffers');A+=R.length}return _};function C(m,f){if(u.isBuffer(m))return m.length;if(o.isView(m)||Ze(m,o))return m.byteLength;if(typeof m!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof m);const h=m.length,g=arguments.length>2&&arguments[2]===!0;if(!g&&h===0)return 0;let _=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return h;case"utf8":case"utf-8":return ai(m).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return h*2;case"hex":return h>>>1;case"base64":return Ps(m).length;default:if(_)return g?-1:ai(m).length;f=(""+f).toLowerCase(),_=!0}}u.byteLength=C;function M(m,f,h){let g=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((h===void 0||h>this.length)&&(h=this.length),h<=0)||(h>>>=0,f>>>=0,h<=f))return"";for(m||(m="utf8");;)switch(m){case"hex":return Te(this,f,h);case"utf8":case"utf-8":return q(this,f,h);case"ascii":return Se(this,f,h);case"latin1":case"binary":return J(this,f,h);case"base64":return Z(this,f,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ze(this,f,h);default:if(g)throw new TypeError("Unknown encoding: "+m);m=(m+"").toLowerCase(),g=!0}}u.prototype._isBuffer=!0;function F(m,f,h){const g=m[f];m[f]=m[h],m[h]=g}u.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<f;h+=2)F(this,h,h+1);return this},u.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<f;h+=4)F(this,h,h+3),F(this,h+1,h+2);return this},u.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<f;h+=8)F(this,h,h+7),F(this,h+1,h+6),F(this,h+2,h+5),F(this,h+3,h+4);return this},u.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?q(this,0,f):M.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(f){if(!u.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:u.compare(this,f)===0},u.prototype.inspect=function(){let f="";const h=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(f+=" ... "),"<Buffer "+f+">"},r&&(u.prototype[r]=u.prototype.inspect),u.prototype.compare=function(f,h,g,_,A){if(Ze(f,s)&&(f=u.from(f,f.offset,f.byteLength)),!u.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(h===void 0&&(h=0),g===void 0&&(g=f?f.length:0),_===void 0&&(_=0),A===void 0&&(A=this.length),h<0||g>f.length||_<0||A>this.length)throw new RangeError("out of range index");if(_>=A&&h>=g)return 0;if(_>=A)return-1;if(h>=g)return 1;if(h>>>=0,g>>>=0,_>>>=0,A>>>=0,this===f)return 0;let R=A-_,z=g-h;const le=Math.min(R,z),ue=this.slice(_,A),fe=f.slice(h,g);for(let ne=0;ne<le;++ne)if(ue[ne]!==fe[ne]){R=ue[ne],z=fe[ne];break}return R<z?-1:z<R?1:0};function L(m,f,h,g,_){if(m.length===0)return-1;if(typeof h=="string"?(g=h,h=0):h>2147483647?h=2147483647:h<-2147483648&&(h=-2147483648),h=+h,ui(h)&&(h=_?0:m.length-1),h<0&&(h=m.length+h),h>=m.length){if(_)return-1;h=m.length-1}else if(h<0)if(_)h=0;else return-1;if(typeof f=="string"&&(f=u.from(f,g)),u.isBuffer(f))return f.length===0?-1:V(m,f,h,g,_);if(typeof f=="number")return f=f&255,typeof s.prototype.indexOf=="function"?_?s.prototype.indexOf.call(m,f,h):s.prototype.lastIndexOf.call(m,f,h):V(m,[f],h,g,_);throw new TypeError("val must be string, number or Buffer")}function V(m,f,h,g,_){let A=1,R=m.length,z=f.length;if(g!==void 0&&(g=String(g).toLowerCase(),g==="ucs2"||g==="ucs-2"||g==="utf16le"||g==="utf-16le")){if(m.length<2||f.length<2)return-1;A=2,R/=2,z/=2,h/=2}function le(fe,ne){return A===1?fe[ne]:fe.readUInt16BE(ne*A)}let ue;if(_){let fe=-1;for(ue=h;ue<R;ue++)if(le(m,ue)===le(f,fe===-1?0:ue-fe)){if(fe===-1&&(fe=ue),ue-fe+1===z)return fe*A}else fe!==-1&&(ue-=ue-fe),fe=-1}else for(h+z>R&&(h=R-z),ue=h;ue>=0;ue--){let fe=!0;for(let ne=0;ne<z;ne++)if(le(m,ue+ne)!==le(f,ne)){fe=!1;break}if(fe)return ue}return-1}u.prototype.includes=function(f,h,g){return this.indexOf(f,h,g)!==-1},u.prototype.indexOf=function(f,h,g){return L(this,f,h,g,!0)},u.prototype.lastIndexOf=function(f,h,g){return L(this,f,h,g,!1)};function G(m,f,h,g){h=Number(h)||0;const _=m.length-h;g?(g=Number(g),g>_&&(g=_)):g=_;const A=f.length;g>A/2&&(g=A/2);let R;for(R=0;R<g;++R){const z=parseInt(f.substr(R*2,2),16);if(ui(z))return R;m[h+R]=z}return R}function Ee(m,f,h,g){return fr(ai(f,m.length-h),m,h,g)}function ie(m,f,h,g){return fr(Cc(f),m,h,g)}function _e(m,f,h,g){return fr(Ps(f),m,h,g)}function j(m,f,h,g){return fr(Rc(f,m.length-h),m,h,g)}u.prototype.write=function(f,h,g,_){if(h===void 0)_="utf8",g=this.length,h=0;else if(g===void 0&&typeof h=="string")_=h,g=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(g)?(g=g>>>0,_===void 0&&(_="utf8")):(_=g,g=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const A=this.length-h;if((g===void 0||g>A)&&(g=A),f.length>0&&(g<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");_||(_="utf8");let R=!1;for(;;)switch(_){case"hex":return G(this,f,h,g);case"utf8":case"utf-8":return Ee(this,f,h,g);case"ascii":case"latin1":case"binary":return ie(this,f,h,g);case"base64":return _e(this,f,h,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,f,h,g);default:if(R)throw new TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),R=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Z(m,f,h){return f===0&&h===m.length?e.fromByteArray(m):e.fromByteArray(m.slice(f,h))}function q(m,f,h){h=Math.min(m.length,h);const g=[];let _=f;for(;_<h;){const A=m[_];let R=null,z=A>239?4:A>223?3:A>191?2:1;if(_+z<=h){let le,ue,fe,ne;switch(z){case 1:A<128&&(R=A);break;case 2:le=m[_+1],(le&192)===128&&(ne=(A&31)<<6|le&63,ne>127&&(R=ne));break;case 3:le=m[_+1],ue=m[_+2],(le&192)===128&&(ue&192)===128&&(ne=(A&15)<<12|(le&63)<<6|ue&63,ne>2047&&(ne<55296||ne>57343)&&(R=ne));break;case 4:le=m[_+1],ue=m[_+2],fe=m[_+3],(le&192)===128&&(ue&192)===128&&(fe&192)===128&&(ne=(A&15)<<18|(le&63)<<12|(ue&63)<<6|fe&63,ne>65535&&ne<1114112&&(R=ne))}}R===null?(R=65533,z=1):R>65535&&(R-=65536,g.push(R>>>10&1023|55296),R=56320|R&1023),g.push(R),_+=z}return Q(g)}const W=4096;function Q(m){const f=m.length;if(f<=W)return String.fromCharCode.apply(String,m);let h="",g=0;for(;g<f;)h+=String.fromCharCode.apply(String,m.slice(g,g+=W));return h}function Se(m,f,h){let g="";h=Math.min(m.length,h);for(let _=f;_<h;++_)g+=String.fromCharCode(m[_]&127);return g}function J(m,f,h){let g="";h=Math.min(m.length,h);for(let _=f;_<h;++_)g+=String.fromCharCode(m[_]);return g}function Te(m,f,h){const g=m.length;(!f||f<0)&&(f=0),(!h||h<0||h>g)&&(h=g);let _="";for(let A=f;A<h;++A)_+=Nc[m[A]];return _}function ze(m,f,h){const g=m.slice(f,h);let _="";for(let A=0;A<g.length-1;A+=2)_+=String.fromCharCode(g[A]+g[A+1]*256);return _}u.prototype.slice=function(f,h){const g=this.length;f=~~f,h=h===void 0?g:~~h,f<0?(f+=g,f<0&&(f=0)):f>g&&(f=g),h<0?(h+=g,h<0&&(h=0)):h>g&&(h=g),h<f&&(h=f);const _=this.subarray(f,h);return Object.setPrototypeOf(_,u.prototype),_};function se(m,f,h){if(m%1!==0||m<0)throw new RangeError("offset is not uint");if(m+f>h)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(f,h,g){f=f>>>0,h=h>>>0,g||se(f,h,this.length);let _=this[f],A=1,R=0;for(;++R<h&&(A*=256);)_+=this[f+R]*A;return _},u.prototype.readUintBE=u.prototype.readUIntBE=function(f,h,g){f=f>>>0,h=h>>>0,g||se(f,h,this.length);let _=this[f+--h],A=1;for(;h>0&&(A*=256);)_+=this[f+--h]*A;return _},u.prototype.readUint8=u.prototype.readUInt8=function(f,h){return f=f>>>0,h||se(f,1,this.length),this[f]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(f,h){return f=f>>>0,h||se(f,2,this.length),this[f]|this[f+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(f,h){return f=f>>>0,h||se(f,2,this.length),this[f]<<8|this[f+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(f,h){return f=f>>>0,h||se(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},u.prototype.readBigUInt64LE=vt(function(f){f=f>>>0,Gt(f,"offset");const h=this[f],g=this[f+7];(h===void 0||g===void 0)&&_n(f,this.length-8);const _=h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,A=this[++f]+this[++f]*2**8+this[++f]*2**16+g*2**24;return BigInt(_)+(BigInt(A)<<BigInt(32))}),u.prototype.readBigUInt64BE=vt(function(f){f=f>>>0,Gt(f,"offset");const h=this[f],g=this[f+7];(h===void 0||g===void 0)&&_n(f,this.length-8);const _=h*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],A=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+g;return(BigInt(_)<<BigInt(32))+BigInt(A)}),u.prototype.readIntLE=function(f,h,g){f=f>>>0,h=h>>>0,g||se(f,h,this.length);let _=this[f],A=1,R=0;for(;++R<h&&(A*=256);)_+=this[f+R]*A;return A*=128,_>=A&&(_-=Math.pow(2,8*h)),_},u.prototype.readIntBE=function(f,h,g){f=f>>>0,h=h>>>0,g||se(f,h,this.length);let _=h,A=1,R=this[f+--_];for(;_>0&&(A*=256);)R+=this[f+--_]*A;return A*=128,R>=A&&(R-=Math.pow(2,8*h)),R},u.prototype.readInt8=function(f,h){return f=f>>>0,h||se(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},u.prototype.readInt16LE=function(f,h){f=f>>>0,h||se(f,2,this.length);const g=this[f]|this[f+1]<<8;return g&32768?g|4294901760:g},u.prototype.readInt16BE=function(f,h){f=f>>>0,h||se(f,2,this.length);const g=this[f+1]|this[f]<<8;return g&32768?g|4294901760:g},u.prototype.readInt32LE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},u.prototype.readInt32BE=function(f,h){return f=f>>>0,h||se(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},u.prototype.readBigInt64LE=vt(function(f){f=f>>>0,Gt(f,"offset");const h=this[f],g=this[f+7];(h===void 0||g===void 0)&&_n(f,this.length-8);const _=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(g<<24);return(BigInt(_)<<BigInt(32))+BigInt(h+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),u.prototype.readBigInt64BE=vt(function(f){f=f>>>0,Gt(f,"offset");const h=this[f],g=this[f+7];(h===void 0||g===void 0)&&_n(f,this.length-8);const _=(h<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(_)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+g)}),u.prototype.readFloatLE=function(f,h){return f=f>>>0,h||se(f,4,this.length),t.read(this,f,!0,23,4)},u.prototype.readFloatBE=function(f,h){return f=f>>>0,h||se(f,4,this.length),t.read(this,f,!1,23,4)},u.prototype.readDoubleLE=function(f,h){return f=f>>>0,h||se(f,8,this.length),t.read(this,f,!0,52,8)},u.prototype.readDoubleBE=function(f,h){return f=f>>>0,h||se(f,8,this.length),t.read(this,f,!1,52,8)};function pe(m,f,h,g,_,A){if(!u.isBuffer(m))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>_||f<A)throw new RangeError('"value" argument is out of bounds');if(h+g>m.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(f,h,g,_){if(f=+f,h=h>>>0,g=g>>>0,!_){const z=Math.pow(2,8*g)-1;pe(this,f,h,g,z,0)}let A=1,R=0;for(this[h]=f&255;++R<g&&(A*=256);)this[h+R]=f/A&255;return h+g},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(f,h,g,_){if(f=+f,h=h>>>0,g=g>>>0,!_){const z=Math.pow(2,8*g)-1;pe(this,f,h,g,z,0)}let A=g-1,R=1;for(this[h+A]=f&255;--A>=0&&(R*=256);)this[h+A]=f/R&255;return h+g},u.prototype.writeUint8=u.prototype.writeUInt8=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,1,255,0),this[h]=f&255,h+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,2,65535,0),this[h]=f&255,this[h+1]=f>>>8,h+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,2,65535,0),this[h]=f>>>8,this[h+1]=f&255,h+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,4,4294967295,0),this[h+3]=f>>>24,this[h+2]=f>>>16,this[h+1]=f>>>8,this[h]=f&255,h+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,4,4294967295,0),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4};function be(m,f,h,g,_){Bs(f,g,_,m,h,7);let A=Number(f&BigInt(4294967295));m[h++]=A,A=A>>8,m[h++]=A,A=A>>8,m[h++]=A,A=A>>8,m[h++]=A;let R=Number(f>>BigInt(32)&BigInt(4294967295));return m[h++]=R,R=R>>8,m[h++]=R,R=R>>8,m[h++]=R,R=R>>8,m[h++]=R,h}function me(m,f,h,g,_){Bs(f,g,_,m,h,7);let A=Number(f&BigInt(4294967295));m[h+7]=A,A=A>>8,m[h+6]=A,A=A>>8,m[h+5]=A,A=A>>8,m[h+4]=A;let R=Number(f>>BigInt(32)&BigInt(4294967295));return m[h+3]=R,R=R>>8,m[h+2]=R,R=R>>8,m[h+1]=R,R=R>>8,m[h]=R,h+8}u.prototype.writeBigUInt64LE=vt(function(f,h=0){return be(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=vt(function(f,h=0){return me(this,f,h,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(f,h,g,_){if(f=+f,h=h>>>0,!_){const le=Math.pow(2,8*g-1);pe(this,f,h,g,le-1,-le)}let A=0,R=1,z=0;for(this[h]=f&255;++A<g&&(R*=256);)f<0&&z===0&&this[h+A-1]!==0&&(z=1),this[h+A]=(f/R>>0)-z&255;return h+g},u.prototype.writeIntBE=function(f,h,g,_){if(f=+f,h=h>>>0,!_){const le=Math.pow(2,8*g-1);pe(this,f,h,g,le-1,-le)}let A=g-1,R=1,z=0;for(this[h+A]=f&255;--A>=0&&(R*=256);)f<0&&z===0&&this[h+A+1]!==0&&(z=1),this[h+A]=(f/R>>0)-z&255;return h+g},u.prototype.writeInt8=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,1,127,-128),f<0&&(f=255+f+1),this[h]=f&255,h+1},u.prototype.writeInt16LE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,2,32767,-32768),this[h]=f&255,this[h+1]=f>>>8,h+2},u.prototype.writeInt16BE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,2,32767,-32768),this[h]=f>>>8,this[h+1]=f&255,h+2},u.prototype.writeInt32LE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,4,2147483647,-2147483648),this[h]=f&255,this[h+1]=f>>>8,this[h+2]=f>>>16,this[h+3]=f>>>24,h+4},u.prototype.writeInt32BE=function(f,h,g){return f=+f,h=h>>>0,g||pe(this,f,h,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[h]=f>>>24,this[h+1]=f>>>16,this[h+2]=f>>>8,this[h+3]=f&255,h+4},u.prototype.writeBigInt64LE=vt(function(f,h=0){return be(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=vt(function(f,h=0){return me(this,f,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function si(m,f,h,g,_,A){if(h+g>m.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("Index out of range")}function lr(m,f,h,g,_){return f=+f,h=h>>>0,_||si(m,f,h,4),t.write(m,f,h,g,23,4),h+4}u.prototype.writeFloatLE=function(f,h,g){return lr(this,f,h,!0,g)},u.prototype.writeFloatBE=function(f,h,g){return lr(this,f,h,!1,g)};function Ds(m,f,h,g,_){return f=+f,h=h>>>0,_||si(m,f,h,8),t.write(m,f,h,g,52,8),h+8}u.prototype.writeDoubleLE=function(f,h,g){return Ds(this,f,h,!0,g)},u.prototype.writeDoubleBE=function(f,h,g){return Ds(this,f,h,!1,g)},u.prototype.copy=function(f,h,g,_){if(!u.isBuffer(f))throw new TypeError("argument should be a Buffer");if(g||(g=0),!_&&_!==0&&(_=this.length),h>=f.length&&(h=f.length),h||(h=0),_>0&&_<g&&(_=g),_===g||f.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(g<0||g>=this.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),f.length-h<_-g&&(_=f.length-h+g);const A=_-g;return this===f&&typeof s.prototype.copyWithin=="function"?this.copyWithin(h,g,_):s.prototype.set.call(f,this.subarray(g,_),h),A},u.prototype.fill=function(f,h,g,_){if(typeof f=="string"){if(typeof h=="string"?(_=h,h=0,g=this.length):typeof g=="string"&&(_=g,g=this.length),_!==void 0&&typeof _!="string")throw new TypeError("encoding must be a string");if(typeof _=="string"&&!u.isEncoding(_))throw new TypeError("Unknown encoding: "+_);if(f.length===1){const R=f.charCodeAt(0);(_==="utf8"&&R<128||_==="latin1")&&(f=R)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(h<0||this.length<h||this.length<g)throw new RangeError("Out of range index");if(g<=h)return this;h=h>>>0,g=g===void 0?this.length:g>>>0,f||(f=0);let A;if(typeof f=="number")for(A=h;A<g;++A)this[A]=f;else{const R=u.isBuffer(f)?f:u.from(f,_),z=R.length;if(z===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(A=0;A<g-h;++A)this[A+h]=R[A%z]}return this};const Kt={};function oi(m,f,h){Kt[m]=class extends h{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${m}]`,this.stack,delete this.name}get code(){return m}set code(_){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_,writable:!0})}toString(){return`${this.name} [${m}]: ${this.message}`}}}oi("ERR_BUFFER_OUT_OF_BOUNDS",function(m){return m?`${m} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),oi("ERR_INVALID_ARG_TYPE",function(m,f){return`The "${m}" argument must be of type number. Received type ${typeof f}`},TypeError),oi("ERR_OUT_OF_RANGE",function(m,f,h){let g=`The value of "${m}" is out of range.`,_=h;return Number.isInteger(h)&&Math.abs(h)>2**32?_=Fs(String(h)):typeof h=="bigint"&&(_=String(h),(h>BigInt(2)**BigInt(32)||h<-(BigInt(2)**BigInt(32)))&&(_=Fs(_)),_+="n"),g+=` It must be ${f}. Received ${_}`,g},RangeError);function Fs(m){let f="",h=m.length;const g=m[0]==="-"?1:0;for(;h>=g+4;h-=3)f=`_${m.slice(h-3,h)}${f}`;return`${m.slice(0,h)}${f}`}function Ic(m,f,h){Gt(f,"offset"),(m[f]===void 0||m[f+h]===void 0)&&_n(f,m.length-(h+1))}function Bs(m,f,h,g,_,A){if(m>h||m<f){const R=typeof f=="bigint"?"n":"";let z;throw f===0||f===BigInt(0)?z=`>= 0${R} and < 2${R} ** ${(A+1)*8}${R}`:z=`>= -(2${R} ** ${(A+1)*8-1}${R}) and < 2 ** ${(A+1)*8-1}${R}`,new Kt.ERR_OUT_OF_RANGE("value",z,m)}Ic(g,_,A)}function Gt(m,f){if(typeof m!="number")throw new Kt.ERR_INVALID_ARG_TYPE(f,"number",m)}function _n(m,f,h){throw Math.floor(m)!==m?(Gt(m,h),new Kt.ERR_OUT_OF_RANGE("offset","an integer",m)):f<0?new Kt.ERR_BUFFER_OUT_OF_BOUNDS:new Kt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${f}`,m)}const Ac=/[^+/0-9A-Za-z-_]/g;function Oc(m){if(m=m.split("=")[0],m=m.trim().replace(Ac,""),m.length<2)return"";for(;m.length%4!==0;)m=m+"=";return m}function ai(m,f){f=f||1/0;let h;const g=m.length;let _=null;const A=[];for(let R=0;R<g;++R){if(h=m.charCodeAt(R),h>55295&&h<57344){if(!_){if(h>56319){(f-=3)>-1&&A.push(239,191,189);continue}else if(R+1===g){(f-=3)>-1&&A.push(239,191,189);continue}_=h;continue}if(h<56320){(f-=3)>-1&&A.push(239,191,189),_=h;continue}h=(_-55296<<10|h-56320)+65536}else _&&(f-=3)>-1&&A.push(239,191,189);if(_=null,h<128){if((f-=1)<0)break;A.push(h)}else if(h<2048){if((f-=2)<0)break;A.push(h>>6|192,h&63|128)}else if(h<65536){if((f-=3)<0)break;A.push(h>>12|224,h>>6&63|128,h&63|128)}else if(h<1114112){if((f-=4)<0)break;A.push(h>>18|240,h>>12&63|128,h>>6&63|128,h&63|128)}else throw new Error("Invalid code point")}return A}function Cc(m){const f=[];for(let h=0;h<m.length;++h)f.push(m.charCodeAt(h)&255);return f}function Rc(m,f){let h,g,_;const A=[];for(let R=0;R<m.length&&!((f-=2)<0);++R)h=m.charCodeAt(R),g=h>>8,_=h%256,A.push(_),A.push(g);return A}function Ps(m){return e.toByteArray(Oc(m))}function fr(m,f,h,g){let _;for(_=0;_<g&&!(_+h>=f.length||_>=m.length);++_)f[_+h]=m[_];return _}function Ze(m,f){return m instanceof f||m!=null&&m.constructor!=null&&m.constructor.name!=null&&m.constructor.name===f.name}function ui(m){return m!==m}const Nc=function(){const m="0123456789abcdef",f=new Array(256);for(let h=0;h<16;++h){const g=h*16;for(let _=0;_<16;++_)f[g+_]=m[h]+m[_]}return f}();function vt(m){return typeof BigInt>"u"?Mc:m}function Mc(){throw new Error("BigInt not supported")}})(Ma);const Fa=Ma.Buffer,it=globalThis||void 0||self;typeof self>"u"&&(it.self=it);class Ba{static toHex(e,t){const r=(c,l)=>{const u=l?["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"]:["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return u[Math.floor(c/16)]+u[c%16]},i=Object.assign({grouping:0,rowlength:0,uppercase:!1},t||{});let s="",o=0,a=0;for(let c=0;c<e.length&&(s+=r(e[c],i.uppercase),c!==e.length-1);++c)i.grouping>0&&++o===i.grouping&&(o=0,i.rowlength>0&&++a===i.rowlength?(a=0,s+=`
`):s+=" ");return s}static toUint8Array(e){let t=e.toLowerCase().replace(/\s/g,"");t.length%2===1&&(t=`0${t}`);const r=new Uint8Array(Math.floor(t.length/2));let i=-1;for(let s=0;s<t.length;++s){const o=t[s],a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"].indexOf(o);if(a===-1)throw Error("unexpected character");i===-1?i=16*a:(r[Math.floor(s/2)]=i+a,i=-1)}return r}}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")});String.prototype.toCamelCase||(String.prototype.toCamelCase=function(){return this.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(n,e)=>e.toUpperCase())});String.prototype.toSnakeCase||(String.prototype.toSnakeCase=function(){return this.replace(/[A-Z]/g,n=>`_${n.toLowerCase()}`)});function zn(n,e){const t=Math.ceil(n.length/e),r=[];for(let i=0,s=0;i<t;++i,s+=e)r[i]=n.substr(s,e);return r}function Vr(n=256,e="abcdef0123456789"){let t=new Uint8Array(n);return t=crypto.getRandomValues(t),t=t.map(r=>e.charCodeAt(r%e.length)),String.fromCharCode.apply(null,t)}function Pa(n,e,t,r,i){if(r=r||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz~`!@#$%^&*()-_=+[{]}\\|;:'\",<.>/?¿¡",i=i||r,e>r.length||t>i.length)return console.warn("Strings::charsetBaseConvert() - Can't convert",n,"to base",t,"greater than symbol table length. src-table:",r.length,"dest-table:",i.length),!1;let o=BigInt(0);for(let c=0;c<n.length;c++)o=o*BigInt(e)+BigInt(r.indexOf(n.charAt(c)));let a="";for(;o>0;){const c=o%BigInt(t);a=i.charAt(Number(c))+a,o/=BigInt(t)}return a||"0"}function cl(n){return Ba.toHex(n,{})}function ll(n){return Ba.toUint8Array(n)}function $a(n){return Fa.from(n,"hex").toString("base64")}function La(n){return Fa.from(n,"base64").toString("hex")}function Ua(n){return/^[A-F0-9]+$/i.test(n)}function fl(n){return(typeof n=="number"||typeof n=="string"&&n.trim()!=="")&&!isNaN(n)}let Kn=class{static normalizeMeta(e){const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r]!==null&&t.push({key:r,value:e[r].toString()});return t}static aggregateMeta(e){let t={};if(Array.isArray(e))for(const r of e)t[r.key]=r.value;else t=e;return t}};function qa(n,e){let t,r,i;const s=[Array,Date,Number,String,Boolean],o=Object.prototype.toString;for(e=e||[],t=0;t<e.length;t+=2)n===e[t]&&(r=e[t+1]);if(!r&&n&&typeof n=="object"){for(r={},t=0;t<s.length;t++)o.call(n)===o.call(i=new s[t](n))&&(r=t?i:[]);e.push(n,r);for(t in n)e.hasOwnProperty.call(n,t)&&(r[t]=qa(n[t],e))}return r||n}function hl(...n){return[].concat(...n.map((e,t)=>{const r=n.slice(0);r.splice(t,1);const i=[...new Set([].concat(...r))];return e.filter(s=>!i.includes(s))}))}function kn(...n){return n.reduce((e,t)=>e.filter(r=>t.includes(r)))}class as{constructor(e={},t={}){this.policy=as.normalizePolicy(e),this.fillDefault(t)}static normalizePolicy(e={}){const t={};for(const[r,i]of Object.entries(e))if(i!==null&&["read","write"].includes(r)){t[r]={};for(const[s,o]of Object.entries(i))t[r][s]=o}return t}fillDefault(e={}){const t=Array.from(this.policy).filter(i=>i.action==="read"),r=Array.from(this.policy).filter(i=>i.action==="write");for(const[i,s]of Object.entries({read:t,write:r})){const o=s.map(a=>a.key);this.policy[i]||(this.policy[i]={});for(const a of hl(e,o))this.policy[i][a]||(this.policy[i][a]=i==="write"&&!["characters","pubkey"].includes(a)?["self"]:["all"])}}get(){return this.policy}toJson(){return JSON.stringify(this.get())}}class Ue{constructor(e={}){this.meta=e}merge(e){return this.meta=Object.assign(this.meta,e),this}addContext(e=null){return this}setAtomWallet(e){const t={pubkey:e.pubkey,characters:e.characters};return e.tokenUnits&&e.tokenUnits.length&&(t.tokenUnits=JSON.stringify(e.getTokenUnitsData())),e.tradeRates&&e.tradeRates.length&&(t.tradeRates=JSON.stringify(e.tradeRates)),this.merge(t),this}setMetaWallet(e){return this.merge({walletTokenSlug:e.token,walletBundleHash:e.bundle,walletAddress:e.address,walletPosition:e.position,walletBatchId:e.batchId,walletPubkey:e.pubkey,walletCharacters:e.characters}),this}setShadowWalletClaim(e){return this.merge({shadowWalletClaim:e*1}),this}setSigningWallet(e){return this.merge({signingWallet:JSON.stringify({tokenSlug:e.token,bundleHash:e.bundle,address:e.address,position:e.position,pubkey:e.pubkey,characters:e.characters})}),this}addPolicy(e){const t=new as(e,Object.keys(this.meta));return this.merge({policy:t.toJson()}),this}get(){return this.meta}}class re extends TypeError{constructor(e=null,t=null,r=null){if(super(e,t,r),e===null)throw new this(`Unknown ${this.constructor.name}`);this.name="BaseException"}toString(){return`${this.name}: ${this.message}.
Stack:
${this.stack}`}}class jt extends re{constructor(e="The molecule does not contain atoms",t=null,r=null){super(e,t,r),this.name="AtomsMissingException"}}class Lt{static create(e){const t={};for(const r of Object.keys(e))Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return new this(t)}static structure(e){switch(Object.prototype.toString.call(e)){case"[object Array]":{const t=[];for(const r in e)t.push(Lt.isStructure(e[r])?Lt.structure(e[r]):e[r]);return t}case"[object Object]":{const t=[],r=Object.keys(e).sort((i,s)=>i===s?0:i<s?-1:1);for(const i of r)if(Object.prototype.hasOwnProperty.call(e,i)){const s={};s[i]=Lt.isStructure(e[i])?Lt.structure(e[i]):e[i],t.push(s)}if(t.length>0)return t;break}}return e}static isStructure(e){return["[object Object]","[object Array]"].includes(Object.prototype.toString.call(e))}view(){return Lt.structure(this)}}class dl extends Lt{constructor({position:e=null,walletAddress:t=null,isotope:r=null,token:i=null,value:s=null,batchId:o=null,metaType:a=null,metaId:c=null,meta:l=null,index:u=null,createdAt:p=null,version:d=null}){super(),this.position=e,this.walletAddress=t,this.isotope=r,this.token=i,this.value=s,this.batchId=o,this.metaType=a,this.metaId=c,this.meta=l,this.index=u,this.createdAt=p,this.version=d}}const _r={4:dl};class H{constructor({position:e=null,walletAddress:t=null,isotope:r=null,token:i=null,value:s=null,batchId:o=null,metaType:a=null,metaId:c=null,meta:l=null,otsFragment:u=null,index:p=null,version:d=null}){this.position=e,this.walletAddress=t,this.isotope=r,this.token=i,this.value=s!==null?String(s):null,this.batchId=o,this.metaType=a,this.metaId=c,this.meta=l?Kn.normalizeMeta(l):[],this.index=p,this.otsFragment=u,this.createdAt=String(+new Date),d!==null&&Object.prototype.hasOwnProperty.call(_r,d)&&(this.version=String(d))}static getHashableProps(){return["position","walletAddress","isotope","token","value","batchId","metaType","metaId","meta","createdAt"]}static getUnclaimedProps(){return["otsFragment"]}static create({isotope:e,wallet:t=null,value:r=null,metaType:i=null,metaId:s=null,meta:o=null,batchId:a=null}){return o||(o=new Ue),o instanceof Ue||(o=new Ue(o)),t&&(o.setAtomWallet(t),a||(a=t.batchId)),new H({position:t?t.position:null,walletAddress:t?t.address:null,isotope:e,token:t?t.token:null,value:r,batchId:a,metaType:i,metaId:s,meta:o.get()})}static jsonToObject(e){const t=Object.assign(new H({}),JSON.parse(e)),r=Object.keys(new H({}));for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&!r.includes(i)&&delete t[i];return t}static hashAtoms({atoms:e,output:t="base17"}){const r=new Ve("SHAKE256","TEXT"),i=H.sortAtoms(e);if(i.length===0)throw new jt;if(i.map(s=>{if(!(s instanceof H))throw new jt;return s}),i.every(s=>s.version&&Object.prototype.hasOwnProperty.call(_r,s.version)))r.update(JSON.stringify(i.map(s=>_r[s.version].create(s).view())));else{const s=String(e.length);let o=[];for(const a of i)o.push(s),o=o.concat(a.getHashableValues());for(const a of o)r.update(a)}switch(t){case"hex":return r.getHash("HEX",{outputLen:256});case"array":return r.getHash("ARRAYBUFFER",{outputLen:256});default:return Pa(r.getHash("HEX",{outputLen:256}),16,17,"0123456789abcdef","0123456789abcdefg").padStart(64,"0")}}static jsonSerialization(e,t){if(!H.getUnclaimedProps().includes(e))return t}static sortAtoms(e){const t=[...e];return t.sort((r,i)=>r.index<i.index?-1:1),t}aggregatedMeta(){return Kn.aggregateMeta(this.meta)}getHashableValues(){const e=[];for(const t of H.getHashableProps()){const r=this[t];if(!(r===null&&!["position","walletAddress"].includes(t)))if(t==="meta")for(const i of r)typeof i.value<"u"&&i.value!==null&&(e.push(String(i.key)),e.push(String(i.value)));else e.push(r===null?"":String(r))}return e}}function Mr(n=null,e=2048){if(n){const t=new Ve("SHAKE256","TEXT");return t.update(n),t.getHash("HEX",{outputLen:e*2})}else return Vr(e)}function Vt(n,e=null){const t=new Ve("SHAKE256","TEXT");return t.update(n),t.getHash("HEX",{outputLen:256})}function Dr({molecularHash:n=null,index:e=null}){return n!==null&&e!==null?Vt(String(n)+String(e),"generateBatchId"):Vr(64)}class Gn{constructor(e,t,r){this.id=e,this.name=t,this.metas=r||{}}static createFromGraphQL(e){let t=e.metas||{};return t.length&&(t=JSON.parse(t),t||(t={})),new Gn(e.id,e.name,t)}static createFromDB(e){return new Gn(e[0],e[1],e.length>2?e[2]:{})}getFragmentZone(){return this.metas.fragmentZone||null}getFusedTokenUnits(){return this.metas.fusedTokenUnits||null}toData(){return[this.id,this.name,this.metas]}toGraphQLResponse(){return{id:this.id,name:this.name,metas:JSON.stringify(this.metas)}}}class pl extends re{constructor(e="Attempting to create a wallet with no credentials (secret or bundle hash)",t=null,r=null){super(e,t,r),this.name="WalletCredentialException"}}function Ks(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function yl(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Qr(n,...e){if(!yl(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function Gs(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function ml(n,e){Qr(n);const t=e.outputLen;if(n.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}const dr=BigInt(2**32-1),Js=BigInt(32);function gl(n,e=!1){return e?{h:Number(n&dr),l:Number(n>>Js&dr)}:{h:Number(n>>Js&dr)|0,l:Number(n&dr)|0}}function bl(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=gl(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const vl=(n,e,t)=>n<<t|e>>>32-t,wl=(n,e,t)=>e<<t|n>>>32-t,El=(n,e,t)=>e<<t-32|n>>>64-t,_l=(n,e,t)=>n<<t-32|e>>>64-t,Xt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ja(n){return new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4))}const Ys=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Sl(n){return n<<24&4278190080|n<<8&16711680|n>>>8&65280|n>>>24&255}function Xs(n){for(let e=0;e<n.length;e++)n[e]=Sl(n[e])}function kl(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function us(n){return typeof n=="string"&&(n=kl(n)),Qr(n),n}class xl{clone(){return this._cloneInto()}}function Tl(n){const e=r=>n().update(us(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function Il(n){const e=(r,i)=>n(i).update(us(r)).digest(),t=n({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=r=>n(r),e}function Al(n=32){if(Xt&&typeof Xt.getRandomValues=="function")return Xt.getRandomValues(new Uint8Array(n));if(Xt&&typeof Xt.randomBytes=="function")return Xt.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}const Va=[],Qa=[],Ha=[],Ol=BigInt(0),xn=BigInt(1),Cl=BigInt(2),Rl=BigInt(7),Nl=BigInt(256),Ml=BigInt(113);for(let n=0,e=xn,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],Va.push(2*(5*r+t)),Qa.push((n+1)*(n+2)/2%64);let i=Ol;for(let s=0;s<7;s++)e=(e<<xn^(e>>Rl)*Ml)%Nl,e&Cl&&(i^=xn<<(xn<<BigInt(s))-xn);Ha.push(i)}const[Dl,Fl]=bl(Ha,!0),Zs=(n,e,t)=>t>32?El(n,e,t):vl(n,e,t),eo=(n,e,t)=>t>32?_l(n,e,t):wl(n,e,t);function Bl(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],p=Zs(l,u,1)^t[a],d=eo(l,u,1)^t[a+1];for(let y=0;y<50;y+=10)n[o+y]^=p,n[o+y+1]^=d}let i=n[2],s=n[3];for(let o=0;o<24;o++){const a=Qa[o],c=Zs(i,s,a),l=eo(i,s,a),u=Va[o];i=n[u],s=n[u+1],n[u]=c,n[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=n[o+a];for(let a=0;a<10;a++)n[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}n[0]^=Dl[r],n[1]^=Fl[r]}t.fill(0)}class Hr extends xl{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Ks(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ja(this.state)}keccak(){Ys||Xs(this.state32),Bl(this.state32,this.rounds),Ys||Xs(this.state32),this.posOut=0,this.pos=0}update(e){Gs(this);const{blockLen:t,state:r}=this;e=us(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let a=0;a<o;a++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){Gs(this,!1),Qr(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Ks(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ml(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new Hr(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Wa=(n,e,t)=>Tl(()=>new Hr(e,n,t)),Pl=Wa(6,136,256/8),$l=Wa(6,72,512/8),za=(n,e,t)=>Il((r={})=>new Hr(e,n,r.dkLen===void 0?t:r.dkLen,!0)),Ll=za(31,168,128/8),Ka=za(31,136,256/8);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const It=Qr,to=Al;function no(n,e){if(n.length!==e.length)return!1;let t=0;for(let r=0;r<n.length;r++)t|=n[r]^e[r];return t===0}function Sr(...n){const e=r=>typeof r=="number"?r:r.bytesLen,t=n.reduce((r,i)=>r+e(i),0);return{bytesLen:t,encode:r=>{const i=new Uint8Array(t);for(let s=0,o=0;s<n.length;s++){const a=n[s],c=e(a),l=typeof a=="number"?r[s]:a.encode(r[s]);It(l,c),i.set(l,o),typeof a!="number"&&l.fill(0),o+=c}return i},decode:r=>{It(r,t);const i=[];for(const s of n){const o=e(s),a=r.subarray(0,o);i.push(typeof s=="number"?a:s.decode(a)),r=r.subarray(o)}return i}}}function fi(n,e){const t=e*n.bytesLen;return{bytesLen:t,encode:r=>{if(r.length!==e)throw new Error(`vecCoder.encode: wrong length=${r.length}. Expected: ${e}`);const i=new Uint8Array(t);for(let s=0,o=0;s<r.length;s++){const a=n.encode(r[s]);i.set(a,o),a.fill(0),o+=a.length}return i},decode:r=>{It(r,t);const i=[];for(let s=0;s<r.length;s+=n.bytesLen)i.push(n.decode(r.subarray(s,s+n.bytesLen)));return i}}}function qt(...n){for(const e of n)if(Array.isArray(e))for(const t of e)t.fill(0);else e.fill(0)}function ro(n){return(1<<n)-1}/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */function Ul(n,e=8){const i=n.toString(2).padStart(8,"0").slice(-e).padStart(7,"0").split("").reverse().join("");return Number.parseInt(i,2)}const ql=n=>{const{newPoly:e,N:t,Q:r,F:i,ROOT_OF_UNITY:s,brvBits:o,isKyber:a}=n,c=(w,v=r)=>{const k=w%v|0;return(k>=0?k|0:v+k|0)|0},l=(w,v=r)=>{const k=c(w,v)|0;return(k>v>>1?k-v|0:k)|0};function u(){const w=e(t);for(let v=0;v<t;v++){const k=Ul(v,o),S=BigInt(s)**BigInt(k)%BigInt(r);w[v]=Number(S)|0}return w}const p=u(),d=a?128:t,y=a?1:0;return{mod:c,smod:l,nttZetas:p,NTT:{encode:w=>{for(let v=1,k=128;k>y;k>>=1)for(let S=0;S<t;S+=2*k){const I=p[v++];for(let O=S;O<S+k;O++){const C=c(I*w[O+k]);w[O+k]=c(w[O]-C)|0,w[O]=c(w[O]+C)|0}}return w},decode:w=>{for(let v=d-1,k=1+y;k<d+y;k<<=1)for(let S=0;S<t;S+=2*k){const I=p[v--];for(let O=S;O<S+k;O++){const C=w[O];w[O]=c(C+w[O+k]),w[O+k]=c(I*(w[O+k]-C))}}for(let v=0;v<w.length;v++)w[v]=c(i*w[v]);return w}},bitsCoder:(w,v)=>{const k=ro(w),S=w*(t/8);return{bytesLen:S,encode:I=>{const O=new Uint8Array(S);for(let C=0,M=0,F=0,L=0;C<I.length;C++)for(M|=(v.encode(I[C])&k)<<F,F+=w;F>=8;F-=8,M>>=8)O[L++]=M&ro(F);return O},decode:I=>{const O=e(t);for(let C=0,M=0,F=0,L=0;C<I.length;C++)for(M|=I[C]<<F,F+=8;F>=w;F-=w,M>>=w)O[L++]=v.decode(M&k);return O}}}}},jl=n=>(e,t)=>{t||(t=n.blockLen);const r=new Uint8Array(e.length+2);r.set(e);const i=e.length,s=new Uint8Array(t);let o=n.create({}),a=0,c=0;return{stats:()=>({calls:a,xofs:c}),get:(l,u)=>(r[i+0]=l,r[i+1]=u,o.destroy(),o=n.create({}).update(r),a++,()=>(c++,o.xofInto(s))),clean:()=>{o.destroy(),s.fill(0),r.fill(0)}}},Vl=jl(Ll);/*! noble-post-quantum - MIT License (c) 2024 Paul Miller (paulmillr.com) */const Ne=256,yt=3329,Ql=3303,Hl=17,{mod:Jn,nttZetas:Wl,NTT:Dt,bitsCoder:zl}=ql({N:Ne,Q:yt,F:Ql,ROOT_OF_UNITY:Hl,newPoly:n=>new Uint16Array(n),brvBits:7,isKyber:!0}),Kl={512:{N:Ne,Q:yt,K:2,ETA1:3,ETA2:2,du:10,dv:4,RBGstrength:128},768:{N:Ne,Q:yt,K:3,ETA1:2,ETA2:2,du:10,dv:4,RBGstrength:192},1024:{N:Ne,Q:yt,K:4,ETA1:2,ETA2:2,du:11,dv:5,RBGstrength:256}},Gl=n=>{if(n>=12)return{encode:t=>t,decode:t=>t};const e=2**(n-1);return{encode:t=>((t<<n)+yt/2)/yt,decode:t=>t*yt+e>>>n}},Tn=n=>zl(n,Gl(n));function Ft(n,e){for(let t=0;t<Ne;t++)n[t]=Jn(n[t]+e[t])}function Jl(n,e){for(let t=0;t<Ne;t++)n[t]=Jn(n[t]-e[t])}function Yl(n,e,t,r,i){const s=Jn(e*r*i+n*t),o=Jn(n*r+e*t);return{c0:s,c1:o}}function pr(n,e){for(let t=0;t<Ne/2;t++){let r=Wl[64+(t>>1)];t&1&&(r=-r);const{c0:i,c1:s}=Yl(n[2*t+0],n[2*t+1],e[2*t+0],e[2*t+1],r);n[2*t+0]=i,n[2*t+1]=s}return n}function io(n){const e=new Uint16Array(Ne);for(let t=0;t<Ne;){const r=n();if(r.length%3)throw new Error("SampleNTT: unaligned block");for(let i=0;t<Ne&&i+3<=r.length;i+=3){const s=(r[i+0]>>0|r[i+1]<<8)&4095,o=(r[i+1]>>4|r[i+2]<<4)&4095;s<yt&&(e[t++]=s),t<Ne&&o<yt&&(e[t++]=o)}}return e}function In(n,e,t,r){const i=n(r*Ne/4,e,t),s=new Uint16Array(Ne),o=ja(i);let a=0;for(let c=0,l=0,u=0,p=0;c<o.length;c++){let d=o[c];for(let y=0;y<32;y++)u+=d&1,d>>=1,a+=1,a===r?(p=u,u=0):a===2*r&&(s[l++]=Jn(p-u),u=0,a=0)}if(a)throw new Error(`sampleCBD: leftover bits: ${a}`);return s}const Xl=n=>{const{K:e,PRF:t,XOF:r,HASH512:i,ETA1:s,ETA2:o,du:a,dv:c}=n,l=Tn(1),u=Tn(c),p=Tn(a),d=Sr(fi(Tn(12),e),32),y=fi(Tn(12),e),b=Sr(fi(p,e),u),E=Sr(32,32);return{secretCoder:y,secretKeyLen:y.bytesLen,publicKeyLen:d.bytesLen,cipherTextLen:b.bytesLen,keygen:w=>{const v=new Uint8Array(33);v.set(w),v[32]=e;const k=i(v),[S,I]=E.decode(k),O=[],C=[];for(let L=0;L<e;L++)O.push(Dt.encode(In(t,I,L,s)));const M=r(S);for(let L=0;L<e;L++){const V=Dt.encode(In(t,I,e+L,s));for(let G=0;G<e;G++){const Ee=io(M.get(G,L));Ft(V,pr(Ee,O[G]))}C.push(V)}M.clean();const F={publicKey:d.encode([C,S]),secretKey:y.encode(O)};return qt(S,I,O,C,v,k),F},encrypt:(w,v,k)=>{const[S,I]=d.decode(w),O=[];for(let G=0;G<e;G++)O.push(Dt.encode(In(t,k,G,s)));const C=r(I),M=new Uint16Array(Ne),F=[];for(let G=0;G<e;G++){const Ee=In(t,k,e+G,o),ie=new Uint16Array(Ne);for(let _e=0;_e<e;_e++){const j=io(C.get(G,_e));Ft(ie,pr(j,O[_e]))}Ft(Ee,Dt.decode(ie)),F.push(Ee),Ft(M,pr(S[G],O[G])),ie.fill(0)}C.clean();const L=In(t,k,2*e,o);Ft(L,Dt.decode(M));const V=l.decode(v);return Ft(V,L),qt(S,O,M,L),b.encode([F,V])},decrypt:(w,v)=>{const[k,S]=b.decode(w),I=y.decode(v),O=new Uint16Array(Ne);for(let C=0;C<e;C++)Ft(O,pr(I[C],Dt.encode(k[C])));return Jl(S,Dt.decode(O)),qt(O,I,k),l.encode(S)}}};function Zl(n){const e=Xl(n),{HASH256:t,HASH512:r,KDF:i}=n,{secretCoder:s,cipherTextLen:o}=e,a=e.publicKeyLen,c=Sr(e.secretKeyLen,e.publicKeyLen,32,32),l=c.bytesLen,u=32;return{publicKeyLen:a,msgLen:u,keygen:(p=to(64))=>{It(p,64);const{publicKey:d,secretKey:y}=e.keygen(p.subarray(0,32)),b=t(d),E=c.encode([y,d,b,p.subarray(32)]);return qt(y,b),{publicKey:d,secretKey:E}},encapsulate:(p,d=to(32))=>{It(p,a),It(d,u);const y=p.subarray(0,384*n.K),b=s.encode(s.decode(y.slice()));if(!no(b,y))throw qt(b),new Error("ML-KEM.encapsulate: wrong publicKey modulus");qt(b);const E=r.create().update(d).update(t(p)).digest(),w=e.encrypt(p,d,E.subarray(32,64));return E.subarray(32).fill(0),{cipherText:w,sharedSecret:E.subarray(0,32)}},decapsulate:(p,d)=>{It(d,l),It(p,o);const[y,b,E,w]=c.decode(d),v=e.decrypt(p,y),k=r.create().update(v).update(E).digest(),S=k.subarray(0,32),I=e.encrypt(b,v,k.subarray(32,64)),O=no(p,I),C=i.create({dkLen:32}).update(w).update(p).digest();return qt(v,I,O?C:S),O?S:C}}}function ef(n,e,t){return Ka.create({dkLen:n}).update(e).update(new Uint8Array([t])).digest()}const tf={HASH256:Pl,HASH512:$l,KDF:Ka,XOF:Vl,PRF:ef},hi=Zl({...tf,...Kl[768]});class Y{constructor({secret:e=null,bundle:t=null,token:r="USER",address:i=null,position:s=null,batchId:o=null,characters:a=null}){this.token=r,this.balance=0,this.molecules={},this.key=null,this.privkey=null,this.pubkey=null,this.tokenUnits=[],this.tradeRates={},this.address=i,this.position=s,this.bundle=t,this.batchId=o,this.characters=a,e&&(this.bundle=this.bundle||Vt(e,"Wallet::constructor"),this.position=this.position||Y.generatePosition(),this.key=Y.generateKey({secret:e,token:this.token,position:this.position}),this.address=this.address||Y.generateAddress(this.key),this.characters=this.characters||"BASE64",this.initializeMLKEM())}static create({secret:e=null,bundle:t=null,token:r,batchId:i=null,characters:s=null}){let o=null;if(!e&&!t)throw new pl;return e&&!t&&(o=Y.generatePosition(),t=Vt(e,"Wallet::create")),new Y({secret:e,bundle:t,token:r,position:o,batchId:i,characters:s})}static isBundleHash(e){return typeof e!="string"?!1:e.length===64&&Ua(e)}static getTokenUnits(e){const t=[];return e.forEach(r=>{t.push(Gn.createFromDB(r))}),t}static generateKey({secret:e,token:t,position:r}){const s=BigInt(`0x${e}`)+BigInt(`0x${r}`),o=new Ve("SHAKE256","TEXT");o.update(s.toString(16)),t&&o.update(t);const a=new Ve("SHAKE256","TEXT");return a.update(o.getHash("HEX",{outputLen:8192})),a.getHash("HEX",{outputLen:8192})}static generateAddress(e){const t=zn(e,128),r=new Ve("SHAKE256","TEXT");for(const s in t){let o=t[s];for(let a=1;a<=16;a++){const c=new Ve("SHAKE256","TEXT");c.update(o),o=c.getHash("HEX",{outputLen:512})}r.update(o)}const i=new Ve("SHAKE256","TEXT");return i.update(r.getHash("HEX",{outputLen:8192})),i.getHash("HEX",{outputLen:256})}static generatePosition(e=64){return Vr(e,"abcdef0123456789")}initializeMLKEM(){const e=Mr(this.key,64),t=new Uint8Array(64);for(let s=0;s<64;s++)t[s]=parseInt(e.substr(s*2,2),16);const{publicKey:r,secretKey:i}=hi.keygen(t);this.pubkey=this.serializeKey(r),this.privkey=i}serializeKey(e){return btoa(String.fromCharCode.apply(null,e))}deserializeKey(e){const t=atob(e);return new Uint8Array(t.length).map((r,i)=>t.charCodeAt(i))}getTokenUnitsData(){const e=[];return this.tokenUnits.forEach(t=>{e.push(t.toData())}),e}splitUnits(e,t,r=null){if(e.length===0)return;const i=[],s=[];this.tokenUnits.forEach(o=>{e.includes(o.id)?i.push(o):s.push(o)}),this.tokenUnits=i,r!==null&&(r.tokenUnits=i),t.tokenUnits=s}createRemainder(e){const t=Y.create({secret:e,token:this.token,characters:this.characters});return t.initBatchId({sourceWallet:this,isRemainder:!0}),t}isShadow(){return(typeof this.position>"u"||this.position===null)&&(typeof this.address>"u"||this.address===null)}initBatchId({sourceWallet:e,isRemainder:t=!1}){e.batchId&&(this.batchId=t?e.batchId:Dr({}))}async encryptMessage(e,t){const r=JSON.stringify(e),i=new TextEncoder().encode(r),s=this.deserializeKey(t),{cipherText:o,sharedSecret:a}=hi.encapsulate(s),c=await this.encryptWithSharedSecret(i,a);return{cipherText:this.serializeKey(o),encryptedMessage:this.serializeKey(c)}}async decryptMessage(e){const{cipherText:t,encryptedMessage:r}=e,i=hi.decapsulate(this.deserializeKey(t),this.privkey),s=await this.decryptWithSharedSecret(this.deserializeKey(r),i),o=new TextDecoder().decode(s);return JSON.parse(o)}async encryptWithSharedSecret(e,t){const r=crypto.getRandomValues(new Uint8Array(12)),i={name:"AES-GCM",iv:r},s=await crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["encrypt"]),o=await crypto.subtle.encrypt(i,s,e),a=new Uint8Array(r.length+o.byteLength);return a.set(r),a.set(new Uint8Array(o),r.length),a}async decryptWithSharedSecret(e,t){const i={name:"AES-GCM",iv:e.slice(0,12)},s=await crypto.subtle.importKey("raw",t,{name:"AES-GCM"},!1,["decrypt"]),o=await crypto.subtle.decrypt(i,s,e.slice(12));return new Uint8Array(o)}}class An extends re{constructor(e="There is an atom without an index",t=null,r=null){super(e,t,r),this.name="AtomIndexException"}}class nf extends re{constructor(e="The molecular hash does not match",t=null,r=null){super(e,t,r),this.name="MolecularHashMismatchException"}}class rf extends re{constructor(e="The molecular hash is missing",t=null,r=null){super(e,t,r),this.name="MolecularHashMissingException"}}class so extends re{constructor(e="",t=null,r=null){super(e,t,r),this.name="PolicyInvalidException"}}class Ga extends re{constructor(e="OTS malformed",t=null,r=null){super(e,t,r),this.name="SignatureMalformedException"}}class sf extends re{constructor(e="One-time signature (OTS) does not match!",t=null,r=null){super(e,t,r),this.name="SignatureMismatchException"}}class ft extends re{constructor(e="Insufficient balance to make transfer",t=null,r=null){super(e,t,r),this.name="TransferBalanceException"}}class oo extends re{constructor(e="Token transfer atoms are malformed",t=null,r=null){super(e,t,r),this.name="TransferMalformedException"}}class ao extends re{constructor(e="Token slugs for wallets in transfer do not match!",t=null,r=null){super(e,t,r),this.name="TransferMismatchedException"}}class uo extends re{constructor(e="Invalid remainder provided",t=null,r=null){super(e,t,r),this.name="TransferRemainderException"}}class of extends re{constructor(e="Sender and recipient(s) cannot be the same",t=null,r=null){super(e,t,r),this.name="TransferToSelfException"}}class af extends re{constructor(e="Token transfer atoms are unbalanced",t=null,r=null){super(e,t,r),this.name="TransferUnbalancedException"}}class Et extends re{constructor(e="Empty meta data.",t=null,r=null){super(e,t,r),this.name="MetaMissingException"}}class On extends re{constructor(e="Wrong type of token for this isotope",t=null,r=null){super(e,t,r),this.name="WrongTokenTypeException"}}class kr extends re{constructor(e="Incorrect BatchId",t=null,r=null){super(e,t,r),this.name="BatchIdException"}}class co{constructor({}){const e=arguments[0];for(const t in e)this[`__${t}`]=e[t]}static toObject(e){return new this(e)}toJSON(){const e={};for(const t of Object.keys(this))t.substring(0,2)==="__"&&(e[t.substring(2,t.length)]=this[t]);return e}}class Fr extends re{constructor(e="An incorrect argument!",t=null,r=null){super(e,t,r),this.name="RuleArgumentException"}}class Qe extends re{constructor(e="Code exception",t=null,r=null){super(e,t,r),this.name="CodeException"}}class qn{constructor({action:e,metaType:t=null,metaId:r=null,meta:i=null,address:s=null,token:o=null,amount:a=null,comparison:c=null}){if(i&&(this.meta=i),!e)throw new Fr('Callback structure violated, missing mandatory "action" parameter.');this.__metaId=r,this.__metaType=t,this.__action=e,this.__address=s,this.__token=o,this.__amount=a,this.__comparison=c}set comparison(e){this.__comparison=e}set amount(e){if(!fl(e))throw new Qe("Parameter amount should be a string containing numbers");this.__amount=e}set token(e){this.__token=e}set address(e){this.__address=e}set meta(e){this.__meta=e instanceof co?e:co.toObject(e)}set metaType(e){this.__metaType=e}set metaId(e){this.__metaId=e}static toObject(e){const t=new qn({action:e.action});return e.metaType&&(t.metaType=e.metaType),e.metaId&&(t.metaId=e.metaId),e.meta&&(t.meta=e.meta),e.address&&(t.address=e.address),e.token&&(t.token=e.token),e.amount&&(t.amount=e.amount),e.comparison&&(t.comparison=e.comparison),t}toJSON(){const e={action:this.__action};return this.__metaType&&(e.metaType=this.__metaType),this.__metaId&&(e.metaId=this.__metaId),this.__meta&&(e.meta=this.__meta),this.__address&&(e.address=this.__address),this.__token&&(e.token=this.__token),this.__amount&&(e.amount=this.__amount),this.__comparison&&(e.comparison=this.__comparison),e}isReject(){return this._is("reject")}isMeta(){return kn(Object.keys(this.toJSON()),["action","metaId","metaType","meta"]).length===4&&this._is("meta")}isCollect(){return kn(Object.keys(this.toJSON()),["action","address","token","amount","comparison"]).length===5&&this._is("collect")}isBuffer(){return kn(Object.keys(this.toJSON()),["action","address","token","amount","comparison"]).length===5&&this._is("buffer")}isRemit(){return kn(Object.keys(this.toJSON()),["action","token","amount"]).length===3&&this._is("remit")}isBurn(){return kn(Object.keys(this.toJSON()),["action","token","amount","comparison"]).length===4&&this._is("burn")}_is(e){return this.__action.toLowerCase()===e.toLowerCase()}}class di{constructor({key:e,value:t,comparison:r}){if([e,t,r].some(i=>!i))throw new Fr("Condition::constructor( { key, value, comparison } ) - not all class parameters are initialised!");this.__key=e,this.__value=t,this.__comparison=r}static toObject(e){return new this({key:e.key,value:e.value,comparison:e.comparison})}toJSON(){return{key:this.__key,value:this.__value,comparison:this.__comparison}}}class Yn{constructor({condition:e=[],callback:t=[]}){for(const r of e)if(!(r instanceof di))throw new Fr;for(const r of t)if(!(r instanceof qn))throw new Fr;this.__condition=e,this.__callback=t}set comparison(e){this.__condition.push(e instanceof di?e:di.toObject(e))}set callback(e){this.__callback.push(e instanceof qn?e:qn.toObject(e))}static toObject(e){if(!e.condition)throw new Et("Rule::toObject() - Incorrect rule format! There is no condition field.");if(!e.callback)throw new Et("Rule::toObject() - Incorrect rule format! There is no callback field.");const t=new Yn({});for(const r of e.condition)t.comparison=r;for(const r of e.callback)t.callback=r;return t}toJSON(){return{condition:this.__condition,callback:this.__callback}}}class he{static __init(e,t){this.arr=String(t).split("."),this.key=this.arr.shift();const r=Number(this.key);Number.isInteger(r)&&(this.key=r),this.__nextKey=this.arr.length,this.__next=this.__tic(e)}static __tic(e){return!Array.isArray(e)&&!(e instanceof Object)?!1:typeof e[this.key]<"u"}static has(e,t){return this.__init(e,t),this.__next?this.__nextKey===0?!0:this.has(e[this.key],this.arr.join(".")):!1}static get(e,t,r=null){return this.__init(e,t),this.__next?this.__nextKey===0?e[this.key]:this.get(e[this.key],this.arr.join("."),r):r}static set(e,t,r){const i=t.split(".");let s=e;const o=i.length-1;for(let l=0;l<o;l++){const u=i[l],p=Number(u),d=Number.isInteger(p);(d?p:u in s)||(s[d?p:u]=i[l+1].match(/^\d+$/)?[]:{}),s=s[d?p:u]}const a=i[o],c=Number(a);return s[Number.isInteger(c)?c:a]=r,e}}class uf{constructor(e){if(e.molecularHash===null)throw new rf;if(!e.atoms.length)throw new jt;for(const t of e.atoms)if(t.index===null)throw new An;this.molecule=e}verify(e){return this.molecularHash()&&this.ots()&&this.batchId()&&this.continuId()&&this.isotopeM()&&this.isotopeT()&&this.isotopeC()&&this.isotopeU()&&this.isotopeI()&&this.isotopeR()&&this.isotopeV(e)}continuId(){if(this.molecule.atoms[0].token==="USER"&&this.molecule.getIsotopes("I").length<1)throw new jt("Check::continuId() - Molecule is missing required ContinuID Atom!");return!0}batchId(){if(this.molecule.atoms.length>0){const e=this.molecule.atoms[0];if(e.isotope==="V"&&e.batchId!==null){const t=this.molecule.getIsotopes("V"),r=t[t.length-1];if(e.batchId!==r.batchId)throw new kr;for(const i of t)if(i.batchId===null)throw new kr}return!0}throw new kr}isotopeI(){for(const e of this.molecule.getIsotopes("I")){if(e.token!=="USER")throw new On(`Check::isotopeI() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index===0)throw new An(`Check::isotopeI() - Isotope "${e.isotope}" Atoms must have a non-zero index!`)}return!0}isotopeU(){for(const e of this.molecule.getIsotopes("U")){if(e.token!=="AUTH")throw new On(`Check::isotopeU() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new An(`Check::isotopeU() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeM(){const e=["readPolicy","writePolicy"];for(const t of this.molecule.getIsotopes("M")){if(t.meta.length<1)throw new Et;if(t.token!=="USER")throw new On(`Check::isotopeM() - "${t.token}" is not a valid Token slug for "${t.isotope}" isotope Atoms!`);const r=Kn.aggregateMeta(t.meta);for(const i of e){let s=r[i];if(s){s=JSON.parse(s);for(const[o,a]of Object.entries(s))if(!e.includes(o)){if(!Object.keys(r).includes(o))throw new so(`${o} is missing from the meta.`);for(const c of a)if(!Y.isBundleHash(c)&&!["all","self"].includes(c))throw new so(`${c} does not correspond to the format of the policy.`)}}}}return!0}isotopeC(){for(const e of this.molecule.getIsotopes("C")){if(e.token!=="USER")throw new On(`Check::isotopeC() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new An(`Check::isotopeC() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeT(){for(const e of this.molecule.getIsotopes("T")){const t=e.aggregatedMeta();if(String(e.metaType).toLowerCase()==="wallet"){for(const i of["position","bundle"])if(!Object.prototype.hasOwnProperty.call(t,i)||!t[i])throw new Et(`Check::isotopeT() - Required meta field "${i}" is missing!`)}for(const i of["token"])if(!Object.prototype.hasOwnProperty.call(t,i)||!t[i])throw new Et(`Check::isotopeT() - Required meta field "${i}" is missing!`);if(e.token!=="USER")throw new On(`Check::isotopeT() - "${e.token}" is not a valid Token slug for "${e.isotope}" isotope Atoms!`);if(e.index!==0)throw new An(`Check::isotopeT() - Isotope "${e.isotope}" Atoms must have an index equal to 0!`)}return!0}isotopeR(){for(const e of this.molecule.getIsotopes("R")){const t=e.aggregatedMeta();if(t.policy){const r=JSON.parse(t.policy);if(!Object.keys(r).every(i=>["read","write"].includes(i)))throw new Et("Check::isotopeR() - Mixing rules with politics!")}if(t.rule){const r=JSON.parse(t.rule);if(!Array.isArray(r))throw new Et("Check::isotopeR() - Incorrect rule format!");for(const i of r)Yn.toObject(i);if(r.length<1)throw new Et("Check::isotopeR() - No rules!")}}return!0}isotopeV(e=null){const t=this.molecule.getIsotopes("V");if(t.length===0)return!0;const r=this.molecule.atoms[0];if(r.isotope==="V"&&t.length===2){const o=t[t.length-1];if(r.token!==o.token)throw new ao;if(o.value<0)throw new oo;return!0}let i=0,s=0;for(const o in this.molecule.atoms)if(Object.prototype.hasOwnProperty.call(this.molecule.atoms,o)){const a=this.molecule.atoms[o];if(a.isotope!=="V")continue;if(s=a.value*1,Number.isNaN(s))throw new TypeError('Invalid isotope "V" values');if(a.token!==r.token)throw new ao;if(o>0){if(s<0)throw new oo;if(a.walletAddress===r.walletAddress)throw new of}i+=s}if(i!==s)throw new af;if(e){if(s=r.value*1,Number.isNaN(s))throw new TypeError('Invalid isotope "V" values');const o=e.balance+s;if(o<0)throw new ft;if(o!==i)throw new uo}else if(s!==0)throw new uo;return!0}molecularHash(){if(this.molecule.molecularHash!==H.hashAtoms({atoms:this.molecule.atoms}))throw new nf;return!0}ots(){const e=this.molecule.normalizedHash();let t=this.molecule.atoms.map(d=>d.otsFragment).reduce((d,y)=>d+y);if(t.length!==2048&&(t=La(t),t.length!==2048))throw new Ga;const r=zn(t,128);let i="";for(const d in r){let y=r[d];for(let b=0,E=8+e[d];b<E;b++)y=new Ve("SHAKE256","TEXT").update(y).getHash("HEX",{outputLen:512});i+=y}const s=new Ve("SHAKE256","TEXT");s.update(i);const o=s.getHash("HEX",{outputLen:8192}),a=new Ve("SHAKE256","TEXT");a.update(o);const c=a.getHash("HEX",{outputLen:256}),l=this.molecule.atoms[0];let u=l.walletAddress;const p=he.get(l.aggregatedMeta(),"signingWallet");if(p&&(u=he.get(JSON.parse(p),"address")),c!==u)throw new sf;return!0}}class Cn extends re{constructor(e="Insufficient balance for requested transfer",t=null,r=null){super(e,t,r),this.name="BalanceInsufficientException"}}class lo extends re{constructor(e="Amount cannot be negative!",t=null,r=null){super(e,t,r),this.name="NegativeAmountException"}}class et{constructor({secret:e=null,bundle:t=null,sourceWallet:r=null,remainderWallet:i=null,cellSlug:s=null,version:o=null}){this.status=null,this.molecularHash=null,this.createdAt=String(+new Date),this.cellSlugOrigin=this.cellSlug=s,this.secret=e,this.bundle=t,this.sourceWallet=r,this.atoms=[],o!==null&&Object.prototype.hasOwnProperty.call(_r,o)&&(this.version=String(o)),(i||r)&&(this.remainderWallet=i||Y.create({secret:e,bundle:t,token:r.token,batchId:r.batchId,characters:r.characters}))}get cellSlugDelimiter(){return"."}static isotopeFilter(e,t){return Array.isArray(e)||(e=[e]),t.filter(r=>e.includes(r.isotope))}static generateNextAtomIndex(e){return e.length}static jsonToObject(e){const t=Object.assign(new et({}),JSON.parse(e)),r=Object.keys(new et({}));if(!Array.isArray(t.atoms))throw new jt;for(const i in Object.keys(t.atoms)){t.atoms[i]=H.jsonToObject(JSON.stringify(t.atoms[i]));for(const s of["position","walletAddress","isotope"])if(t.atoms[i].isotope.toLowerCase()!=="r"&&(typeof t.atoms[i][s]>"u"||t.atoms[i][s]===null))throw new jt("MolecularStructure::jsonToObject() - Required Atom properties are missing!")}for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&!r.includes(i)&&delete t[i];return t.atoms=H.sortAtoms(t.atoms),t}static enumerate(e){const t={0:-8,1:-7,2:-6,3:-5,4:-4,5:-3,6:-2,7:-1,8:0,9:1,a:2,b:3,c:4,d:5,e:6,f:7,g:8},r=[],i=e.toLowerCase().split("");for(let s=0,o=i.length;s<o;++s){const a=i[s];typeof t[a]<"u"&&(r[s]=t[a])}return r}static normalize(e){let t=e.reduce((i,s)=>i+s);const r=t<0;for(;t<0||t>0;)for(const i of Object.keys(e))if((r?e[i]<8:e[i]>-8)&&(r?(++e[i],++t):(--e[i],--t),t===0))break;return e}getIsotopes(e){return et.isotopeFilter(e,this.atoms)}generateIndex(){return et.generateNextAtomIndex(this.atoms)}fill(e){for(const t in Object.keys(e))this[t]=e[t]}addAtom(e){return this.molecularHash=null,e.index=this.generateIndex(),e.version=this.version,this.atoms.push(e),this.atoms=H.sortAtoms(this.atoms),this}addContinuIdAtom(){return this.addAtom(H.create({isotope:"I",wallet:this.remainderWallet,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}addPolicyAtom({metaType:e,metaId:t,meta:r={},policy:i={}}){const s=new Ue(r);s.addPolicy(i);const o=Y.create({secret:this.secret,bundle:this.sourceWallet.bundle,token:"USER"});return this.addAtom(H.create({wallet:o,isotope:"R",metaType:e,metaId:t,meta:s})),this}fuseToken(e,t){const r=e.length;if(this.sourceWallet.balance-r<0)throw new Cn;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-r})),this.addAtom(H.create({isotope:"F",wallet:t,value:1,metaType:"walletBundle",metaId:t.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-r,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}burnToken({amount:e,walletBundle:t=null}){if(e<0)throw new lo("Molecule::burnToken() - Amount to burn must be positive!");if(this.sourceWallet.balance-e<0)throw new Cn;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-e})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-e,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}replenishToken({amount:e,units:t=[]}){if(e<0)throw new lo("Molecule::replenishToken() - Amount to replenish must be positive!");if(t.length){t=Y.getTokenUnits(t),this.remainderWallet.tokenUnits=this.sourceWallet.tokenUnits;for(const r of t)this.remainderWallet.tokenUnits.push(r);this.remainderWallet.balance=this.remainderWallet.tokenUnits.length,this.sourceWallet.tokenUnits=t,this.sourceWallet.balance=this.sourceWallet.tokenUnits.length}else this.remainderWallet.balance=this.sourceWallet.balance+e,this.sourceWallet.balance=e;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:this.sourceWallet.balance})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.remainderWallet.balance,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initValue({recipientWallet:e,amount:t}){if(this.sourceWallet.balance-t<0)throw new Cn;return this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-t})),this.addAtom(H.create({isotope:"V",wallet:e,value:t,metaType:"walletBundle",metaId:e.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-t,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initDepositBuffer({amount:e,tradeRates:t}){if(this.sourceWallet.balance-e<0)throw new Cn;const r=Y.create({secret:this.secret,bundle:this.bundle,token:this.sourceWallet.token,batchId:this.sourceWallet.batchId});return r.tradeRates=t,this.addAtom(H.create({isotope:"V",wallet:this.sourceWallet,value:-e})),this.addAtom(H.create({isotope:"B",wallet:r,value:e,metaType:"walletBundle",metaId:this.sourceWallet.bundle})),this.addAtom(H.create({isotope:"V",wallet:this.remainderWallet,value:this.sourceWallet.balance-e,metaType:"walletBundle",metaId:this.sourceWallet.bundle})),this}initWithdrawBuffer({recipients:e,signingWallet:t=null}){let r=0;for(const[s,o]of Object.entries(e||{}))r+=o;if(this.sourceWallet.balance-r<0)throw new Cn;const i=new Ue;t&&i.setSigningWallet(t),this.addAtom(H.create({isotope:"B",wallet:this.sourceWallet,value:-r,meta:i,metaType:"walletBundle",metaId:this.sourceWallet.bundle}));for(const[s,o]of Object.entries(e||{}))this.addAtom(new H({isotope:"V",token:this.sourceWallet.token,value:o,batchId:this.sourceWallet.batchId?Dr({}):null,metaType:"walletBundle",metaId:s}));return this.addAtom(H.create({isotope:"B",wallet:this.remainderWallet,value:this.sourceWallet.balance-r,metaType:"walletBundle",metaId:this.remainderWallet.bundle})),this}initTokenCreation({recipientWallet:e,amount:t,meta:r}){const i=new Ue(r);return i.setMetaWallet(e),this.addAtom(H.create({isotope:"C",wallet:this.sourceWallet,value:t,metaType:"token",metaId:e.token,meta:i,batchId:e.batchId})),this.addContinuIdAtom(),this}createRule({metaType:e,metaId:t,rule:r,policy:i={}}){const s=[];for(const a of r)s.push(a instanceof Yn?a:Yn.toObject(a));const o=new Ue({rule:JSON.stringify(s)});return o.addPolicy(i),this.addAtom(H.create({isotope:"R",wallet:this.sourceWallet,metaType:e,metaId:t,meta:o})),this.addContinuIdAtom(),this}initWalletCreation(e,t=null){t||(t=new Ue),t.setMetaWallet(e);const r=H.create({isotope:"C",wallet:this.sourceWallet,metaType:"wallet",metaId:e.address,meta:t,batchId:e.batchId});return this.addAtom(r),this.addContinuIdAtom(),this}initShadowWalletClaim(e){const t=new Ue().setShadowWalletClaim(!0);return this.initWalletCreation(e,t)}initIdentifierCreation({type:e,contact:t,code:r}){const i={code:r,hash:Vt(t.trim(),"Molecule::initIdentifierCreation")};return this.addAtom(H.create({isotope:"C",wallet:this.sourceWallet,metaType:"identifier",metaId:e,meta:new Ue(i)})),this.addContinuIdAtom(),this}initMeta({meta:e,metaType:t,metaId:r,policy:i}){return this.addAtom(H.create({isotope:"M",wallet:this.sourceWallet,metaType:t,metaId:r,meta:new Ue(e)})),this.addPolicyAtom({metaType:t,metaId:r,meta:e,policy:i}),this.addContinuIdAtom(),this}initTokenRequest({token:e,amount:t,metaType:r,metaId:i,meta:s={},batchId:o=null}){return s.token=e,this.local=1,this.addAtom(H.create({isotope:"T",wallet:this.sourceWallet,value:t,metaType:r,metaId:i,meta:new Ue(s),batchId:o})),this.addContinuIdAtom(),this}initAuthorization({meta:e}){return this.addAtom(H.create({isotope:"U",wallet:this.sourceWallet,meta:new Ue(e)})),this.addContinuIdAtom(),this}sign({bundle:e=null,anonymous:t=!1,compressed:r=!0}){if(this.atoms.length===0||this.atoms.filter(y=>!(y instanceof H)).length!==0)throw new jt;!t&&!this.bundle&&(this.bundle=e||Vt(this.secret,"Molecule::sign")),this.molecularHash=H.hashAtoms({atoms:this.atoms});const i=this.atoms[0];let s=i.position;const o=he.get(i.aggregatedMeta(),"signingWallet");if(o&&(s=he.get(JSON.parse(o),"position")),!s)throw new Ga("Signing wallet must have a position!");const a=Y.generateKey({secret:this.secret,token:i.token,position:i.position}),c=zn(a,128),l=this.normalizedHash();let u="";for(const y in c){let b=c[y];for(let E=0,w=8-l[y];E<w;E++)b=new Ve("SHAKE256","TEXT").update(b).getHash("HEX",{outputLen:512});u+=b}r&&(u=$a(u));const p=zn(u,Math.ceil(u.length/this.atoms.length));let d=null;for(let y=0,b=p.length;y<b;y++)this.atoms[y].otsFragment=p[y],d=this.atoms[y].position;return d}cellSlugBase(){return(this.cellSlug||"").split(this.cellSlugDelimiter)[0]}toJSON(){const e=qa(this);for(const t of["remainderWallet","secret","sourceWallet","cellSlugOrigin","version"])Object.prototype.hasOwnProperty.call(e,t)&&delete e[t];return e}check(e=null){new uf(this).verify(e)}normalizedHash(){return et.normalize(et.enumerate(this.molecularHash))}}const pi=10**18;class an{static val(e){return Math.abs(e*pi)<1?0:e}static cmp(e,t,r=!1){const i=an.val(e)*pi,s=an.val(t)*pi;return Math.abs(i-s)<1?0:i>s?1:-1}static equal(e,t){return an.cmp(e,t)===0}}class Xn{constructor({token:e,expiresAt:t,encrypt:r,pubkey:i}){this.$__token=e,this.$__expiresAt=t,this.$__pubkey=i,this.$__encrypt=r}static create(e,t){const r=new Xn(e);return r.setWallet(t),r}static restore(e,t){const r=new Y({secret:t,token:"AUTH",position:e.wallet.position,characters:e.wallet.characters});return Xn.create({token:e.token,expiresAt:e.expiresAt,pubkey:e.pubkey,encrypt:e.encrypt},r)}setWallet(e){this.$__wallet=e}getWallet(){return this.$__wallet}getSnapshot(){return{token:this.$__token,expiresAt:this.$__expiresAt,pubkey:this.$__pubkey,encrypt:this.$__encrypt,wallet:{position:this.$__wallet.position,characters:this.$__wallet.characters}}}getToken(){return this.$__token}getPubkey(){return this.$__pubkey}getExpireInterval(){return this.$__expiresAt*1e3-Date.now()}isExpired(){return!this.$__expiresAt||this.getExpireInterval()<0}getAuthData(){return{token:this.getToken(),pubkey:this.getPubkey(),wallet:this.getWallet()}}}class jn extends re{constructor(e="GraphQL did not provide a valid response.",t=null,r=null){super(e,t,r),this.name="InvalidResponseException"}}class Di extends re{constructor(e="Authorization token missing or invalid.",t=null,r=null){super(e,t,r),this.name="UnauthenticatedException"}}let ve=class{constructor({query:e,json:t,dataKey:r=null}){if(this.dataKey=r,this.errorKey="exception",this.$__payload=null,this.$__query=e,this.$__originResponse=t,this.$__response=t,typeof this.$__response>"u"||this.$__response===null)throw new jn;if(he.has(this.$__response,this.errorKey)){const i=he.get(this.$__response,this.errorKey);throw String(i).includes("Unauthenticated")?new Di:new jn}this.init()}init(){}data(){if(!this.dataKey)return this.response();if(!he.has(this.response(),this.dataKey))throw new jn;return he.get(this.response(),this.dataKey)}response(){return this.$__response}payload(){return null}query(){return this.$__query}status(){return null}};class $e{constructor(e,t){this.client=e,this.knishIOClient=t,this.$__variables=null,this.$__query=null,this.$__response=null,this.$__request=null}response(){return this.$__response}async createResponseRaw(e){return this.createResponse(e)}createResponse(e){return new ve({query:this,json:e})}createQuery({variables:e=null}){if(this.$__variables=this.compiledVariables(e),!this.uri())throw new Qe("Query::createQuery() - Node URI was not initialized for this client instance!");if(this.$__query===null)throw new Qe("Query::createQuery() - GraphQL subscription was not initialized!");return{query:this.$__query,variables:this.variables()}}async execute({variables:e=null,context:t={}}){this.$__request=this.createQuery({variables:e});const r={...t,...this.createQueryContext()};try{const i=await this.client.query({...this.$__request,context:r});return this.$__response=await this.createResponseRaw(i),this.$__response}catch(i){if(i.name==="AbortError")return this.knishIOClient.log("warn","Query was cancelled"),new ve({query:this,json:{data:null,errors:[{message:"Query was cancelled"}]}});throw i}}compiledVariables(e=null){return e||{}}uri(){return this.client.getUri()}variables(){return this.$__variables}createQueryContext(){return{}}}class cf extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ContinuId"})}payload(){let e=null;const t=this.data();return t&&(e=new Y({secret:null,token:t.tokenSlug}),e.address=t.address,e.position=t.position,e.bundle=t.bundleHash,e.batchId=t.batchId,e.characters=t.characters,e.pubkey=t.pubkey,e.balance=t.amount*1),e}}var Fi=function(n,e){return Fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},Fi(n,e)};function He(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fi(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var x=function(){return x=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},x.apply(this,arguments)};function st(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _t(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(p){o(p)}}function c(u){try{l(r.throw(u))}catch(p){o(p)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function St(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(n,t)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Me(n,e,t){if(t||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return n.concat(s||Array.prototype.slice.call(e))}var yi="Invariant Violation",fo=Object.setPrototypeOf,lf=fo===void 0?function(n,e){return n.__proto__=e,n}:fo,Ja=function(n){He(e,n);function e(t){t===void 0&&(t=yi);var r=n.call(this,typeof t=="number"?yi+": "+t+" (see https://github.com/apollographql/invariant-packages)":t)||this;return r.framesToPop=1,r.name=yi,lf(r,e.prototype),r}return e}(Error);function Zt(n,e){if(!n)throw new Ja(e)}var Ya=["debug","log","warn","error","silent"],ff=Ya.indexOf("log");function yr(n){return function(){if(Ya.indexOf(n)>=ff){var e=console[n]||console.log;return e.apply(console,arguments)}}}(function(n){n.debug=yr("debug"),n.log=yr("log"),n.warn=yr("warn"),n.error=yr("error")})(Zt);var cs="3.12.8";function Ye(n){try{return n()}catch{}}const Bi=Ye(function(){return globalThis})||Ye(function(){return window})||Ye(function(){return self})||Ye(function(){return it})||Ye(function(){return Ye.constructor("return this")()});var ho=new Map;function Pi(n){var e=ho.get(n)||1;return ho.set(n,e+1),"".concat(n,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Xa(n,e){e===void 0&&(e=0);var t=Pi("stringifyForDisplay");return JSON.stringify(n,function(r,i){return i===void 0?t:i},e).split(JSON.stringify(t)).join("<undefined>")}function mr(n){return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(typeof e=="number"){var i=e;e=ls(i),e||(e=fs(i,t),t=[])}n.apply(void 0,[e].concat(t))}}var $=Object.assign(function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];e||Zt(e,ls(t,r)||fs(t,r))},{debug:mr(Zt.debug),log:mr(Zt.log),warn:mr(Zt.warn),error:mr(Zt.error)});function Fe(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return new Ja(ls(n,e)||fs(n,e))}var po=Symbol.for("ApolloErrorMessageHandler_"+cs);function Za(n){if(typeof n=="string")return n;try{return Xa(n,2).slice(0,1e3)}catch{return"<non-serializable>"}}function ls(n,e){if(e===void 0&&(e=[]),!!n)return Bi[po]&&Bi[po](n,e.map(Za))}function fs(n,e){if(e===void 0&&(e=[]),!!n)return"An error occurred! For more details, see the full error text at https://go.apollo.dev/c/err#".concat(encodeURIComponent(JSON.stringify({version:cs,message:n,args:e.map(Za)})))}function xr(n,e){if(!!!n)throw new Error(e)}function hf(n){return typeof n=="object"&&n!==null}function df(n,e){if(!!!n)throw new Error("Unexpected invariant triggered.")}const pf=/\r\n|[\n\r]/g;function $i(n,e){let t=0,r=1;for(const i of n.body.matchAll(pf)){if(typeof i.index=="number"||df(!1),i.index>=e)break;t=i.index+i[0].length,r+=1}return{line:r,column:e+1-t}}function yf(n){return eu(n.source,$i(n.source,n.start))}function eu(n,e){const t=n.locationOffset.column-1,r="".padStart(t)+n.body,i=e.line-1,s=n.locationOffset.line-1,o=e.line+s,a=e.line===1?t:0,c=e.column+a,l=`${n.name}:${o}:${c}
`,u=r.split(/\r\n|[\n\r]/g),p=u[i];if(p.length>120){const d=Math.floor(c/80),y=c%80,b=[];for(let E=0;E<p.length;E+=80)b.push(p.slice(E,E+80));return l+yo([[`${o} |`,b[0]],...b.slice(1,d+1).map(E=>["|",E]),["|","^".padStart(y)],["|",b[d+1]]])}return l+yo([[`${o-1} |`,u[i-1]],[`${o} |`,p],["|","^".padStart(c)],[`${o+1} |`,u[i+1]]])}function yo(n){const e=n.filter(([r,i])=>i!==void 0),t=Math.max(...e.map(([r])=>r.length));return e.map(([r,i])=>r.padStart(t)+(i?" "+i:"")).join(`
`)}function mf(n){const e=n[0];return e==null||"kind"in e||"length"in e?{nodes:e,source:n[1],positions:n[2],path:n[3],originalError:n[4],extensions:n[5]}:e}class hs extends Error{constructor(e,...t){var r,i,s;const{nodes:o,source:a,positions:c,path:l,originalError:u,extensions:p}=mf(t);super(e),this.name="GraphQLError",this.path=l??void 0,this.originalError=u??void 0,this.nodes=mo(Array.isArray(o)?o:o?[o]:void 0);const d=mo((r=this.nodes)===null||r===void 0?void 0:r.map(b=>b.loc).filter(b=>b!=null));this.source=a??(d==null||(i=d[0])===null||i===void 0?void 0:i.source),this.positions=c??d?.map(b=>b.start),this.locations=c&&a?c.map(b=>$i(a,b)):d?.map(b=>$i(b.source,b.start));const y=hf(u?.extensions)?u?.extensions:void 0;this.extensions=(s=p??y)!==null&&s!==void 0?s:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),u!=null&&u.stack?Object.defineProperty(this,"stack",{value:u.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,hs):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let e=this.message;if(this.nodes)for(const t of this.nodes)t.loc&&(e+=`

`+yf(t.loc));else if(this.source&&this.locations)for(const t of this.locations)e+=`

`+eu(this.source,t);return e}toJSON(){const e={message:this.message};return this.locations!=null&&(e.locations=this.locations),this.path!=null&&(e.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(e.extensions=this.extensions),e}}function mo(n){return n===void 0||n.length===0?void 0:n}function xe(n,e,t){return new hs(`Syntax Error: ${t}`,{source:n,positions:[e]})}class gf{constructor(e,t,r){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=r}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class tu{constructor(e,t,r,i,s,o){this.kind=e,this.start=t,this.end=r,this.line=i,this.column=s,this.value=o,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const nu={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},bf=new Set(Object.keys(nu));function go(n){const e=n?.kind;return typeof e=="string"&&bf.has(e)}var nn;(function(n){n.QUERY="query",n.MUTATION="mutation",n.SUBSCRIPTION="subscription"})(nn||(nn={}));var Li;(function(n){n.QUERY="QUERY",n.MUTATION="MUTATION",n.SUBSCRIPTION="SUBSCRIPTION",n.FIELD="FIELD",n.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",n.FRAGMENT_SPREAD="FRAGMENT_SPREAD",n.INLINE_FRAGMENT="INLINE_FRAGMENT",n.VARIABLE_DEFINITION="VARIABLE_DEFINITION",n.SCHEMA="SCHEMA",n.SCALAR="SCALAR",n.OBJECT="OBJECT",n.FIELD_DEFINITION="FIELD_DEFINITION",n.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",n.INTERFACE="INTERFACE",n.UNION="UNION",n.ENUM="ENUM",n.ENUM_VALUE="ENUM_VALUE",n.INPUT_OBJECT="INPUT_OBJECT",n.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(Li||(Li={}));var D;(function(n){n.NAME="Name",n.DOCUMENT="Document",n.OPERATION_DEFINITION="OperationDefinition",n.VARIABLE_DEFINITION="VariableDefinition",n.SELECTION_SET="SelectionSet",n.FIELD="Field",n.ARGUMENT="Argument",n.FRAGMENT_SPREAD="FragmentSpread",n.INLINE_FRAGMENT="InlineFragment",n.FRAGMENT_DEFINITION="FragmentDefinition",n.VARIABLE="Variable",n.INT="IntValue",n.FLOAT="FloatValue",n.STRING="StringValue",n.BOOLEAN="BooleanValue",n.NULL="NullValue",n.ENUM="EnumValue",n.LIST="ListValue",n.OBJECT="ObjectValue",n.OBJECT_FIELD="ObjectField",n.DIRECTIVE="Directive",n.NAMED_TYPE="NamedType",n.LIST_TYPE="ListType",n.NON_NULL_TYPE="NonNullType",n.SCHEMA_DEFINITION="SchemaDefinition",n.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",n.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",n.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",n.FIELD_DEFINITION="FieldDefinition",n.INPUT_VALUE_DEFINITION="InputValueDefinition",n.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",n.UNION_TYPE_DEFINITION="UnionTypeDefinition",n.ENUM_TYPE_DEFINITION="EnumTypeDefinition",n.ENUM_VALUE_DEFINITION="EnumValueDefinition",n.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",n.DIRECTIVE_DEFINITION="DirectiveDefinition",n.SCHEMA_EXTENSION="SchemaExtension",n.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",n.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",n.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",n.UNION_TYPE_EXTENSION="UnionTypeExtension",n.ENUM_TYPE_EXTENSION="EnumTypeExtension",n.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(D||(D={}));function Ui(n){return n===9||n===32}function Zn(n){return n>=48&&n<=57}function ru(n){return n>=97&&n<=122||n>=65&&n<=90}function iu(n){return ru(n)||n===95}function vf(n){return ru(n)||Zn(n)||n===95}function wf(n){var e;let t=Number.MAX_SAFE_INTEGER,r=null,i=-1;for(let o=0;o<n.length;++o){var s;const a=n[o],c=Ef(a);c!==a.length&&(r=(s=r)!==null&&s!==void 0?s:o,i=o,o!==0&&c<t&&(t=c))}return n.map((o,a)=>a===0?o:o.slice(t)).slice((e=r)!==null&&e!==void 0?e:0,i+1)}function Ef(n){let e=0;for(;e<n.length&&Ui(n.charCodeAt(e));)++e;return e}function _f(n,e){const t=n.replace(/"""/g,'\\"""'),r=t.split(/\r\n|[\n\r]/g),i=r.length===1,s=r.length>1&&r.slice(1).every(y=>y.length===0||Ui(y.charCodeAt(0))),o=t.endsWith('\\"""'),a=n.endsWith('"')&&!o,c=n.endsWith("\\"),l=a||c,u=!i||n.length>70||l||s||o;let p="";const d=i&&Ui(n.charCodeAt(0));return(u&&!d||s)&&(p+=`
`),p+=t,(u||l)&&(p+=`
`),'"""'+p+'"""'}var N;(function(n){n.SOF="<SOF>",n.EOF="<EOF>",n.BANG="!",n.DOLLAR="$",n.AMP="&",n.PAREN_L="(",n.PAREN_R=")",n.SPREAD="...",n.COLON=":",n.EQUALS="=",n.AT="@",n.BRACKET_L="[",n.BRACKET_R="]",n.BRACE_L="{",n.PIPE="|",n.BRACE_R="}",n.NAME="Name",n.INT="Int",n.FLOAT="Float",n.STRING="String",n.BLOCK_STRING="BlockString",n.COMMENT="Comment"})(N||(N={}));class Sf{constructor(e){const t=new tu(N.SOF,0,0,0,0);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let e=this.token;if(e.kind!==N.EOF)do if(e.next)e=e.next;else{const t=xf(this,e.end);e.next=t,t.prev=e,e=t}while(e.kind===N.COMMENT);return e}}function kf(n){return n===N.BANG||n===N.DOLLAR||n===N.AMP||n===N.PAREN_L||n===N.PAREN_R||n===N.SPREAD||n===N.COLON||n===N.EQUALS||n===N.AT||n===N.BRACKET_L||n===N.BRACKET_R||n===N.BRACE_L||n===N.PIPE||n===N.BRACE_R}function gn(n){return n>=0&&n<=55295||n>=57344&&n<=1114111}function Wr(n,e){return su(n.charCodeAt(e))&&ou(n.charCodeAt(e+1))}function su(n){return n>=55296&&n<=56319}function ou(n){return n>=56320&&n<=57343}function Qt(n,e){const t=n.source.body.codePointAt(e);if(t===void 0)return N.EOF;if(t>=32&&t<=126){const r=String.fromCodePoint(t);return r==='"'?`'"'`:`"${r}"`}return"U+"+t.toString(16).toUpperCase().padStart(4,"0")}function ge(n,e,t,r,i){const s=n.line,o=1+t-n.lineStart;return new tu(e,t,r,s,o,i)}function xf(n,e){const t=n.source.body,r=t.length;let i=e;for(;i<r;){const s=t.charCodeAt(i);switch(s){case 65279:case 9:case 32:case 44:++i;continue;case 10:++i,++n.line,n.lineStart=i;continue;case 13:t.charCodeAt(i+1)===10?i+=2:++i,++n.line,n.lineStart=i;continue;case 35:return Tf(n,i);case 33:return ge(n,N.BANG,i,i+1);case 36:return ge(n,N.DOLLAR,i,i+1);case 38:return ge(n,N.AMP,i,i+1);case 40:return ge(n,N.PAREN_L,i,i+1);case 41:return ge(n,N.PAREN_R,i,i+1);case 46:if(t.charCodeAt(i+1)===46&&t.charCodeAt(i+2)===46)return ge(n,N.SPREAD,i,i+3);break;case 58:return ge(n,N.COLON,i,i+1);case 61:return ge(n,N.EQUALS,i,i+1);case 64:return ge(n,N.AT,i,i+1);case 91:return ge(n,N.BRACKET_L,i,i+1);case 93:return ge(n,N.BRACKET_R,i,i+1);case 123:return ge(n,N.BRACE_L,i,i+1);case 124:return ge(n,N.PIPE,i,i+1);case 125:return ge(n,N.BRACE_R,i,i+1);case 34:return t.charCodeAt(i+1)===34&&t.charCodeAt(i+2)===34?Nf(n,i):Af(n,i)}if(Zn(s)||s===45)return If(n,i,s);if(iu(s))return Mf(n,i);throw xe(n.source,i,s===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:gn(s)||Wr(t,i)?`Unexpected character: ${Qt(n,i)}.`:`Invalid character: ${Qt(n,i)}.`)}return ge(n,N.EOF,r,r)}function Tf(n,e){const t=n.source.body,r=t.length;let i=e+1;for(;i<r;){const s=t.charCodeAt(i);if(s===10||s===13)break;if(gn(s))++i;else if(Wr(t,i))i+=2;else break}return ge(n,N.COMMENT,e,i,t.slice(e+1,i))}function If(n,e,t){const r=n.source.body;let i=e,s=t,o=!1;if(s===45&&(s=r.charCodeAt(++i)),s===48){if(s=r.charCodeAt(++i),Zn(s))throw xe(n.source,i,`Invalid number, unexpected digit after 0: ${Qt(n,i)}.`)}else i=mi(n,i,s),s=r.charCodeAt(i);if(s===46&&(o=!0,s=r.charCodeAt(++i),i=mi(n,i,s),s=r.charCodeAt(i)),(s===69||s===101)&&(o=!0,s=r.charCodeAt(++i),(s===43||s===45)&&(s=r.charCodeAt(++i)),i=mi(n,i,s),s=r.charCodeAt(i)),s===46||iu(s))throw xe(n.source,i,`Invalid number, expected digit but got: ${Qt(n,i)}.`);return ge(n,o?N.FLOAT:N.INT,e,i,r.slice(e,i))}function mi(n,e,t){if(!Zn(t))throw xe(n.source,e,`Invalid number, expected digit but got: ${Qt(n,e)}.`);const r=n.source.body;let i=e+1;for(;Zn(r.charCodeAt(i));)++i;return i}function Af(n,e){const t=n.source.body,r=t.length;let i=e+1,s=i,o="";for(;i<r;){const a=t.charCodeAt(i);if(a===34)return o+=t.slice(s,i),ge(n,N.STRING,e,i+1,o);if(a===92){o+=t.slice(s,i);const c=t.charCodeAt(i+1)===117?t.charCodeAt(i+2)===123?Of(n,i):Cf(n,i):Rf(n,i);o+=c.value,i+=c.size,s=i;continue}if(a===10||a===13)break;if(gn(a))++i;else if(Wr(t,i))i+=2;else throw xe(n.source,i,`Invalid character within String: ${Qt(n,i)}.`)}throw xe(n.source,i,"Unterminated string.")}function Of(n,e){const t=n.source.body;let r=0,i=3;for(;i<12;){const s=t.charCodeAt(e+i++);if(s===125){if(i<5||!gn(r))break;return{value:String.fromCodePoint(r),size:i}}if(r=r<<4|$n(s),r<0)break}throw xe(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+i)}".`)}function Cf(n,e){const t=n.source.body,r=bo(t,e+2);if(gn(r))return{value:String.fromCodePoint(r),size:6};if(su(r)&&t.charCodeAt(e+6)===92&&t.charCodeAt(e+7)===117){const i=bo(t,e+8);if(ou(i))return{value:String.fromCodePoint(r,i),size:12}}throw xe(n.source,e,`Invalid Unicode escape sequence: "${t.slice(e,e+6)}".`)}function bo(n,e){return $n(n.charCodeAt(e))<<12|$n(n.charCodeAt(e+1))<<8|$n(n.charCodeAt(e+2))<<4|$n(n.charCodeAt(e+3))}function $n(n){return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:-1}function Rf(n,e){const t=n.source.body;switch(t.charCodeAt(e+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw xe(n.source,e,`Invalid character escape sequence: "${t.slice(e,e+2)}".`)}function Nf(n,e){const t=n.source.body,r=t.length;let i=n.lineStart,s=e+3,o=s,a="";const c=[];for(;s<r;){const l=t.charCodeAt(s);if(l===34&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34){a+=t.slice(o,s),c.push(a);const u=ge(n,N.BLOCK_STRING,e,s+3,wf(c).join(`
`));return n.line+=c.length-1,n.lineStart=i,u}if(l===92&&t.charCodeAt(s+1)===34&&t.charCodeAt(s+2)===34&&t.charCodeAt(s+3)===34){a+=t.slice(o,s),o=s+1,s+=4;continue}if(l===10||l===13){a+=t.slice(o,s),c.push(a),l===13&&t.charCodeAt(s+1)===10?s+=2:++s,a="",o=s,i=s;continue}if(gn(l))++s;else if(Wr(t,s))s+=2;else throw xe(n.source,s,`Invalid character within String: ${Qt(n,s)}.`)}throw xe(n.source,s,"Unterminated string.")}function Mf(n,e){const t=n.source.body,r=t.length;let i=e+1;for(;i<r;){const s=t.charCodeAt(i);if(vf(s))++i;else break}return ge(n,N.NAME,e,i,t.slice(e,i))}const Df=10,au=2;function ds(n){return zr(n,[])}function zr(n,e){switch(typeof n){case"string":return JSON.stringify(n);case"function":return n.name?`[function ${n.name}]`:"[function]";case"object":return Ff(n,e);default:return String(n)}}function Ff(n,e){if(n===null)return"null";if(e.includes(n))return"[Circular]";const t=[...e,n];if(Bf(n)){const r=n.toJSON();if(r!==n)return typeof r=="string"?r:zr(r,t)}else if(Array.isArray(n))return $f(n,t);return Pf(n,t)}function Bf(n){return typeof n.toJSON=="function"}function Pf(n,e){const t=Object.entries(n);return t.length===0?"{}":e.length>au?"["+Lf(n)+"]":"{ "+t.map(([i,s])=>i+": "+zr(s,e)).join(", ")+" }"}function $f(n,e){if(n.length===0)return"[]";if(e.length>au)return"[Array]";const t=Math.min(Df,n.length),r=n.length-t,i=[];for(let s=0;s<t;++s)i.push(zr(n[s],e));return r===1?i.push("... 1 more item"):r>1&&i.push(`... ${r} more items`),"["+i.join(", ")+"]"}function Lf(n){const e=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof n.constructor=="function"){const t=n.constructor.name;if(typeof t=="string"&&t!=="")return t}return e}const Uf=function(e,t){if(e instanceof t)return!0;if(typeof e=="object"&&e!==null){var r;const i=t.prototype[Symbol.toStringTag],s=Symbol.toStringTag in e?e[Symbol.toStringTag]:(r=e.constructor)===null||r===void 0?void 0:r.name;if(i===s){const o=ds(e);throw new Error(`Cannot use ${i} "${o}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class uu{constructor(e,t="GraphQL request",r={line:1,column:1}){typeof e=="string"||xr(!1,`Body must be a string. Received: ${ds(e)}.`),this.body=e,this.name=t,this.locationOffset=r,this.locationOffset.line>0||xr(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||xr(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function qf(n){return Uf(n,uu)}function jf(n,e){const t=new Vf(n,e),r=t.parseDocument();return Object.defineProperty(r,"tokenCount",{enumerable:!1,value:t.tokenCount}),r}class Vf{constructor(e,t={}){const r=qf(e)?e:new uu(e);this._lexer=new Sf(r),this._options=t,this._tokenCounter=0}get tokenCount(){return this._tokenCounter}parseName(){const e=this.expectToken(N.NAME);return this.node(e,{kind:D.NAME,value:e.value})}parseDocument(){return this.node(this._lexer.token,{kind:D.DOCUMENT,definitions:this.many(N.SOF,this.parseDefinition,N.EOF)})}parseDefinition(){if(this.peek(N.BRACE_L))return this.parseOperationDefinition();const e=this.peekDescription(),t=e?this._lexer.lookahead():this._lexer.token;if(t.kind===N.NAME){switch(t.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(e)throw xe(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(t.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(t)}parseOperationDefinition(){const e=this._lexer.token;if(this.peek(N.BRACE_L))return this.node(e,{kind:D.OPERATION_DEFINITION,operation:nn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const t=this.parseOperationType();let r;return this.peek(N.NAME)&&(r=this.parseName()),this.node(e,{kind:D.OPERATION_DEFINITION,operation:t,name:r,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const e=this.expectToken(N.NAME);switch(e.value){case"query":return nn.QUERY;case"mutation":return nn.MUTATION;case"subscription":return nn.SUBSCRIPTION}throw this.unexpected(e)}parseVariableDefinitions(){return this.optionalMany(N.PAREN_L,this.parseVariableDefinition,N.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:D.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(N.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(N.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const e=this._lexer.token;return this.expectToken(N.DOLLAR),this.node(e,{kind:D.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:D.SELECTION_SET,selections:this.many(N.BRACE_L,this.parseSelection,N.BRACE_R)})}parseSelection(){return this.peek(N.SPREAD)?this.parseFragment():this.parseField()}parseField(){const e=this._lexer.token,t=this.parseName();let r,i;return this.expectOptionalToken(N.COLON)?(r=t,i=this.parseName()):i=t,this.node(e,{kind:D.FIELD,alias:r,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(N.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(e){const t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(N.PAREN_L,t,N.PAREN_R)}parseArgument(e=!1){const t=this._lexer.token,r=this.parseName();return this.expectToken(N.COLON),this.node(t,{kind:D.ARGUMENT,name:r,value:this.parseValueLiteral(e)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const e=this._lexer.token;this.expectToken(N.SPREAD);const t=this.expectOptionalKeyword("on");return!t&&this.peek(N.NAME)?this.node(e,{kind:D.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(e,{kind:D.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const e=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(e,{kind:D.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(e,{kind:D.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(e){const t=this._lexer.token;switch(t.kind){case N.BRACKET_L:return this.parseList(e);case N.BRACE_L:return this.parseObject(e);case N.INT:return this.advanceLexer(),this.node(t,{kind:D.INT,value:t.value});case N.FLOAT:return this.advanceLexer(),this.node(t,{kind:D.FLOAT,value:t.value});case N.STRING:case N.BLOCK_STRING:return this.parseStringLiteral();case N.NAME:switch(this.advanceLexer(),t.value){case"true":return this.node(t,{kind:D.BOOLEAN,value:!0});case"false":return this.node(t,{kind:D.BOOLEAN,value:!1});case"null":return this.node(t,{kind:D.NULL});default:return this.node(t,{kind:D.ENUM,value:t.value})}case N.DOLLAR:if(e)if(this.expectToken(N.DOLLAR),this._lexer.token.kind===N.NAME){const r=this._lexer.token.value;throw xe(this._lexer.source,t.start,`Unexpected variable "$${r}" in constant value.`)}else throw this.unexpected(t);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const e=this._lexer.token;return this.advanceLexer(),this.node(e,{kind:D.STRING,value:e.value,block:e.kind===N.BLOCK_STRING})}parseList(e){const t=()=>this.parseValueLiteral(e);return this.node(this._lexer.token,{kind:D.LIST,values:this.any(N.BRACKET_L,t,N.BRACKET_R)})}parseObject(e){const t=()=>this.parseObjectField(e);return this.node(this._lexer.token,{kind:D.OBJECT,fields:this.any(N.BRACE_L,t,N.BRACE_R)})}parseObjectField(e){const t=this._lexer.token,r=this.parseName();return this.expectToken(N.COLON),this.node(t,{kind:D.OBJECT_FIELD,name:r,value:this.parseValueLiteral(e)})}parseDirectives(e){const t=[];for(;this.peek(N.AT);)t.push(this.parseDirective(e));return t}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(e){const t=this._lexer.token;return this.expectToken(N.AT),this.node(t,{kind:D.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e)})}parseTypeReference(){const e=this._lexer.token;let t;if(this.expectOptionalToken(N.BRACKET_L)){const r=this.parseTypeReference();this.expectToken(N.BRACKET_R),t=this.node(e,{kind:D.LIST_TYPE,type:r})}else t=this.parseNamedType();return this.expectOptionalToken(N.BANG)?this.node(e,{kind:D.NON_NULL_TYPE,type:t}):t}parseNamedType(){return this.node(this._lexer.token,{kind:D.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(N.STRING)||this.peek(N.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");const r=this.parseConstDirectives(),i=this.many(N.BRACE_L,this.parseOperationTypeDefinition,N.BRACE_R);return this.node(e,{kind:D.SCHEMA_DEFINITION,description:t,directives:r,operationTypes:i})}parseOperationTypeDefinition(){const e=this._lexer.token,t=this.parseOperationType();this.expectToken(N.COLON);const r=this.parseNamedType();return this.node(e,{kind:D.OPERATION_TYPE_DEFINITION,operation:t,type:r})}parseScalarTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");const r=this.parseName(),i=this.parseConstDirectives();return this.node(e,{kind:D.SCALAR_TYPE_DEFINITION,description:t,name:r,directives:i})}parseObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:D.OBJECT_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:o})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(N.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(N.BRACE_L,this.parseFieldDefinition,N.BRACE_R)}parseFieldDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName(),i=this.parseArgumentDefs();this.expectToken(N.COLON);const s=this.parseTypeReference(),o=this.parseConstDirectives();return this.node(e,{kind:D.FIELD_DEFINITION,description:t,name:r,arguments:i,type:s,directives:o})}parseArgumentDefs(){return this.optionalMany(N.PAREN_L,this.parseInputValueDef,N.PAREN_R)}parseInputValueDef(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseName();this.expectToken(N.COLON);const i=this.parseTypeReference();let s;this.expectOptionalToken(N.EQUALS)&&(s=this.parseConstValueLiteral());const o=this.parseConstDirectives();return this.node(e,{kind:D.INPUT_VALUE_DEFINITION,description:t,name:r,type:i,defaultValue:s,directives:o})}parseInterfaceTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");const r=this.parseName(),i=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),o=this.parseFieldsDefinition();return this.node(e,{kind:D.INTERFACE_TYPE_DEFINITION,description:t,name:r,interfaces:i,directives:s,fields:o})}parseUnionTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseUnionMemberTypes();return this.node(e,{kind:D.UNION_TYPE_DEFINITION,description:t,name:r,directives:i,types:s})}parseUnionMemberTypes(){return this.expectOptionalToken(N.EQUALS)?this.delimitedMany(N.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();return this.node(e,{kind:D.ENUM_TYPE_DEFINITION,description:t,name:r,directives:i,values:s})}parseEnumValuesDefinition(){return this.optionalMany(N.BRACE_L,this.parseEnumValueDefinition,N.BRACE_R)}parseEnumValueDefinition(){const e=this._lexer.token,t=this.parseDescription(),r=this.parseEnumValueName(),i=this.parseConstDirectives();return this.node(e,{kind:D.ENUM_VALUE_DEFINITION,description:t,name:r,directives:i})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw xe(this._lexer.source,this._lexer.token.start,`${gr(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");const r=this.parseName(),i=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();return this.node(e,{kind:D.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:r,directives:i,fields:s})}parseInputFieldsDefinition(){return this.optionalMany(N.BRACE_L,this.parseInputValueDef,N.BRACE_R)}parseTypeSystemExtension(){const e=this._lexer.lookahead();if(e.kind===N.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)}parseSchemaExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const t=this.parseConstDirectives(),r=this.optionalMany(N.BRACE_L,this.parseOperationTypeDefinition,N.BRACE_R);if(t.length===0&&r.length===0)throw this.unexpected();return this.node(e,{kind:D.SCHEMA_EXTENSION,directives:t,operationTypes:r})}parseScalarTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const t=this.parseName(),r=this.parseConstDirectives();if(r.length===0)throw this.unexpected();return this.node(e,{kind:D.SCALAR_TYPE_EXTENSION,name:t,directives:r})}parseObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:D.OBJECT_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseInterfaceTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const t=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseConstDirectives(),s=this.parseFieldsDefinition();if(r.length===0&&i.length===0&&s.length===0)throw this.unexpected();return this.node(e,{kind:D.INTERFACE_TYPE_EXTENSION,name:t,interfaces:r,directives:i,fields:s})}parseUnionTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseUnionMemberTypes();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:D.UNION_TYPE_EXTENSION,name:t,directives:r,types:i})}parseEnumTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseEnumValuesDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:D.ENUM_TYPE_EXTENSION,name:t,directives:r,values:i})}parseInputObjectTypeExtension(){const e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const t=this.parseName(),r=this.parseConstDirectives(),i=this.parseInputFieldsDefinition();if(r.length===0&&i.length===0)throw this.unexpected();return this.node(e,{kind:D.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:r,fields:i})}parseDirectiveDefinition(){const e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(N.AT);const r=this.parseName(),i=this.parseArgumentDefs(),s=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const o=this.parseDirectiveLocations();return this.node(e,{kind:D.DIRECTIVE_DEFINITION,description:t,name:r,arguments:i,repeatable:s,locations:o})}parseDirectiveLocations(){return this.delimitedMany(N.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const e=this._lexer.token,t=this.parseName();if(Object.prototype.hasOwnProperty.call(Li,t.value))return t;throw this.unexpected(e)}node(e,t){return this._options.noLocation!==!0&&(t.loc=new gf(e,this._lexer.lastToken,this._lexer.source)),t}peek(e){return this._lexer.token.kind===e}expectToken(e){const t=this._lexer.token;if(t.kind===e)return this.advanceLexer(),t;throw xe(this._lexer.source,t.start,`Expected ${cu(e)}, found ${gr(t)}.`)}expectOptionalToken(e){return this._lexer.token.kind===e?(this.advanceLexer(),!0):!1}expectKeyword(e){const t=this._lexer.token;if(t.kind===N.NAME&&t.value===e)this.advanceLexer();else throw xe(this._lexer.source,t.start,`Expected "${e}", found ${gr(t)}.`)}expectOptionalKeyword(e){const t=this._lexer.token;return t.kind===N.NAME&&t.value===e?(this.advanceLexer(),!0):!1}unexpected(e){const t=e??this._lexer.token;return xe(this._lexer.source,t.start,`Unexpected ${gr(t)}.`)}any(e,t,r){this.expectToken(e);const i=[];for(;!this.expectOptionalToken(r);)i.push(t.call(this));return i}optionalMany(e,t,r){if(this.expectOptionalToken(e)){const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(r));return i}return[]}many(e,t,r){this.expectToken(e);const i=[];do i.push(t.call(this));while(!this.expectOptionalToken(r));return i}delimitedMany(e,t){this.expectOptionalToken(e);const r=[];do r.push(t.call(this));while(this.expectOptionalToken(e));return r}advanceLexer(){const{maxTokens:e}=this._options,t=this._lexer.advance();if(t.kind!==N.EOF&&(++this._tokenCounter,e!==void 0&&this._tokenCounter>e))throw xe(this._lexer.source,t.start,`Document contains more that ${e} tokens. Parsing aborted.`)}}function gr(n){const e=n.value;return cu(n.kind)+(e!=null?` "${e}"`:"")}function cu(n){return kf(n)?`"${n}"`:n}function Qf(n){return`"${n.replace(Hf,Wf)}"`}const Hf=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function Wf(n){return zf[n.charCodeAt(0)]}const zf=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],Kr=Object.freeze({});function Xe(n,e,t=nu){const r=new Map;for(const v of Object.values(D))r.set(v,Kf(e,v));let i,s=Array.isArray(n),o=[n],a=-1,c=[],l=n,u,p;const d=[],y=[];do{a++;const v=a===o.length,k=v&&c.length!==0;if(v){if(u=y.length===0?void 0:d[d.length-1],l=p,p=y.pop(),k)if(s){l=l.slice();let I=0;for(const[O,C]of c){const M=O-I;C===null?(l.splice(M,1),I++):l[M]=C}}else{l=Object.defineProperties({},Object.getOwnPropertyDescriptors(l));for(const[I,O]of c)l[I]=O}a=i.index,o=i.keys,c=i.edits,s=i.inArray,i=i.prev}else if(p){if(u=s?a:o[a],l=p[u],l==null)continue;d.push(u)}let S;if(!Array.isArray(l)){var b,E;go(l)||xr(!1,`Invalid AST Node: ${ds(l)}.`);const I=v?(b=r.get(l.kind))===null||b===void 0?void 0:b.leave:(E=r.get(l.kind))===null||E===void 0?void 0:E.enter;if(S=I?.call(e,l,u,p,d,y),S===Kr)break;if(S===!1){if(!v){d.pop();continue}}else if(S!==void 0&&(c.push([u,S]),!v))if(go(S))l=S;else{d.pop();continue}}if(S===void 0&&k&&c.push([u,l]),v)d.pop();else{var w;i={inArray:s,index:a,keys:o,edits:c,prev:i},s=Array.isArray(l),o=s?l:(w=t[l.kind])!==null&&w!==void 0?w:[],a=-1,c=[],p&&y.push(p),p=l}}while(i!==void 0);return c.length!==0?c[c.length-1][1]:n}function Kf(n,e){const t=n[e];return typeof t=="object"?t:typeof t=="function"?{enter:t,leave:void 0}:{enter:n.enter,leave:n.leave}}function lu(n){return Xe(n,Jf)}const Gf=80,Jf={Name:{leave:n=>n.value},Variable:{leave:n=>"$"+n.name},Document:{leave:n=>P(n.definitions,`

`)},OperationDefinition:{leave(n){const e=K("(",P(n.variableDefinitions,", "),")"),t=P([n.operation,P([n.name,e]),P(n.directives," ")]," ");return(t==="query"?"":t+" ")+n.selectionSet}},VariableDefinition:{leave:({variable:n,type:e,defaultValue:t,directives:r})=>n+": "+e+K(" = ",t)+K(" ",P(r," "))},SelectionSet:{leave:({selections:n})=>Ge(n)},Field:{leave({alias:n,name:e,arguments:t,directives:r,selectionSet:i}){const s=K("",n,": ")+e;let o=s+K("(",P(t,", "),")");return o.length>Gf&&(o=s+K(`(
`,Tr(P(t,`
`)),`
)`)),P([o,P(r," "),i]," ")}},Argument:{leave:({name:n,value:e})=>n+": "+e},FragmentSpread:{leave:({name:n,directives:e})=>"..."+n+K(" ",P(e," "))},InlineFragment:{leave:({typeCondition:n,directives:e,selectionSet:t})=>P(["...",K("on ",n),P(e," "),t]," ")},FragmentDefinition:{leave:({name:n,typeCondition:e,variableDefinitions:t,directives:r,selectionSet:i})=>`fragment ${n}${K("(",P(t,", "),")")} on ${e} ${K("",P(r," ")," ")}`+i},IntValue:{leave:({value:n})=>n},FloatValue:{leave:({value:n})=>n},StringValue:{leave:({value:n,block:e})=>e?_f(n):Qf(n)},BooleanValue:{leave:({value:n})=>n?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:n})=>n},ListValue:{leave:({values:n})=>"["+P(n,", ")+"]"},ObjectValue:{leave:({fields:n})=>"{"+P(n,", ")+"}"},ObjectField:{leave:({name:n,value:e})=>n+": "+e},Directive:{leave:({name:n,arguments:e})=>"@"+n+K("(",P(e,", "),")")},NamedType:{leave:({name:n})=>n},ListType:{leave:({type:n})=>"["+n+"]"},NonNullType:{leave:({type:n})=>n+"!"},SchemaDefinition:{leave:({description:n,directives:e,operationTypes:t})=>K("",n,`
`)+P(["schema",P(e," "),Ge(t)]," ")},OperationTypeDefinition:{leave:({operation:n,type:e})=>n+": "+e},ScalarTypeDefinition:{leave:({description:n,name:e,directives:t})=>K("",n,`
`)+P(["scalar",e,P(t," ")]," ")},ObjectTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>K("",n,`
`)+P(["type",e,K("implements ",P(t," & ")),P(r," "),Ge(i)]," ")},FieldDefinition:{leave:({description:n,name:e,arguments:t,type:r,directives:i})=>K("",n,`
`)+e+(vo(t)?K(`(
`,Tr(P(t,`
`)),`
)`):K("(",P(t,", "),")"))+": "+r+K(" ",P(i," "))},InputValueDefinition:{leave:({description:n,name:e,type:t,defaultValue:r,directives:i})=>K("",n,`
`)+P([e+": "+t,K("= ",r),P(i," ")]," ")},InterfaceTypeDefinition:{leave:({description:n,name:e,interfaces:t,directives:r,fields:i})=>K("",n,`
`)+P(["interface",e,K("implements ",P(t," & ")),P(r," "),Ge(i)]," ")},UnionTypeDefinition:{leave:({description:n,name:e,directives:t,types:r})=>K("",n,`
`)+P(["union",e,P(t," "),K("= ",P(r," | "))]," ")},EnumTypeDefinition:{leave:({description:n,name:e,directives:t,values:r})=>K("",n,`
`)+P(["enum",e,P(t," "),Ge(r)]," ")},EnumValueDefinition:{leave:({description:n,name:e,directives:t})=>K("",n,`
`)+P([e,P(t," ")]," ")},InputObjectTypeDefinition:{leave:({description:n,name:e,directives:t,fields:r})=>K("",n,`
`)+P(["input",e,P(t," "),Ge(r)]," ")},DirectiveDefinition:{leave:({description:n,name:e,arguments:t,repeatable:r,locations:i})=>K("",n,`
`)+"directive @"+e+(vo(t)?K(`(
`,Tr(P(t,`
`)),`
)`):K("(",P(t,", "),")"))+(r?" repeatable":"")+" on "+P(i," | ")},SchemaExtension:{leave:({directives:n,operationTypes:e})=>P(["extend schema",P(n," "),Ge(e)]," ")},ScalarTypeExtension:{leave:({name:n,directives:e})=>P(["extend scalar",n,P(e," ")]," ")},ObjectTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>P(["extend type",n,K("implements ",P(e," & ")),P(t," "),Ge(r)]," ")},InterfaceTypeExtension:{leave:({name:n,interfaces:e,directives:t,fields:r})=>P(["extend interface",n,K("implements ",P(e," & ")),P(t," "),Ge(r)]," ")},UnionTypeExtension:{leave:({name:n,directives:e,types:t})=>P(["extend union",n,P(e," "),K("= ",P(t," | "))]," ")},EnumTypeExtension:{leave:({name:n,directives:e,values:t})=>P(["extend enum",n,P(e," "),Ge(t)]," ")},InputObjectTypeExtension:{leave:({name:n,directives:e,fields:t})=>P(["extend input",n,P(e," "),Ge(t)]," ")}};function P(n,e=""){var t;return(t=n?.filter(r=>r).join(e))!==null&&t!==void 0?t:""}function Ge(n){return K(`{
`,Tr(P(n,`
`)),`
}`)}function K(n,e,t=""){return e!=null&&e!==""?n+e+t:""}function Tr(n){return K("  ",n.replace(/\n/g,`
  `))}function vo(n){var e;return(e=n?.some(t=>t.includes(`
`)))!==null&&e!==void 0?e:!1}function wo(n){return n.kind===D.FIELD||n.kind===D.FRAGMENT_SPREAD||n.kind===D.INLINE_FRAGMENT}function ur(n,e){var t=n.directives;return!t||!t.length?!0:Zf(t).every(function(r){var i=r.directive,s=r.ifArgument,o=!1;return s.value.kind==="Variable"?(o=e&&e[s.value.name.value],$(o!==void 0,78,i.name.value)):o=s.value.value,i.name.value==="skip"?!o:o})}function er(n,e,t){var r=new Set(n),i=r.size;return Xe(e,{Directive:function(s){if(r.delete(s.name.value)&&(!t||!r.size))return Kr}}),t?!r.size:r.size<i}function Yf(n){return n&&er(["client","export"],n,!0)}function Xf(n){var e=n.name.value;return e==="skip"||e==="include"}function Zf(n){var e=[];return n&&n.length&&n.forEach(function(t){if(Xf(t)){var r=t.arguments,i=t.name.value;$(r&&r.length===1,79,i);var s=r[0];$(s.name&&s.name.value==="if",80,i);var o=s.value;$(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),81,i),e.push({directive:t,ifArgument:s})}}),e}function eh(n){var e,t,r=(e=n.directives)===null||e===void 0?void 0:e.find(function(s){var o=s.name;return o.value==="unmask"});if(!r)return"mask";var i=(t=r.arguments)===null||t===void 0?void 0:t.find(function(s){var o=s.name;return o.value==="mode"});return globalThis.__DEV__!==!1&&i&&(i.value.kind===D.VARIABLE?globalThis.__DEV__!==!1&&$.warn(82):i.value.kind!==D.STRING?globalThis.__DEV__!==!1&&$.warn(83):i.value.value!=="migrate"&&globalThis.__DEV__!==!1&&$.warn(84,i.value.value)),i&&"value"in i.value&&i.value.value==="migrate"?"migrate":"unmask"}const th=()=>Object.create(null),{forEach:nh,slice:Eo}=Array.prototype,{hasOwnProperty:rh}=Object.prototype;class bt{constructor(e=!0,t=th){this.weakness=e,this.makeData=t}lookup(){return this.lookupArray(arguments)}lookupArray(e){let t=this;return nh.call(e,r=>t=t.getChildTrie(r)),rh.call(t,"data")?t.data:t.data=this.makeData(Eo.call(e))}peek(){return this.peekArray(arguments)}peekArray(e){let t=this;for(let r=0,i=e.length;t&&r<i;++r){const s=t.mapFor(e[r],!1);t=s&&s.get(e[r])}return t&&t.data}remove(){return this.removeArray(arguments)}removeArray(e){let t;if(e.length){const r=e[0],i=this.mapFor(r,!1),s=i&&i.get(r);s&&(t=s.removeArray(Eo.call(e,1)),!s.data&&!s.weak&&!(s.strong&&s.strong.size)&&i.delete(r))}else t=this.data,delete this.data;return t}getChildTrie(e){const t=this.mapFor(e,!0);let r=t.get(e);return r||t.set(e,r=new bt(this.weakness,this.makeData)),r}mapFor(e,t){return this.weakness&&ih(e)?this.weak||(t?this.weak=new WeakMap:void 0):this.strong||(t?this.strong=new Map:void 0)}}function ih(n){switch(typeof n){case"object":if(n===null)break;case"function":return!0}return!1}var sh=Ye(function(){return navigator.product})=="ReactNative",zt=typeof WeakMap=="function"&&!(sh&&!it.HermesInternal),ps=typeof WeakSet=="function",fu=typeof Symbol=="function"&&typeof Symbol.for=="function",Gr=fu&&Symbol.asyncIterator;Ye(function(){return window.document.createElement});Ye(function(){return navigator.userAgent.indexOf("jsdom")>=0});function ce(n){return n!==null&&typeof n=="object"}function oh(n,e){var t=e,r=[];n.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw Fe(85,s.operation,s.name?" named '".concat(s.name.value,"'"):"");s.kind==="FragmentDefinition"&&r.push(s)}),typeof t>"u"&&($(r.length===1,86,r.length),t=r[0].name.value);var i=x(x({},n),{definitions:Me([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:t}}]}}],n.definitions,!0)});return i}function bn(n){n===void 0&&(n=[]);var e={};return n.forEach(function(t){e[t.name.value]=t}),e}function Jr(n,e){switch(n.kind){case"InlineFragment":return n;case"FragmentSpread":{var t=n.name.value;if(typeof e=="function")return e(t);var r=e&&e[t];return $(r,87,t),r||null}default:return null}}function ah(n){var e=!0;return Xe(n,{FragmentSpread:function(t){if(e=!!t.directives&&t.directives.some(function(r){return r.name.value==="unmask"}),!e)return Kr}}),e}function uh(){}class qi{constructor(e=1/0,t=uh){this.max=e,this.dispose=t,this.map=new Map,this.newest=null,this.oldest=null}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}get size(){return this.map.size}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:i}=t;i&&(i.older=r),r&&(r.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.map.set(e,r),r.value)}clean(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)}delete(e){const t=this.map.get(e);return t?(t===this.newest&&(this.newest=t.older),t===this.oldest&&(this.oldest=t.newer),t.newer&&(t.newer.older=t.older),t.older&&(t.older.newer=t.newer),this.map.delete(e),this.dispose(t.value,e),!0):!1}}function ji(){}const ch=ji,lh=typeof WeakRef<"u"?WeakRef:function(n){return{deref:()=>n}},fh=typeof WeakMap<"u"?WeakMap:Map,hh=typeof FinalizationRegistry<"u"?FinalizationRegistry:function(){return{register:ji,unregister:ji}},dh=10024;class Br{constructor(e=1/0,t=ch){this.max=e,this.dispose=t,this.map=new fh,this.newest=null,this.oldest=null,this.unfinalizedNodes=new Set,this.finalizationScheduled=!1,this.size=0,this.finalize=()=>{const r=this.unfinalizedNodes.values();for(let i=0;i<dh;i++){const s=r.next().value;if(!s)break;this.unfinalizedNodes.delete(s);const o=s.key;delete s.key,s.keyRef=new lh(o),this.registry.register(o,s,s)}this.unfinalizedNodes.size>0?queueMicrotask(this.finalize):this.finalizationScheduled=!1},this.registry=new hh(this.deleteNode.bind(this))}has(e){return this.map.has(e)}get(e){const t=this.getNode(e);return t&&t.value}getNode(e){const t=this.map.get(e);if(t&&t!==this.newest){const{older:r,newer:i}=t;i&&(i.older=r),r&&(r.newer=i),t.older=this.newest,t.older.newer=t,t.newer=null,this.newest=t,t===this.oldest&&(this.oldest=i)}return t}set(e,t){let r=this.getNode(e);return r?r.value=t:(r={key:e,value:t,newer:null,older:this.newest},this.newest&&(this.newest.newer=r),this.newest=r,this.oldest=this.oldest||r,this.scheduleFinalization(r),this.map.set(e,r),this.size++,r.value)}clean(){for(;this.oldest&&this.size>this.max;)this.deleteNode(this.oldest)}deleteNode(e){e===this.newest&&(this.newest=e.older),e===this.oldest&&(this.oldest=e.newer),e.newer&&(e.newer.older=e.older),e.older&&(e.older.newer=e.newer),this.size--;const t=e.key||e.keyRef&&e.keyRef.deref();this.dispose(e.value,t),e.keyRef?this.registry.unregister(e):this.unfinalizedNodes.delete(e),t&&this.map.delete(t)}delete(e){const t=this.map.get(e);return t?(this.deleteNode(t),!0):!1}scheduleFinalization(e){this.unfinalizedNodes.add(e),this.finalizationScheduled||(this.finalizationScheduled=!0,queueMicrotask(this.finalize))}}var gi=new WeakSet;function hu(n){n.size<=(n.max||-1)||gi.has(n)||(gi.add(n),setTimeout(function(){n.clean(),gi.delete(n)},100))}var du=function(n,e){var t=new Br(n,e);return t.set=function(r,i){var s=Br.prototype.set.call(this,r,i);return hu(this),s},t},ph=function(n,e){var t=new qi(n,e);return t.set=function(r,i){var s=qi.prototype.set.call(this,r,i);return hu(this),s},t},yh=Symbol.for("apollo.cacheSize"),mt=x({},Bi[yh]),Pt={};function pu(n,e){Pt[n]=e}var mh=globalThis.__DEV__!==!1?wh:void 0,gh=globalThis.__DEV__!==!1?Eh:void 0,bh=globalThis.__DEV__!==!1?yu:void 0;function vh(){var n={parser:1e3,canonicalStringify:1e3,print:2e3,"documentTransform.cache":2e3,"queryManager.getDocumentInfo":2e3,"PersistedQueryLink.persistedQueryHashes":2e3,"fragmentRegistry.transform":2e3,"fragmentRegistry.lookup":1e3,"fragmentRegistry.findFragmentSpreads":4e3,"cache.fragmentQueryDocuments":1e3,"removeTypenameFromVariables.getVariableDefinitions":2e3,"inMemoryCache.maybeBroadcastWatch":5e3,"inMemoryCache.executeSelectionSet":5e4,"inMemoryCache.executeSubSelectedArray":1e4};return Object.fromEntries(Object.entries(n).map(function(e){var t=e[0],r=e[1];return[t,mt[t]||r]}))}function wh(){var n,e,t,r,i;if(globalThis.__DEV__===!1)throw new Error("only supported in development mode");return{limits:vh(),sizes:x({print:(n=Pt.print)===null||n===void 0?void 0:n.call(Pt),parser:(e=Pt.parser)===null||e===void 0?void 0:e.call(Pt),canonicalStringify:(t=Pt.canonicalStringify)===null||t===void 0?void 0:t.call(Pt),links:Qi(this.link),queryManager:{getDocumentInfo:this.queryManager.transformCache.size,documentTransforms:gu(this.queryManager.documentTransform)}},(i=(r=this.cache).getMemoryInternals)===null||i===void 0?void 0:i.call(r))}}function yu(){return{cache:{fragmentQueryDocuments:kt(this.getFragmentDoc)}}}function Eh(){var n=this.config.fragments;return x(x({},yu.apply(this)),{addTypenameDocumentTransform:gu(this.addTypenameTransform),inMemoryCache:{executeSelectionSet:kt(this.storeReader.executeSelectionSet),executeSubSelectedArray:kt(this.storeReader.executeSubSelectedArray),maybeBroadcastWatch:kt(this.maybeBroadcastWatch)},fragmentRegistry:{findFragmentSpreads:kt(n?.findFragmentSpreads),lookup:kt(n?.lookup),transform:kt(n?.transform)}})}function _h(n){return!!n&&"dirtyKey"in n}function kt(n){return _h(n)?n.size:void 0}function mu(n){return n!=null}function gu(n){return Vi(n).map(function(e){return{cache:e}})}function Vi(n){return n?Me(Me([kt(n?.performWork)],Vi(n?.left),!0),Vi(n?.right),!0).filter(mu):[]}function Qi(n){var e;return n?Me(Me([(e=n?.getMemoryInternals)===null||e===void 0?void 0:e.call(n)],Qi(n?.left),!0),Qi(n?.right),!0).filter(mu):[]}var Ot=Object.assign(function(e){return JSON.stringify(e,Sh)},{reset:function(){rn=new ph(mt.canonicalStringify||1e3)}});globalThis.__DEV__!==!1&&pu("canonicalStringify",function(){return rn.size});var rn;Ot.reset();function Sh(n,e){if(e&&typeof e=="object"){var t=Object.getPrototypeOf(e);if(t===Object.prototype||t===null){var r=Object.keys(e);if(r.every(kh))return e;var i=JSON.stringify(r),s=rn.get(i);if(!s){r.sort();var o=JSON.stringify(r);s=rn.get(o)||r,rn.set(i,s),rn.set(o,s)}var a=Object.create(t);return s.forEach(function(c){a[c]=e[c]}),a}}return e}function kh(n,e,t){return e===0||t[e-1]<=n}function un(n){return{__ref:String(n)}}function X(n){return!!(n&&typeof n=="object"&&typeof n.__ref=="string")}function xh(n){return ce(n)&&n.kind==="Document"&&Array.isArray(n.definitions)}function Th(n){return n.kind==="StringValue"}function Ih(n){return n.kind==="BooleanValue"}function Ah(n){return n.kind==="IntValue"}function Oh(n){return n.kind==="FloatValue"}function Ch(n){return n.kind==="Variable"}function Rh(n){return n.kind==="ObjectValue"}function Nh(n){return n.kind==="ListValue"}function Mh(n){return n.kind==="EnumValue"}function Dh(n){return n.kind==="NullValue"}function hn(n,e,t,r){if(Ah(t)||Oh(t))n[e.value]=Number(t.value);else if(Ih(t)||Th(t))n[e.value]=t.value;else if(Rh(t)){var i={};t.fields.map(function(o){return hn(i,o.name,o.value,r)}),n[e.value]=i}else if(Ch(t)){var s=(r||{})[t.name.value];n[e.value]=s}else if(Nh(t))n[e.value]=t.values.map(function(o){var a={};return hn(a,e,o,r),a[e.value]});else if(Mh(t))n[e.value]=t.value;else if(Dh(t))n[e.value]=null;else throw Fe(96,e.value,t.kind)}function Fh(n,e){var t=null;n.directives&&(t={},n.directives.forEach(function(i){t[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var o=s.name,a=s.value;return hn(t[i.name.value],o,a,e)})}));var r=null;return n.arguments&&n.arguments.length&&(r={},n.arguments.forEach(function(i){var s=i.name,o=i.value;return hn(r,s,o,e)})),bu(n.name.value,r,t)}var Bh=["connection","include","skip","client","rest","export","nonreactive"],Rn=Ot,bu=Object.assign(function(n,e,t){if(e&&t&&t.connection&&t.connection.key)if(t.connection.filter&&t.connection.filter.length>0){var r=t.connection.filter?t.connection.filter:[];r.sort();var i={};return r.forEach(function(a){i[a]=e[a]}),"".concat(t.connection.key,"(").concat(Rn(i),")")}else return t.connection.key;var s=n;if(e){var o=Rn(e);s+="(".concat(o,")")}return t&&Object.keys(t).forEach(function(a){Bh.indexOf(a)===-1&&(t[a]&&Object.keys(t[a]).length?s+="@".concat(a,"(").concat(Rn(t[a]),")"):s+="@".concat(a))}),s},{setStringify:function(n){var e=Rn;return Rn=n,e}});function Yr(n,e){if(n.arguments&&n.arguments.length){var t={};return n.arguments.forEach(function(r){var i=r.name,s=r.value;return hn(t,i,s,e)}),t}return null}function gt(n){return n.alias?n.alias.value:n.name.value}function Hi(n,e,t){for(var r,i=0,s=e.selections;i<s.length;i++){var o=s[i];if(Ct(o)){if(o.name.value==="__typename")return n[gt(o)]}else r?r.push(o):r=[o]}if(typeof n.__typename=="string")return n.__typename;if(r)for(var a=0,c=r;a<c.length;a++){var o=c[a],l=Hi(n,Jr(o,t).selectionSet,t);if(typeof l=="string")return l}}function Ct(n){return n.kind==="Field"}function Ph(n){return n.kind==="InlineFragment"}function vn(n){$(n&&n.kind==="Document",88);var e=n.definitions.filter(function(t){return t.kind!=="FragmentDefinition"}).map(function(t){if(t.kind!=="OperationDefinition")throw Fe(89,t.kind);return t});return $(e.length<=1,90,e.length),n}function Ht(n){return vn(n),n.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Ln(n){return n.definitions.filter(function(e){return e.kind==="OperationDefinition"&&!!e.name}).map(function(e){return e.name.value})[0]||null}function wn(n){return n.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function vu(n){var e=Ht(n);return $(e&&e.operation==="query",91),e}function wu(n){$(n.kind==="Document",92),$(n.definitions.length<=1,93);var e=n.definitions[0];return $(e.kind==="FragmentDefinition",94),e}function En(n){vn(n);for(var e,t=0,r=n.definitions;t<r.length;t++){var i=r[t];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw Fe(95)}function ys(n){var e=Object.create(null),t=n&&n.variableDefinitions;return t&&t.length&&t.forEach(function(r){r.defaultValue&&hn(e,r.variable.name,r.defaultValue)}),e}let Ie=null;const _o={};let $h=1;const Lh=()=>class{constructor(){this.id=["slot",$h++,Date.now(),Math.random().toString(36).slice(2)].join(":")}hasValue(){for(let e=Ie;e;e=e.parent)if(this.id in e.slots){const t=e.slots[this.id];if(t===_o)break;return e!==Ie&&(Ie.slots[this.id]=t),!0}return Ie&&(Ie.slots[this.id]=_o),!1}getValue(){if(this.hasValue())return Ie.slots[this.id]}withValue(e,t,r,i){const s={__proto__:null,[this.id]:e},o=Ie;Ie={parent:o,slots:s};try{return t.apply(i,r)}finally{Ie=o}}static bind(e){const t=Ie;return function(){const r=Ie;try{return Ie=t,e.apply(this,arguments)}finally{Ie=r}}}static noContext(e,t,r){if(Ie){const i=Ie;try{return Ie=null,e.apply(r,t)}finally{Ie=i}}else return e.apply(r,t)}};function So(n){try{return n()}catch{}}const bi="@wry/context:Slot",Uh=So(()=>globalThis)||So(()=>it)||Object.create(null),ko=Uh,ms=ko[bi]||Array[bi]||function(n){try{Object.defineProperty(ko,bi,{value:n,enumerable:!1,writable:!1,configurable:!0})}finally{return n}}(Lh()),Xr=new ms,{hasOwnProperty:qh}=Object.prototype,gs=Array.from||function(n){const e=[];return n.forEach(t=>e.push(t)),e};function bs(n){const{unsubscribe:e}=n;typeof e=="function"&&(n.unsubscribe=void 0,e())}const tr=[],jh=100;function dn(n,e){if(!n)throw new Error(e||"assertion failure")}function Eu(n,e){const t=n.length;return t>0&&t===e.length&&n[t-1]===e[t-1]}function _u(n){switch(n.length){case 0:throw new Error("unknown value");case 1:return n[0];case 2:throw n[1]}}function Su(n){return n.slice(0)}class Zr{constructor(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++Zr.count}peek(){if(this.value.length===1&&!Rt(this))return xo(this),this.value[0]}recompute(e){return dn(!this.recomputing,"already recomputing"),xo(this),Rt(this)?Vh(this,e):_u(this.value)}setDirty(){this.dirty||(this.dirty=!0,ku(this),bs(this))}dispose(){this.setDirty(),Ou(this),vs(this,(e,t)=>{e.setDirty(),Cu(e,this)})}forget(){this.dispose()}dependOn(e){e.add(this),this.deps||(this.deps=tr.pop()||new Set),this.deps.add(e)}forgetDeps(){this.deps&&(gs(this.deps).forEach(e=>e.delete(this)),this.deps.clear(),tr.push(this.deps),this.deps=null)}}Zr.count=0;function xo(n){const e=Xr.getValue();if(e)return n.parents.add(e),e.childValues.has(n)||e.childValues.set(n,[]),Rt(n)?Tu(e,n):Iu(e,n),e}function Vh(n,e){return Ou(n),Xr.withValue(n,Qh,[n,e]),Wh(n,e)&&Hh(n),_u(n.value)}function Qh(n,e){n.recomputing=!0;const{normalizeResult:t}=n;let r;t&&n.value.length===1&&(r=Su(n.value)),n.value.length=0;try{if(n.value[0]=n.fn.apply(null,e),t&&r&&!Eu(r,n.value))try{n.value[0]=t(n.value[0],r[0])}catch{}}catch(i){n.value[1]=i}n.recomputing=!1}function Rt(n){return n.dirty||!!(n.dirtyChildren&&n.dirtyChildren.size)}function Hh(n){n.dirty=!1,!Rt(n)&&xu(n)}function ku(n){vs(n,Tu)}function xu(n){vs(n,Iu)}function vs(n,e){const t=n.parents.size;if(t){const r=gs(n.parents);for(let i=0;i<t;++i)e(r[i],n)}}function Tu(n,e){dn(n.childValues.has(e)),dn(Rt(e));const t=!Rt(n);if(!n.dirtyChildren)n.dirtyChildren=tr.pop()||new Set;else if(n.dirtyChildren.has(e))return;n.dirtyChildren.add(e),t&&ku(n)}function Iu(n,e){dn(n.childValues.has(e)),dn(!Rt(e));const t=n.childValues.get(e);t.length===0?n.childValues.set(e,Su(e.value)):Eu(t,e.value)||n.setDirty(),Au(n,e),!Rt(n)&&xu(n)}function Au(n,e){const t=n.dirtyChildren;t&&(t.delete(e),t.size===0&&(tr.length<jh&&tr.push(t),n.dirtyChildren=null))}function Ou(n){n.childValues.size>0&&n.childValues.forEach((e,t)=>{Cu(n,t)}),n.forgetDeps(),dn(n.dirtyChildren===null)}function Cu(n,e){e.parents.delete(n),n.childValues.delete(e),Au(n,e)}function Wh(n,e){if(typeof n.subscribe=="function")try{bs(n),n.unsubscribe=n.subscribe.apply(null,e)}catch{return n.setDirty(),!1}return!0}const zh={setDirty:!0,dispose:!0,forget:!0};function Ru(n){const e=new Map;function t(r){const i=Xr.getValue();if(i){let s=e.get(r);s||e.set(r,s=new Set),i.dependOn(s)}}return t.dirty=function(i,s){const o=e.get(i);if(o){const a=s&&qh.call(zh,s)?s:"setDirty";gs(o).forEach(c=>c[a]()),e.delete(i),bs(o)}},t}let To;function Kh(...n){return(To||(To=new bt(typeof WeakMap=="function"))).lookupArray(n)}const vi=new Set;function nr(n,{max:e=Math.pow(2,16),keyArgs:t,makeCacheKey:r=Kh,normalizeResult:i,subscribe:s,cache:o=qi}=Object.create(null)){const a=typeof o=="function"?new o(e,d=>d.dispose()):o,c=function(){const d=r.apply(null,t?t.apply(null,arguments):arguments);if(d===void 0)return n.apply(null,arguments);let y=a.get(d);y||(a.set(d,y=new Zr(n)),y.normalizeResult=i,y.subscribe=s,y.forget=()=>a.delete(d));const b=y.recompute(Array.prototype.slice.call(arguments));return a.set(d,y),vi.add(a),Xr.hasValue()||(vi.forEach(E=>E.clean()),vi.clear()),b};Object.defineProperty(c,"size",{get:()=>a.size,configurable:!1,enumerable:!1}),Object.freeze(c.options={max:e,keyArgs:t,makeCacheKey:r,normalizeResult:i,subscribe:s,cache:a});function l(d){const y=d&&a.get(d);y&&y.setDirty()}c.dirtyKey=l,c.dirty=function(){l(r.apply(null,arguments))};function u(d){const y=d&&a.get(d);if(y)return y.peek()}c.peekKey=u,c.peek=function(){return u(r.apply(null,arguments))};function p(d){return d?a.delete(d):!1}return c.forgetKey=p,c.forget=function(){return p(r.apply(null,arguments))},c.makeCacheKey=r,c.getKey=t?function(){return r.apply(null,t.apply(null,arguments))}:r,Object.freeze(c)}function Gh(n){return n}var Nu=function(){function n(e,t){t===void 0&&(t=Object.create(null)),this.resultCache=ps?new WeakSet:new Set,this.transform=e,t.getCacheKey&&(this.getCacheKey=t.getCacheKey),this.cached=t.cache!==!1,this.resetCache()}return n.prototype.getCacheKey=function(e){return[e]},n.identity=function(){return new n(Gh,{cache:!1})},n.split=function(e,t,r){return r===void 0&&(r=n.identity()),Object.assign(new n(function(i){var s=e(i)?t:r;return s.transformDocument(i)},{cache:!1}),{left:t,right:r})},n.prototype.resetCache=function(){var e=this;if(this.cached){var t=new bt(zt);this.performWork=nr(n.prototype.performWork.bind(this),{makeCacheKey:function(r){var i=e.getCacheKey(r);if(i)return $(Array.isArray(i),77),t.lookupArray(i)},max:mt["documentTransform.cache"],cache:Br})}},n.prototype.performWork=function(e){return vn(e),this.transform(e)},n.prototype.transformDocument=function(e){if(this.resultCache.has(e))return e;var t=this.performWork(e);return this.resultCache.add(t),t},n.prototype.concat=function(e){var t=this;return Object.assign(new n(function(r){return e.transformDocument(t.transformDocument(r))},{cache:!1}),{left:this,right:e})},n}(),Vn,At=Object.assign(function(n){var e=Vn.get(n);return e||(e=lu(n),Vn.set(n,e)),e},{reset:function(){Vn=new du(mt.print||2e3)}});At.reset();globalThis.__DEV__!==!1&&pu("print",function(){return Vn?Vn.size:0});var de=Array.isArray;function ot(n){return Array.isArray(n)&&n.length>0}var Io={kind:D.FIELD,name:{kind:D.NAME,value:"__typename"}};function Mu(n,e){return!n||n.selectionSet.selections.every(function(t){return t.kind===D.FRAGMENT_SPREAD&&Mu(e[t.name.value],e)})}function Jh(n){return Mu(Ht(n)||wu(n),bn(wn(n)))?null:n}function Yh(n){var e=new Map,t=new Map;return n.forEach(function(r){r&&(r.name?e.set(r.name,r):r.test&&t.set(r.test,r))}),function(r){var i=e.get(r.name.value);return!i&&t.size&&t.forEach(function(s,o){o(r)&&(i=s)}),i}}function Ao(n){var e=new Map;return function(r){r===void 0&&(r=n);var i=e.get(r);return i||e.set(r,i={variables:new Set,fragmentSpreads:new Set}),i}}function Du(n,e){vn(e);for(var t=Ao(""),r=Ao(""),i=function(v){for(var k=0,S=void 0;k<v.length&&(S=v[k]);++k)if(!de(S)){if(S.kind===D.OPERATION_DEFINITION)return t(S.name&&S.name.value);if(S.kind===D.FRAGMENT_DEFINITION)return r(S.name.value)}return globalThis.__DEV__!==!1&&$.error(97),null},s=0,o=e.definitions.length-1;o>=0;--o)e.definitions[o].kind===D.OPERATION_DEFINITION&&++s;var a=Yh(n),c=function(v){return ot(v)&&v.map(a).some(function(k){return k&&k.remove})},l=new Map,u=!1,p={enter:function(v){if(c(v.directives))return u=!0,null}},d=Xe(e,{Field:p,InlineFragment:p,VariableDefinition:{enter:function(){return!1}},Variable:{enter:function(v,k,S,I,O){var C=i(O);C&&C.variables.add(v.name.value)}},FragmentSpread:{enter:function(v,k,S,I,O){if(c(v.directives))return u=!0,null;var C=i(O);C&&C.fragmentSpreads.add(v.name.value)}},FragmentDefinition:{enter:function(v,k,S,I){l.set(JSON.stringify(I),v)},leave:function(v,k,S,I){var O=l.get(JSON.stringify(I));if(v===O)return v;if(s>0&&v.selectionSet.selections.every(function(C){return C.kind===D.FIELD&&C.name.value==="__typename"}))return r(v.name.value).removed=!0,u=!0,null}},Directive:{leave:function(v){if(a(v))return u=!0,null}}});if(!u)return e;var y=function(v){return v.transitiveVars||(v.transitiveVars=new Set(v.variables),v.removed||v.fragmentSpreads.forEach(function(k){y(r(k)).transitiveVars.forEach(function(S){v.transitiveVars.add(S)})})),v},b=new Set;d.definitions.forEach(function(v){v.kind===D.OPERATION_DEFINITION?y(t(v.name&&v.name.value)).fragmentSpreads.forEach(function(k){b.add(k)}):v.kind===D.FRAGMENT_DEFINITION&&s===0&&!r(v.name.value).removed&&b.add(v.name.value)}),b.forEach(function(v){y(r(v)).fragmentSpreads.forEach(function(k){b.add(k)})});var E=function(v){return!!(!b.has(v)||r(v).removed)},w={enter:function(v){if(E(v.name.value))return null}};return Jh(Xe(d,{FragmentSpread:w,FragmentDefinition:w,OperationDefinition:{leave:function(v){if(v.variableDefinitions){var k=y(t(v.name&&v.name.value)).transitiveVars;if(k.size<v.variableDefinitions.length)return x(x({},v),{variableDefinitions:v.variableDefinitions.filter(function(S){return k.has(S.variable.name.value)})})}}}}))}var ws=Object.assign(function(n){return Xe(n,{SelectionSet:{enter:function(e,t,r){if(!(r&&r.kind===D.OPERATION_DEFINITION)){var i=e.selections;if(i){var s=i.some(function(a){return Ct(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!s){var o=r;if(!(Ct(o)&&o.directives&&o.directives.some(function(a){return a.name.value==="export"})))return x(x({},e),{selections:Me(Me([],i,!0),[Io],!1)})}}}}}})},{added:function(n){return n===Io}});function Xh(n){var e=En(n),t=e.operation;if(t==="query")return n;var r=Xe(n,{OperationDefinition:{enter:function(i){return x(x({},i),{operation:"query"})}}});return r}function Fu(n){vn(n);var e=Du([{test:function(t){return t.name.value==="client"},remove:!0}],n);return e}function Zh(n){return vn(n),Xe(n,{FragmentSpread:function(e){var t;if(!(!((t=e.directives)===null||t===void 0)&&t.some(function(r){return r.name.value==="unmask"})))return x(x({},e),{directives:Me(Me([],e.directives||[],!0),[{kind:D.DIRECTIVE,name:{kind:D.NAME,value:"nonreactive"}}],!1)})}})}var ed=Object.prototype.hasOwnProperty;function Oo(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return ei(n)}function ei(n){var e=n[0]||{},t=n.length;if(t>1)for(var r=new Nt,i=1;i<t;++i)e=r.merge(e,n[i]);return e}var td=function(n,e,t){return this.merge(n[t],e[t])},Nt=function(){function n(e){e===void 0&&(e=td),this.reconciler=e,this.isObject=ce,this.pastCopies=new Set}return n.prototype.merge=function(e,t){for(var r=this,i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];return ce(t)&&ce(e)?(Object.keys(t).forEach(function(o){if(ed.call(e,o)){var a=e[o];if(t[o]!==a){var c=r.reconciler.apply(r,Me([e,t,o],i,!1));c!==a&&(e=r.shallowCopyForMerge(e),e[o]=c)}}else e=r.shallowCopyForMerge(e),e[o]=t[o]}),e):t},n.prototype.shallowCopyForMerge=function(e){return ce(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=x({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},n}();function nd(n,e){var t=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t)return(t=t.call(n)).next.bind(t);if(Array.isArray(n)||(t=rd(n))||e){t&&(n=t);var r=0;return function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rd(n,e){if(n){if(typeof n=="string")return Co(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Co(n,e)}}function Co(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ro(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function Es(n,e,t){return e&&Ro(n.prototype,e),t&&Ro(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var _s=function(){return typeof Symbol=="function"},Ss=function(n){return _s()&&!!Symbol[n]},ks=function(n){return Ss(n)?Symbol[n]:"@@"+n};_s()&&!Ss("observable")&&(Symbol.observable=Symbol("observable"));var id=ks("iterator"),Wi=ks("observable"),Bu=ks("species");function Pr(n,e){var t=n[e];if(t!=null){if(typeof t!="function")throw new TypeError(t+" is not a function");return t}}function Nn(n){var e=n.constructor;return e!==void 0&&(e=e[Bu],e===null&&(e=void 0)),e!==void 0?e:ee}function sd(n){return n instanceof ee}function pn(n){pn.log?pn.log(n):setTimeout(function(){throw n})}function Ir(n){Promise.resolve().then(function(){try{n()}catch(e){pn(e)}})}function Pu(n){var e=n._cleanup;if(e!==void 0&&(n._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var t=Pr(e,"unsubscribe");t&&t.call(e)}}catch(r){pn(r)}}function zi(n){n._observer=void 0,n._queue=void 0,n._state="closed"}function od(n){var e=n._queue;if(e){n._queue=void 0,n._state="ready";for(var t=0;t<e.length&&($u(n,e[t].type,e[t].value),n._state!=="closed");++t);}}function $u(n,e,t){n._state="running";var r=n._observer;try{var i=Pr(r,e);switch(e){case"next":i&&i.call(r,t);break;case"error":if(zi(n),i)i.call(r,t);else throw t;break;case"complete":zi(n),i&&i.call(r);break}}catch(s){pn(s)}n._state==="closed"?Pu(n):n._state==="running"&&(n._state="ready")}function wi(n,e,t){if(n._state!=="closed"){if(n._state==="buffering"){n._queue.push({type:e,value:t});return}if(n._state!=="ready"){n._state="buffering",n._queue=[{type:e,value:t}],Ir(function(){return od(n)});return}$u(n,e,t)}}var ad=function(){function n(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";var i=new ud(this);try{this._cleanup=r.call(void 0,i)}catch(s){i.error(s)}this._state==="initializing"&&(this._state="ready")}var e=n.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(zi(this),Pu(this))},Es(n,[{key:"closed",get:function(){return this._state==="closed"}}]),n}(),ud=function(){function n(t){this._subscription=t}var e=n.prototype;return e.next=function(r){wi(this._subscription,"next",r)},e.error=function(r){wi(this._subscription,"error",r)},e.complete=function(){wi(this._subscription,"complete")},Es(n,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),n}(),ee=function(){function n(t){if(!(this instanceof n))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}var e=n.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new ad(r,this._subscriber)},e.forEach=function(r){var i=this;return new Promise(function(s,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function a(){c.unsubscribe(),s()}var c=i.subscribe({next:function(l){try{r(l,a)}catch(u){o(u),c.unsubscribe()}},error:o,complete:s})})},e.map=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Nn(this);return new s(function(o){return i.subscribe({next:function(a){try{a=r(a)}catch(c){return o.error(c)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.filter=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Nn(this);return new s(function(o){return i.subscribe({next:function(a){try{if(!r(a))return}catch(c){return o.error(c)}o.next(a)},error:function(a){o.error(a)},complete:function(){o.complete()}})})},e.reduce=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Nn(this),o=arguments.length>1,a=!1,c=arguments[1],l=c;return new s(function(u){return i.subscribe({next:function(p){var d=!a;if(a=!0,!d||o)try{l=r(l,p)}catch(y){return u.error(y)}else l=p},error:function(p){u.error(p)},complete:function(){if(!a&&!o)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(l),u.complete()}})})},e.concat=function(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=Nn(this);return new a(function(c){var l,u=0;function p(d){l=d.subscribe({next:function(y){c.next(y)},error:function(y){c.error(y)},complete:function(){u===s.length?(l=void 0,c.complete()):p(a.from(s[u++]))}})}return p(r),function(){l&&(l.unsubscribe(),l=void 0)}})},e.flatMap=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Nn(this);return new s(function(o){var a=[],c=i.subscribe({next:function(u){if(r)try{u=r(u)}catch(d){return o.error(d)}var p=s.from(u).subscribe({next:function(d){o.next(d)},error:function(d){o.error(d)},complete:function(){var d=a.indexOf(p);d>=0&&a.splice(d,1),l()}});a.push(p)},error:function(u){o.error(u)},complete:function(){l()}});function l(){c.closed&&a.length===0&&o.complete()}return function(){a.forEach(function(u){return u.unsubscribe()}),c.unsubscribe()}})},e[Wi]=function(){return this},n.from=function(r){var i=typeof this=="function"?this:n;if(r==null)throw new TypeError(r+" is not an object");var s=Pr(r,Wi);if(s){var o=s.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return sd(o)&&o.constructor===i?o:new i(function(a){return o.subscribe(a)})}if(Ss("iterator")&&(s=Pr(r,id),s))return new i(function(a){Ir(function(){if(!a.closed){for(var c=nd(s.call(r)),l;!(l=c()).done;){var u=l.value;if(a.next(u),a.closed)return}a.complete()}})});if(Array.isArray(r))return new i(function(a){Ir(function(){if(!a.closed){for(var c=0;c<r.length;++c)if(a.next(r[c]),a.closed)return;a.complete()}})});throw new TypeError(r+" is not observable")},n.of=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=typeof this=="function"?this:n;return new o(function(a){Ir(function(){if(!a.closed){for(var c=0;c<i.length;++c)if(a.next(i[c]),a.closed)return;a.complete()}})})},Es(n,null,[{key:Bu,get:function(){return this}}]),n}();_s()&&Object.defineProperty(ee,Symbol("extensions"),{value:{symbol:Wi,hostReportError:pn},configurable:!0});function cd(n){var e,t=n.Symbol;if(typeof t=="function")if(t.observable)e=t.observable;else{typeof t.for=="function"?e=t.for("https://github.com/benlesh/symbol-observable"):e=t("https://github.com/benlesh/symbol-observable");try{t.observable=e}catch{}}else e="@@observable";return e}var en;typeof self<"u"?en=self:typeof window<"u"?en=window:typeof it<"u"?en=it:typeof module<"u"?en=module:en=Function("return this")();cd(en);var No=ee.prototype,Mo="@@observable";No[Mo]||(No[Mo]=function(){return this});function ld(n){return n.catch(function(){}),n}var fd=Object.prototype.toString;function Lu(n){return Ki(n)}function Ki(n,e){switch(fd.call(n)){case"[object Array]":{if(e=e||new Map,e.has(n))return e.get(n);var t=n.slice(0);return e.set(n,t),t.forEach(function(i,s){t[s]=Ki(i,e)}),t}case"[object Object]":{if(e=e||new Map,e.has(n))return e.get(n);var r=Object.create(Object.getPrototypeOf(n));return e.set(n,r),Object.keys(n).forEach(function(i){r[i]=Ki(n[i],e)}),r}default:return n}}function hd(n){var e=new Set([n]);return e.forEach(function(t){ce(t)&&dd(t)===t&&Object.getOwnPropertyNames(t).forEach(function(r){ce(t[r])&&e.add(t[r])})}),n}function dd(n){if(globalThis.__DEV__!==!1&&!Object.isFrozen(n))try{Object.freeze(n)}catch(e){if(e instanceof TypeError)return null;throw e}return n}function $r(n){return globalThis.__DEV__!==!1&&hd(n),n}function Qn(n,e,t){var r=[];n.forEach(function(i){return i[e]&&r.push(i)}),r.forEach(function(i){return i[e](t)})}function Ei(n,e,t){return new ee(function(r){var i={then:function(c){return new Promise(function(l){return l(c())})}};function s(c,l){return function(u){if(c){var p=function(){return r.closed?0:c(u)};i=i.then(p,p).then(function(d){return r.next(d)},function(d){return r.error(d)})}else r[l](u)}}var o={next:s(e,"next"),error:s(t,"error"),complete:function(){i.then(function(){return r.complete()})}},a=n.subscribe(o);return function(){return a.unsubscribe()}})}function Uu(n){function e(t){Object.defineProperty(n,t,{value:ee})}return fu&&Symbol.species&&e(Symbol.species),e("@@species"),n}function Do(n){return n&&typeof n.then=="function"}var tn=function(n){He(e,n);function e(t){var r=n.call(this,function(i){return r.addObserver(i),function(){return r.removeObserver(i)}})||this;return r.observers=new Set,r.promise=new Promise(function(i,s){r.resolve=i,r.reject=s}),r.handlers={next:function(i){r.sub!==null&&(r.latest=["next",i],r.notify("next",i),Qn(r.observers,"next",i))},error:function(i){var s=r.sub;s!==null&&(s&&setTimeout(function(){return s.unsubscribe()}),r.sub=null,r.latest=["error",i],r.reject(i),r.notify("error",i),Qn(r.observers,"error",i))},complete:function(){var i=r,s=i.sub,o=i.sources,a=o===void 0?[]:o;if(s!==null){var c=a.shift();c?Do(c)?c.then(function(l){return r.sub=l.subscribe(r.handlers)},r.handlers.error):r.sub=c.subscribe(r.handlers):(s&&setTimeout(function(){return s.unsubscribe()}),r.sub=null,r.latest&&r.latest[0]==="next"?r.resolve(r.latest[1]):r.resolve(),r.notify("complete"),Qn(r.observers,"complete"))}}},r.nextResultListeners=new Set,r.cancel=function(i){r.reject(i),r.sources=[],r.handlers.error(i)},r.promise.catch(function(i){}),typeof t=="function"&&(t=[new ee(t)]),Do(t)?t.then(function(i){return r.start(i)},r.handlers.error):r.start(t),r}return e.prototype.start=function(t){this.sub===void 0&&(this.sources=Array.from(t),this.handlers.complete())},e.prototype.deliverLastMessage=function(t){if(this.latest){var r=this.latest[0],i=t[r];i&&i.call(t,this.latest[1]),this.sub===null&&r==="next"&&t.complete&&t.complete()}},e.prototype.addObserver=function(t){this.observers.has(t)||(this.deliverLastMessage(t),this.observers.add(t))},e.prototype.removeObserver=function(t){this.observers.delete(t)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(t,r){var i=this.nextResultListeners;i.size&&(this.nextResultListeners=new Set,i.forEach(function(s){return s(t,r)}))},e.prototype.beforeNext=function(t){var r=!1;this.nextResultListeners.add(function(i,s){r||(r=!0,t(i,s))})},e}(ee);Uu(tn);function cn(n){return"incremental"in n}function pd(n){return"hasNext"in n&&"data"in n}function yd(n){return cn(n)||pd(n)}function md(n){return ce(n)&&"payload"in n}function qu(n,e){var t=n,r=new Nt;return cn(e)&&ot(e.incremental)&&e.incremental.forEach(function(i){for(var s=i.data,o=i.path,a=o.length-1;a>=0;--a){var c=o[a],l=!isNaN(+c),u=l?[]:{};u[c]=s,s=u}t=r.merge(t,s)}),t}function Ar(n){var e=Gi(n);return ot(e)}function Gi(n){var e=ot(n.errors)?n.errors.slice(0):[];return cn(n)&&ot(n.incremental)&&n.incremental.forEach(function(t){t.errors&&e.push.apply(e,t.errors)}),e}function yn(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=Object.create(null);return n.forEach(function(r){r&&Object.keys(r).forEach(function(i){var s=r[i];s!==void 0&&(t[i]=s)})}),t}function _i(n,e){return yn(n,e,e.variables&&{variables:yn(x(x({},n&&n.variables),e.variables))})}function Si(n){return new ee(function(e){e.error(n)})}var ju=function(n,e,t){var r=new Error(t);throw r.name="ServerError",r.response=n,r.statusCode=n.status,r.result=e,r};function gd(n){for(var e=["query","operationName","variables","extensions","context"],t=0,r=Object.keys(n);t<r.length;t++){var i=r[t];if(e.indexOf(i)<0)throw Fe(46,i)}return n}function bd(n,e){var t=x({},n),r=function(s){typeof s=="function"?t=x(x({},t),s(t)):t=x(x({},t),s)},i=function(){return x({},t)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:r}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),e}function vd(n){var e={variables:n.variables||{},extensions:n.extensions||{},operationName:n.operationName,query:n.query};return e.operationName||(e.operationName=typeof e.query!="string"?Ln(e.query)||void 0:""),e}function wd(n,e){var t=x({},n),r=new Set(Object.keys(n));return Xe(e,{Variable:function(i,s,o){o&&o.kind!=="VariableDefinition"&&r.delete(i.name.value)}}),r.forEach(function(i){delete t[i]}),t}function Fo(n,e){return e?e(n):ee.of()}function Mn(n){return typeof n=="function"?new We(n):n}function br(n){return n.request.length<=1}var We=function(){function n(e){e&&(this.request=e)}return n.empty=function(){return new n(function(){return ee.of()})},n.from=function(e){return e.length===0?n.empty():e.map(Mn).reduce(function(t,r){return t.concat(r)})},n.split=function(e,t,r){var i=Mn(t),s=Mn(r||new n(Fo)),o;return br(i)&&br(s)?o=new n(function(a){return e(a)?i.request(a)||ee.of():s.request(a)||ee.of()}):o=new n(function(a,c){return e(a)?i.request(a,c)||ee.of():s.request(a,c)||ee.of()}),Object.assign(o,{left:i,right:s})},n.execute=function(e,t){return e.request(bd(t.context,vd(gd(t))))||ee.of()},n.concat=function(e,t){var r=Mn(e);if(br(r))return globalThis.__DEV__!==!1&&$.warn(38,r),r;var i=Mn(t),s;return br(i)?s=new n(function(o){return r.request(o,function(a){return i.request(a)||ee.of()})||ee.of()}):s=new n(function(o,a){return r.request(o,function(c){return i.request(c,a)||ee.of()})||ee.of()}),Object.assign(s,{left:r,right:i})},n.prototype.split=function(e,t,r){return this.concat(n.split(e,t,r||new n(Fo)))},n.prototype.concat=function(e){return n.concat(this,e)},n.prototype.request=function(e,t){throw Fe(39)},n.prototype.onError=function(e,t){if(t&&t.error)return t.error(e),!1;throw e},n.prototype.setOnError=function(e){return this.onError=e,this},n}(),Bo=We.from,Ed=We.split,Ji=We.execute;function _d(n){var e,t=n[Symbol.asyncIterator]();return e={next:function(){return t.next()}},e[Symbol.asyncIterator]=function(){return this},e}function Sd(n){var e=null,t=null,r=!1,i=[],s=[];function o(p){if(!t){if(s.length){var d=s.shift();if(Array.isArray(d)&&d[0])return d[0]({value:p,done:!1})}i.push(p)}}function a(p){t=p;var d=s.slice();d.forEach(function(y){y[1](p)}),!e||e()}function c(){r=!0;var p=s.slice();p.forEach(function(d){d[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,n.removeListener("data",o),n.removeListener("error",a),n.removeListener("end",c),n.removeListener("finish",c),n.removeListener("close",c)},n.on("data",o),n.on("error",a),n.on("end",c),n.on("finish",c),n.on("close",c);function l(){return new Promise(function(p,d){if(t)return d(t);if(i.length)return p({value:i.shift(),done:!1});if(r)return p({value:void 0,done:!0});s.push([p,d])})}var u={next:function(){return l()}};return Gr&&(u[Symbol.asyncIterator]=function(){return this}),u}function kd(n){var e=!1,t={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(r,i){n.then(function(s){r({value:s,done:!1})}).catch(i)}))}};return Gr&&(t[Symbol.asyncIterator]=function(){return this}),t}function Po(n){var e={next:function(){return n.read()}};return Gr&&(e[Symbol.asyncIterator]=function(){return this}),e}function xd(n){return!!n.body}function Td(n){return!!n.getReader}function Id(n){return!!(Gr&&n[Symbol.asyncIterator])}function Ad(n){return!!n.stream}function Od(n){return!!n.arrayBuffer}function Cd(n){return!!n.pipe}function Rd(n){var e=n;if(xd(n)&&(e=n.body),Id(e))return _d(e);if(Td(e))return Po(e.getReader());if(Ad(e))return Po(e.stream().getReader());if(Od(e))return kd(e.arrayBuffer());if(Cd(e))return Sd(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var ti=Symbol();function Vu(n){return n.extensions?Array.isArray(n.extensions[ti]):!1}function Qu(n){return n.hasOwnProperty("graphQLErrors")}var Nd=function(n){var e=Me(Me(Me([],n.graphQLErrors,!0),n.clientErrors,!0),n.protocolErrors,!0);return n.networkError&&e.push(n.networkError),e.map(function(t){return ce(t)&&t.message||"Error message not found."}).join(`
`)},xt=function(n){He(e,n);function e(t){var r=t.graphQLErrors,i=t.protocolErrors,s=t.clientErrors,o=t.networkError,a=t.errorMessage,c=t.extraInfo,l=n.call(this,a)||this;return l.name="ApolloError",l.graphQLErrors=r||[],l.protocolErrors=i||[],l.clientErrors=s||[],l.networkError=o||null,l.message=a||Nd(l),l.extraInfo=c,l.cause=Me(Me(Me([o],r||[],!0),i||[],!0),s||[],!0).find(function(u){return!!u})||null,l.__proto__=e.prototype,l}return e}(Error),$o=Object.prototype.hasOwnProperty;function Md(n,e){return _t(this,void 0,void 0,function(){var t,r,i,s,o,a,c,l,u,p,d,y,b,E,w,v,k,S,I,O,C,M,F,L;return St(this,function(V){switch(V.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");t=new TextDecoder("utf-8"),r=(L=n.headers)===null||L===void 0?void 0:L.get("content-type"),i="boundary=",s=r?.includes(i)?r?.substring(r?.indexOf(i)+i.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",o=`\r
--`.concat(s),a="",c=Rd(n),l=!0,V.label=1;case 1:return l?[4,c.next()]:[3,3];case 2:for(u=V.sent(),p=u.value,d=u.done,y=typeof p=="string"?p:t.decode(p),b=a.length-o.length+1,l=!d,a+=y,E=a.indexOf(o,b);E>-1;){if(w=void 0,M=[a.slice(0,E),a.slice(E+o.length)],w=M[0],a=M[1],v=w.indexOf(`\r
\r
`),k=Dd(w.slice(0,v)),S=k["content-type"],S&&S.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");if(I=w.slice(v),I){if(O=Hu(n,I),Object.keys(O).length>1||"data"in O||"incremental"in O||"errors"in O||"payload"in O)if(md(O)){if(C={},"payload"in O){if(Object.keys(O).length===1&&O.payload===null)return[2];C=x({},O.payload)}"errors"in O&&(C=x(x({},C),{extensions:x(x({},"extensions"in C?C.extensions:null),(F={},F[ti]=O.errors,F))})),e(C)}else e(O);else if(Object.keys(O).length===1&&"hasNext"in O&&!O.hasNext)return[2]}E=a.indexOf(o)}return[3,1];case 3:return[2]}})})}function Dd(n){var e={};return n.split(`
`).forEach(function(t){var r=t.indexOf(":");if(r>-1){var i=t.slice(0,r).trim().toLowerCase(),s=t.slice(r+1).trim();e[i]=s}}),e}function Hu(n,e){if(n.status>=300){var t=function(){try{return JSON.parse(e)}catch{return e}};ju(n,t(),"Response not successful: Received status code ".concat(n.status))}try{return JSON.parse(e)}catch(i){var r=i;throw r.name="ServerParseError",r.response=n,r.statusCode=n.status,r.bodyText=e,r}}function Fd(n,e){n.result&&n.result.errors&&n.result.data&&e.next(n.result),e.error(n)}function Bd(n){return function(e){return e.text().then(function(t){return Hu(e,t)}).then(function(t){return!Array.isArray(t)&&!$o.call(t,"data")&&!$o.call(t,"errors")&&ju(e,t,"Server response was missing for query '".concat(Array.isArray(n)?n.map(function(r){return r.operationName}):n.operationName,"'.")),t})}}var Yi=function(n,e){var t;try{t=JSON.stringify(n)}catch(i){var r=Fe(42,e,i.message);throw r.parseError=i,r}return t},Pd={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},$d={accept:"*/*","content-type":"application/json"},Ld={method:"POST"},Ud={http:Pd,headers:$d,options:Ld},qd=function(n,e){return e(n)};function jd(n,e){for(var t=[],r=2;r<arguments.length;r++)t[r-2]=arguments[r];var i={},s={};t.forEach(function(p){i=x(x(x({},i),p.options),{headers:x(x({},i.headers),p.headers)}),p.credentials&&(i.credentials=p.credentials),s=x(x({},s),p.http)}),i.headers&&(i.headers=Vd(i.headers,s.preserveHeaderCase));var o=n.operationName,a=n.extensions,c=n.variables,l=n.query,u={operationName:o,variables:c};return s.includeExtensions&&(u.extensions=a),s.includeQuery&&(u.query=e(l,At)),{options:i,body:u}}function Vd(n,e){if(!e){var t={};return Object.keys(Object(n)).forEach(function(s){t[s.toLowerCase()]=n[s]}),t}var r={};Object.keys(Object(n)).forEach(function(s){r[s.toLowerCase()]={originalName:s,value:n[s]}});var i={};return Object.keys(r).forEach(function(s){i[r[s].originalName]=r[s].value}),i}var Qd=function(n){if(!n&&typeof fetch>"u")throw Fe(40)},Hd=function(n,e){var t=n.getContext(),r=t.uri;return r||(typeof e=="function"?e(n):e||"/graphql")};function Wd(n,e){var t=[],r=function(p,d){t.push("".concat(p,"=").concat(encodeURIComponent(d)))};if("query"in e&&r("query",e.query),e.operationName&&r("operationName",e.operationName),e.variables){var i=void 0;try{i=Yi(e.variables,"Variables map")}catch(p){return{parseError:p}}r("variables",i)}if(e.extensions){var s=void 0;try{s=Yi(e.extensions,"Extensions map")}catch(p){return{parseError:p}}r("extensions",s)}var o="",a=n,c=n.indexOf("#");c!==-1&&(o=n.substr(c),a=n.substr(0,c));var l=a.indexOf("?")===-1?"?":"&",u=a+l+t.join("&")+o;return{newURI:u}}var Lo=Ye(function(){return fetch}),Wu=function(n){n===void 0&&(n={});var e=n.uri,t=e===void 0?"/graphql":e,r=n.fetch,i=n.print,s=i===void 0?qd:i,o=n.includeExtensions,a=n.preserveHeaderCase,c=n.useGETForQueries,l=n.includeUnusedVariables,u=l===void 0?!1:l,p=st(n,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);globalThis.__DEV__!==!1&&Qd(r||Lo);var d={http:{includeExtensions:o,preserveHeaderCase:a},options:p.fetchOptions,credentials:p.credentials,headers:p.headers};return new We(function(y){var b=Hd(y,t),E=y.getContext(),w={};if(E.clientAwareness){var v=E.clientAwareness,k=v.name,S=v.version;k&&(w["apollographql-client-name"]=k),S&&(w["apollographql-client-version"]=S)}var I=x(x({},w),E.headers),O={http:E.http,options:E.fetchOptions,credentials:E.credentials,headers:I};if(er(["client"],y.query)){var C=Fu(y.query);if(!C)return Si(new Error("HttpLink: Trying to send a client-only query to the server. To send to the server, ensure a non-client field is added to the query or set the `transformOptions.removeClientFields` option to `true`."));y.query=C}var M=jd(y,s,Ud,d,O),F=M.options,L=M.body;L.variables&&!u&&(L.variables=wd(L.variables,y.query));var V;!F.signal&&typeof AbortController<"u"&&(V=new AbortController,F.signal=V.signal);var G=function(Q){return Q.kind==="OperationDefinition"&&Q.operation==="mutation"},Ee=function(Q){return Q.kind==="OperationDefinition"&&Q.operation==="subscription"},ie=Ee(En(y.query)),_e=er(["defer"],y.query);if(c&&!y.query.definitions.some(G)&&(F.method="GET"),_e||ie){F.headers=F.headers||{};var j="multipart/mixed;";ie&&_e&&globalThis.__DEV__!==!1&&$.warn(41),ie?j+="boundary=graphql;subscriptionSpec=1.0,application/json":_e&&(j+="deferSpec=20220824,application/json"),F.headers.accept=j}if(F.method==="GET"){var Z=Wd(b,L),q=Z.newURI,W=Z.parseError;if(W)return Si(W);b=q}else try{F.body=Yi(L,"Payload")}catch(Q){return Si(Q)}return new ee(function(Q){var Se=r||Ye(function(){return fetch})||Lo,J=Q.next.bind(Q);return Se(b,F).then(function(Te){var ze;y.setContext({response:Te});var se=(ze=Te.headers)===null||ze===void 0?void 0:ze.get("content-type");return se!==null&&/^multipart\/mixed/i.test(se)?Md(Te,J):Bd(y)(Te).then(J)}).then(function(){V=void 0,Q.complete()}).catch(function(Te){V=void 0,Fd(Te,Q)}),function(){V&&V.abort()}})})},zd=function(n){He(e,n);function e(t){t===void 0&&(t={});var r=n.call(this,Wu(t).request)||this;return r.options=t,r}return e}(We);const{toString:Uo,hasOwnProperty:Kd}=Object.prototype,qo=Function.prototype.toString,Xi=new Map;function oe(n,e){try{return Zi(n,e)}finally{Xi.clear()}}function Zi(n,e){if(n===e)return!0;const t=Uo.call(n),r=Uo.call(e);if(t!==r)return!1;switch(t){case"[object Array]":if(n.length!==e.length)return!1;case"[object Object]":{if(Vo(n,e))return!0;const i=jo(n),s=jo(e),o=i.length;if(o!==s.length)return!1;for(let a=0;a<o;++a)if(!Kd.call(e,i[a]))return!1;for(let a=0;a<o;++a){const c=i[a];if(!Zi(n[c],e[c]))return!1}return!0}case"[object Error]":return n.name===e.name&&n.message===e.message;case"[object Number]":if(n!==n)return e!==e;case"[object Boolean]":case"[object Date]":return+n==+e;case"[object RegExp]":case"[object String]":return n==`${e}`;case"[object Map]":case"[object Set]":{if(n.size!==e.size)return!1;if(Vo(n,e))return!0;const i=n.entries(),s=t==="[object Map]";for(;;){const o=i.next();if(o.done)break;const[a,c]=o.value;if(!e.has(a)||s&&!Zi(c,e.get(a)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":n=new Uint8Array(n),e=new Uint8Array(e);case"[object DataView]":{let i=n.byteLength;if(i===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{const i=qo.call(n);return i!==qo.call(e)?!1:!Yd(i,Jd)}}return!1}function jo(n){return Object.keys(n).filter(Gd,n)}function Gd(n){return this[n]!==void 0}const Jd="{ [native code] }";function Yd(n,e){const t=n.length-e.length;return t>=0&&n.indexOf(e,t)===t}function Vo(n,e){let t=Xi.get(n);if(t){if(t.has(e))return!0}else Xi.set(n,t=new Set);return t.add(e),!1}function zu(n,e,t,r){var i=e.data,s=st(e,["data"]),o=t.data,a=st(t,["data"]);return oe(s,a)&&Or(En(n).selectionSet,i,o,{fragmentMap:bn(wn(n)),variables:r})}function Or(n,e,t,r){if(e===t)return!0;var i=new Set;return n.selections.every(function(s){if(i.has(s)||(i.add(s),!ur(s,r.variables))||Qo(s))return!0;if(Ct(s)){var o=gt(s),a=e&&e[o],c=t&&t[o],l=s.selectionSet;if(!l)return oe(a,c);var u=Array.isArray(a),p=Array.isArray(c);if(u!==p)return!1;if(u&&p){var d=a.length;if(c.length!==d)return!1;for(var y=0;y<d;++y)if(!Or(l,a[y],c[y],r))return!1;return!0}return Or(l,a,c,r)}else{var b=Jr(s,r.fragmentMap);if(b)return Qo(b)?!0:Or(b.selectionSet,e,t,r)}})}function Qo(n){return!!n.directives&&n.directives.some(Xd)}function Xd(n){return n.name.value==="nonreactive"}var Ku=zt?WeakMap:Map,Gu=ps?WeakSet:Set,xs=new ms,Ho=!1;function Ju(){Ho||(Ho=!0,globalThis.__DEV__!==!1&&$.warn(52))}function Yu(n,e,t){return xs.withValue(!0,function(){var r=Un(n,e,t,!1);return Object.isFrozen(n)&&$r(r),r})}function Zd(n,e){if(e.has(n))return e.get(n);var t=Array.isArray(n)?[]:Object.create(null);return e.set(n,t),t}function Un(n,e,t,r,i){var s,o=t.knownChanged,a=Zd(n,t.mutableTargets);if(Array.isArray(n)){for(var c=0,l=Array.from(n.entries());c<l.length;c++){var u=l[c],p=u[0],d=u[1];if(d===null){a[p]=null;continue}var y=Un(d,e,t,r,globalThis.__DEV__!==!1?"".concat(i||"","[").concat(p,"]"):void 0);o.has(y)&&o.add(a),a[p]=y}return o.has(a)?a:n}for(var b=0,E=e.selections;b<E.length;b++){var w=E[b],v=void 0;if(r&&o.add(a),w.kind===D.FIELD){var k=gt(w),S=w.selectionSet;if(v=a[k]||n[k],v===void 0)continue;if(S&&v!==null){var y=Un(n[k],S,t,r,globalThis.__DEV__!==!1?"".concat(i||"",".").concat(k):void 0);o.has(y)&&(v=y)}globalThis.__DEV__===!1&&(a[k]=v),globalThis.__DEV__!==!1&&(r&&k!=="__typename"&&!(!((s=Object.getOwnPropertyDescriptor(a,k))===null||s===void 0)&&s.value)?Object.defineProperty(a,k,ep(k,v,i||"",t.operationName,t.operationType)):(delete a[k],a[k]=v))}if(w.kind===D.INLINE_FRAGMENT&&(!w.typeCondition||t.cache.fragmentMatches(w,n.__typename))&&(v=Un(n,w.selectionSet,t,r,i)),w.kind===D.FRAGMENT_SPREAD){var I=w.name.value,O=t.fragmentMap[I]||(t.fragmentMap[I]=t.cache.lookupFragment(I));$(O,47,I);var C=eh(w);C!=="mask"&&(v=Un(n,O.selectionSet,t,C==="migrate",i))}o.has(v)&&o.add(a)}return"__typename"in n&&!("__typename"in a)&&(a.__typename=n.__typename),Object.keys(a).length!==Object.keys(n).length&&o.add(a),o.has(a)?a:n}function ep(n,e,t,r,i){var s=function(){return xs.getValue()||(globalThis.__DEV__!==!1&&$.warn(48,r?"".concat(i," '").concat(r,"'"):"anonymous ".concat(i),"".concat(t,".").concat(n).replace(/^\./,"")),s=function(){return e}),e};return{get:function(){return s()},set:function(o){s=function(){return o}},enumerable:!0,configurable:!0}}function Xu(n,e,t,r){if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&Ju(),n;var i=e.definitions.filter(function(o){return o.kind===D.FRAGMENT_DEFINITION});typeof r>"u"&&($(i.length===1,49,i.length),r=i[0].name.value);var s=i.find(function(o){return o.name.value===r});return $(!!s,50,r),n==null||oe(n,{})?n:Yu(n,s.selectionSet,{operationType:"fragment",operationName:s.name.value,fragmentMap:bn(wn(e)),cache:t,mutableTargets:new Ku,knownChanged:new Gu})}function tp(n,e,t){var r;if(!t.fragmentMatches)return globalThis.__DEV__!==!1&&Ju(),n;var i=Ht(e);return $(i,51),n==null?n:Yu(n,i.selectionSet,{operationType:i.operation,operationName:(r=i.name)===null||r===void 0?void 0:r.value,fragmentMap:bn(wn(e)),cache:t,mutableTargets:new Ku,knownChanged:new Gu})}var Zu=function(){function n(){this.assumeImmutableResults=!1,this.getFragmentDoc=nr(oh,{max:mt["cache.fragmentQueryDocuments"]||1e3,cache:Br})}return n.prototype.lookupFragment=function(e){return null},n.prototype.batch=function(e){var t=this,r=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,i;return this.performTransaction(function(){return i=e.update(t)},r),i},n.prototype.recordOptimisticTransaction=function(e,t){this.performTransaction(e,t)},n.prototype.transformDocument=function(e){return e},n.prototype.transformForLink=function(e){return e},n.prototype.identify=function(e){},n.prototype.gc=function(){return[]},n.prototype.modify=function(e){return!1},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(x(x({},e),{rootId:e.id||"ROOT_QUERY",optimistic:t}))},n.prototype.watchFragment=function(e){var t=this,r=e.fragment,i=e.fragmentName,s=e.from,o=e.optimistic,a=o===void 0?!0:o,c=st(e,["fragment","fragmentName","from","optimistic"]),l=this.getFragmentDoc(r,i),u=typeof s>"u"||typeof s=="string"?s:this.identify(s),p=!!e[Symbol.for("apollo.dataMasking")];if(globalThis.__DEV__!==!1){var d=i||wu(r).name.value;u||globalThis.__DEV__!==!1&&$.warn(1,d)}var y=x(x({},c),{returnPartialData:!0,id:u,query:l,optimistic:a}),b;return new ee(function(E){return t.watch(x(x({},y),{immediate:!0,callback:function(w){var v=p?Xu(w.result,r,t,i):w.result;if(!(b&&zu(l,{data:b.result},{data:v},e.variables))){var k={data:v,complete:!!w.complete};w.missing&&(k.missing=ei(w.missing.map(function(S){return S.missing}))),b=x(x({},w),{result:v}),E.next(k)}}}))})},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!!e.optimistic),this.read(x(x({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:t}))},n.prototype.writeQuery=function(e){var t=e.id,r=e.data,i=st(e,["id","data"]);return this.write(Object.assign(i,{dataId:t||"ROOT_QUERY",result:r}))},n.prototype.writeFragment=function(e){var t=e.id,r=e.data,i=e.fragment,s=e.fragmentName,o=st(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,s),dataId:t,result:r}))},n.prototype.updateQuery=function(e,t){return this.batch({update:function(r){var i=r.readQuery(e),s=t(i);return s==null?i:(r.writeQuery(x(x({},e),{data:s})),s)}})},n.prototype.updateFragment=function(e,t){return this.batch({update:function(r){var i=r.readFragment(e),s=t(i);return s==null?i:(r.writeFragment(x(x({},e),{data:s})),s)}})},n}();globalThis.__DEV__!==!1&&(Zu.prototype.getMemoryInternals=bh);var ec=function(n){He(e,n);function e(t,r,i,s){var o,a=n.call(this,t)||this;if(a.message=t,a.path=r,a.query=i,a.variables=s,Array.isArray(a.path)){a.missing=a.message;for(var c=a.path.length-1;c>=0;--c)a.missing=(o={},o[a.path[c]]=a.missing,o)}else a.missing=a.path;return a.__proto__=e.prototype,a}return e}(Error),ke=Object.prototype.hasOwnProperty;function Dn(n){return n==null}function tc(n,e){var t=n.__typename,r=n.id,i=n._id;if(typeof t=="string"&&(e&&(e.keyObject=Dn(r)?Dn(i)?void 0:{_id:i}:{id:r}),Dn(r)&&!Dn(i)&&(r=i),!Dn(r)))return"".concat(t,":").concat(typeof r=="number"||typeof r=="string"?r:JSON.stringify(r))}var nc={dataIdFromObject:tc,addTypename:!0,resultCaching:!0,canonizeResults:!1};function np(n){return yn(nc,n)}function rc(n){var e=n.canonizeResults;return e===void 0?nc.canonizeResults:e}function rp(n,e){return X(e)?n.get(e.__ref,"__typename"):e&&e.__typename}var ic=/^[_a-z][_0-9a-z]*/i;function Mt(n){var e=n.match(ic);return e?e[0]:n}function es(n,e,t){return ce(e)?de(e)?e.every(function(r){return es(n,r,t)}):n.selections.every(function(r){if(Ct(r)&&ur(r,t)){var i=gt(r);return ke.call(e,i)&&(!r.selectionSet||es(r.selectionSet,e[i],t))}return!0}):!1}function sn(n){return ce(n)&&!X(n)&&!de(n)}function ip(){return new Nt}function sc(n,e){var t=bn(wn(n));return{fragmentMap:t,lookupFragment:function(r){var i=t[r];return!i&&e&&(i=e.lookup(r)),i||null}}}var Cr=Object.create(null),ki=function(){return Cr},Wo=Object.create(null),ni=function(){function n(e,t){var r=this;this.policies=e,this.group=t,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,s){return $r(X(i)?r.get(i.__ref,s):i&&i[s])},this.canRead=function(i){return X(i)?r.has(i.__ref):typeof i=="object"},this.toReference=function(i,s){if(typeof i=="string")return un(i);if(X(i))return i;var o=r.policies.identify(i)[0];if(o){var a=un(o);return s&&r.merge(o,i),a}}}return n.prototype.toObject=function(){return x({},this.data)},n.prototype.has=function(e){return this.lookup(e,!0)!==void 0},n.prototype.get=function(e,t){if(this.group.depend(e,t),ke.call(this.data,e)){var r=this.data[e];if(r&&ke.call(r,t))return r[t]}if(t==="__typename"&&ke.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof wt)return this.parent.get(e,t)},n.prototype.lookup=function(e,t){if(t&&this.group.depend(e,"__exists"),ke.call(this.data,e))return this.data[e];if(this instanceof wt)return this.parent.lookup(e,t);if(this.policies.rootTypenamesById[e])return Object.create(null)},n.prototype.merge=function(e,t){var r=this,i;X(e)&&(e=e.__ref),X(t)&&(t=t.__ref);var s=typeof e=="string"?this.lookup(i=e):e,o=typeof t=="string"?this.lookup(i=t):t;if(o){$(typeof i=="string",2);var a=new Nt(op).merge(s,o);if(this.data[i]=a,a!==s&&(delete this.refs[i],this.group.caching)){var c=Object.create(null);s||(c.__exists=1),Object.keys(o).forEach(function(l){if(!s||s[l]!==a[l]){c[l]=1;var u=Mt(l);u!==l&&!r.policies.hasKeyArgs(a.__typename,u)&&(c[u]=1),a[l]===void 0&&!(r instanceof wt)&&delete a[l]}}),c.__typename&&!(s&&s.__typename)&&this.policies.rootTypenamesById[i]===a.__typename&&delete c.__typename,Object.keys(c).forEach(function(l){return r.group.dirty(i,l)})}}},n.prototype.modify=function(e,t){var r=this,i=this.lookup(e);if(i){var s=Object.create(null),o=!1,a=!0,c={DELETE:Cr,INVALIDATE:Wo,isReference:X,toReference:this.toReference,canRead:this.canRead,readField:function(l,u){return r.policies.readField(typeof l=="string"?{fieldName:l,from:u||un(e)}:l,{store:r})}};if(Object.keys(i).forEach(function(l){var u=Mt(l),p=i[l];if(p!==void 0){var d=typeof t=="function"?t:t[l]||t[u];if(d){var y=d===ki?Cr:d($r(p),x(x({},c),{fieldName:u,storeFieldName:l,storage:r.getStorage(e,l)}));if(y===Wo)r.group.dirty(e,l);else if(y===Cr&&(y=void 0),y!==p&&(s[l]=y,o=!0,p=y,globalThis.__DEV__!==!1)){var b=function(O){if(r.lookup(O.__ref)===void 0)return globalThis.__DEV__!==!1&&$.warn(3,O),!0};if(X(y))b(y);else if(Array.isArray(y))for(var E=!1,w=void 0,v=0,k=y;v<k.length;v++){var S=k[v];if(X(S)){if(E=!0,b(S))break}else if(typeof S=="object"&&S){var I=r.policies.identify(S)[0];I&&(w=S)}if(E&&w!==void 0){globalThis.__DEV__!==!1&&$.warn(4,w);break}}}}p!==void 0&&(a=!1)}}),o)return this.merge(e,s),a&&(this instanceof wt?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},n.prototype.delete=function(e,t,r){var i,s=this.lookup(e);if(s){var o=this.getFieldValue(s,"__typename"),a=t&&r?this.policies.getStoreFieldName({typename:o,fieldName:t,args:r}):t;return this.modify(e,a?(i={},i[a]=ki,i):ki)}return!1},n.prototype.evict=function(e,t){var r=!1;return e.id&&(ke.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof wt&&this!==t&&(r=this.parent.evict(e,t)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},n.prototype.clear=function(){this.replace(null)},n.prototype.extract=function(){var e=this,t=this.toObject(),r=[];return this.getRootIdSet().forEach(function(i){ke.call(e.policies.rootTypenamesById,i)||r.push(i)}),r.length&&(t.__META={extraRootIds:r.sort()}),t},n.prototype.replace=function(e){var t=this;if(Object.keys(this.data).forEach(function(s){e&&ke.call(e,s)||t.delete(s)}),e){var r=e.__META,i=st(e,["__META"]);Object.keys(i).forEach(function(s){t.merge(s,i[s])}),r&&r.extraRootIds.forEach(this.retain,this)}},n.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},n.prototype.release=function(e){if(this.rootIds[e]>0){var t=--this.rootIds[e];return t||delete this.rootIds[e],t}return 0},n.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof wt?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},n.prototype.gc=function(){var e=this,t=this.getRootIdSet(),r=this.toObject();t.forEach(function(o){ke.call(r,o)&&(Object.keys(e.findChildRefIds(o)).forEach(t.add,t),delete r[o])});var i=Object.keys(r);if(i.length){for(var s=this;s instanceof wt;)s=s.parent;i.forEach(function(o){return s.delete(o)})}return i},n.prototype.findChildRefIds=function(e){if(!ke.call(this.refs,e)){var t=this.refs[e]=Object.create(null),r=this.data[e];if(!r)return t;var i=new Set([r]);i.forEach(function(s){X(s)&&(t[s.__ref]=!0),ce(s)&&Object.keys(s).forEach(function(o){var a=s[o];ce(a)&&i.add(a)})})}return this.refs[e]},n.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},n}(),oc=function(){function n(e,t){t===void 0&&(t=null),this.caching=e,this.parent=t,this.d=null,this.resetCaching()}return n.prototype.resetCaching=function(){this.d=this.caching?Ru():null,this.keyMaker=new bt(zt)},n.prototype.depend=function(e,t){if(this.d){this.d(xi(e,t));var r=Mt(t);r!==t&&this.d(xi(e,r)),this.parent&&this.parent.depend(e,t)}},n.prototype.dirty=function(e,t){this.d&&this.d.dirty(xi(e,t),t==="__exists"?"forget":"setDirty")},n}();function xi(n,e){return e+"#"+n}function zo(n,e){Hn(n)&&n.group.depend(e,"__exists")}(function(n){var e=function(t){He(r,t);function r(i){var s=i.policies,o=i.resultCaching,a=o===void 0?!0:o,c=i.seed,l=t.call(this,s,new oc(a))||this;return l.stump=new sp(l),l.storageTrie=new bt(zt),c&&l.replace(c),l}return r.prototype.addLayer=function(i,s){return this.stump.addLayer(i,s)},r.prototype.removeLayer=function(){return this},r.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},r}(n);n.Root=e})(ni);var wt=function(n){He(e,n);function e(t,r,i,s){var o=n.call(this,r.policies,s)||this;return o.id=t,o.parent=r,o.replay=i,o.group=s,i(o),o}return e.prototype.addLayer=function(t,r){return new e(t,this,r,this.group)},e.prototype.removeLayer=function(t){var r=this,i=this.parent.removeLayer(t);return t===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(s){var o=r.data[s],a=i.lookup(s);a?o?o!==a&&Object.keys(o).forEach(function(c){oe(o[c],a[c])||r.group.dirty(s,c)}):(r.group.dirty(s,"__exists"),Object.keys(a).forEach(function(c){r.group.dirty(s,c)})):r.delete(s)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return x(x({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(t){var r=this.parent.findChildRefIds(t);return ke.call(this.data,t)?x(x({},r),n.prototype.findChildRefIds.call(this,t)):r},e.prototype.getStorage=function(){for(var t=this.parent;t.parent;)t=t.parent;return t.getStorage.apply(t,arguments)},e}(ni),sp=function(n){He(e,n);function e(t){return n.call(this,"EntityStore.Stump",t,function(){},new oc(t.group.caching,t.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(t,r){return this.parent.merge(t,r)},e}(wt);function op(n,e,t){var r=n[t],i=e[t];return oe(r,i)?r:i}function Hn(n){return!!(n instanceof ni&&n.group.caching)}function ap(n){return ce(n)?de(n)?n.slice(0):x({__proto__:Object.getPrototypeOf(n)},n):n}var Ko=function(){function n(){this.known=new(ps?WeakSet:Set),this.pool=new bt(zt),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return n.prototype.isKnown=function(e){return ce(e)&&this.known.has(e)},n.prototype.pass=function(e){if(ce(e)){var t=ap(e);return this.passes.set(t,e),t}return e},n.prototype.admit=function(e){var t=this;if(ce(e)){var r=this.passes.get(e);if(r)return r;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:{if(this.known.has(e))return e;var s=e.map(this.admit,this),o=this.pool.lookupArray(s);return o.array||(this.known.add(o.array=s),globalThis.__DEV__!==!1&&Object.freeze(s)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var a=Object.getPrototypeOf(e),c=[a],l=this.sortedKeys(e);c.push(l.json);var u=c.length;l.sorted.forEach(function(y){c.push(t.admit(e[y]))});var o=this.pool.lookupArray(c);if(!o.object){var p=o.object=Object.create(a);this.known.add(p),l.sorted.forEach(function(y,b){p[y]=c[u+b]}),globalThis.__DEV__!==!1&&Object.freeze(p)}return o.object}}}return e},n.prototype.sortedKeys=function(e){var t=Object.keys(e),r=this.pool.lookupArray(t);if(!r.keys){t.sort();var i=JSON.stringify(t);(r.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,r.keys={sorted:t,json:i})}return r.keys},n}();function Go(n){return[n.selectionSet,n.objectOrReference,n.context,n.context.canonizeResults]}var up=function(){function n(e){var t=this;this.knownResults=new(zt?WeakMap:Map),this.config=yn(e,{addTypename:e.addTypename!==!1,canonizeResults:rc(e)}),this.canon=e.canon||new Ko,this.executeSelectionSet=nr(function(r){var i,s=r.context.canonizeResults,o=Go(r);o[3]=!s;var a=(i=t.executeSelectionSet).peek.apply(i,o);return a?s?x(x({},a),{result:t.canon.admit(a.result)}):a:(zo(r.context.store,r.enclosingRef.__ref),t.execSelectionSetImpl(r))},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.executeSelectionSet"]||5e4,keyArgs:Go,makeCacheKey:function(r,i,s,o){if(Hn(s.store))return s.store.makeCacheKey(r,X(i)?i.__ref:i,s.varString,o)}}),this.executeSubSelectedArray=nr(function(r){return zo(r.context.store,r.enclosingRef.__ref),t.execSubSelectedArrayImpl(r)},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.executeSubSelectedArray"]||1e4,makeCacheKey:function(r){var i=r.field,s=r.array,o=r.context;if(Hn(o.store))return o.store.makeCacheKey(i,s,o.varString)}})}return n.prototype.resetCanon=function(){this.canon=new Ko},n.prototype.diffQueryAgainstStore=function(e){var t=e.store,r=e.query,i=e.rootId,s=i===void 0?"ROOT_QUERY":i,o=e.variables,a=e.returnPartialData,c=a===void 0?!0:a,l=e.canonizeResults,u=l===void 0?this.config.canonizeResults:l,p=this.config.cache.policies;o=x(x({},ys(vu(r))),o);var d=un(s),y=this.executeSelectionSet({selectionSet:En(r).selectionSet,objectOrReference:d,enclosingRef:d,context:x({store:t,query:r,policies:p,variables:o,varString:Ot(o),canonizeResults:u},sc(r,this.config.fragments))}),b;if(y.missing&&(b=[new ec(cp(y.missing),y.missing,r,o)],!c))throw b[0];return{result:y.result,complete:!b,missing:b}},n.prototype.isFresh=function(e,t,r,i){if(Hn(i.store)&&this.knownResults.get(e)===r){var s=this.executeSelectionSet.peek(r,t,i,this.canon.isKnown(e));if(s&&e===s.result)return!0}return!1},n.prototype.execSelectionSetImpl=function(e){var t=this,r=e.selectionSet,i=e.objectOrReference,s=e.enclosingRef,o=e.context;if(X(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var a=o.variables,c=o.policies,l=o.store,u=l.getFieldValue(i,"__typename"),p=[],d,y=new Nt;this.config.addTypename&&typeof u=="string"&&!c.rootIdsByTypename[u]&&p.push({__typename:u});function b(S,I){var O;return S.missing&&(d=y.merge(d,(O={},O[I]=S.missing,O))),S.result}var E=new Set(r.selections);E.forEach(function(S){var I,O;if(ur(S,a))if(Ct(S)){var C=c.readField({fieldName:S.name.value,field:S,variables:o.variables,from:i},o),M=gt(S);C===void 0?ws.added(S)||(d=y.merge(d,(I={},I[M]="Can't find field '".concat(S.name.value,"' on ").concat(X(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),I))):de(C)?C.length>0&&(C=b(t.executeSubSelectedArray({field:S,array:C,enclosingRef:s,context:o}),M)):S.selectionSet?C!=null&&(C=b(t.executeSelectionSet({selectionSet:S.selectionSet,objectOrReference:C,enclosingRef:X(C)?C:s,context:o}),M)):o.canonizeResults&&(C=t.canon.pass(C)),C!==void 0&&p.push((O={},O[M]=C,O))}else{var F=Jr(S,o.lookupFragment);if(!F&&S.kind===D.FRAGMENT_SPREAD)throw Fe(10,S.name.value);F&&c.fragmentMatches(F,u)&&F.selectionSet.selections.forEach(E.add,E)}});var w=ei(p),v={result:w,missing:d},k=o.canonizeResults?this.canon.admit(v):$r(v);return k.result&&this.knownResults.set(k.result,r),k},n.prototype.execSubSelectedArrayImpl=function(e){var t=this,r=e.field,i=e.array,s=e.enclosingRef,o=e.context,a,c=new Nt;function l(u,p){var d;return u.missing&&(a=c.merge(a,(d={},d[p]=u.missing,d))),u.result}return r.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map(function(u,p){return u===null?null:de(u)?l(t.executeSubSelectedArray({field:r,array:u,enclosingRef:s,context:o}),p):r.selectionSet?l(t.executeSelectionSet({selectionSet:r.selectionSet,objectOrReference:u,enclosingRef:X(u)?u:s,context:o}),p):(globalThis.__DEV__!==!1&&lp(o.store,r,u),u)}),{result:o.canonizeResults?this.canon.admit(i):i,missing:a}},n}();function cp(n){try{JSON.stringify(n,function(e,t){if(typeof t=="string")throw t;return t})}catch(e){return e}}function lp(n,e,t){if(!e.selectionSet){var r=new Set([t]);r.forEach(function(i){ce(i)&&($(!X(i),11,rp(n,i),e.name.value),Object.values(i).forEach(r.add,r))})}}var Ts=new ms,Jo=new WeakMap;function Wn(n){var e=Jo.get(n);return e||Jo.set(n,e={vars:new Set,dep:Ru()}),e}function Yo(n){Wn(n).vars.forEach(function(e){return e.forgetCache(n)})}function fp(n){Wn(n).vars.forEach(function(e){return e.attachCache(n)})}function hp(n){var e=new Set,t=new Set,r=function(s){if(arguments.length>0){if(n!==s){n=s,e.forEach(function(c){Wn(c).dep.dirty(r),dp(c)});var o=Array.from(t);t.clear(),o.forEach(function(c){return c(n)})}}else{var a=Ts.getValue();a&&(i(a),Wn(a).dep(r))}return n};r.onNextChange=function(s){return t.add(s),function(){t.delete(s)}};var i=r.attachCache=function(s){return e.add(s),Wn(s).vars.add(r),r};return r.forgetCache=function(s){return e.delete(s)},r}function dp(n){n.broadcastWatches&&n.broadcastWatches()}var Xo=Object.create(null);function Is(n){var e=JSON.stringify(n);return Xo[e]||(Xo[e]=Object.create(null))}function Zo(n){var e=Is(n);return e.keyFieldsFn||(e.keyFieldsFn=function(t,r){var i=function(o,a){return r.readField(a,o)},s=r.keyObject=As(n,function(o){var a=ln(r.storeObject,o,i);return a===void 0&&t!==r.storeObject&&ke.call(t,o[0])&&(a=ln(t,o,uc)),$(a!==void 0,5,o.join("."),t),a});return"".concat(r.typename,":").concat(JSON.stringify(s))})}function ea(n){var e=Is(n);return e.keyArgsFn||(e.keyArgsFn=function(t,r){var i=r.field,s=r.variables,o=r.fieldName,a=As(n,function(l){var u=l[0],p=u.charAt(0);if(p==="@"){if(i&&ot(i.directives)){var d=u.slice(1),y=i.directives.find(function(v){return v.name.value===d}),b=y&&Yr(y,s);return b&&ln(b,l.slice(1))}return}if(p==="$"){var E=u.slice(1);if(s&&ke.call(s,E)){var w=l.slice(0);return w[0]=E,ln(s,w)}return}if(t)return ln(t,l)}),c=JSON.stringify(a);return(t||c!=="{}")&&(o+=":"+c),o})}function As(n,e){var t=new Nt;return ac(n).reduce(function(r,i){var s,o=e(i);if(o!==void 0){for(var a=i.length-1;a>=0;--a)o=(s={},s[i[a]]=o,s);r=t.merge(r,o)}return r},Object.create(null))}function ac(n){var e=Is(n);if(!e.paths){var t=e.paths=[],r=[];n.forEach(function(i,s){de(i)?(ac(i).forEach(function(o){return t.push(r.concat(o))}),r.length=0):(r.push(i),de(n[s+1])||(t.push(r.slice(0)),r.length=0))})}return e.paths}function uc(n,e){return n[e]}function ln(n,e,t){return t=t||uc,cc(e.reduce(function r(i,s){return de(i)?i.map(function(o){return r(o,s)}):i&&t(i,s)},n))}function cc(n){return ce(n)?de(n)?n.map(cc):As(Object.keys(n).sort(),function(e){return ln(n,e)}):n}function ts(n){return n.args!==void 0?n.args:n.field?Yr(n.field,n.variables):null}var pp=function(){},ta=function(n,e){return e.fieldName},na=function(n,e,t){var r=t.mergeObjects;return r(n,e)},ra=function(n,e){return e},yp=function(){function n(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=x({dataIdFromObject:tc},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return n.prototype.identify=function(e,t){var r,i=this,s=t&&(t.typename||((r=t.storeObject)===null||r===void 0?void 0:r.__typename))||e.__typename;if(s===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];var o=t&&t.storeObject||e,a=x(x({},t),{typename:s,storeObject:o,readField:t&&t.readField||function(){var p=Os(arguments,o);return i.readField(p,{store:i.cache.data,variables:p.variables})}}),c,l=s&&this.getTypePolicy(s),u=l&&l.keyFn||this.config.dataIdFromObject;return xs.withValue(!0,function(){for(;u;){var p=u(x(x({},e),o),a);if(de(p))u=Zo(p);else{c=p;break}}}),c=c?String(c):void 0,a.keyObject?[c,a.keyObject]:[c]},n.prototype.addTypePolicies=function(e){var t=this;Object.keys(e).forEach(function(r){var i=e[r],s=i.queryType,o=i.mutationType,a=i.subscriptionType,c=st(i,["queryType","mutationType","subscriptionType"]);s&&t.setRootTypename("Query",r),o&&t.setRootTypename("Mutation",r),a&&t.setRootTypename("Subscription",r),ke.call(t.toBeAdded,r)?t.toBeAdded[r].push(c):t.toBeAdded[r]=[c]})},n.prototype.updateTypePolicy=function(e,t){var r=this,i=this.getTypePolicy(e),s=t.keyFields,o=t.fields;function a(c,l){c.merge=typeof l=="function"?l:l===!0?na:l===!1?ra:c.merge}a(i,t.merge),i.keyFn=s===!1?pp:de(s)?Zo(s):typeof s=="function"?s:i.keyFn,o&&Object.keys(o).forEach(function(c){var l=r.getFieldPolicy(e,c,!0),u=o[c];if(typeof u=="function")l.read=u;else{var p=u.keyArgs,d=u.read,y=u.merge;l.keyFn=p===!1?ta:de(p)?ea(p):typeof p=="function"?p:l.keyFn,typeof d=="function"&&(l.read=d),a(l,y)}l.read&&l.merge&&(l.keyFn=l.keyFn||ta)})},n.prototype.setRootTypename=function(e,t){t===void 0&&(t=e);var r="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[r];t!==i&&($(!i||i===e,6,e),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[t]=r,this.rootTypenamesById[r]=t)},n.prototype.addPossibleTypes=function(e){var t=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(r){t.getSupertypeSet(r,!0),e[r].forEach(function(i){t.getSupertypeSet(i,!0).add(r);var s=i.match(ic);(!s||s[0]!==i)&&t.fuzzySubtypes.set(i,new RegExp(i))})})},n.prototype.getTypePolicy=function(e){var t=this;if(!ke.call(this.typePolicies,e)){var r=this.typePolicies[e]=Object.create(null);r.fields=Object.create(null);var i=this.supertypeMap.get(e);!i&&this.fuzzySubtypes.size&&(i=this.getSupertypeSet(e,!0),this.fuzzySubtypes.forEach(function(o,a){if(o.test(e)){var c=t.supertypeMap.get(a);c&&c.forEach(function(l){return i.add(l)})}})),i&&i.size&&i.forEach(function(o){var a=t.getTypePolicy(o),c=a.fields,l=st(a,["fields"]);Object.assign(r,l),Object.assign(r.fields,c)})}var s=this.toBeAdded[e];return s&&s.length&&s.splice(0).forEach(function(o){t.updateTypePolicy(e,o)}),this.typePolicies[e]},n.prototype.getFieldPolicy=function(e,t,r){if(e){var i=this.getTypePolicy(e).fields;return i[t]||r&&(i[t]=Object.create(null))}},n.prototype.getSupertypeSet=function(e,t){var r=this.supertypeMap.get(e);return!r&&t&&this.supertypeMap.set(e,r=new Set),r},n.prototype.fragmentMatches=function(e,t,r,i){var s=this;if(!e.typeCondition)return!0;if(!t)return!1;var o=e.typeCondition.name.value;if(t===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var a=this.getSupertypeSet(t,!0),c=[a],l=function(b){var E=s.getSupertypeSet(b,!1);E&&E.size&&c.indexOf(E)<0&&c.push(E)},u=!!(r&&this.fuzzySubtypes.size),p=!1,d=0;d<c.length;++d){var y=c[d];if(y.has(o))return a.has(o)||(p&&globalThis.__DEV__!==!1&&$.warn(7,t,o),a.add(o)),!0;y.forEach(l),u&&d===c.length-1&&es(e.selectionSet,r,i)&&(u=!1,p=!0,this.fuzzySubtypes.forEach(function(b,E){var w=t.match(b);w&&w[0]===t&&l(E)}))}return!1},n.prototype.hasKeyArgs=function(e,t){var r=this.getFieldPolicy(e,t,!1);return!!(r&&r.keyFn)},n.prototype.getStoreFieldName=function(e){var t=e.typename,r=e.fieldName,i=this.getFieldPolicy(t,r,!1),s,o=i&&i.keyFn;if(o&&t)for(var a={typename:t,fieldName:r,field:e.field||null,variables:e.variables},c=ts(e);o;){var l=o(c,a);if(de(l))o=ea(l);else{s=l||r;break}}return s===void 0&&(s=e.field?Fh(e.field,e.variables):bu(r,ts(e))),s===!1?r:r===Mt(s)?s:r+":"+s},n.prototype.readField=function(e,t){var r=e.from;if(r){var i=e.field||e.fieldName;if(i){if(e.typename===void 0){var s=t.store.getFieldValue(r,"__typename");s&&(e.typename=s)}var o=this.getStoreFieldName(e),a=Mt(o),c=t.store.getFieldValue(r,o),l=this.getFieldPolicy(e.typename,a,!1),u=l&&l.read;if(u){var p=ia(this,r,e,t,t.store.getStorage(X(r)?r.__ref:r,o));return Ts.withValue(this.cache,u,[c,p])}return c}}},n.prototype.getReadFunction=function(e,t){var r=this.getFieldPolicy(e,t,!1);return r&&r.read},n.prototype.getMergeFunction=function(e,t,r){var i=this.getFieldPolicy(e,t,!1),s=i&&i.merge;return!s&&r&&(i=this.getTypePolicy(r),s=i&&i.merge),s},n.prototype.runMergeFunction=function(e,t,r,i,s){var o=r.field,a=r.typename,c=r.merge;return c===na?lc(i.store)(e,t):c===ra?t:(i.overwrite&&(e=void 0),c(e,t,ia(this,void 0,{typename:a,fieldName:o.name.value,field:o,variables:i.variables},i,s||Object.create(null))))},n}();function ia(n,e,t,r,i){var s=n.getStoreFieldName(t),o=Mt(s),a=t.variables||r.variables,c=r.store,l=c.toReference,u=c.canRead;return{args:ts(t),field:t.field||null,fieldName:o,storeFieldName:s,variables:a,isReference:X,toReference:l,storage:i,cache:n.cache,canRead:u,readField:function(){return n.readField(Os(arguments,e,a),r)},mergeObjects:lc(r.store)}}function Os(n,e,t){var r=n[0],i=n[1],s=n.length,o;return typeof r=="string"?o={fieldName:r,from:s>1?i:e}:(o=x({},r),ke.call(o,"from")||(o.from=e)),globalThis.__DEV__!==!1&&o.from===void 0&&globalThis.__DEV__!==!1&&$.warn(8,Xa(Array.from(n))),o.variables===void 0&&(o.variables=t),o}function lc(n){return function(t,r){if(de(t)||de(r))throw Fe(9);if(ce(t)&&ce(r)){var i=n.getFieldValue(t,"__typename"),s=n.getFieldValue(r,"__typename"),o=i&&s&&i!==s;if(o)return r;if(X(t)&&sn(r))return n.merge(t.__ref,r),t;if(sn(t)&&X(r))return n.merge(t,r.__ref),r;if(sn(t)&&sn(r))return x(x({},t),r)}return r}}function Ti(n,e,t){var r="".concat(e).concat(t),i=n.flavors.get(r);return i||n.flavors.set(r,i=n.clientOnly===e&&n.deferred===t?n:x(x({},n),{clientOnly:e,deferred:t})),i}var mp=function(){function n(e,t,r){this.cache=e,this.reader=t,this.fragments=r}return n.prototype.writeToStore=function(e,t){var r=this,i=t.query,s=t.result,o=t.dataId,a=t.variables,c=t.overwrite,l=Ht(i),u=ip();a=x(x({},ys(l)),a);var p=x(x({store:e,written:Object.create(null),merge:function(y,b){return u.merge(y,b)},variables:a,varString:Ot(a)},sc(i,this.fragments)),{overwrite:!!c,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),d=this.processSelectionSet({result:s||Object.create(null),dataId:o,selectionSet:l.selectionSet,mergeTree:{map:new Map},context:p});if(!X(d))throw Fe(12,s);return p.incomingById.forEach(function(y,b){var E=y.storeObject,w=y.mergeTree,v=y.fieldNodeSet,k=un(b);if(w&&w.map.size){var S=r.applyMerges(w,k,E,p);if(X(S))return;E=S}if(globalThis.__DEV__!==!1&&!p.overwrite){var I=Object.create(null);v.forEach(function(M){M.selectionSet&&(I[M.name.value]=!0)});var O=function(M){return I[Mt(M)]===!0},C=function(M){var F=w&&w.map.get(M);return!!(F&&F.info&&F.info.merge)};Object.keys(E).forEach(function(M){O(M)&&!C(M)&&gp(k,E,M,p.store)})}e.merge(b,E)}),e.retain(d.__ref),d},n.prototype.processSelectionSet=function(e){var t=this,r=e.dataId,i=e.result,s=e.selectionSet,o=e.context,a=e.mergeTree,c=this.cache.policies,l=Object.create(null),u=r&&c.rootTypenamesById[r]||Hi(i,s,o.fragmentMap)||r&&o.store.get(r,"__typename");typeof u=="string"&&(l.__typename=u);var p=function(){var S=Os(arguments,l,o.variables);if(X(S.from)){var I=o.incomingById.get(S.from.__ref);if(I){var O=c.readField(x(x({},S),{from:I.storeObject}),o);if(O!==void 0)return O}}return c.readField(S,o)},d=new Set;this.flattenFields(s,i,o,u).forEach(function(S,I){var O,C=gt(I),M=i[C];if(d.add(I),M!==void 0){var F=c.getStoreFieldName({typename:u,fieldName:I.name.value,field:I,variables:S.variables}),L=sa(a,F),V=t.processFieldValue(M,I,I.selectionSet?Ti(S,!1,!1):S,L),G=void 0;I.selectionSet&&(X(V)||sn(V))&&(G=p("__typename",V));var Ee=c.getMergeFunction(u,I.name.value,G);Ee?L.info={field:I,typename:u,merge:Ee}:oa(a,F),l=S.merge(l,(O={},O[F]=V,O))}else globalThis.__DEV__!==!1&&!S.clientOnly&&!S.deferred&&!ws.added(I)&&!c.getReadFunction(u,I.name.value)&&globalThis.__DEV__!==!1&&$.error(13,gt(I),i)});try{var y=c.identify(i,{typename:u,selectionSet:s,fragmentMap:o.fragmentMap,storeObject:l,readField:p}),b=y[0],E=y[1];r=r||b,E&&(l=o.merge(l,E))}catch(S){if(!r)throw S}if(typeof r=="string"){var w=un(r),v=o.written[r]||(o.written[r]=[]);if(v.indexOf(s)>=0||(v.push(s),this.reader&&this.reader.isFresh(i,w,s,o)))return w;var k=o.incomingById.get(r);return k?(k.storeObject=o.merge(k.storeObject,l),k.mergeTree=ns(k.mergeTree,a),d.forEach(function(S){return k.fieldNodeSet.add(S)})):o.incomingById.set(r,{storeObject:l,mergeTree:Lr(a)?void 0:a,fieldNodeSet:d}),w}return l},n.prototype.processFieldValue=function(e,t,r,i){var s=this;return!t.selectionSet||e===null?globalThis.__DEV__!==!1?Lu(e):e:de(e)?e.map(function(o,a){var c=s.processFieldValue(o,t,r,sa(i,a));return oa(i,a),c}):this.processSelectionSet({result:e,selectionSet:t.selectionSet,context:r,mergeTree:i})},n.prototype.flattenFields=function(e,t,r,i){i===void 0&&(i=Hi(t,e,r.fragmentMap));var s=new Map,o=this.cache.policies,a=new bt(!1);return function c(l,u){var p=a.lookup(l,u.clientOnly,u.deferred);p.visited||(p.visited=!0,l.selections.forEach(function(d){if(ur(d,r.variables)){var y=u.clientOnly,b=u.deferred;if(!(y&&b)&&ot(d.directives)&&d.directives.forEach(function(v){var k=v.name.value;if(k==="client"&&(y=!0),k==="defer"){var S=Yr(v,r.variables);(!S||S.if!==!1)&&(b=!0)}}),Ct(d)){var E=s.get(d);E&&(y=y&&E.clientOnly,b=b&&E.deferred),s.set(d,Ti(r,y,b))}else{var w=Jr(d,r.lookupFragment);if(!w&&d.kind===D.FRAGMENT_SPREAD)throw Fe(14,d.name.value);w&&o.fragmentMatches(w,i,t,r.variables)&&c(w.selectionSet,Ti(r,y,b))}}}))}(e,r),s},n.prototype.applyMerges=function(e,t,r,i,s){var o,a=this;if(e.map.size&&!X(r)){var c=!de(r)&&(X(t)||sn(t))?t:void 0,l=r;c&&!s&&(s=[X(c)?c.__ref:c]);var u,p=function(d,y){return de(d)?typeof y=="number"?d[y]:void 0:i.store.getFieldValue(d,String(y))};e.map.forEach(function(d,y){var b=p(c,y),E=p(l,y);if(E!==void 0){s&&s.push(y);var w=a.applyMerges(d,b,E,i,s);w!==E&&(u=u||new Map,u.set(y,w)),s&&$(s.pop()===y)}}),u&&(r=de(l)?l.slice(0):x({},l),u.forEach(function(d,y){r[y]=d}))}return e.info?this.cache.policies.runMergeFunction(t,r,e.info,i,s&&(o=i.store).getStorage.apply(o,s)):r},n}(),fc=[];function sa(n,e){var t=n.map;return t.has(e)||t.set(e,fc.pop()||{map:new Map}),t.get(e)}function ns(n,e){if(n===e||!e||Lr(e))return n;if(!n||Lr(n))return e;var t=n.info&&e.info?x(x({},n.info),e.info):n.info||e.info,r=n.map.size&&e.map.size,i=r?new Map:n.map.size?n.map:e.map,s={info:t,map:i};if(r){var o=new Set(e.map.keys());n.map.forEach(function(a,c){s.map.set(c,ns(a,e.map.get(c))),o.delete(c)}),o.forEach(function(a){s.map.set(a,ns(e.map.get(a),n.map.get(a)))})}return s}function Lr(n){return!n||!(n.info||n.map.size)}function oa(n,e){var t=n.map,r=t.get(e);r&&Lr(r)&&(fc.push(r),t.delete(e))}var aa=new Set;function gp(n,e,t,r){var i=function(p){var d=r.getFieldValue(p,t);return typeof d=="object"&&d},s=i(n);if(s){var o=i(e);if(o&&!X(s)&&!oe(s,o)&&!Object.keys(s).every(function(p){return r.getFieldValue(o,p)!==void 0})){var a=r.getFieldValue(n,"__typename")||r.getFieldValue(e,"__typename"),c=Mt(t),l="".concat(a,".").concat(c);if(!aa.has(l)){aa.add(l);var u=[];!de(s)&&!de(o)&&[s,o].forEach(function(p){var d=r.getFieldValue(p,"__typename");typeof d=="string"&&!u.includes(d)&&u.push(d)}),globalThis.__DEV__!==!1&&$.warn(15,c,a,u.length?"either ensure all objects of type "+u.join(" and ")+" have an ID or a custom merge function, or ":"",l,x({},s),x({},o))}}}}var hc=function(n){He(e,n);function e(t){t===void 0&&(t={});var r=n.call(this)||this;return r.watches=new Set,r.addTypenameTransform=new Nu(ws),r.assumeImmutableResults=!0,r.makeVar=hp,r.txCount=0,r.config=np(t),r.addTypename=!!r.config.addTypename,r.policies=new yp({cache:r,dataIdFromObject:r.config.dataIdFromObject,possibleTypes:r.config.possibleTypes,typePolicies:r.config.typePolicies}),r.init(),r}return e.prototype.init=function(){var t=this.data=new ni.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=t.stump,this.resetResultCache()},e.prototype.resetResultCache=function(t){var r=this,i=this.storeReader,s=this.config.fragments;this.storeWriter=new mp(this,this.storeReader=new up({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:rc(this.config),canon:t?void 0:i&&i.canon,fragments:s}),s),this.maybeBroadcastWatch=nr(function(o,a){return r.broadcastWatch(o,a)},{max:this.config.resultCacheMaxSize||mt["inMemoryCache.maybeBroadcastWatch"]||5e3,makeCacheKey:function(o){var a=o.optimistic?r.optimisticData:r.data;if(Hn(a)){var c=o.optimistic,l=o.id,u=o.variables;return a.makeCacheKey(o.query,o.callback,Ot({optimistic:c,id:l,variables:u}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(t){return this.init(),t&&this.data.replace(t),this},e.prototype.extract=function(t){return t===void 0&&(t=!1),(t?this.optimisticData:this.data).extract()},e.prototype.read=function(t){var r=t.returnPartialData,i=r===void 0?!1:r;try{return this.storeReader.diffQueryAgainstStore(x(x({},t),{store:t.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(s){if(s instanceof ec)return null;throw s}},e.prototype.write=function(t){try{return++this.txCount,this.storeWriter.writeToStore(this.data,t)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(t){if(ke.call(t,"id")&&!t.id)return!1;var r=t.optimistic?this.optimisticData:this.data;try{return++this.txCount,r.modify(t.id||"ROOT_QUERY",t.fields)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(t){return this.storeReader.diffQueryAgainstStore(x(x({},t),{store:t.optimistic?this.optimisticData:this.data,rootId:t.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(t){var r=this;return this.watches.size||fp(this),this.watches.add(t),t.immediate&&this.maybeBroadcastWatch(t),function(){r.watches.delete(t)&&!r.watches.size&&Yo(r),r.maybeBroadcastWatch.forget(t)}},e.prototype.gc=function(t){var r;Ot.reset(),At.reset(),this.addTypenameTransform.resetCache(),(r=this.config.fragments)===null||r===void 0||r.resetCaches();var i=this.optimisticData.gc();return t&&!this.txCount&&(t.resetResultCache?this.resetResultCache(t.resetResultIdentities):t.resetResultIdentities&&this.storeReader.resetCanon()),i},e.prototype.retain=function(t,r){return(r?this.optimisticData:this.data).retain(t)},e.prototype.release=function(t,r){return(r?this.optimisticData:this.data).release(t)},e.prototype.identify=function(t){if(X(t))return t.__ref;try{return this.policies.identify(t)[0]}catch(r){globalThis.__DEV__!==!1&&$.warn(r)}},e.prototype.evict=function(t){if(!t.id){if(ke.call(t,"id"))return!1;t=x(x({},t),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(t,this.data)}finally{!--this.txCount&&t.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(t){var r=this;return this.init(),Ot.reset(),t&&t.discardWatches?(this.watches.forEach(function(i){return r.maybeBroadcastWatch.forget(i)}),this.watches.clear(),Yo(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(t){var r=this.optimisticData.removeLayer(t);r!==this.optimisticData&&(this.optimisticData=r,this.broadcastWatches())},e.prototype.batch=function(t){var r=this,i=t.update,s=t.optimistic,o=s===void 0?!0:s,a=t.removeOptimistic,c=t.onWatchUpdated,l,u=function(d){var y=r,b=y.data,E=y.optimisticData;++r.txCount,d&&(r.data=r.optimisticData=d);try{return l=i(r)}finally{--r.txCount,r.data=b,r.optimisticData=E}},p=new Set;return c&&!this.txCount&&this.broadcastWatches(x(x({},t),{onWatchUpdated:function(d){return p.add(d),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,u):o===!1?u(this.data):u(),typeof a=="string"&&(this.optimisticData=this.optimisticData.removeLayer(a)),c&&p.size?(this.broadcastWatches(x(x({},t),{onWatchUpdated:function(d,y){var b=c.call(this,d,y);return b!==!1&&p.delete(d),b}})),p.size&&p.forEach(function(d){return r.maybeBroadcastWatch.dirty(d)})):this.broadcastWatches(t),l},e.prototype.performTransaction=function(t,r){return this.batch({update:t,optimistic:r||r!==null})},e.prototype.transformDocument=function(t){return this.addTypenameToDocument(this.addFragmentsToDocument(t))},e.prototype.fragmentMatches=function(t,r){return this.policies.fragmentMatches(t,r)},e.prototype.lookupFragment=function(t){var r;return((r=this.config.fragments)===null||r===void 0?void 0:r.lookup(t))||null},e.prototype.broadcastWatches=function(t){var r=this;this.txCount||this.watches.forEach(function(i){return r.maybeBroadcastWatch(i,t)})},e.prototype.addFragmentsToDocument=function(t){var r=this.config.fragments;return r?r.transform(t):t},e.prototype.addTypenameToDocument=function(t){return this.addTypename?this.addTypenameTransform.transformDocument(t):t},e.prototype.broadcastWatch=function(t,r){var i=t.lastDiff,s=this.diff(t);r&&(t.optimistic&&typeof r.optimistic=="string"&&(s.fromOptimisticTransaction=!0),r.onWatchUpdated&&r.onWatchUpdated.call(this,t,s,i)===!1)||(!i||!oe(i.result,s.result))&&t.callback(t.lastDiff=s,i)},e}(Zu);globalThis.__DEV__!==!1&&(hc.prototype.getMemoryInternals=gh);var te;(function(n){n[n.loading=1]="loading",n[n.setVariables=2]="setVariables",n[n.fetchMore=3]="fetchMore",n[n.refetch=4]="refetch",n[n.poll=6]="poll",n[n.ready=7]="ready",n[n.error=8]="error"})(te||(te={}));function rr(n){return n?n<7:!1}var ua=Object.assign,bp=Object.hasOwnProperty,rs=function(n){He(e,n);function e(t){var r=t.queryManager,i=t.queryInfo,s=t.options,o=n.call(this,function(w){try{var v=w._subscription._observer;v&&!v.error&&(v.error=vp)}catch{}var k=!o.observers.size;o.observers.add(w);var S=o.last;return S&&S.error?w.error&&w.error(S.error):S&&S.result&&w.next&&w.next(o.maskResult(S.result)),k&&o.reobserve().catch(function(){}),function(){o.observers.delete(w)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=i,o.queryManager=r,o.waitForOwnResult=Ii(s.fetchPolicy),o.isTornDown=!1,o.subscribeToMore=o.subscribeToMore.bind(o),o.maskResult=o.maskResult.bind(o);var a=r.defaultOptions.watchQuery,c=a===void 0?{}:a,l=c.fetchPolicy,u=l===void 0?"cache-first":l,p=s.fetchPolicy,d=p===void 0?u:p,y=s.initialFetchPolicy,b=y===void 0?d==="standby"?u:d:y;o.options=x(x({},s),{initialFetchPolicy:b,fetchPolicy:d}),o.queryId=i.queryId||r.generateQueryId();var E=Ht(o.query);return o.queryName=E&&E.name&&E.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.lastQuery||this.options.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var t=this;return new Promise(function(r,i){var s={next:function(a){r(a),t.observers.delete(s),t.observers.size||t.queryManager.removeQuery(t.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=t.subscribe(s)})},e.prototype.resetDiff=function(){this.queryInfo.resetDiff()},e.prototype.getCurrentFullResult=function(t){t===void 0&&(t=!0);var r=this.getLastResult(!0),i=this.queryInfo.networkStatus||r&&r.networkStatus||te.ready,s=x(x({},r),{loading:rr(i),networkStatus:i}),o=this.options.fetchPolicy,a=o===void 0?"cache-first":o;if(!(Ii(a)||this.queryManager.getDocumentInfo(this.query).hasForcedResolvers))if(this.waitForOwnResult)this.queryInfo.updateWatch();else{var c=this.queryInfo.getDiff();(c.complete||this.options.returnPartialData)&&(s.data=c.result),oe(s.data,{})&&(s.data=void 0),c.complete?(delete s.partial,c.complete&&s.networkStatus===te.loading&&(a==="cache-first"||a==="cache-only")&&(s.networkStatus=te.ready,s.loading=!1)):s.partial=!0,globalThis.__DEV__!==!1&&!c.complete&&!this.options.partialRefetch&&!s.loading&&!s.data&&!s.error&&pc(c.missing)}return t&&this.updateLastResult(s),s},e.prototype.getCurrentResult=function(t){return t===void 0&&(t=!0),this.maskResult(this.getCurrentFullResult(t))},e.prototype.isDifferentFromLastResult=function(t,r){if(!this.last)return!0;var i=this.queryManager.getDocumentInfo(this.query),s=this.queryManager.dataMasking,o=s?i.nonReactiveQuery:this.query,a=s||i.hasNonreactiveDirective?!zu(o,this.last.result,t,this.variables):!oe(this.last.result,t);return a||r&&!oe(this.last.variables,r)},e.prototype.getLast=function(t,r){var i=this.last;if(i&&i[t]&&(!r||oe(i.variables,this.variables)))return i[t]},e.prototype.getLastResult=function(t){return this.getLast("result",t)},e.prototype.getLastError=function(t){return this.getLast("error",t)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(t){var r,i={pollInterval:0},s=this.options.fetchPolicy;if(s==="cache-and-network"?i.fetchPolicy=s:s==="no-cache"?i.fetchPolicy="no-cache":i.fetchPolicy="network-only",globalThis.__DEV__!==!1&&t&&bp.call(t,"variables")){var o=vu(this.query),a=o.variableDefinitions;(!a||!a.some(function(c){return c.variable.name.value==="variables"}))&&globalThis.__DEV__!==!1&&$.warn(21,t,((r=o.name)===null||r===void 0?void 0:r.value)||o)}return t&&!oe(this.options.variables,t)&&(i.variables=this.options.variables=x(x({},this.options.variables),t)),this.queryInfo.resetLastWrite(),this.reobserve(i,te.refetch)},e.prototype.fetchMore=function(t){var r=this,i=x(x({},t.query?t:x(x(x(x({},this.options),{query:this.options.query}),t),{variables:x(x({},this.options.variables),t.variables)})),{fetchPolicy:"no-cache"});i.query=this.transformDocument(i.query);var s=this.queryManager.generateQueryId();this.lastQuery=t.query?this.transformDocument(this.options.query):i.query;var o=this.queryInfo,a=o.networkStatus;o.networkStatus=te.fetchMore,i.notifyOnNetworkStatusChange&&this.observe();var c=new Set,l=t?.updateQuery,u=this.options.fetchPolicy!=="no-cache";return u||$(l,22),this.queryManager.fetchQuery(s,i,te.fetchMore).then(function(p){if(r.queryManager.removeQuery(s),o.networkStatus===te.fetchMore&&(o.networkStatus=a),u)r.queryManager.cache.batch({update:function(b){var E=t.updateQuery;E?b.updateQuery({query:r.query,variables:r.variables,returnPartialData:!0,optimistic:!1},function(w){return E(w,{fetchMoreResult:p.data,variables:i.variables})}):b.writeQuery({query:i.query,variables:i.variables,data:p.data})},onWatchUpdated:function(b){c.add(b.query)}});else{var d=r.getLast("result"),y=l(d.data,{fetchMoreResult:p.data,variables:i.variables});r.reportResult(x(x({},d),{data:y}),r.variables)}return r.maskResult(p)}).finally(function(){u&&!c.has(r.query)&&dc(r)})},e.prototype.subscribeToMore=function(t){var r=this,i=this.queryManager.startGraphQLSubscription({query:t.document,variables:t.variables,context:t.context}).subscribe({next:function(s){var o=t.updateQuery;o&&r.updateQuery(function(a,c){var l=c.variables;return o(a,{subscriptionData:s,variables:l})})},error:function(s){if(t.onError){t.onError(s);return}globalThis.__DEV__!==!1&&$.error(23,s)}});return this.subscriptions.add(i),function(){r.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(t){return this.reobserve(t)},e.prototype.silentSetOptions=function(t){var r=yn(this.options,t||{});ua(this.options,r)},e.prototype.setVariables=function(t){return oe(this.variables,t)?this.observers.size?this.result():Promise.resolve():(this.options.variables=t,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:t},te.setVariables):Promise.resolve())},e.prototype.updateQuery=function(t){var r=this.queryManager,i=r.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,s=t(i,{variables:this.variables});s&&(r.cache.writeQuery({query:this.options.query,data:s,variables:this.variables}),r.broadcastQueries())},e.prototype.startPolling=function(t){this.options.pollInterval=t,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(t,r){if(r.nextFetchPolicy){var i=r.fetchPolicy,s=i===void 0?"cache-first":i,o=r.initialFetchPolicy,a=o===void 0?s:o;s==="standby"||(typeof r.nextFetchPolicy=="function"?r.fetchPolicy=r.nextFetchPolicy(s,{reason:t,options:r,observable:this,initialFetchPolicy:a}):t==="variables-changed"?r.fetchPolicy=a:r.fetchPolicy=r.nextFetchPolicy)}return r.fetchPolicy},e.prototype.fetch=function(t,r,i){return this.queryManager.setObservableQuery(this),this.queryManager.fetchConcastWithInfo(this.queryId,t,r,i)},e.prototype.updatePolling=function(){var t=this;if(!this.queryManager.ssrMode){var r=this,i=r.pollingInfo,s=r.options.pollInterval;if(!s||!this.hasObservers()){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===s)){$(s,24);var o=i||(this.pollingInfo={});o.interval=s;var a=function(){var l,u;t.pollingInfo&&(!rr(t.queryInfo.networkStatus)&&!(!((u=(l=t.options).skipPollAttempt)===null||u===void 0)&&u.call(l))?t.reobserve({fetchPolicy:t.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},te.poll).then(c,c):c())},c=function(){var l=t.pollingInfo;l&&(clearTimeout(l.timeout),l.timeout=setTimeout(a,l.interval))};c()}}},e.prototype.updateLastResult=function(t,r){r===void 0&&(r=this.variables);var i=this.getLastError();return i&&this.last&&!oe(r,this.last.variables)&&(i=void 0),this.last=x({result:this.queryManager.assumeImmutableResults?t:Lu(t),variables:r},i?{error:i}:null)},e.prototype.reobserveAsConcast=function(t,r){var i=this;this.isTornDown=!1;var s=r===te.refetch||r===te.fetchMore||r===te.poll,o=this.options.variables,a=this.options.fetchPolicy,c=yn(this.options,t||{}),l=s?c:ua(this.options,c),u=this.transformDocument(l.query);this.lastQuery=u,s||(this.updatePolling(),t&&t.variables&&!oe(t.variables,o)&&l.fetchPolicy!=="standby"&&(l.fetchPolicy===a||typeof l.nextFetchPolicy=="function")&&(this.applyNextFetchPolicy("variables-changed",l),r===void 0&&(r=te.setVariables))),this.waitForOwnResult&&(this.waitForOwnResult=Ii(l.fetchPolicy));var p=function(){i.concast===b&&(i.waitForOwnResult=!1)},d=l.variables&&x({},l.variables),y=this.fetch(l,r,u),b=y.concast,E=y.fromLink,w={next:function(v){oe(i.variables,d)&&(p(),i.reportResult(v,d))},error:function(v){oe(i.variables,d)&&(Qu(v)||(v=new xt({networkError:v})),p(),i.reportError(v,d))}};return!s&&(E||!this.concast)&&(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=b,this.observer=w),b.addObserver(w),b},e.prototype.reobserve=function(t,r){return ld(this.reobserveAsConcast(t,r).promise.then(this.maskResult))},e.prototype.resubscribeAfterError=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i=this.last;this.resetLastResults();var s=this.subscribe.apply(this,t);return this.last=i,s},e.prototype.observe=function(){this.reportResult(this.getCurrentFullResult(!1),this.variables)},e.prototype.reportResult=function(t,r){var i=this.getLastError(),s=this.isDifferentFromLastResult(t,r);(i||!t.partial||this.options.returnPartialData)&&this.updateLastResult(t,r),(i||s)&&Qn(this.observers,"next",this.maskResult(t))},e.prototype.reportError=function(t,r){var i=x(x({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:te.error,loading:!1});this.updateLastResult(i,r),Qn(this.observers,"error",this.last.error=t)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(t){return t.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e.prototype.transformDocument=function(t){return this.queryManager.transform(t)},e.prototype.maskResult=function(t){return t&&"data"in t?x(x({},t),{data:this.queryManager.maskOperation({document:this.query,data:t.data,fetchPolicy:this.options.fetchPolicy,id:this.queryId})}):t},e}(ee);Uu(rs);function dc(n){var e=n.options,t=e.fetchPolicy,r=e.nextFetchPolicy;return t==="cache-and-network"||t==="network-only"?n.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(i,s){return this.nextFetchPolicy=r,typeof this.nextFetchPolicy=="function"?this.nextFetchPolicy(i,s):t}}):n.reobserve()}function vp(n){globalThis.__DEV__!==!1&&$.error(25,n.message,n.stack)}function pc(n){globalThis.__DEV__!==!1&&n&&globalThis.__DEV__!==!1&&$.debug(26,n)}function Ii(n){return n==="network-only"||n==="no-cache"||n==="standby"}var on=new(zt?WeakMap:Map);function Ai(n,e){var t=n[e];typeof t=="function"&&(n[e]=function(){return on.set(n,(on.get(n)+1)%1e15),t.apply(this,arguments)})}function ca(n){n.notifyTimeout&&(clearTimeout(n.notifyTimeout),n.notifyTimeout=void 0)}var Oi=function(){function n(e,t){t===void 0&&(t=e.generateQueryId()),this.queryId=t,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var r=this.cache=e.cache;on.has(r)||(on.set(r,0),Ai(r,"evict"),Ai(r,"modify"),Ai(r,"reset"))}return n.prototype.init=function(e){var t=e.networkStatus||te.loading;return this.variables&&this.networkStatus!==te.loading&&!oe(this.variables,e.variables)&&(t=te.setVariables),oe(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:t}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},n.prototype.reset=function(){ca(this),this.dirty=!1},n.prototype.resetDiff=function(){this.lastDiff=void 0},n.prototype.getDiff=function(){var e=this.getDiffOptions();if(this.lastDiff&&oe(e,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables);var t=this.observableQuery;if(t&&t.options.fetchPolicy==="no-cache")return{complete:!1};var r=this.cache.diff(e);return this.updateLastDiff(r,e),r},n.prototype.updateLastDiff=function(e,t){this.lastDiff=e?{diff:e,options:t||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(e){var t;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(t=this.observableQuery)===null||t===void 0?void 0:t.options.canonizeResults}},n.prototype.setDiff=function(e){var t=this,r,i=this.lastDiff&&this.lastDiff.diff;e&&!e.complete&&(!((r=this.observableQuery)===null||r===void 0)&&r.getLastError())||(this.updateLastDiff(e),!this.dirty&&!oe(i&&i.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return t.notify()},0))))},n.prototype.setObservableQuery=function(e){var t=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var r=t.getDiff();r.fromOptimisticTransaction?e.observe():dc(e)})):delete this.oqListener)},n.prototype.notify=function(){var e=this;ca(this),this.shouldNotify()&&this.listeners.forEach(function(t){return t(e)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(rr(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=n.prototype.cancel;var e=this.observableQuery;e&&e.stopPolling()}},n.prototype.cancel=function(){},n.prototype.updateWatch=function(e){var t=this;e===void 0&&(e=this.variables);var r=this.observableQuery;if(!(r&&r.options.fetchPolicy==="no-cache")){var i=x(x({},this.getDiffOptions(e)),{watcher:this,callback:function(s){return t.setDiff(s)}});(!this.lastWatch||!oe(i,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(e,t){var r=this.lastWrite;return!(r&&r.dmCount===on.get(this.cache)&&oe(t,r.variables)&&oe(e.data,r.result.data))},n.prototype.markResult=function(e,t,r,i){var s=this,o=new Nt,a=ot(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&ot(e.incremental)){var c=qu(this.getDiff().result,e);e.data=c}else if("hasNext"in e&&e.hasNext){var l=this.getDiff();e.data=o.merge(l.result,e.data)}this.graphQLErrors=a,r.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(r.variables)):i!==0&&(is(e,r.errorPolicy)?this.cache.performTransaction(function(u){if(s.shouldWrite(e,r.variables))u.writeQuery({query:t,data:e.data,variables:r.variables,overwrite:i===1}),s.lastWrite={result:e,variables:r.variables,dmCount:on.get(s.cache)};else if(s.lastDiff&&s.lastDiff.diff.complete){e.data=s.lastDiff.diff.result;return}var p=s.getDiffOptions(r.variables),d=u.diff(p);!s.stopped&&oe(s.variables,r.variables)&&s.updateWatch(r.variables),s.updateLastDiff(d,p),d.complete&&(e.data=d.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=te.ready},n.prototype.markError=function(e){return this.networkStatus=te.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},n}();function is(n,e){e===void 0&&(e="none");var t=e==="ignore"||e==="all",r=!Ar(n);return!r&&t&&n.data&&(r=!0),r}var wp=Object.prototype.hasOwnProperty,la=Object.create(null),Ep=function(){function n(e){var t=this;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new du(mt["queryManager.getDocumentInfo"]||2e3),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new bt(!1),this.noCacheWarningsByQueryId=new Set;var r=new Nu(function(s){return t.cache.transformDocument(s)},{cache:!1});this.cache=e.cache,this.link=e.link,this.defaultOptions=e.defaultOptions,this.queryDeduplication=e.queryDeduplication,this.clientAwareness=e.clientAwareness,this.localState=e.localState,this.ssrMode=e.ssrMode,this.assumeImmutableResults=e.assumeImmutableResults,this.dataMasking=e.dataMasking;var i=e.documentTransform;this.documentTransform=i?r.concat(i).concat(r):r,this.defaultContext=e.defaultContext||Object.create(null),(this.onBroadcast=e.onBroadcast)&&(this.mutationStore=Object.create(null))}return n.prototype.stop=function(){var e=this;this.queries.forEach(function(t,r){e.stopQueryNoBroadcast(r)}),this.cancelPendingFetches(Fe(27))},n.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(t){return t(e)}),this.fetchCancelFns.clear()},n.prototype.mutate=function(e){return _t(this,arguments,void 0,function(t){var r,i,s,o,a,c,l,u=t.mutation,p=t.variables,d=t.optimisticResponse,y=t.updateQueries,b=t.refetchQueries,E=b===void 0?[]:b,w=t.awaitRefetchQueries,v=w===void 0?!1:w,k=t.update,S=t.onQueryUpdated,I=t.fetchPolicy,O=I===void 0?((c=this.defaultOptions.mutate)===null||c===void 0?void 0:c.fetchPolicy)||"network-only":I,C=t.errorPolicy,M=C===void 0?((l=this.defaultOptions.mutate)===null||l===void 0?void 0:l.errorPolicy)||"none":C,F=t.keepRootFields,L=t.context;return St(this,function(V){switch(V.label){case 0:return $(u,28),$(O==="network-only"||O==="no-cache",29),r=this.generateMutationId(),u=this.cache.transformForLink(this.transform(u)),i=this.getDocumentInfo(u).hasClientExports,p=this.getVariables(u,p),i?[4,this.localState.addExportedVariables(u,p,L)]:[3,2];case 1:p=V.sent(),V.label=2;case 2:return s=this.mutationStore&&(this.mutationStore[r]={mutation:u,variables:p,loading:!0,error:null}),o=d&&this.markMutationOptimistic(d,{mutationId:r,document:u,variables:p,fetchPolicy:O,errorPolicy:M,context:L,updateQueries:y,update:k,keepRootFields:F}),this.broadcastQueries(),a=this,[2,new Promise(function(G,Ee){return Ei(a.getObservableFromLink(u,x(x({},L),{optimisticResponse:o?d:void 0}),p,{},!1),function(ie){if(Ar(ie)&&M==="none")throw new xt({graphQLErrors:Gi(ie)});s&&(s.loading=!1,s.error=null);var _e=x({},ie);return typeof E=="function"&&(E=E(_e)),M==="ignore"&&Ar(_e)&&delete _e.errors,a.markMutationResult({mutationId:r,result:_e,document:u,variables:p,fetchPolicy:O,errorPolicy:M,context:L,update:k,updateQueries:y,awaitRefetchQueries:v,refetchQueries:E,removeOptimistic:o?r:void 0,onQueryUpdated:S,keepRootFields:F})}).subscribe({next:function(ie){a.broadcastQueries(),(!("hasNext"in ie)||ie.hasNext===!1)&&G(x(x({},ie),{data:a.maskOperation({document:u,data:ie.data,fetchPolicy:O,id:r})}))},error:function(ie){s&&(s.loading=!1,s.error=ie),o&&a.cache.removeOptimistic(r),a.broadcastQueries(),Ee(ie instanceof xt?ie:new xt({networkError:ie}))}})})]}})})},n.prototype.markMutationResult=function(e,t){var r=this;t===void 0&&(t=this.cache);var i=e.result,s=[],o=e.fetchPolicy==="no-cache";if(!o&&is(i,e.errorPolicy)){if(cn(i)||s.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),cn(i)&&ot(i.incremental)){var a=t.diff({id:"ROOT_MUTATION",query:this.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0}),c=void 0;a.result&&(c=qu(a.result,i)),typeof c<"u"&&(i.data=c,s.push({result:c,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}))}var l=e.updateQueries;l&&this.queries.forEach(function(p,d){var y=p.observableQuery,b=y&&y.queryName;if(!(!b||!wp.call(l,b))){var E=l[b],w=r.queries.get(d),v=w.document,k=w.variables,S=t.diff({query:v,variables:k,returnPartialData:!0,optimistic:!1}),I=S.result,O=S.complete;if(O&&I){var C=E(I,{mutationResult:i,queryName:v&&Ln(v)||void 0,queryVariables:k});C&&s.push({result:C,dataId:"ROOT_QUERY",query:v,variables:k})}}})}if(s.length>0||(e.refetchQueries||"").length>0||e.update||e.onQueryUpdated||e.removeOptimistic){var u=[];if(this.refetchQueries({updateCache:function(p){o||s.forEach(function(E){return p.write(E)});var d=e.update,y=!yd(i)||cn(i)&&!i.hasNext;if(d){if(!o){var b=p.diff({id:"ROOT_MUTATION",query:r.getDocumentInfo(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});b.complete&&(i=x(x({},i),{data:b.result}),"incremental"in i&&delete i.incremental,"hasNext"in i&&delete i.hasNext)}y&&d(p,i,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&y&&p.modify({id:"ROOT_MUTATION",fields:function(E,w){var v=w.fieldName,k=w.DELETE;return v==="__typename"?E:k}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(p){return u.push(p)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(u).then(function(){return i})}return Promise.resolve(i)},n.prototype.markMutationOptimistic=function(e,t){var r=this,i=typeof e=="function"?e(t.variables,{IGNORE:la}):e;return i===la?!1:(this.cache.recordOptimisticTransaction(function(s){try{r.markMutationResult(x(x({},t),{result:{data:i}}),s)}catch(o){globalThis.__DEV__!==!1&&$.error(o)}},t.mutationId),!0)},n.prototype.fetchQuery=function(e,t,r){return this.fetchConcastWithInfo(e,t,r).concast.promise},n.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(t,r){e[r]={variables:t.variables,networkStatus:t.networkStatus,networkError:t.networkError,graphQLErrors:t.graphQLErrors}}),e},n.prototype.resetErrors=function(e){var t=this.queries.get(e);t&&(t.networkError=void 0,t.graphQLErrors=[])},n.prototype.transform=function(e){return this.documentTransform.transformDocument(e)},n.prototype.getDocumentInfo=function(e){var t=this.transformCache;if(!t.has(e)){var r={hasClientExports:Yf(e),hasForcedResolvers:this.localState.shouldForceResolvers(e),hasNonreactiveDirective:er(["nonreactive"],e),nonReactiveQuery:Zh(e),clientQuery:this.localState.clientQuery(e),serverQuery:Du([{name:"client",remove:!0},{name:"connection"},{name:"nonreactive"},{name:"unmask"}],e),defaultVars:ys(Ht(e)),asQuery:x(x({},e),{definitions:e.definitions.map(function(i){return i.kind==="OperationDefinition"&&i.operation!=="query"?x(x({},i),{operation:"query"}):i})})};t.set(e,r)}return t.get(e)},n.prototype.getVariables=function(e,t){return x(x({},this.getDocumentInfo(e).defaultVars),t)},n.prototype.watchQuery=function(e){var t=this.transform(e.query);e=x(x({},e),{variables:this.getVariables(t,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new Oi(this),i=new rs({queryManager:this,queryInfo:r,options:e});return i.lastQuery=t,this.queries.set(i.queryId,r),r.init({document:t,observableQuery:i,variables:i.variables}),i},n.prototype.query=function(e,t){var r=this;t===void 0&&(t=this.generateQueryId()),$(e.query,30),$(e.query.kind==="Document",31),$(!e.returnPartialData,32),$(!e.pollInterval,33);var i=this.transform(e.query);return this.fetchQuery(t,x(x({},e),{query:i})).then(function(s){return s&&x(x({},s),{data:r.maskOperation({document:i,data:s.data,fetchPolicy:e.fetchPolicy,id:t})})}).finally(function(){return r.stopQuery(t)})},n.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},n.prototype.generateRequestId=function(){return this.requestIdCounter++},n.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},n.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryInStoreNoBroadcast=function(e){var t=this.queries.get(e);t&&t.stop()},n.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(Fe(34)),this.queries.forEach(function(t){t.observableQuery?t.networkStatus=te.loading:t.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},n.prototype.getObservableQueries=function(e){var t=this;e===void 0&&(e="active");var r=new Map,i=new Map,s=new Map,o=new Set;return Array.isArray(e)&&e.forEach(function(a){if(typeof a=="string")i.set(a,a),s.set(a,!1);else if(xh(a)){var c=At(t.transform(a));i.set(c,Ln(a)),s.set(c,!1)}else ce(a)&&a.query&&o.add(a)}),this.queries.forEach(function(a,c){var l=a.observableQuery,u=a.document;if(l){if(e==="all"){r.set(c,l);return}var p=l.queryName,d=l.options.fetchPolicy;if(d==="standby"||e==="active"&&!l.hasObservers())return;(e==="active"||p&&s.has(p)||u&&s.has(At(u)))&&(r.set(c,l),p&&s.set(p,!0),u&&s.set(At(u),!0))}}),o.size&&o.forEach(function(a){var c=Pi("legacyOneTimeQuery"),l=t.getQuery(c).init({document:a.query,variables:a.variables}),u=new rs({queryManager:t,queryInfo:l,options:x(x({},a),{fetchPolicy:"network-only"})});$(u.queryId===c),l.setObservableQuery(u),r.set(c,u)}),globalThis.__DEV__!==!1&&s.size&&s.forEach(function(a,c){if(!a){var l=i.get(c);l?globalThis.__DEV__!==!1&&$.warn(35,l):globalThis.__DEV__!==!1&&$.warn(36)}}),r},n.prototype.reFetchObservableQueries=function(e){var t=this;e===void 0&&(e=!1);var r=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,s){var o=i.options.fetchPolicy;i.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&r.push(i.refetch()),t.getQuery(s).setDiff(null)}),this.broadcastQueries(),Promise.all(r)},n.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},n.prototype.startGraphQLSubscription=function(e){var t=this,r=e.query,i=e.variables,s=e.fetchPolicy,o=e.errorPolicy,a=o===void 0?"none":o,c=e.context,l=c===void 0?{}:c,u=e.extensions,p=u===void 0?{}:u;r=this.transform(r),i=this.getVariables(r,i);var d=function(b){return t.getObservableFromLink(r,l,b,p).map(function(E){s!=="no-cache"&&(is(E,a)&&t.cache.write({query:r,result:E.data,dataId:"ROOT_SUBSCRIPTION",variables:b}),t.broadcastQueries());var w=Ar(E),v=Vu(E);if(w||v){var k={};if(w&&(k.graphQLErrors=E.errors),v&&(k.protocolErrors=E.extensions[ti]),a==="none"||v)throw new xt(k)}return a==="ignore"&&delete E.errors,E})};if(this.getDocumentInfo(r).hasClientExports){var y=this.localState.addExportedVariables(r,i,l).then(d);return new ee(function(b){var E=null;return y.then(function(w){return E=w.subscribe(b)},b.error),function(){return E&&E.unsubscribe()}})}return d(i)},n.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},n.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},n.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},n.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},n.prototype.getLocalState=function(){return this.localState},n.prototype.getObservableFromLink=function(e,t,r,i,s){var o=this,a;s===void 0&&(s=(a=t?.queryDeduplication)!==null&&a!==void 0?a:this.queryDeduplication);var c,l=this.getDocumentInfo(e),u=l.serverQuery,p=l.clientQuery;if(u){var d=this,y=d.inFlightLinkObservables,b=d.link,E={query:u,variables:r,operationName:Ln(u)||void 0,context:this.prepareContext(x(x({},t),{forceFetch:!s})),extensions:i};if(t=E.context,s){var w=At(u),v=Ot(r),k=y.lookup(w,v);if(c=k.observable,!c){var S=new tn([Ji(b,E)]);c=k.observable=S,S.beforeNext(function(){y.remove(w,v)})}}else c=new tn([Ji(b,E)])}else c=new tn([ee.of({data:{}})]),t=this.prepareContext(t);return p&&(c=Ei(c,function(I){return o.localState.runResolvers({document:p,remoteResult:I,context:t,variables:r})})),c},n.prototype.getResultsFromLink=function(e,t,r){var i=e.lastRequestId=this.generateRequestId(),s=this.cache.transformForLink(r.query);return Ei(this.getObservableFromLink(s,r.context,r.variables),function(o){var a=Gi(o),c=a.length>0,l=r.errorPolicy;if(i>=e.lastRequestId){if(c&&l==="none")throw e.markError(new xt({graphQLErrors:a}));e.markResult(o,s,r,t),e.markReady()}var u={data:o.data,loading:!1,networkStatus:te.ready};return c&&l==="none"&&(u.data=void 0),c&&l!=="ignore"&&(u.errors=a,u.networkStatus=te.error),u},function(o){var a=Qu(o)?o:new xt({networkError:o});throw i>=e.lastRequestId&&e.markError(a),a})},n.prototype.fetchConcastWithInfo=function(e,t,r,i){var s=this;r===void 0&&(r=te.loading),i===void 0&&(i=t.query);var o=this.getVariables(i,t.variables),a=this.getQuery(e),c=this.defaultOptions.watchQuery,l=t.fetchPolicy,u=l===void 0?c&&c.fetchPolicy||"cache-first":l,p=t.errorPolicy,d=p===void 0?c&&c.errorPolicy||"none":p,y=t.returnPartialData,b=y===void 0?!1:y,E=t.notifyOnNetworkStatusChange,w=E===void 0?!1:E,v=t.context,k=v===void 0?{}:v,S=Object.assign({},t,{query:i,variables:o,fetchPolicy:u,errorPolicy:d,returnPartialData:b,notifyOnNetworkStatusChange:w,context:k}),I=function(L){S.variables=L;var V=s.fetchQueryByPolicy(a,S,r);return S.fetchPolicy!=="standby"&&V.sources.length>0&&a.observableQuery&&a.observableQuery.applyNextFetchPolicy("after-fetch",t),V},O=function(){return s.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(L){O(),setTimeout(function(){return C.cancel(L)})});var C,M;if(this.getDocumentInfo(S.query).hasClientExports)C=new tn(this.localState.addExportedVariables(S.query,S.variables,S.context).then(I).then(function(L){return L.sources})),M=!0;else{var F=I(S.variables);M=F.fromLink,C=new tn(F.sources)}return C.promise.then(O,O),{concast:C,fromLink:M}},n.prototype.refetchQueries=function(e){var t=this,r=e.updateCache,i=e.include,s=e.optimistic,o=s===void 0?!1:s,a=e.removeOptimistic,c=a===void 0?o?Pi("refetchQueries"):void 0:a,l=e.onQueryUpdated,u=new Map;i&&this.getObservableQueries(i).forEach(function(d,y){u.set(y,{oq:d,lastDiff:t.getQuery(y).getDiff()})});var p=new Map;return r&&this.cache.batch({update:r,optimistic:o&&c||!1,removeOptimistic:c,onWatchUpdated:function(d,y,b){var E=d.watcher instanceof Oi&&d.watcher.observableQuery;if(E){if(l){u.delete(E.queryId);var w=l(E,y,b);return w===!0&&(w=E.refetch()),w!==!1&&p.set(E,w),w}l!==null&&u.set(E.queryId,{oq:E,lastDiff:b,diff:y})}}}),u.size&&u.forEach(function(d,y){var b=d.oq,E=d.lastDiff,w=d.diff,v;if(l){if(!w){var k=b.queryInfo;k.reset(),w=k.getDiff()}v=l(b,w,E)}(!l||v===!0)&&(v=b.refetch()),v!==!1&&p.set(b,v),y.indexOf("legacyOneTimeQuery")>=0&&t.stopQueryNoBroadcast(y)}),c&&this.cache.removeOptimistic(c),p},n.prototype.maskOperation=function(e){var t,r,i,s=e.document,o=e.data;if(globalThis.__DEV__!==!1){var a=e.fetchPolicy,c=e.id,l=(t=Ht(s))===null||t===void 0?void 0:t.operation,u=((r=l?.[0])!==null&&r!==void 0?r:"o")+c;this.dataMasking&&a==="no-cache"&&!ah(s)&&!this.noCacheWarningsByQueryId.has(u)&&(this.noCacheWarningsByQueryId.add(u),globalThis.__DEV__!==!1&&$.warn(37,(i=Ln(s))!==null&&i!==void 0?i:"Unnamed ".concat(l??"operation")))}return this.dataMasking?tp(o,s,this.cache):o},n.prototype.maskFragment=function(e){var t=e.data,r=e.fragment,i=e.fragmentName;return this.dataMasking?Xu(t,r,this.cache,i):t},n.prototype.fetchQueryByPolicy=function(e,t,r){var i=this,s=t.query,o=t.variables,a=t.fetchPolicy,c=t.refetchWritePolicy,l=t.errorPolicy,u=t.returnPartialData,p=t.context,d=t.notifyOnNetworkStatusChange,y=e.networkStatus;e.init({document:s,variables:o,networkStatus:r});var b=function(){return e.getDiff()},E=function(I,O){O===void 0&&(O=e.networkStatus||te.loading);var C=I.result;globalThis.__DEV__!==!1&&!u&&!oe(C,{})&&pc(I.missing);var M=function(F){return ee.of(x({data:F,loading:rr(O),networkStatus:O},I.complete?null:{partial:!0}))};return C&&i.getDocumentInfo(s).hasForcedResolvers?i.localState.runResolvers({document:s,remoteResult:{data:C},context:p,variables:o,onlyRunForcedResolvers:!0}).then(function(F){return M(F.data||void 0)}):l==="none"&&O===te.refetch&&Array.isArray(I.missing)?M(void 0):M(C)},w=a==="no-cache"?0:r===te.refetch&&c!=="merge"?1:2,v=function(){return i.getResultsFromLink(e,w,{query:s,variables:o,context:p,fetchPolicy:a,errorPolicy:l})},k=d&&typeof y=="number"&&y!==r&&rr(r);switch(a){default:case"cache-first":{var S=b();return S.complete?{fromLink:!1,sources:[E(S,e.markReady())]}:u||k?{fromLink:!0,sources:[E(S),v()]}:{fromLink:!0,sources:[v()]}}case"cache-and-network":{var S=b();return S.complete||u||k?{fromLink:!0,sources:[E(S),v()]}:{fromLink:!0,sources:[v()]}}case"cache-only":return{fromLink:!1,sources:[E(b(),e.markReady())]};case"network-only":return k?{fromLink:!0,sources:[E(b()),v()]}:{fromLink:!0,sources:[v()]};case"no-cache":return k?{fromLink:!0,sources:[E(e.getDiff()),v()]}:{fromLink:!0,sources:[v()]};case"standby":return{fromLink:!1,sources:[]}}},n.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new Oi(this,e)),this.queries.get(e)},n.prototype.prepareContext=function(e){e===void 0&&(e={});var t=this.localState.prepareContext(e);return x(x(x({},this.defaultContext),t),{clientAwareness:this.clientAwareness})},n}(),_p=function(){function n(e){var t=e.cache,r=e.client,i=e.resolvers,s=e.fragmentMatcher;this.selectionsToResolveCache=new WeakMap,this.cache=t,r&&(this.client=r),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return n.prototype.addResolvers=function(e){var t=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(r){t.resolvers=Oo(t.resolvers,r)}):this.resolvers=Oo(this.resolvers,e)},n.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},n.prototype.getResolvers=function(){return this.resolvers||{}},n.prototype.runResolvers=function(e){return _t(this,arguments,void 0,function(t){var r=t.document,i=t.remoteResult,s=t.context,o=t.variables,a=t.onlyRunForcedResolvers,c=a===void 0?!1:a;return St(this,function(l){return r?[2,this.resolveDocument(r,i.data,s,o,this.fragmentMatcher,c).then(function(u){return x(x({},i),{data:u.result})})]:[2,i]})})},n.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},n.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},n.prototype.clientQuery=function(e){return er(["client"],e)&&this.resolvers?e:null},n.prototype.serverQuery=function(e){return Fu(e)},n.prototype.prepareContext=function(e){var t=this.cache;return x(x({},e),{cache:t,getCacheKey:function(r){return t.identify(r)}})},n.prototype.addExportedVariables=function(e){return _t(this,arguments,void 0,function(t,r,i){return r===void 0&&(r={}),i===void 0&&(i={}),St(this,function(s){return t?[2,this.resolveDocument(t,this.buildRootValueFromCache(t,r)||{},this.prepareContext(i),r).then(function(o){return x(x({},r),o.exportedVariables)})]:[2,x({},r)]})})},n.prototype.shouldForceResolvers=function(e){var t=!1;return Xe(e,{Directive:{enter:function(r){if(r.name.value==="client"&&r.arguments&&(t=r.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),t))return Kr}}}),t},n.prototype.buildRootValueFromCache=function(e,t){return this.cache.diff({query:Xh(e),variables:t,returnPartialData:!0,optimistic:!1}).result},n.prototype.resolveDocument=function(e,t){return _t(this,arguments,void 0,function(r,i,s,o,a,c){var l,u,p,d,y,b,E,w,v,k,S;return s===void 0&&(s={}),o===void 0&&(o={}),a===void 0&&(a=function(){return!0}),c===void 0&&(c=!1),St(this,function(I){return l=En(r),u=wn(r),p=bn(u),d=this.collectSelectionsToResolve(l,p),y=l.operation,b=y?y.charAt(0).toUpperCase()+y.slice(1):"Query",E=this,w=E.cache,v=E.client,k={fragmentMap:p,context:x(x({},s),{cache:w,client:v}),variables:o,fragmentMatcher:a,defaultOperationType:b,exportedVariables:{},selectionsToResolve:d,onlyRunForcedResolvers:c},S=!1,[2,this.resolveSelectionSet(l.selectionSet,S,i,k).then(function(O){return{result:O,exportedVariables:k.exportedVariables}})]})})},n.prototype.resolveSelectionSet=function(e,t,r,i){return _t(this,void 0,void 0,function(){var s,o,a,c,l,u=this;return St(this,function(p){return s=i.fragmentMap,o=i.context,a=i.variables,c=[r],l=function(d){return _t(u,void 0,void 0,function(){var y,b;return St(this,function(E){return!t&&!i.selectionsToResolve.has(d)?[2]:ur(d,a)?Ct(d)?[2,this.resolveField(d,t,r,i).then(function(w){var v;typeof w<"u"&&c.push((v={},v[gt(d)]=w,v))})]:(Ph(d)?y=d:(y=s[d.name.value],$(y,19,d.name.value)),y&&y.typeCondition&&(b=y.typeCondition.name.value,i.fragmentMatcher(r,b,o))?[2,this.resolveSelectionSet(y.selectionSet,t,r,i).then(function(w){c.push(w)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(l)).then(function(){return ei(c)})]})})},n.prototype.resolveField=function(e,t,r,i){return _t(this,void 0,void 0,function(){var s,o,a,c,l,u,p,d,y,b=this;return St(this,function(E){return r?(s=i.variables,o=e.name.value,a=gt(e),c=o!==a,l=r[a]||r[o],u=Promise.resolve(l),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(p=r.__typename||i.defaultOperationType,d=this.resolvers&&this.resolvers[p],d&&(y=d[c?o:a],y&&(u=Promise.resolve(Ts.withValue(this.cache,y,[r,Yr(e,s),i.context,{field:e,fragmentMap:i.fragmentMap}]))))),[2,u.then(function(w){var v,k;if(w===void 0&&(w=l),e.directives&&e.directives.forEach(function(I){I.name.value==="export"&&I.arguments&&I.arguments.forEach(function(O){O.name.value==="as"&&O.value.kind==="StringValue"&&(i.exportedVariables[O.value.value]=w)})}),!e.selectionSet||w==null)return w;var S=(k=(v=e.directives)===null||v===void 0?void 0:v.some(function(I){return I.name.value==="client"}))!==null&&k!==void 0?k:!1;if(Array.isArray(w))return b.resolveSubSelectedArray(e,t||S,w,i);if(e.selectionSet)return b.resolveSelectionSet(e.selectionSet,t||S,w,i)})]):[2,null]})})},n.prototype.resolveSubSelectedArray=function(e,t,r,i){var s=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return s.resolveSubSelectedArray(e,t,o,i);if(e.selectionSet)return s.resolveSelectionSet(e.selectionSet,t,o,i)}))},n.prototype.collectSelectionsToResolve=function(e,t){var r=function(o){return!Array.isArray(o)},i=this.selectionsToResolveCache;function s(o){if(!i.has(o)){var a=new Set;i.set(o,a),Xe(o,{Directive:function(c,l,u,p,d){c.name.value==="client"&&d.forEach(function(y){r(y)&&wo(y)&&a.add(y)})},FragmentSpread:function(c,l,u,p,d){var y=t[c.name.value];$(y,20,c.name.value);var b=s(y);b.size>0&&(d.forEach(function(E){r(E)&&wo(E)&&a.add(E)}),a.add(c),b.forEach(function(E){a.add(E)}))}})}return i.get(o)}return s(e)},n}(),fa=!1,yc=function(){function n(e){var t=this,r;if(this.resetStoreCallbacks=[],this.clearStoreCallbacks=[],!e.cache)throw Fe(16);var i=e.uri,s=e.credentials,o=e.headers,a=e.cache,c=e.documentTransform,l=e.ssrMode,u=l===void 0?!1:l,p=e.ssrForceFetchDelay,d=p===void 0?0:p,y=e.connectToDevTools,b=e.queryDeduplication,E=b===void 0?!0:b,w=e.defaultOptions,v=e.defaultContext,k=e.assumeImmutableResults,S=k===void 0?a.assumeImmutableResults:k,I=e.resolvers,O=e.typeDefs,C=e.fragmentMatcher,M=e.name,F=e.version,L=e.devtools,V=e.dataMasking,G=e.link;G||(G=i?new zd({uri:i,credentials:s,headers:o}):We.empty()),this.link=G,this.cache=a,this.disableNetworkFetches=u||d>0,this.queryDeduplication=E,this.defaultOptions=w||Object.create(null),this.typeDefs=O,this.devtoolsConfig=x(x({},L),{enabled:(r=L?.enabled)!==null&&r!==void 0?r:y}),this.devtoolsConfig.enabled===void 0&&(this.devtoolsConfig.enabled=globalThis.__DEV__!==!1),d&&setTimeout(function(){return t.disableNetworkFetches=!1},d),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.watchFragment=this.watchFragment.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),this.version=cs,this.localState=new _p({cache:a,client:this,resolvers:I,fragmentMatcher:C}),this.queryManager=new Ep({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,defaultContext:v,documentTransform:c,queryDeduplication:E,ssrMode:u,dataMasking:!!V,clientAwareness:{name:M,version:F},localState:this.localState,assumeImmutableResults:S,onBroadcast:this.devtoolsConfig.enabled?function(){t.devToolsHookCb&&t.devToolsHookCb({action:{},state:{queries:t.queryManager.getQueryStore(),mutations:t.queryManager.mutationStore||{}},dataWithOptimisticResults:t.cache.extract(!0)})}:void 0}),this.devtoolsConfig.enabled&&this.connectToDevTools()}return n.prototype.connectToDevTools=function(){if(!(typeof window>"u")){var e=window,t=Symbol.for("apollo.devtools");(e[t]=e[t]||[]).push(this),e.__APOLLO_CLIENT__=this,!fa&&globalThis.__DEV__!==!1&&(fa=!0,window.document&&window.top===window.self&&/^(https?|file):$/.test(window.location.protocol)&&setTimeout(function(){if(!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__){var r=window.navigator,i=r&&r.userAgent,s=void 0;typeof i=="string"&&(i.indexOf("Chrome/")>-1?s="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":i.indexOf("Firefox/")>-1&&(s="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),s&&globalThis.__DEV__!==!1&&$.log("Download the Apollo DevTools for a better development experience: %s",s)}},1e4))}},Object.defineProperty(n.prototype,"documentTransform",{get:function(){return this.queryManager.documentTransform},enumerable:!1,configurable:!0}),n.prototype.stop=function(){this.queryManager.stop()},n.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=_i(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=x(x({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},n.prototype.query=function(e){return this.defaultOptions.query&&(e=_i(this.defaultOptions.query,e)),$(e.fetchPolicy!=="cache-and-network",17),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=x(x({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},n.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=_i(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},n.prototype.subscribe=function(e){var t=this,r=this.queryManager.generateQueryId();return this.queryManager.startGraphQLSubscription(e).map(function(i){return x(x({},i),{data:t.queryManager.maskOperation({document:e.query,data:i.data,fetchPolicy:e.fetchPolicy,id:r})})})},n.prototype.readQuery=function(e,t){return t===void 0&&(t=!1),this.cache.readQuery(e,t)},n.prototype.watchFragment=function(e){var t;return this.cache.watchFragment(x(x({},e),(t={},t[Symbol.for("apollo.dataMasking")]=this.queryManager.dataMasking,t)))},n.prototype.readFragment=function(e,t){return t===void 0&&(t=!1),this.cache.readFragment(e,t)},n.prototype.writeQuery=function(e){var t=this.cache.writeQuery(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.writeFragment=function(e){var t=this.cache.writeFragment(e);return e.broadcast!==!1&&this.queryManager.broadcastQueries(),t},n.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},n.prototype.__requestRaw=function(e){return Ji(this.link,e)},n.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(t){return t()}))}).then(function(){return e.reFetchObservableQueries()})},n.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(t){return t()}))})},n.prototype.onResetStore=function(e){var t=this;return this.resetStoreCallbacks.push(e),function(){t.resetStoreCallbacks=t.resetStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.onClearStore=function(e){var t=this;return this.clearStoreCallbacks.push(e),function(){t.clearStoreCallbacks=t.clearStoreCallbacks.filter(function(r){return r!==e})}},n.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},n.prototype.refetchQueries=function(e){var t=this.queryManager.refetchQueries(e),r=[],i=[];t.forEach(function(o,a){r.push(a),i.push(o)});var s=Promise.all(i);return s.queries=r,s.results=i,s.catch(function(o){globalThis.__DEV__!==!1&&$.debug(18,o)}),s},n.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},n.prototype.extract=function(e){return this.cache.extract(e)},n.prototype.restore=function(e){return this.cache.restore(e)},n.prototype.addResolvers=function(e){this.localState.addResolvers(e)},n.prototype.setResolvers=function(e){this.localState.setResolvers(e)},n.prototype.getResolvers=function(){return this.localState.getResolvers()},n.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},n.prototype.setLink=function(e){this.link=this.queryManager.link=e},Object.defineProperty(n.prototype,"defaultContext",{get:function(){return this.queryManager.defaultContext},enumerable:!1,configurable:!0}),n}();globalThis.__DEV__!==!1&&(yc.prototype.getMemoryInternals=mh);var Rr=new Map,ss=new Map,mc=!0,Ur=!1;function gc(n){return n.replace(/[\s,]+/g," ").trim()}function Sp(n){return gc(n.source.body.substring(n.start,n.end))}function kp(n){var e=new Set,t=[];return n.definitions.forEach(function(r){if(r.kind==="FragmentDefinition"){var i=r.name.value,s=Sp(r.loc),o=ss.get(i);o&&!o.has(s)?mc&&console.warn("Warning: fragment with name "+i+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):o||ss.set(i,o=new Set),o.add(s),e.has(s)||(e.add(s),t.push(r))}else t.push(r)}),x(x({},n),{definitions:t})}function xp(n){var e=new Set(n.definitions);e.forEach(function(r){r.loc&&delete r.loc,Object.keys(r).forEach(function(i){var s=r[i];s&&typeof s=="object"&&e.add(s)})});var t=n.loc;return t&&(delete t.startToken,delete t.endToken),n}function Tp(n){var e=gc(n);if(!Rr.has(e)){var t=jf(n,{experimentalFragmentVariables:Ur,allowLegacyFragmentVariables:Ur});if(!t||t.kind!=="Document")throw new Error("Not a valid GraphQL document.");Rr.set(e,xp(kp(t)))}return Rr.get(e)}function ae(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];typeof n=="string"&&(n=[n]);var r=n[0];return e.forEach(function(i,s){i&&i.kind==="Document"?r+=i.loc.source.body:r+=i,r+=n[s+1]}),Tp(r)}function Ip(){Rr.clear(),ss.clear()}function Ap(){mc=!1}function Op(){Ur=!0}function Cp(){Ur=!1}var Fn={gql:ae,resetCaches:Ip,disableFragmentWarnings:Ap,enableExperimentalFragmentVariables:Op,disableExperimentalFragmentVariables:Cp};(function(n){n.gql=Fn.gql,n.resetCaches=Fn.resetCaches,n.disableFragmentWarnings=Fn.disableFragmentWarnings,n.enableExperimentalFragmentVariables=Fn.enableExperimentalFragmentVariables,n.disableExperimentalFragmentVariables=Fn.disableExperimentalFragmentVariables})(ae);ae.default=ae;class Rp extends $e{constructor(e,t){super(e,t),this.$__query=ae`query ($bundle: String!) {
      ContinuId(bundle: $bundle) {
        address,
        bundleHash,
        tokenSlug,
        position,
        batchId,
        characters,
        pubkey,
        amount,
        createdAt
      }
    }`}createResponse(e){return new cf({query:this,json:e})}}class Np extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.WalletBundle"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={};return e.forEach(r=>{r.metas=Kn.aggregateMeta(r.metas),t[r.bundleHash]=r}),t}}class Mp extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $bundleHashes: [ String! ] ) {
      WalletBundle( bundleHashes: $bundleHashes ) {
        bundleHash,
        metas {
          molecularHash,
          position,
          key,
          value,
          createdAt
        },
        createdAt
      }
    }`}createResponse(e){return new Np({query:this,json:e})}}class ri extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Wallet"})}static toClientWallet({data:e,secret:t=null}){let r;if(e.position===null||typeof e.position>"u"?r=Y.create({bundle:e.bundleHash,token:e.tokenSlug,batchId:e.batchId,characters:e.characters}):(r=new Y({secret:t,token:e.tokenSlug,position:e.position,batchId:e.batchId,characters:e.characters}),r.address=e.address,r.bundle=e.bundleHash),e.token&&(r.tokenName=e.token.name,r.tokenAmount=e.token.amount,r.tokenSupply=e.token.supply,r.tokenFungibility=e.token.fungibility),e.tokenUnits.length)for(const i of e.tokenUnits)r.tokenUnits.push(Gn.createFromGraphQL(i));if(e.tradeRates.length)for(const i of e.tradeRates)r.tradeRates[i.tokenSlug]=i.amount;return r.balance=Number(e.amount),r.pubkey=e.pubkey,r.createdAt=e.createdAt,r}getWallets(e=null){const t=this.data();if(!t)return null;const r=[];for(const i of t)r.push(ri.toClientWallet({data:i,secret:e}));return r}payload(){return this.getWallets()}}class Dp extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $bundleHash: String, $tokenSlug: String ) {
      Wallet( bundleHash: $bundleHash, tokenSlug: $tokenSlug ) {
        address,
        bundleHash,
        token {
          name,
          amount,
          fungibility,
          supply
        },
        tokenSlug,
        batchId,
        position,
        amount,
        characters,
        pubkey,
        createdAt,
        tokenUnits {
          id,
          name,
          metas
        },
        tradeRates {
          tokenSlug,
          amount
        }
      }
    }`}createResponse(e){return new ri({query:this,json:e})}}class Fp extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Balance"})}payload(){const e=this.data();return!e||!e.bundleHash||!e.tokenSlug?null:ri.toClientWallet({data:e})}}class Bp extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $address: String, $bundleHash: String, $type: String, $token: String, $position: String ) {
      Balance( address: $address, bundleHash: $bundleHash, type: $type, token: $token, position: $position ) {
        address,
        bundleHash,
        type,
        tokenSlug,
        batchId,
        position,
        amount,
        characters,
        pubkey,
        createdAt,
        tokenUnits {
          id,
          name,
          metas
        },
        tradeRates {
          tokenSlug,
          amount
        }
      }
    }`}createResponse(e){return new Fp({query:this,json:e})}}class Pp extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.MetaType"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={instances:{},instanceCount:{},paginatorInfo:{}},r=e.pop();return r.instances&&(t.instances=r.instances),r.instanceCount&&(t.instanceCount=r.instanceCount),r.paginatorInfo&&(t.paginatorInfo=r.paginatorInfo),t}}class ha extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $metaType: String, $metaTypes: [ String! ], $metaId: String, $metaIds: [ String! ], $key: String, $keys: [ String! ], $value: String, $values: [ String! ], $count: String, $latest: Boolean, $filter: [ MetaFilter! ], $queryArgs: QueryArgs, $countBy: String ) {
      MetaType( metaType: $metaType, metaTypes: $metaTypes, metaId: $metaId, metaIds: $metaIds, key: $key, keys: $keys, value: $value, values: $values, count: $count, filter: $filter, queryArgs: $queryArgs, countBy: $countBy ) {
        metaType,
        instanceCount {
          key,
          value
        },
        instances {
          metaType,
          metaId,
          createdAt,
          metas(latest:$latest) {
            molecularHash,
            position,
            key,
            value,
            createdAt
          }
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({metaType:e=null,metaId:t=null,key:r=null,value:i=null,latest:s=null,filter:o=null,queryArgs:a=null,count:c=null,countBy:l=null}){const u={};return e&&(u[typeof e=="string"?"metaType":"metaTypes"]=e),t&&(u[typeof t=="string"?"metaId":"metaIds"]=t),r&&(u[typeof r=="string"?"key":"keys"]=r),i&&(u[typeof i=="string"?"value":"values"]=i),u.latest=s===!0,o&&(u.filter=o),a&&((typeof a.limit>"u"||a.limit===0)&&(a.limit="*"),u.queryArgs=a),c&&(u.count=c),l&&(u.countBy=l),u}createResponse(e){return new Pp({query:this,json:e})}}class ir extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $batchId: String ) {
      Batch( batchId: $batchId ) {
        ${ir.getFields()},
        children {
          ${ir.getFields()}
        }
      }
    }`}static getFields(){return`batchId,
              molecularHash,
              type,
              status,
              createdAt,
              wallet {
                  address,
                  bundleHash,
                  amount,
                  tokenSlug,
                  token {
                      name,
                      amount
                  },
                  tokenUnits {
                      id,
                      name,
                      metas
                  }
              },
              fromWallet {
                  address,
                  bundleHash,
                  amount,
                  batchId
              },
              toWallet {
                  address,
                  bundleHash,
                  amount,
                  batchId
              },
              sourceTokenUnits {
                  id,
                  name,
                  metas
              },
              transferTokenUnits {
                  id,
                  name,
                  metas
              },
              metas {
                  key,
                  value,
              },
              throughMetas {
                  key,
                  value
              }`}createResponse(e){const t=new ve({query:this,json:e});return t.dataKey="data.Batch",t}}class $p extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $batchId: String ) {
      BatchHistory( batchId: $batchId ) {
        ${ir.getFields()}
      }
    }`}createResponse(e){const t=new ve({query:this,json:e});return t.dataKey="data.BatchHistory",t}}class ut extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ProposeMolecule"}),this.$__clientMolecule=e.molecule()}init(){const e=he.get(this.data(),"payload");try{this.$__payload=Object.prototype.toString.call(e)==="[object String]"?JSON.parse(e):e}catch{this.$__payload=null}}clientMolecule(){return this.$__clientMolecule}molecule(){const e=this.data();if(!e)return null;const t=new et({});return t.molecularHash=he.get(e,"molecularHash"),t.status=he.get(e,"status"),t.createdAt=he.get(e,"createdAt"),t}success(){return this.status()==="accepted"}status(){return he.get(this.data(),"status","rejected")}reason(){return he.get(this.data(),"reason","Invalid response from server")}payload(){return this.$__payload}}class Cs extends $e{createQuery({variables:e=null}){const t=super.createQuery({variables:e});return t.mutation=t.query,delete t.query,t}async execute({variables:e={},context:t={}}){this.$__request=this.createQuery({variables:e});const r={...t,...this.createQueryContext()};try{const i={...this.$__request,context:r},s=await this.client.mutate(i);return this.$__response=await this.createResponseRaw(s),this.$__response}catch(i){if(i.name==="AbortError")return this.knishIOClient.log("warn","Mutation was cancelled"),new ve({query:this,json:{data:null,errors:[{message:"Mutation was cancelled"}]}});throw i}}createQueryContext(){return{}}}class Re extends Cs{constructor(e,t,r){super(e,t),this.$__molecule=r,this.$__remainderWallet=null,this.$__query=ae`mutation( $molecule: MoleculeInput! ) {
      ProposeMolecule( molecule: $molecule ) {
        molecularHash,
        height,
        depth,
        status,
        reason,
        payload,
        createdAt,
        receivedAt,
        processedAt,
        broadcastedAt,
      }
    }`}compiledVariables(e){return{...super.compiledVariables(e),molecule:this.molecule()}}createResponse(e){return new ut({query:this,json:e})}async execute({variables:e=null}){return e=e||{},e.molecule=this.molecule(),super.execute({variables:e})}remainderWallet(){return this.$__remainderWallet}molecule(){return this.$__molecule}}class Lp extends ut{payloadKey(e){if(!he.has(this.payload(),e))throw new jn(`ResponseRequestAuthorization::payloadKey() - '${e}' key was not found in the payload!`);return he.get(this.payload(),e)}token(){return this.payloadKey("token")}time(){return this.payloadKey("time")}encrypt(){return this.payloadKey("encrypt")}pubKey(){return this.payloadKey("key")}}class Up extends Re{fillMolecule({meta:e}){this.$__molecule.initAuthorization({meta:e}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Lp({query:this,json:e})}}class qp extends ut{}class jp extends Re{fillMolecule({recipientWallet:e,amount:t,meta:r=null}){this.$__molecule.initTokenCreation({recipientWallet:e,amount:t,meta:r||{}}),this.$__molecule.sign({bundle:e.bundle}),this.$__molecule.check()}createResponse(e){return new qp({query:this,json:e})}}class Vp extends ut{}class Qp extends Re{fillMolecule({token:e,amount:t,metaType:r,metaId:i,meta:s=null,batchId:o=null}){this.$__molecule.initTokenRequest({token:e,amount:t,metaType:r,metaId:i,meta:s||{},batchId:o}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Vp({query:this,json:e})}}class Hp extends ut{payload(){const e={reason:null,status:null},t=this.data();return e.reason=typeof t.reason>"u"?"Invalid response from server":t.reason,e.status=typeof t.status>"u"?"rejected":t.status,e}}class Wp extends Re{fillMolecule({recipientWallet:e,amount:t}){this.$__molecule.initValue({recipientWallet:e,amount:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}createResponse(e){return new Hp({query:this,json:e})}}class zp extends ut{}class Kp extends Re{fillMolecule({type:e,contact:t,code:r}){this.$__molecule.initIdentifierCreation({type:e,contact:t,code:r}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new zp({query:this,json:e})}}class Gp extends ut{}class Jp extends Re{fillMolecule({token:e,batchId:t=null}){const r=Y.create({secret:this.$__molecule.secret,bundle:this.$__molecule.bundle,token:e,batchId:t});this.$__molecule.initShadowWalletClaim(r),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Gp({query:this,json:e})}}class Yp extends ut{}class Xp extends Re{fillMolecule({metaType:e,metaId:t,meta:r,policy:i}){this.$__molecule.initMeta({meta:r,metaType:e,metaId:t,policy:i}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Yp({query:this,json:e})}}class Zp extends ut{}class ey extends Re{fillMolecule(e){this.$__molecule.initWalletCreation(e),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new Zp({query:this,json:e})}}class ty extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.AccessToken"})}reason(){return"Invalid response from server"}success(){return this.payload()!==null}payload(){return this.data()}payloadKey(e){if(!he.has(this.payload(),e))throw new jn(`ResponseAuthorizationGuest::payloadKey() - '${e}' key is not found in the payload!`);return he.get(this.payload(),e)}token(){return this.payloadKey("token")}time(){return this.payloadKey("time")}pubKey(){return this.payloadKey("key")}encrypt(){return this.payloadKey("encrypt")}}class ny extends Cs{constructor(e,t){super(e,t),this.$__query=ae`mutation( $cellSlug: String, $pubkey: String, $encrypt: Boolean ) {
      AccessToken( cellSlug: $cellSlug, pubkey: $pubkey, encrypt: $encrypt ) {
        token,
        pubkey,
        expiresAt
      }
    }`}createResponse(e){return new ty({query:this,json:e})}}class da extends re{constructor(e="The shadow wallet does not exist",t=null,r=null){super(e,t,r),this.name="WalletShadowException"}}class ry extends re{constructor(e="Stackable tokens with unit IDs cannot have decimal places!",t=null,r=null){super(e,t,r),this.name="StackableUnitDecimalsException"}}class vr extends re{constructor(e="Stackable tokens with unit IDs cannot have an amount!",t=null,r=null){super(e,t,r),this.name="StackableUnitAmountException"}}class ii{constructor(e){this.client=e,this.$__variables=null,this.$__subscribe=null}createSubscribe({variables:e=null}){if(this.$__variables=this.compiledVariables(e),!this.uri())throw new Qe("Subscribe::createSubscribe() - Node URI was not initialized for this client instance!");if(this.$__subscribe===null)throw new Qe("Subscribe::createSubscribe() - GraphQL subscription was not initialized!");return{query:this.$__subscribe,variables:this.variables(),fetchPolicy:"no-cache"}}async execute({variables:e=null,closure:t}){if(!t)throw new Qe(`${this.constructor.name}::execute() - closure parameter is required!`);return this.$__request=this.createSubscribe({variables:e}),this.client.subscribe(this.$__request,t)}compiledVariables(e=null){return e||{}}uri(){return this.client.getUri()}variables(){return this.$__variables}}class iy extends ii{constructor(e){super(e),this.$__subscribe=ae`
      subscription onCreateMolecule ( $bundle: String! ) {
        CreateMolecule( bundle: $bundle ) {
          molecularHash,
          cellSlug,
          counterparty,
          bundleHash,
          status,
          local,
          height,
          depth,
          createdAt,
          receivedAt,
          processedAt,
          broadcastedAt,
          reason,
          reasonPayload,
          payload,
          status,
          atoms {
            molecularHash,
            position,
            isotope,
            walletAddress,
            tokenSlug,
            batchId,
            value,
            index,
            metaType,
            metaId,
            metasJson,
            otsFragment,
            createdAt,
            metas {
              molecularHash,
              position,
              metaType,
              metaId,
              key,
              value,
              createdAt,
            }
          }
        }
      }
    `}}class sy extends ii{constructor(e){super(e),this.$__subscribe=ae`
      subscription onWalletStatus ( $bundle: String!, $token: String! ) {
        WalletStatus( bundle: $bundle, token: $token ) {
          bundle,
          token,
          admission,
          balance,
        }
      }
    `}}class oy extends ii{constructor(e){super(e),this.$__subscribe=ae`
      subscription onActiveWallet ( $bundle: String! ) {
        ActiveWallet( bundle: $bundle ) {
          address,
          bundleHash,
          walletBundle {
            bundleHash,
            slug,
            createdAt,
          },
          tokenSlug,
          token {
            slug,
            name,
            fungibility,
            supply,
            decimals,
            amount,
            icon,
            createdAt
          },
          batchId,
          position,
          characters,
          pubkey,
          amount,
          createdAt,
          metas {
            molecularHash,
            position,
            metaType,
            metaId,
            key,
            value,
            createdAt,
          }
        }
      }
    `}}class ay extends ii{constructor(e){super(e),this.$__subscribe=ae`
      subscription onActiveUser ( $metaType: String!, $metaId: String! ) {
        ActiveUser( metaType: $metaType, metaId: $metaId ) {
          bundleHash,
          metaType,
          metaId,
          jsonData,
          createdAt,
          updatedAt
        }
      }`}}class uy extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ActiveSession"})}}class cy extends Cs{constructor(e,t){super(e,t),this.$__query=ae`mutation(
      $bundleHash: String!,
      $metaType: String!,
      $metaId: String!,
      $ipAddress: String,
      $browser: String,
      $osCpu: String,
      $resolution: String,
      $timeZone: String,
      $json: String ) {
      ActiveSession(
        bundleHash: $bundleHash,
        metaType: $metaType,
        metaId: $metaId,
        ipAddress: $ipAddress,
        browser: $browser,
        osCpu: $osCpu,
        resolution: $resolution,
        timeZone: $timeZone,
        json: $json
      ) {
        bundleHash,
        metaType,
        metaId,
        jsonData,
        createdAt,
        updatedAt
      }
    }`}createResponse(e){return new uy({query:this,json:e})}}class ly extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.ActiveUser"})}payload(){const e=this.data();if(!e)return null;const t=[];for(const r of e){const i={...r};i.jsonData&&(i.jsonData=JSON.parse(i.jsonData)),i.createdAt&&(i.createdAt=new Date(i.createdAt)),i.updatedAt&&(i.updatedAt=new Date(i.updatedAt)),t.push(i)}return t}}class fy extends $e{constructor(e,t){super(e,t),this.$__query=ae`query ActiveUserQuery ($bundleHash:String, $metaType: String, $metaId: String) {
      ActiveUser (bundleHash: $bundleHash, metaType: $metaType, metaId: $metaId) {
        bundleHash,
        metaType,
        metaId,
        jsonData,
        createdAt,
        updatedAt
      }
    }`}createResponse(e){return new ly({query:this,json:e})}}class hy extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.UserActivity"})}payload(){const e=JSON.parse(JSON.stringify(this.data()));if(e.instances)for(const t of e.instances)t.jsonData=JSON.parse(t.jsonData);return e}}class dy extends $e{constructor(e,t){super(e,t),this.$__query=ae`query UserActivity (
      $bundleHash:String,
      $metaType: String,
      $metaId: String,
      $ipAddress: String,
      $browser: String,
      $osCpu: String,
      $resolution: String,
      $timeZone: String,
      $countBy: [CountByUserActivity],
      $interval: span
    ) {
      UserActivity (
        bundleHash: $bundleHash,
        metaType: $metaType,
        metaId: $metaId,
        ipAddress: $ipAddress,
        browser: $browser,
        osCpu: $osCpu,
        resolution: $resolution,
        timeZone: $timeZone,
        countBy: $countBy,
        interval: $interval
      ) {
        createdAt,
        bundleHash,
        metaType,
        metaId,
        instances {
          bundleHash,
          metaType,
          metaId,
          jsonData,
          createdAt,
          updatedAt
        },
        instanceCount {
          ...SubFields,
          ...Recursive
        }
      }
    }

    fragment SubFields on InstanceCountType {
      id,
      count
    }

    fragment Recursive on InstanceCountType {
      instances {
        ...SubFields
        instances {
          ...SubFields,
          instances {
            ...SubFields
            instances {
              ...SubFields
              instances {
                ...SubFields
                instances {
                  ...SubFields
                  instances {
                    ...SubFields
                    instances {
                      ...SubFields
                    }
                  }
                }
              }
            }
          }
        }
      }
    }`}createResponse(e){return new hy({query:this,json:e})}}class py extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $slug: String, $slugs: [ String! ], $limit: Int, $order: String ) {
      Token( slug: $slug, slugs: $slugs, limit: $limit, order: $order ) {
        slug,
        name,
        fungibility,
        supply,
        decimals,
        amount,
        icon,
      }
    }`}createResponse(e){return new ve({query:this,json:e,dataKey:"data.Token"})}}class pa extends re{constructor(e="Authorization attempt rejected by ledger.",t=null,r=null){super(e,t,r),this.name="AuthorizationRejectedException"}}class yy extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.Atom"})}payload(){const e=this.data();if(!e)return null;const t={instances:[],instanceCount:{},paginatorInfo:{}};if(e.instances){t.instances=e.instances;for(const r in t.instances){const i=t.instances[r];i.metasJson&&(t.instances[r].metas=JSON.parse(i.metasJson))}}return e.instanceCount&&(t.instanceCount=e.instanceCount),e.paginatorInfo&&(t.paginatorInfo=e.paginatorInfo),t}metas(){const e=this.payload(),t=[];if(e&&e.instances)for(const r of e.instances)r.metasJson&&t.push(JSON.parse(r.metasJson));return t}}class ya extends $e{constructor(e,t){super(e,t),this.$__query=ae`query(
      $molecularHashes: [String!],
      $bundleHashes: [String!],
      $positions:[String!],
      $walletAddresses: [String!],
      $isotopes: [String!],
      $tokenSlugs: [String!],
      $cellSlugs: [String!],
      $batchIds: [String!],
      $values: [String!],
      $metaTypes: [String!],
      $metaIds: [String!],
      $indexes: [String!],
      $filter: [ MetaFilter! ],
      $latest: Boolean,
      $queryArgs: QueryArgs,
    ) {
      Atom(
        molecularHashes: $molecularHashes,
        bundleHashes: $bundleHashes,
        positions: $positions,
        walletAddresses: $walletAddresses,
        isotopes: $isotopes,
        tokenSlugs: $tokenSlugs,
        cellSlugs: $cellSlugs,
        batchIds: $batchIds,
        values: $values,
        metaTypes: $metaTypes,
        metaIds: $metaIds,
        indexes: $indexes,
        filter: $filter,
        latest: $latest,
        queryArgs: $queryArgs,
      ) {
        instances {
          position,
          walletAddress,
          tokenSlug,
          isotope,
          index,
          molecularHash,
          metaId,
          metaType,
          metasJson,
          batchId,
          value,
          bundleHashes,
          cellSlugs,
          createdAt,
          otsFragment
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({molecularHashes:e,molecularHash:t,bundleHashes:r,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:c,isotopes:l,isotope:u,tokenSlugs:p,tokenSlug:d,cellSlugs:y,cellSlug:b,batchIds:E,batchId:w,values:v,value:k,metaTypes:S,metaType:I,metaIds:O,metaId:C,indexes:M,index:F,filter:L,latest:V,queryArgs:G}){return t&&(e=e||[],e.push(t)),i&&(r=r||[],r.push(i)),o&&(s=s||[],s.push(o)),c&&(a=a||[],a.push(c)),u&&(l=l||[],l.push(u)),d&&(p=p||[],p.push(d)),b&&(y=y||[],y.push(b)),w&&(E=E||[],E.push(w)),k&&(v=v||[],v.push(k)),I&&(S=S||[],S.push(I)),C&&(O=O||[],O.push(C)),F&&(M=M||[],M.push(F)),{molecularHashes:e,bundleHashes:r,positions:s,walletAddresses:a,isotopes:l,tokenSlugs:p,cellSlugs:y,batchIds:E,values:v,metaTypes:S,metaIds:O,indexes:M,filter:L,latest:V,queryArgs:G}}createResponse(e){return new yy({query:this,json:e})}}class my extends ve{constructor({query:e,json:t}){super({query:e,json:t}),this.dataKey="data.Policy",this.init()}payload(){const e=this.data();return e&&e.callback?JSON.parse(e.callback):null}}class gy extends $e{constructor(e,t){super(e,t),this.$__query=ae`query( $metaType: String, $metaId: String, ) {
      Policy( metaType: $metaType, metaId: $metaId ) {
        molecularHash,
        position,
        metaType,
        metaId,
        conditions,
        callback,
        rule,
        createdAt
      }
    }`}createResponse(e){return new my({query:this,json:e})}}class by extends ve{constructor({query:e,json:t}){super({query:e,json:t,dataKey:"data.MetaTypeViaAtom"})}payload(){const e=this.data();if(!e||e.length===0)return null;const t={instances:{},instanceCount:{},paginatorInfo:{}},r=e.pop();return r.instances&&(t.instances=r.instances),r.instanceCount&&(t.instanceCount=r.instanceCount),r.paginatorInfo&&(t.paginatorInfo=r.paginatorInfo),t}}class ma extends $e{constructor(e,t){super(e,t),this.$__query=ae`query ($metaTypes: [String!], $metaIds: [String!], $values: [String!], $keys: [String!], $latest: Boolean, $filter: [MetaFilter!], $queryArgs: QueryArgs, $countBy: String, $atomValues: [String!] ) {
      MetaTypeViaAtom(
        metaTypes: $metaTypes
        metaIds: $metaIds
        atomValues: $atomValues
        filter: $filter,
        latest: $latest,
        queryArgs: $queryArgs
        countBy: $countBy
      ) {
        metaType,
        instanceCount {
          key,
          value
        },
        instances {
          metaType,
          metaId,
          createdAt,
          metas( values: $values, keys: $keys ) {
            molecularHash,
            position,
            key,
            value,
            createdAt
          }
        },
        paginatorInfo {
          currentPage,
          total
        }
      }
    }`}static createVariables({metaType:e=null,metaId:t=null,key:r=null,value:i=null,keys:s=null,values:o=null,atomValues:a=null,latest:c=null,filter:l=null,queryArgs:u=null,countBy:p=null}){const d={};return a&&(d.atomValues=a),s&&(d.keys=s),o&&(d.values=o),e&&(d.metaTypes=typeof e=="string"?[e]:e),t&&(d.metaIds=typeof t=="string"?[t]:t),p&&(d.countBy=p),l&&(d.filter=l),r&&i&&(d.filter=d.filter||[],d.filter.push({key:r,value:i,comparison:"="})),d.latest=c===!0,u&&((typeof u.limit>"u"||u.limit===0)&&(u.limit="*"),d.queryArgs=u),d}createResponse(e){return new by({query:this,json:e})}}class vy extends ut{}class wy extends Re{fillMolecule({metaType:e,metaId:t,rule:r,policy:i}){this.$__molecule.createRule({metaType:e,metaId:t,rule:r,policy:i}),this.$__molecule.sign({}),this.$__molecule.check()}createResponse(e){return new vy({query:this,json:e})}}class Ey extends Re{fillMolecule({amount:e,tradeRates:t}){this.$__molecule.initDepositBuffer({amount:e,tradeRates:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}}class _y extends Re{fillMolecule({recipients:e,signingWallet:t}){this.$__molecule.initWithdrawBuffer({recipients:e,signingWallet:t}),this.$__molecule.sign({}),this.$__molecule.check(this.$__molecule.sourceWallet)}}function ht(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(l){try{c(r.next(l))}catch(u){s(u)}}function a(l){try{c(r.throw(l))}catch(u){s(u)}}function c(l){var u;l.done?i(l.value):(u=l.value,u instanceof t?u:new t(function(p){p(u)})).then(o,a)}c((r=r.apply(n,[])).next())})}function dt(n,e){var t,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return function(u){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(o=0)),o;)try{if(t=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||u[0]!==6&&u[0]!==2)){o=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(u[0]===6&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=e.call(n,o)}catch(p){u=[6,p],r=0}finally{t=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,l])}}}var pt={exclude:[]},bc={},Sy={timeout:"true"},Je=function(n,e){typeof window<"u"&&(bc[n]=e)},ky=function(){return Object.fromEntries(Object.entries(bc).filter(function(n){var e,t=n[0];return!(!((e=pt?.exclude)===null||e===void 0)&&e.includes(t))}).map(function(n){return[n[0],(0,n[1])()]}))};function wr(n){return n^=n>>>16,n=Math.imul(n,2246822507),n^=n>>>13,n=Math.imul(n,3266489909),(n^=n>>>16)>>>0}var Ae=new Uint32Array([597399067,2869860233,951274213,2716044179]);function qe(n,e){return n<<e|n>>>32-e}function Rs(n,e){var t;if(e===void 0&&(e=0),e=e?0|e:0,typeof n=="string"&&(t=n,n=new TextEncoder().encode(t).buffer),!(n instanceof ArrayBuffer))throw new TypeError("Expected key to be ArrayBuffer or string");var r=new Uint32Array([e,e,e,e]);(function(s,o){for(var a=s.byteLength/16|0,c=new Uint32Array(s,0,4*a),l=0;l<a;l++){var u=c.subarray(4*l,4*(l+1));u[0]=Math.imul(u[0],Ae[0]),u[0]=qe(u[0],15),u[0]=Math.imul(u[0],Ae[1]),o[0]=o[0]^u[0],o[0]=qe(o[0],19),o[0]=o[0]+o[1],o[0]=Math.imul(o[0],5)+1444728091,u[1]=Math.imul(u[1],Ae[1]),u[1]=qe(u[1],16),u[1]=Math.imul(u[1],Ae[2]),o[1]=o[1]^u[1],o[1]=qe(o[1],17),o[1]=o[1]+o[2],o[1]=Math.imul(o[1],5)+197830471,u[2]=Math.imul(u[2],Ae[2]),u[2]=qe(u[2],17),u[2]=Math.imul(u[2],Ae[3]),o[2]=o[2]^u[2],o[2]=qe(o[2],15),o[2]=o[2]+o[3],o[2]=Math.imul(o[2],5)+2530024501,u[3]=Math.imul(u[3],Ae[3]),u[3]=qe(u[3],18),u[3]=Math.imul(u[3],Ae[0]),o[3]=o[3]^u[3],o[3]=qe(o[3],13),o[3]=o[3]+o[0],o[3]=Math.imul(o[3],5)+850148119}})(n,r),function(s,o){var a=s.byteLength/16|0,c=s.byteLength%16,l=new Uint32Array(4),u=new Uint8Array(s,16*a,c);switch(c){case 15:l[3]=l[3]^u[14]<<16;case 14:l[3]=l[3]^u[13]<<8;case 13:l[3]=l[3]^u[12]<<0,l[3]=Math.imul(l[3],Ae[3]),l[3]=qe(l[3],18),l[3]=Math.imul(l[3],Ae[0]),o[3]=o[3]^l[3];case 12:l[2]=l[2]^u[11]<<24;case 11:l[2]=l[2]^u[10]<<16;case 10:l[2]=l[2]^u[9]<<8;case 9:l[2]=l[2]^u[8]<<0,l[2]=Math.imul(l[2],Ae[2]),l[2]=qe(l[2],17),l[2]=Math.imul(l[2],Ae[3]),o[2]=o[2]^l[2];case 8:l[1]=l[1]^u[7]<<24;case 7:l[1]=l[1]^u[6]<<16;case 6:l[1]=l[1]^u[5]<<8;case 5:l[1]=l[1]^u[4]<<0,l[1]=Math.imul(l[1],Ae[1]),l[1]=qe(l[1],16),l[1]=Math.imul(l[1],Ae[2]),o[1]=o[1]^l[1];case 4:l[0]=l[0]^u[3]<<24;case 3:l[0]=l[0]^u[2]<<16;case 2:l[0]=l[0]^u[1]<<8;case 1:l[0]=l[0]^u[0]<<0,l[0]=Math.imul(l[0],Ae[0]),l[0]=qe(l[0],15),l[0]=Math.imul(l[0],Ae[1]),o[0]=o[0]^l[0]}}(n,r),function(s,o){o[0]=o[0]^s.byteLength,o[1]=o[1]^s.byteLength,o[2]=o[2]^s.byteLength,o[3]=o[3]^s.byteLength,o[0]=o[0]+o[1]|0,o[0]=o[0]+o[2]|0,o[0]=o[0]+o[3]|0,o[1]=o[1]+o[0]|0,o[2]=o[2]+o[0]|0,o[3]=o[3]+o[0]|0,o[0]=wr(o[0]),o[1]=wr(o[1]),o[2]=wr(o[2]),o[3]=wr(o[3]),o[0]=o[0]+o[1]|0,o[0]=o[0]+o[2]|0,o[0]=o[0]+o[3]|0,o[1]=o[1]+o[0]|0,o[2]=o[2]+o[0]|0,o[3]=o[3]+o[0]|0}(n,r);var i=new Uint8Array(r.buffer);return Array.from(i).map(function(s){return s.toString(16).padStart(2,"0")}).join("")}function xy(n,e){return new Promise(function(t){setTimeout(function(){return t(e)},n)})}function Ty(n,e,t){return Promise.all(n.map(function(r){return Promise.race([r,xy(e,t)])}))}function vc(){return ht(this,void 0,void 0,function(){var n,e,t,r,i;return dt(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),n=ky(),e=Object.keys(n),[4,Ty(Object.values(n),pt?.timeout||1e3,Sy)];case 1:return t=s.sent(),r=t.filter(function(o){return o!==void 0}),i={},r.forEach(function(o,a){i[e[a]]=o}),[2,wc(i,pt.exclude||[])];case 2:throw s.sent();case 3:return[2]}})})}function wc(n,e){var t={},r=function(s){if(n.hasOwnProperty(s)){var o=n[s];if(typeof o!="object"||Array.isArray(o))e.includes(s)||(t[s]=o);else{var a=wc(o,e.map(function(c){return c.startsWith(s+".")?c.slice(s.length+1):c}));Object.keys(a).length>0&&(t[s]=a)}}};for(var i in n)r(i);return t}function Iy(n){return ht(this,void 0,void 0,function(){var e,t;return dt(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,vc()];case 1:return e=r.sent(),t=Rs(JSON.stringify(e)),[2,t.toString()];case 2:throw r.sent();case 3:return[2]}})})}function Ay(n){for(var e=0,t=0;t<n.length;++t)e+=Math.abs(n[t]);return e}function Ec(n,e,t){for(var r=[],i=0;i<n[0].data.length;i++){for(var s=[],o=0;o<n.length;o++)s.push(n[o].data[i]);r.push(Oy(s))}var a=new Uint8ClampedArray(r);return new ImageData(a,e,t)}function Oy(n){if(n.length===0)return 0;for(var e={},t=0,r=n;t<r.length;t++)e[s=r[t]]=(e[s]||0)+1;var i=n[0];for(var s in e)e[s]>e[i]&&(i=parseInt(s,10));return i}function sr(){if(typeof navigator>"u")return{name:"unknown",version:"unknown"};for(var n=navigator.userAgent,e={Edg:"Edge",OPR:"Opera"},t=0,r=[/(?<name>Edge|Edg)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Chrome|Chromium|OPR|Opera|Vivaldi|Brave))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>(?:Firefox|Waterfox|Iceweasel|IceCat))\/(?<version>\d+(?:\.\d+)?)/,/(?<name>Safari)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>MSIE|Trident|IEMobile).+?(?<version>\d+(?:\.\d+)?)/,/(?<name>[A-Za-z]+)\/(?<version>\d+(?:\.\d+)?)/,/(?<name>SamsungBrowser)\/(?<version>\d+(?:\.\d+)?)/];t<r.length;t++){var i=r[t],s=n.match(i);if(s&&s.groups)return{name:e[s.groups.name]||s.groups.name,version:s.groups.version}}return{name:"unknown",version:"unknown"}}Je("audio",function(){return ht(this,void 0,void 0,function(){return dt(this,function(n){return[2,new Promise(function(e,t){try{var r=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,5e3,44100),i=r.createBufferSource(),s=r.createOscillator();s.frequency.value=1e3;var o,a=r.createDynamicsCompressor();a.threshold.value=-50,a.knee.value=40,a.ratio.value=12,a.attack.value=0,a.release.value=.2,s.connect(a),a.connect(r.destination),s.start(),r.oncomplete=function(c){o=c.renderedBuffer.getChannelData(0),e({sampleHash:Ay(o),oscillator:s.type,maxChannels:r.destination.maxChannelCount,channelCountMode:i.channelCountMode})},r.startRendering()}catch(c){console.error("Error creating audio fingerprint:",c),t(c)}})]})})});var Cy=sr().name!=="SamsungBrowser"?1:3,ga=280,ba=20;sr().name!="Firefox"&&Je("canvas",function(){return document.createElement("canvas").getContext("2d"),new Promise(function(n){var e=Array.from({length:Cy},function(){return function(){var t=document.createElement("canvas"),r=t.getContext("2d");if(!r)return new ImageData(1,1);t.width=ga,t.height=ba;var i=r.createLinearGradient(0,0,t.width,t.height);i.addColorStop(0,"red"),i.addColorStop(.16666666666666666,"orange"),i.addColorStop(.3333333333333333,"yellow"),i.addColorStop(.5,"green"),i.addColorStop(.6666666666666666,"blue"),i.addColorStop(.8333333333333334,"indigo"),i.addColorStop(1,"violet"),r.fillStyle=i,r.fillRect(0,0,t.width,t.height);var s="Random Text WMwmil10Oo";r.font="23.123px Arial",r.fillStyle="black",r.fillText(s,-5,15),r.fillStyle="rgba(0, 0, 255, 0.5)",r.fillText(s,-3.3,17.7),r.beginPath(),r.moveTo(0,0),r.lineTo(2*t.width/7,t.height),r.strokeStyle="white",r.lineWidth=2,r.stroke();var o=r.getImageData(0,0,t.width,t.height);return o}()});n({commonImageDataHash:Rs(Ec(e,ga,ba).data.toString()).toString()})})});var Ci,Ry=["Arial","Arial Black","Arial Narrow","Arial Rounded MT","Arimo","Archivo","Barlow","Bebas Neue","Bitter","Bookman","Calibri","Cabin","Candara","Century","Century Gothic","Comic Sans MS","Constantia","Courier","Courier New","Crimson Text","DM Mono","DM Sans","DM Serif Display","DM Serif Text","Dosis","Droid Sans","Exo","Fira Code","Fira Sans","Franklin Gothic Medium","Garamond","Geneva","Georgia","Gill Sans","Helvetica","Impact","Inconsolata","Indie Flower","Inter","Josefin Sans","Karla","Lato","Lexend","Lucida Bright","Lucida Console","Lucida Sans Unicode","Manrope","Merriweather","Merriweather Sans","Montserrat","Myriad","Noto Sans","Nunito","Nunito Sans","Open Sans","Optima","Orbitron","Oswald","Pacifico","Palatino","Perpetua","PT Sans","PT Serif","Poppins","Prompt","Public Sans","Quicksand","Rajdhani","Recursive","Roboto","Roboto Condensed","Rockwell","Rubik","Segoe Print","Segoe Script","Segoe UI","Sora","Source Sans Pro","Space Mono","Tahoma","Taviraj","Times","Times New Roman","Titillium Web","Trebuchet MS","Ubuntu","Varela Round","Verdana","Work Sans"],Ny=["monospace","sans-serif","serif"];function va(n,e){if(!n)throw new Error("Canvas context not supported");return n.font,n.font="72px ".concat(e),n.measureText("WwMmLli0Oo").width}function My(){var n,e=document.createElement("canvas"),t=(n=e.getContext("webgl"))!==null&&n!==void 0?n:e.getContext("experimental-webgl");if(t&&"getParameter"in t)try{var r=(t.getParameter(t.VENDOR)||"").toString(),i=(t.getParameter(t.RENDERER)||"").toString(),s={vendor:r,renderer:i,version:(t.getParameter(t.VERSION)||"").toString(),shadingLanguageVersion:(t.getParameter(t.SHADING_LANGUAGE_VERSION)||"").toString()};if(!i.length||!r.length){var o=t.getExtension("WEBGL_debug_renderer_info");if(o){var a=(t.getParameter(o.UNMASKED_VENDOR_WEBGL)||"").toString(),c=(t.getParameter(o.UNMASKED_RENDERER_WEBGL)||"").toString();a&&(s.vendorUnmasked=a),c&&(s.rendererUnmasked=c)}}return s}catch{}return"undefined"}function Dy(){var n=new Float32Array(1),e=new Uint8Array(n.buffer);return n[0]=1/0,n[0]=n[0]-n[0],e[3]}function Fy(n,e){var t={};return e.forEach(function(r){var i=function(s){if(s.length===0)return null;var o={};s.forEach(function(l){var u=String(l);o[u]=(o[u]||0)+1});var a=s[0],c=1;return Object.keys(o).forEach(function(l){o[l]>c&&(a=l,c=o[l])}),a}(n.map(function(s){return r in s?s[r]:void 0}).filter(function(s){return s!==void 0}));i&&(t[r]=i)}),t}function By(){var n=[],e={"prefers-contrast":["high","more","low","less","forced","no-preference"],"any-hover":["hover","none"],"any-pointer":["none","coarse","fine"],pointer:["none","coarse","fine"],hover:["hover","none"],update:["fast","slow"],"inverted-colors":["inverted","none"],"prefers-reduced-motion":["reduce","no-preference"],"prefers-reduced-transparency":["reduce","no-preference"],scripting:["none","initial-only","enabled"],"forced-colors":["active","none"]};return Object.keys(e).forEach(function(t){e[t].forEach(function(r){matchMedia("(".concat(t,": ").concat(r,")")).matches&&n.push("".concat(t,": ").concat(r))})}),n}function Py(){if(window.location.protocol==="https:"&&typeof window.ApplePaySession=="function")try{for(var n=window.ApplePaySession.supportsVersion,e=15;e>0;e--)if(n(e))return e}catch{return 0}return 0}sr().name!="Firefox"&&Je("fonts",function(){var n=this;return new Promise(function(e,t){try{(function(r){var i;ht(this,void 0,void 0,function(){var s,o,a;return dt(this,function(c){switch(c.label){case 0:return document.body?[3,2]:[4,(l=50,new Promise(function(p){return setTimeout(p,l,u)}))];case 1:return c.sent(),[3,0];case 2:if((s=document.createElement("iframe")).setAttribute("frameBorder","0"),(o=s.style).setProperty("position","fixed"),o.setProperty("display","block","important"),o.setProperty("visibility","visible"),o.setProperty("border","0"),o.setProperty("opacity","0"),s.src="about:blank",document.body.appendChild(s),!(a=s.contentDocument||((i=s.contentWindow)===null||i===void 0?void 0:i.document)))throw new Error("Iframe document is not accessible");return r({iframe:a}),setTimeout(function(){document.body.removeChild(s)},0),[2]}var l,u})})})(function(r){var i=r.iframe;return ht(n,void 0,void 0,function(){var s,o,a,c;return dt(this,function(l){return s=i.createElement("canvas"),o=s.getContext("2d"),a=Ny.map(function(u){return va(o,u)}),c={},Ry.forEach(function(u){var p=va(o,u);a.includes(p)||(c[u]=p)}),e(c),[2]})})})}catch{t({error:"unsupported"})}})}),Je("hardware",function(){return new Promise(function(n,e){var t=navigator.deviceMemory!==void 0?navigator.deviceMemory:0,r=window.performance&&window.performance.memory?window.performance.memory:0;n({videocard:My(),architecture:Dy(),deviceMemory:t.toString()||"undefined",jsHeapSizeLimit:r.jsHeapSizeLimit||0})})}),Je("locales",function(){return new Promise(function(n){n({languages:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone})})}),Je("permissions",function(){return ht(this,void 0,void 0,function(){var n;return dt(this,function(e){return Ci=pt?.permissions_to_check||["accelerometer","accessibility","accessibility-events","ambient-light-sensor","background-fetch","background-sync","bluetooth","camera","clipboard-read","clipboard-write","device-info","display-capture","gyroscope","geolocation","local-fonts","magnetometer","microphone","midi","nfc","notifications","payment-handler","persistent-storage","push","speaker","storage-access","top-level-storage-access","window-management","query"],n=Array.from({length:pt?.retries||3},function(){return function(){return ht(this,void 0,void 0,function(){var t,r,i,s,o;return dt(this,function(a){switch(a.label){case 0:t={},r=0,i=Ci,a.label=1;case 1:if(!(r<i.length))return[3,6];s=i[r],a.label=2;case 2:return a.trys.push([2,4,,5]),[4,navigator.permissions.query({name:s})];case 3:return o=a.sent(),t[s]=o.state.toString(),[3,5];case 4:return a.sent(),[3,5];case 5:return r++,[3,1];case 6:return[2,t]}})})}()}),[2,Promise.all(n).then(function(t){return Fy(t,Ci)})]})})}),Je("plugins",function(){var n=[];if(navigator.plugins)for(var e=0;e<navigator.plugins.length;e++){var t=navigator.plugins[e];n.push([t.name,t.filename,t.description].join("|"))}return new Promise(function(r){r({plugins:n})})}),Je("screen",function(){return new Promise(function(n){n({is_touchscreen:navigator.maxTouchPoints>0,maxTouchPoints:navigator.maxTouchPoints,colorDepth:screen.colorDepth,mediaMatches:By()})})}),Je("system",function(){return new Promise(function(n){var e=sr();n({platform:window.navigator.platform,cookieEnabled:window.navigator.cookieEnabled,productSub:navigator.productSub,product:navigator.product,useragent:navigator.userAgent,hardwareConcurrency:navigator.hardwareConcurrency,browser:{name:e.name,version:e.version},applePayVersion:Py()})})});var De,$y=sr().name!=="SamsungBrowser"?1:3,U=null;Je("webgl",function(){return ht(this,void 0,void 0,function(){var n;return dt(this,function(e){typeof document<"u"&&((De=document.createElement("canvas")).width=200,De.height=100,U=De.getContext("webgl"));try{if(!U)throw new Error("WebGL not supported");return n=Array.from({length:$y},function(){return function(){try{if(!U)throw new Error("WebGL not supported");var t=`
          attribute vec2 position;
          void main() {
              gl_Position = vec4(position, 0.0, 1.0);
          }
      `,r=`
          precision mediump float;
          void main() {
              gl_FragColor = vec4(0.812, 0.195, 0.553, 0.921); // Set line color
          }
      `,i=U.createShader(U.VERTEX_SHADER),s=U.createShader(U.FRAGMENT_SHADER);if(!i||!s)throw new Error("Failed to create shaders");if(U.shaderSource(i,t),U.shaderSource(s,r),U.compileShader(i),!U.getShaderParameter(i,U.COMPILE_STATUS))throw new Error("Vertex shader compilation failed: "+U.getShaderInfoLog(i));if(U.compileShader(s),!U.getShaderParameter(s,U.COMPILE_STATUS))throw new Error("Fragment shader compilation failed: "+U.getShaderInfoLog(s));var o=U.createProgram();if(!o)throw new Error("Failed to create shader program");if(U.attachShader(o,i),U.attachShader(o,s),U.linkProgram(o),!U.getProgramParameter(o,U.LINK_STATUS))throw new Error("Shader program linking failed: "+U.getProgramInfoLog(o));U.useProgram(o);for(var a=137,c=new Float32Array(4*a),l=2*Math.PI/a,u=0;u<a;u++){var p=u*l;c[4*u]=0,c[4*u+1]=0,c[4*u+2]=Math.cos(p)*(De.width/2),c[4*u+3]=Math.sin(p)*(De.height/2)}var d=U.createBuffer();U.bindBuffer(U.ARRAY_BUFFER,d),U.bufferData(U.ARRAY_BUFFER,c,U.STATIC_DRAW);var y=U.getAttribLocation(o,"position");U.enableVertexAttribArray(y),U.vertexAttribPointer(y,2,U.FLOAT,!1,0,0),U.viewport(0,0,De.width,De.height),U.clearColor(0,0,0,1),U.clear(U.COLOR_BUFFER_BIT),U.drawArrays(U.LINES,0,2*a);var b=new Uint8ClampedArray(De.width*De.height*4);return U.readPixels(0,0,De.width,De.height,U.RGBA,U.UNSIGNED_BYTE,b),new ImageData(b,De.width,De.height)}catch{return new ImageData(1,1)}finally{U&&(U.bindBuffer(U.ARRAY_BUFFER,null),U.useProgram(null),U.viewport(0,0,U.drawingBufferWidth,U.drawingBufferHeight),U.clearColor(0,0,0,0))}}()}),[2,{commonImageHash:Rs(Ec(n,De.width,De.height).data.toString()).toString()}]}catch{return[2,{webgl:"unsupported"}]}return[2]})})});var Bt=function(n,e,t,r){for(var i=(t-e)/r,s=0,o=0;o<r;o++)s+=n(e+(o+.5)*i);return s*i};Je("math",function(){return ht(void 0,void 0,void 0,function(){return dt(this,function(n){return[2,{acos:Math.acos(.5),asin:Bt(Math.asin,-1,1,97),atan:Bt(Math.atan,-1,1,97),cos:Bt(Math.cos,0,Math.PI,97),cosh:Math.cosh(9/7),e:Math.E,largeCos:Math.cos(1e20),largeSin:Math.sin(1e20),largeTan:Math.tan(1e20),log:Math.log(1e3),pi:Math.PI,sin:Bt(Math.sin,-Math.PI,Math.PI,97),sinh:Bt(Math.sinh,-9/7,7/9,97),sqrt:Math.sqrt(2),tan:Bt(Math.tan,0,2*Math.PI,97),tanh:Bt(Math.tanh,-9/7,7/9,97)}]})})});function _c(n){return new We(function(e,t){return new ee(function(r){var i,s,o;try{i=t(e).subscribe({next:function(a){if(a.errors?o=n({graphQLErrors:a.errors,response:a,operation:e,forward:t}):Vu(a)&&(o=n({protocolErrors:a.extensions[ti],response:a,operation:e,forward:t})),o){s=o.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)});return}r.next(a)},error:function(a){if(o=n({operation:e,networkError:a,graphQLErrors:a&&a.result&&a.result.errors||void 0,forward:t}),o){s=o.subscribe({next:r.next.bind(r),error:r.error.bind(r),complete:r.complete.bind(r)});return}r.error(a)},complete:function(){o||r.complete.bind(r)()}})}catch(a){n({networkError:a,operation:e,forward:t}),r.error(a)}return function(){i&&i.unsubscribe(),s&&i.unsubscribe()}})})}(function(n){He(e,n);function e(t){var r=n.call(this)||this;return r.link=_c(t),r}return e.prototype.request=function(t,r){return this.link.request(t,r)},e})(We);function Ly(n){return new We(function(e,t){var r=st(e,[]);return new ee(function(i){var s,o=!1;return Promise.resolve(r).then(function(a){return n(a,e.getContext())}).then(e.setContext).then(function(){o||(s=t(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)}))}).catch(i.error.bind(i)),function(){o=!0,s&&s.unsubscribe()}})})}function Uy(n){return ce(n)&&"code"in n&&"reason"in n}function qy(n){var e;return ce(n)&&((e=n.target)===null||e===void 0?void 0:e.readyState)===WebSocket.CLOSED}var jy=function(n){He(e,n);function e(t){var r=n.call(this)||this;return r.client=t,r}return e.prototype.request=function(t){var r=this;return new ee(function(i){return r.client.subscribe(x(x({},t),{query:At(t.query)}),{next:i.next.bind(i),complete:i.complete.bind(i),error:function(s){if(s instanceof Error)return i.error(s);var o=Uy(s);return o||qy(s)?i.error(new Error("Socket closed".concat(o?" with event ".concat(s.code):"").concat(o?" ".concat(s.reason):""))):i.error(new xt({graphQLErrors:Array.isArray(s)?s:[s]}))}})})},e}(We);function Be(n){return n===null?"null":Array.isArray(n)?"array":typeof n}function $t(n){return Be(n)==="object"}function Vy(n){return Array.isArray(n)&&n.length>0&&n.every(e=>"message"in e)}function wa(n,e){return n.length<124?n:e}const Qy="graphql-transport-ws";var Le;(function(n){n[n.InternalServerError=4500]="InternalServerError",n[n.InternalClientError=4005]="InternalClientError",n[n.BadRequest=4400]="BadRequest",n[n.BadResponse=4004]="BadResponse",n[n.Unauthorized=4401]="Unauthorized",n[n.Forbidden=4403]="Forbidden",n[n.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",n[n.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",n[n.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",n[n.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",n[n.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(Le||(Le={}));var ye;(function(n){n.ConnectionInit="connection_init",n.ConnectionAck="connection_ack",n.Ping="ping",n.Pong="pong",n.Subscribe="subscribe",n.Next="next",n.Error="error",n.Complete="complete"})(ye||(ye={}));function Sc(n){if(!$t(n))throw new Error(`Message is expected to be an object, but got ${Be(n)}`);if(!n.type)throw new Error("Message is missing the 'type' property");if(typeof n.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${Be(n.type)}`);switch(n.type){case ye.ConnectionInit:case ye.ConnectionAck:case ye.Ping:case ye.Pong:{if(n.payload!=null&&!$t(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${n.payload}"`);break}case ye.Subscribe:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${Be(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!$t(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${Be(n.payload)}`);if(typeof n.payload.query!="string")throw new Error(`"${n.type}" message payload expects the 'query' property to be a string, but got ${Be(n.payload.query)}`);if(n.payload.variables!=null&&!$t(n.payload.variables))throw new Error(`"${n.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${Be(n.payload.variables)}`);if(n.payload.operationName!=null&&Be(n.payload.operationName)!=="string")throw new Error(`"${n.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${Be(n.payload.operationName)}`);if(n.payload.extensions!=null&&!$t(n.payload.extensions))throw new Error(`"${n.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${Be(n.payload.extensions)}`);break}case ye.Next:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${Be(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!$t(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an object, but got ${Be(n.payload)}`);break}case ye.Error:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${Be(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);if(!Vy(n.payload))throw new Error(`"${n.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(n.payload)}`);break}case ye.Complete:{if(typeof n.id!="string")throw new Error(`"${n.type}" message expects the 'id' property to be a string, but got ${Be(n.id)}`);if(!n.id)throw new Error(`"${n.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${n.type}"`)}return n}function Hy(n,e){return Sc(typeof n=="string"?JSON.parse(n,e):n)}function Bn(n,e){return Sc(n),JSON.stringify(n,e)}var fn=function(n){return this instanceof fn?(this.v=n,this):new fn(n)},Wy=function(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(E){return new Promise(function(w,v){s.push([y,E,w,v])>1||c(y,E)})},b&&(i[y]=b(i[y])))}function c(y,b){try{l(r[y](b))}catch(E){d(s[0][3],E)}}function l(y){y.value instanceof fn?Promise.resolve(y.value.v).then(u,p):d(s[0][2],y)}function u(y){c("next",y)}function p(y){c("throw",y)}function d(y,b){y(b),s.shift(),s.length&&c(s[0][0],s[0][1])}};function zy(n){const{url:e,connectionParams:t,lazy:r=!0,onNonLazyError:i=console.error,lazyCloseTimeout:s=0,keepAlive:o=0,disablePong:a,connectionAckWaitTimeout:c=0,retryAttempts:l=5,retryWait:u=async function(Z){let q=1e3;for(let W=0;W<Z;W++)q*=2;await new Promise(W=>setTimeout(W,q+Math.floor(Math.random()*2700+300)))},shouldRetry:p=Ri,isFatalConnectionProblem:d,on:y,webSocketImpl:b,generateID:E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,Z=>{const q=Math.random()*16|0;return(Z=="x"?q:q&3|8).toString(16)})},jsonMessageReplacer:w,jsonMessageReviver:v}=n;let k;if(b){if(!Gy(b))throw new Error("Invalid WebSocket implementation provided");k=b}else typeof WebSocket<"u"?k=WebSocket:typeof it<"u"?k=it.WebSocket||it.MozWebSocket:typeof window<"u"&&(k=window.WebSocket||window.MozWebSocket);if(!k)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const S=k,I=(()=>{const j=(()=>{const q={};return{on(W,Q){return q[W]=Q,()=>{delete q[W]}},emit(W){var Q;"id"in W&&((Q=q[W.id])===null||Q===void 0||Q.call(q,W))}}})(),Z={connecting:y?.connecting?[y.connecting]:[],opened:y?.opened?[y.opened]:[],connected:y?.connected?[y.connected]:[],ping:y?.ping?[y.ping]:[],pong:y?.pong?[y.pong]:[],message:y?.message?[j.emit,y.message]:[j.emit],closed:y?.closed?[y.closed]:[],error:y?.error?[y.error]:[]};return{onMessage:j.on,on(q,W){const Q=Z[q];return Q.push(W),()=>{Q.splice(Q.indexOf(W),1)}},emit(q,...W){for(const Q of[...Z[q]])Q(...W)}}})();function O(j){const Z=[I.on("error",q=>{Z.forEach(W=>W()),j(q)}),I.on("closed",q=>{Z.forEach(W=>W()),j(q)})]}let C,M=0,F,L=!1,V=0,G=!1;async function Ee(){clearTimeout(F);const[j,Z]=await(C??(C=new Promise((Q,Se)=>(async()=>{if(L){if(await u(V),!M)return C=void 0,Se({code:1e3,reason:"All Subscriptions Gone"});V++}I.emit("connecting",L);const J=new S(typeof e=="function"?await e():e,Qy);let Te,ze;function se(){isFinite(o)&&o>0&&(clearTimeout(ze),ze=setTimeout(()=>{J.readyState===S.OPEN&&(J.send(Bn({type:ye.Ping})),I.emit("ping",!1,void 0))},o))}O(be=>{C=void 0,clearTimeout(Te),clearTimeout(ze),Se(be),be instanceof Ea&&(J.close(4499,"Terminated"),J.onerror=null,J.onclose=null)}),J.onerror=be=>I.emit("error",be),J.onclose=be=>I.emit("closed",be),J.onopen=async()=>{try{I.emit("opened",J);const be=typeof t=="function"?await t():t;if(J.readyState!==S.OPEN)return;J.send(Bn(be?{type:ye.ConnectionInit,payload:be}:{type:ye.ConnectionInit},w)),isFinite(c)&&c>0&&(Te=setTimeout(()=>{J.close(Le.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},c)),se()}catch(be){I.emit("error",be),J.close(Le.InternalClientError,wa(be instanceof Error?be.message:new Error(be).message,"Internal client error"))}};let pe=!1;J.onmessage=({data:be})=>{try{const me=Hy(be,v);if(I.emit("message",me),me.type==="ping"||me.type==="pong"){I.emit(me.type,!0,me.payload),me.type==="pong"?se():a||(J.send(Bn(me.payload?{type:ye.Pong,payload:me.payload}:{type:ye.Pong})),I.emit("pong",!1,me.payload));return}if(pe)return;if(me.type!==ye.ConnectionAck)throw new Error(`First message cannot be of type ${me.type}`);clearTimeout(Te),pe=!0,I.emit("connected",J,me.payload,L),L=!1,V=0,Q([J,new Promise((si,lr)=>O(lr))])}catch(me){J.onmessage=null,I.emit("error",me),J.close(Le.BadResponse,wa(me instanceof Error?me.message:new Error(me).message,"Bad response"))}}})())));j.readyState===S.CLOSING&&await Z;let q=()=>{};const W=new Promise(Q=>q=Q);return[j,q,Promise.race([W.then(()=>{if(!M){const Q=()=>j.close(1e3,"Normal Closure");isFinite(s)&&s>0?F=setTimeout(()=>{j.readyState===S.OPEN&&Q()},s):Q()}}),Z])]}function ie(j){if(Ri(j)&&(Ky(j.code)||[Le.InternalServerError,Le.InternalClientError,Le.BadRequest,Le.BadResponse,Le.Unauthorized,Le.SubprotocolNotAcceptable,Le.SubscriberAlreadyExists,Le.TooManyInitialisationRequests].includes(j.code)))throw j;if(G)return!1;if(Ri(j)&&j.code===1e3)return M>0;if(!l||V>=l||!p(j)||d?.(j))throw j;return L=!0}r||(async()=>{for(M++;;)try{const[,,j]=await Ee();await j}catch(j){try{if(!ie(j))return}catch(Z){return i?.(Z)}}})();function _e(j,Z){const q=E(j);let W=!1,Q=!1,Se=()=>{M--,W=!0};return(async()=>{for(M++;;)try{const[J,Te,ze]=await Ee();if(W)return Te();const se=I.onMessage(q,pe=>{switch(pe.type){case ye.Next:{Z.next(pe.payload);return}case ye.Error:{Q=!0,W=!0,Z.error(pe.payload),Se();return}case ye.Complete:{W=!0,Se();return}}});J.send(Bn({id:q,type:ye.Subscribe,payload:j},w)),Se=()=>{!W&&J.readyState===S.OPEN&&J.send(Bn({id:q,type:ye.Complete},w)),M--,W=!0,Te()},await ze.finally(se);return}catch(J){if(!ie(J))return}})().then(()=>{Q||Z.complete()}).catch(J=>{Z.error(J)}),()=>{W||Se()}}return{on:I.on,subscribe:_e,iterate(j){const Z=[],q={done:!1,error:null,resolve:()=>{}},W=_e(j,{next(Se){Z.push(Se),q.resolve()},error(Se){q.done=!0,q.error=Se,q.resolve()},complete(){q.done=!0,q.resolve()}}),Q=function(){return Wy(this,arguments,function*(){for(;;){for(Z.length||(yield fn(new Promise(Te=>q.resolve=Te)));Z.length;)yield yield fn(Z.shift());if(q.error)throw q.error;if(q.done)return yield fn(void 0)}})}();return Q.throw=async Se=>(q.done||(q.done=!0,q.error=Se,q.resolve()),{done:!0,value:void 0}),Q.return=async()=>(W(),{done:!0,value:void 0}),Q},async dispose(){if(G=!0,C){const[j]=await C;j.close(1e3,"Normal Closure")}},terminate(){C&&I.emit("closed",new Ea)}}}class Ea extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function Ri(n){return $t(n)&&"code"in n&&"reason"in n}function Ky(n){return[1e3,1001,1006,1005,1012,1013,1014].includes(n)?!1:n>=1e3&&n<=1999}function Gy(n){return typeof n=="function"&&"constructor"in n&&"CLOSED"in n&&"CLOSING"in n&&"CONNECTING"in n&&"OPEN"in n}function Jy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ce=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Ce<"u"&&Ce,Pe={searchParams:"URLSearchParams"in Ce,iterable:"Symbol"in Ce&&"iterator"in Symbol,blob:"FileReader"in Ce&&"Blob"in Ce&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in Ce,arrayBuffer:"ArrayBuffer"in Ce};function Yy(n){return n&&DataView.prototype.isPrototypeOf(n)}if(Pe.arrayBuffer)var Xy=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],Zy=ArrayBuffer.isView||function(n){return n&&Xy.indexOf(Object.prototype.toString.call(n))>-1};function cr(n){if(typeof n!="string"&&(n=String(n)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(n)||n==="")throw new TypeError('Invalid character in header field name: "'+n+'"');return n.toLowerCase()}function Ns(n){return typeof n!="string"&&(n=String(n)),n}function Ms(n){var e={next:function(){var t=n.shift();return{done:t===void 0,value:t}}};return Pe.iterable&&(e[Symbol.iterator]=function(){return e}),e}function we(n){this.map={},n instanceof we?n.forEach(function(e,t){this.append(t,e)},this):Array.isArray(n)?n.forEach(function(e){this.append(e[0],e[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(e){this.append(e,n[e])},this)}we.prototype.append=function(n,e){n=cr(n),e=Ns(e);var t=this.map[n];this.map[n]=t?t+", "+e:e};we.prototype.delete=function(n){delete this.map[cr(n)]};we.prototype.get=function(n){return n=cr(n),this.has(n)?this.map[n]:null};we.prototype.has=function(n){return this.map.hasOwnProperty(cr(n))};we.prototype.set=function(n,e){this.map[cr(n)]=Ns(e)};we.prototype.forEach=function(n,e){for(var t in this.map)this.map.hasOwnProperty(t)&&n.call(e,this.map[t],t,this)};we.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),Ms(n)};we.prototype.values=function(){var n=[];return this.forEach(function(e){n.push(e)}),Ms(n)};we.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),Ms(n)};Pe.iterable&&(we.prototype[Symbol.iterator]=we.prototype.entries);function Ni(n){if(n.bodyUsed)return Promise.reject(new TypeError("Already read"));n.bodyUsed=!0}function kc(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function em(n){var e=new FileReader,t=kc(e);return e.readAsArrayBuffer(n),t}function tm(n){var e=new FileReader,t=kc(e);return e.readAsText(n),t}function nm(n){for(var e=new Uint8Array(n),t=new Array(e.length),r=0;r<e.length;r++)t[r]=String.fromCharCode(e[r]);return t.join("")}function _a(n){if(n.slice)return n.slice(0);var e=new Uint8Array(n.byteLength);return e.set(new Uint8Array(n)),e.buffer}function xc(){return this.bodyUsed=!1,this._initBody=function(n){this.bodyUsed=this.bodyUsed,this._bodyInit=n,n?typeof n=="string"?this._bodyText=n:Pe.blob&&Blob.prototype.isPrototypeOf(n)?this._bodyBlob=n:Pe.formData&&FormData.prototype.isPrototypeOf(n)?this._bodyFormData=n:Pe.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)?this._bodyText=n.toString():Pe.arrayBuffer&&Pe.blob&&Yy(n)?(this._bodyArrayBuffer=_a(n.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Pe.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(n)||Zy(n))?this._bodyArrayBuffer=_a(n):this._bodyText=n=Object.prototype.toString.call(n):this._bodyText="",this.headers.get("content-type")||(typeof n=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Pe.searchParams&&URLSearchParams.prototype.isPrototypeOf(n)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pe.blob&&(this.blob=function(){var n=Ni(this);if(n)return n;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var n=Ni(this);return n||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(em)}),this.text=function(){var n=Ni(this);if(n)return n;if(this._bodyBlob)return tm(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(nm(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Pe.formData&&(this.formData=function(){return this.text().then(sm)}),this.json=function(){return this.text().then(JSON.parse)},this}var rm=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function im(n){var e=n.toUpperCase();return rm.indexOf(e)>-1?e:n}function Wt(n,e){if(!(this instanceof Wt))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e=e||{};var t=e.body;if(n instanceof Wt){if(n.bodyUsed)throw new TypeError("Already read");this.url=n.url,this.credentials=n.credentials,e.headers||(this.headers=new we(n.headers)),this.method=n.method,this.mode=n.mode,this.signal=n.signal,!t&&n._bodyInit!=null&&(t=n._bodyInit,n.bodyUsed=!0)}else this.url=String(n);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new we(e.headers)),this.method=im(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&t)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(t),(this.method==="GET"||this.method==="HEAD")&&(e.cache==="no-store"||e.cache==="no-cache")){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+new Date().getTime());else{var i=/\?/;this.url+=(i.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Wt.prototype.clone=function(){return new Wt(this,{body:this._bodyInit})};function sm(n){var e=new FormData;return n.trim().split("&").forEach(function(t){if(t){var r=t.split("="),i=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(s))}}),e}function om(n){var e=new we,t=n.replace(/\r?\n[\t ]+/g," ");return t.split("\r").map(function(r){return r.indexOf(`
`)===0?r.substr(1,r.length):r}).forEach(function(r){var i=r.split(":"),s=i.shift().trim();if(s){var o=i.join(":").trim();e.append(s,o)}}),e}xc.call(Wt.prototype);function at(n,e){if(!(this instanceof at))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText===void 0?"":""+e.statusText,this.headers=new we(e.headers),this.url=e.url||"",this._initBody(n)}xc.call(at.prototype);at.prototype.clone=function(){return new at(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new we(this.headers),url:this.url})};at.error=function(){var n=new at(null,{status:0,statusText:""});return n.type="error",n};var am=[301,302,303,307,308];at.redirect=function(n,e){if(am.indexOf(e)===-1)throw new RangeError("Invalid status code");return new at(null,{status:e,headers:{location:n}})};var Ut=Ce.DOMException;try{new Ut}catch{Ut=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},Ut.prototype=Object.create(Error.prototype),Ut.prototype.constructor=Ut}function Tc(n,e){return new Promise(function(t,r){var i=new Wt(n,e);if(i.signal&&i.signal.aborted)return r(new Ut("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var c={status:s.status,statusText:s.statusText,headers:om(s.getAllResponseHeaders()||"")};c.url="responseURL"in s?s.responseURL:c.headers.get("X-Request-URL");var l="response"in s?s.response:s.responseText;setTimeout(function(){t(new at(l,c))},0)},s.onerror=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.ontimeout=function(){setTimeout(function(){r(new TypeError("Network request failed"))},0)},s.onabort=function(){setTimeout(function(){r(new Ut("Aborted","AbortError"))},0)};function a(c){try{return c===""&&Ce.location.href?Ce.location.href:c}catch{return c}}s.open(i.method,a(i.url),!0),i.credentials==="include"?s.withCredentials=!0:i.credentials==="omit"&&(s.withCredentials=!1),"responseType"in s&&(Pe.blob?s.responseType="blob":Pe.arrayBuffer&&i.headers.get("Content-Type")&&i.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(s.responseType="arraybuffer")),e&&typeof e.headers=="object"&&!(e.headers instanceof we)?Object.getOwnPropertyNames(e.headers).forEach(function(c){s.setRequestHeader(c,Ns(e.headers[c]))}):i.headers.forEach(function(c,l){s.setRequestHeader(l,c)}),i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){s.readyState===4&&i.signal.removeEventListener("abort",o)}),s.send(typeof i._bodyInit>"u"?null:i._bodyInit)})}Tc.polyfill=!0;Ce.fetch||(Ce.fetch=Tc,Ce.Headers=we,Ce.Request=Wt,Ce.Response=at);var um=self.fetch.bind(self);const cm=Jy(um);function lm({graphQLErrors:n,networkError:e,operation:t,forward:r,response:i}){if(n&&n.forEach(({message:s,debugMessage:o,locations:a,path:c})=>console.error(`[GraphQL error]: ${s}`,`
  Message : ${o}`,`
  Path    : ${c}`,`
  Location: ${JSON.stringify(a)}`)),e){const{name:s,statusCode:o,result:a={}}=e;console.error(`[Network error]: ${s}, status code: ${o}`)}}function fm(n){return n.query.definitions.find(r=>r.kind==="OperationDefinition").selectionSet.selections.find(r=>r.kind==="Field").name.value}function hm(n){return n.query.definitions.find(t=>t.kind==="OperationDefinition").operation}class dm extends We{constructor(){super(),this.__wallet=null,this.__pubkey=null}setWallet(e){this.__wallet=e}getWallet(){return this.__wallet}setPubKey(e){this.__pubkey=e}getPubKey(){return this.__pubkey}request(e,t){const r=fm(e),i=hm(e),s=i==="mutation"&&r==="ProposeMolecule";if([i==="query"&&["__schema","ContinuId"].includes(r),i==="mutation"&&r==="AccessToken",s&&he.get(e,"variables.molecule.atoms.0.isotope")==="U"].some(u=>u))return t(e);const a=this.getWallet(),c=this.getPubKey();if(!c)throw new Qe("CipherLink::request() - Node public key missing!");if(!a)throw new Qe("CipherLink::request() - Authorized wallet missing!");const l={query:lu(e.query),variables:JSON.stringify(e.variables)};return e.operationName=null,e.query=ae`query ($Hash: String!) { CipherHash(Hash: $Hash) { hash } }`,e.variables={Hash:JSON.stringify(a.encryptMessage(l,c))},t(e).map(u=>{let p=u.data;if(p.data&&(p=p.data),p.CipherHash&&p.CipherHash.hash){const d=JSON.parse(p.CipherHash.hash),y=a.decryptMessage(d);if(y===null)throw new Qe("CipherLink::request() - Unable to decrypt response!");return y}return u})}}class Er extends yc{constructor({serverUri:e,soketi:t=null,encrypt:r=!1}){const i=Wu({uri:e,fetch:cm}),s="",o=Ly((p,{headers:d})=>({headers:{...d,"X-Auth-Token":s}})),a=_c(lm);let c=Bo([o,a,i]),l;r&&(l=new dm,c=Bo([l,c]));let u;t&&t.socketUri&&(u=new jy(zy({url:t.socketUri,connectionParams:()=>({authToken:s})})),c=Ed(({query:p})=>{const d=En(p);return d.kind==="OperationDefinition"&&d.operation==="subscription"},u,c)),super({link:c,cache:new hc,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),this.serverUri=e,this.soketi=t,this.authToken=s,this.pubkey=null,this.wallet=null,this.cipherLink=l,this.wsLink=u}setAuthData({token:e,pubkey:t,wallet:r}){this.authToken=e,this.pubkey=t,this.wallet=r,this.cipherLink&&(this.cipherLink.setWallet(r),this.cipherLink.setPubKey(t)),this.wsLink&&(this.wsLink.client.connectionParams=()=>({authToken:this.authToken}))}socketDisconnect(){this.wsLink&&this.wsLink.client.dispose()}getAuthToken(){return this.authToken}getPubKey(){return this.pubkey}getWallet(){return this.wallet}getServerUri(){return this.serverUri}getSocketUri(){return this.soketi?this.soketi.socketUri:null}}class pm{constructor(e){this.$__client=e,this.$__subscribers={}}setClient(e){this.$__client=e}subscribe(e,t){const r=this.$__client.subscribe(e).subscribe(t);return this.$__subscribers[e.operationName]=r,r}unsubscribe(e){this.$__subscribers[e]&&(this.$__subscribers[e].unsubscribe(),this.$__client.unsubscribeFromChannel(e),delete this.$__subscribers[e])}unsubscribeAll(){Object.keys(this.$__subscribers).forEach(this.unsubscribe.bind(this))}clear(){this.$__subscribers={}}}class ym{constructor({serverUri:e,socket:t=null,encrypt:r=!1}){this.$__client=new Er({serverUri:e,soketi:t,encrypt:r}),this.$__subscriptionManager=new pm(this.$__client)}setEncryption(e=!1){const t={serverUri:this.$__client.getServerUri(),soketi:{socketUri:this.$__client.getSocketUri(),appKey:"knishio"},encrypt:e};this.$__client=new Er(t),this.$__subscriptionManager.setClient(this.$__client)}unsubscribe(e){this.$__subscriptionManager.unsubscribe(e)}unsubscribeAll(){this.$__subscriptionManager.unsubscribeAll()}socketDisconnect(){this.$__client.socketDisconnect(),this.$__subscriptionManager.clear()}subscribe(e,t){return this.$__subscriptionManager.subscribe(e,t)}async query(e){return this.$__client.query(e)}async mutate(e){return this.$__client.mutate(e)}setAuthData({token:e,pubkey:t,wallet:r}){this.$__client.setAuthData({token:e,pubkey:t,wallet:r})}getAuthToken(){return this.$__client.getAuthToken()}getUri(){return this.$__client?this.$__client.getServerUri():null}getSocketUri(){return this.$__client.getSocketUri()}setUri(e){const t={serverUri:e,soketi:{socketUri:this.$__client.getSocketUri(),appKey:"knishio"},encrypt:!!this.$__client.cipherLink};this.$__client=new Er(t),this.$__subscriptionManager.setClient(this.$__client)}setSocketUri({socketUri:e,appKey:t}){const r={serverUri:this.$__client.getServerUri(),soketi:{socketUri:e,appKey:t},encrypt:!!this.$__client.cipherLink};this.$__client=new Er(r),this.$__subscriptionManager.setClient(this.$__client)}}class mm{constructor({uri:e,cellSlug:t=null,client:r=null,socket:i=null,serverSdkVersion:s=3,logging:o=!1}){this.initialize({uri:e,cellSlug:t,socket:i,client:r,serverSdkVersion:s,logging:o})}initialize({uri:e,cellSlug:t=null,socket:r=null,client:i=null,serverSdkVersion:s=3,logging:o=!1}){this.reset(),this.$__logging=o,this.$__authTokenObjects={},this.$__authInProcess=!1,this.abortControllers=new Map,this.setUri(e),t&&this.setCellSlug(t);for(const a in this.$__uris){const c=this.$__uris[a];this.$__authTokenObjects[c]=null}this.log("info",`KnishIOClient::initialize() - Initializing new Knish.IO client session for SDK version ${s}...`),this.$__client=i||new ym({socket:{socketUri:null,appKey:"knishio",...r||{}},serverUri:this.getRandomUri()}),this.$__serverSdkVersion=s}getRandomUri(){const e=Math.floor(Math.random()*this.$__uris.length);return this.$__uris[e]}switchEncryption(e){return this.$__encrypt===e?!1:(this.log("info",`KnishIOClient::switchEncryption() - Forcing encryption ${e?"on":"off"} to match node...`),this.$__encrypt=e,this.$__client.setEncryption(e),!0)}deinitialize(){this.log("info","KnishIOClient::deinitialize() - Clearing the Knish.IO client session..."),this.reset()}subscribe(){if(!this.client().getSocketUri())throw new Qe("KnishIOClient::subscribe() - Socket client not initialized!");return this.client()}getServerSdkVersion(){return this.$__serverSdkVersion}reset(){this.$__secret="",this.$__bundle="",this.remainderWallet=null}cellSlug(){return this.getCellSlug()}getCellSlug(){return this.$__cellSlug||null}setCellSlug(e){this.$__cellSlug=e}setUri(e){this.$__uris=typeof e=="object"?e:[e]}getUri(){return this.$__client.getUri()}uri(){return this.getUri()}client(){if(!this.$__authInProcess){const e=this.getRandomUri();this.$__client.setUri(e);const t=this.$__authTokenObjects[e];t?this.$__client.setAuthData(t.getAuthData()):this.requestAuthToken({secret:this.$__secret,cellSlug:this.$__cellSlug,encrypt:this.$__encrypt}).then(()=>{})}return this.$__client}hasSecret(){return!!this.$__secret}setSecret(e){this.$__secret=e,this.$__bundle=this.hashSecret(e,"setSecret")}hashSecret(e,t=null){return this.log("info",`KnishIOClient::hashSecret(${t?`source: ${t}`:""}) - Computing wallet bundle from secret...`),Vt(e)}getSecret(){if(!this.hasSecret())throw new Di("KnishIOClient::getSecret() - Unable to find a stored secret! Have you set a secret?");return this.$__secret}hasBundle(){return!!this.$__bundle}getBundle(){if(!this.hasBundle())throw new Di("KnishIOClient::getBundle() - Unable to find a stored bundle! Have you set a secret?");return this.$__bundle}getFingerprint(){return Iy()}getFingerprintData(){return vc()}async getSourceWallet(){let e=(await this.queryContinuId({bundle:this.getBundle()})).payload();return e?e.key=Y.generateKey({secret:this.getSecret(),token:e.token,position:e.position}):e=new Y({secret:this.getSecret()}),e}getRemainderWallet(){return this.remainderWallet}async createMolecule({secret:e=null,bundle:t=null,sourceWallet:r=null,remainderWallet:i=null}){return this.log("info","KnishIOClient::createMolecule() - Creating a new molecule..."),e=e||this.getSecret(),t=t||this.getBundle(),!r&&this.lastMoleculeQuery&&this.getRemainderWallet().token==="USER"&&this.lastMoleculeQuery.response()&&this.lastMoleculeQuery.response().success()&&(r=this.getRemainderWallet()),r===null&&(r=await this.getSourceWallet()),this.remainderWallet=i||Y.create({secret:e,bundle:t,token:"USER",batchId:r.batchId,characters:r.characters}),new et({secret:e,sourceWallet:r,remainderWallet:this.getRemainderWallet(),cellSlug:this.getCellSlug(),version:this.getServerSdkVersion()})}createQuery(e){return new e(this.client(),this)}createSubscribe(e){return new e(this.subscribe())}async createMoleculeMutation({mutationClass:e,molecule:t=null}){this.log("info",`KnishIOClient::createMoleculeQuery() - Creating a new ${e.name} query...`);const r=t||await this.createMolecule({}),i=new e(this.client(),this,r);if(!(i instanceof Re))throw new Qe(`${this.constructor.name}::createMoleculeMutation() - This method only accepts MutationProposeMolecule!`);return this.lastMoleculeQuery=i,i}async executeQuery(e,t=null){this.$__authToken&&this.$__authToken.isExpired()&&(this.log("info","KnishIOClient::executeQuery() - Access token is expired. Getting new one..."),await this.requestAuthToken({secret:this.$__secret,cellSlug:this.$__cellSlug,encrypt:this.$__encrypt}));const r=new AbortController,i=JSON.stringify({query:e.$__query,variables:t});this.abortControllers.set(i,r);try{const s=await e.execute({variables:t,context:{fetchOptions:{signal:r.signal}}});return this.abortControllers.delete(i),s}catch(s){if(s.name==="AbortError")this.log("warn","Query was cancelled");else throw s}}cancelQuery(e,t=null){const r=JSON.stringify({query:e.$__query,variables:t}),i=this.abortControllers.get(r);i&&(i.abort(),this.abortControllers.delete(r))}cancelAllQueries(){for(const e of this.abortControllers.values())e.abort();this.abortControllers.clear()}async queryBalance({token:e,bundle:t=null,type:r="regular"}){const i=this.createQuery(Bp);return this.executeQuery(i,{bundleHash:t||this.getBundle(),token:e,type:r})}async querySourceWallet({token:e,amount:t,type:r="regular"}){const i=(await this.queryBalance({token:e,type:r})).payload();if(i===null||an.cmp(i.balance,t)<0)throw new ft;if(!i.position||!i.address)throw new ft("Source wallet can not be a shadow wallet.");return i}async subscribeCreateMolecule({bundle:e,closure:t}){return await this.createSubscribe(iy).execute({variables:{bundle:e||this.getBundle()},closure:t})}subscribeWalletStatus({bundle:e,token:t,closure:r}){if(!t)throw new Qe(`${this.constructor.name}::subscribeWalletStatus() - Token parameter is required!`);return this.createSubscribe(sy).execute({variables:{bundle:e||this.getBundle(),token:t},closure:r})}subscribeActiveWallet({bundle:e,closure:t}){return this.createSubscribe(oy).execute({variables:{bundle:e||this.getBundle()},closure:t})}subscribeActiveSession({metaType:e,metaId:t,closure:r}){return this.createSubscribe(ay).execute({variables:{metaType:e,metaId:t},closure:r})}unsubscribe(e){this.subscribe().unsubscribe(e)}unsubscribeAll(){this.subscribe().unsubscribeAll()}queryMeta({metaType:e,metaId:t=null,key:r=null,value:i=null,latest:s=!0,fields:o=null,filter:a=null,queryArgs:c=null,count:l=null,countBy:u=null,throughAtom:p=!0,values:d=null,keys:y=null,atomValues:b=null}){this.log("info",`KnishIOClient::queryMeta() - Querying metaType: ${e}, metaId: ${t}...`);let E,w;return p?(E=this.createQuery(ma),w=ma.createVariables({metaType:e,metaId:t,key:r,value:i,latest:s,filter:a,queryArgs:c,countBy:u,values:d,keys:y,atomValues:b})):(E=this.createQuery(ha),w=ha.createVariables({metaType:e,metaId:t,key:r,value:i,latest:s,filter:a,queryArgs:c,count:l,countBy:u})),this.executeQuery(E,w).then(v=>v.payload())}async queryBatch({batchId:e}){this.log("info",`KnishIOClient::queryBatch() - Querying cascading meta instances for batchId: ${e}...`);const t=this.createQuery(ir);return await this.executeQuery(t,{batchId:e})}async queryBatchHistory({batchId:e}){this.log("info",`KnishIOClient::queryBatchHistory() - Querying cascading meta instances for batchId: ${e}...`);const t=this.createQuery($p);return await this.executeQuery(t,{batchId:e})}async queryAtom({molecularHashes:e,molecularHash:t,bundleHashes:r,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:c,isotopes:l,isotope:u,tokenSlugs:p,tokenSlug:d,cellSlugs:y,cellSlug:b,batchIds:E,batchId:w,values:v,value:k,metaTypes:S,metaType:I,metaIds:O,metaId:C,indexes:M,index:F,filter:L,latest:V,queryArgs:G={limit:15,offset:1}}){this.log("info","KnishIOClient::queryAtom() - Querying atom instances");const Ee=this.createQuery(ya);return await this.executeQuery(Ee,ya.createVariables({molecularHashes:e,molecularHash:t,bundleHashes:r,bundleHash:i,positions:s,position:o,walletAddresses:a,walletAddress:c,isotopes:l,isotope:u,tokenSlugs:p,tokenSlug:d,cellSlugs:y,cellSlug:b,batchIds:E,batchId:w,values:v,value:k,metaTypes:S,metaType:I,metaIds:O,metaId:C,indexes:M,index:F,filter:L,latest:V,queryArgs:G}))}async createWallet({token:e}){const t=new Y({secret:this.getSecret(),token:e}),r=await this.createMoleculeMutation({mutationClass:ey});return r.fillMolecule(t),await this.executeQuery(r)}async queryActiveSession({bundleHash:e,metaType:t,metaId:r}){const i=this.createQuery(fy);return await this.executeQuery(i,{bundleHash:e,metaType:t,metaId:r})}async queryUserActivity({bundleHash:e,metaType:t,metaId:r,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:c,countBy:l,interval:u}){const p=this.createQuery(dy);return await this.executeQuery(p,{bundleHash:e,metaType:t,metaId:r,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:c,countBy:l,interval:u})}async activeSession({bundle:e,metaType:t,metaId:r,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:c,json:l={}}){const u=this.createQuery(cy);return await this.executeQuery(u,{bundleHash:e,metaType:t,metaId:r,ipAddress:i,browser:s,osCpu:o,resolution:a,timeZone:c,json:JSON.stringify(l)})}async createToken({token:e,amount:t=null,meta:r=null,batchId:i=null,units:s=[]}){const o=he.get(r||{},"fungibility");if(o==="stackable"&&(r.batchId=i||Dr({})),["nonfungible","stackable"].includes(o)&&s.length>0){if(he.get(r||{},"decimals")>0)throw new ry;if(t>0)throw new vr;t=s.length,r.splittable=1,r.decimals=0,r.tokenUnits=JSON.stringify(s)}const a=new Y({secret:this.getSecret(),bundle:this.getBundle(),token:e,batchId:i}),c=await this.createMoleculeMutation({mutationClass:jp});return c.fillMolecule({recipientWallet:a,amount:t,meta:r||{}}),await this.executeQuery(c)}async createRule({metaType:e,metaId:t,rule:r,policy:i={}}){const s=await this.createMoleculeMutation({mutationClass:wy,molecule:await this.createMolecule({secret:this.getSecret(),sourceWallet:await this.getSourceWallet()})});return s.fillMolecule({metaType:e,metaId:t,rule:r,policy:i}),await this.executeQuery(s)}async createMeta({metaType:e,metaId:t,meta:r=null,policy:i={}}){const s=await this.createMoleculeMutation({mutationClass:Xp,molecule:await this.createMolecule({secret:this.getSecret(),sourceWallet:await this.getSourceWallet()})}),o=r||{};return s.fillMolecule({metaType:e,metaId:t,meta:o,policy:i}),await this.executeQuery(s)}async createIdentifier({type:e,contact:t,code:r}){const i=await this.createMoleculeMutation({mutationClass:Kp});return i.fillMolecule({type:e,contact:t,code:r}),await this.executeQuery(i)}async createPolicy({metaType:e,metaId:t,policy:r={}}){const i=await this.createMolecule({});i.addPolicyAtom({metaType:e,metaId:t,meta:{},policy:r}),i.addContinuIdAtom(),i.sign({bundle:this.getBundle()}),i.check();const s=await this.createMoleculeMutation({mutationClass:Re,molecule:i});return await this.executeQuery(s)}async queryPolicy({metaType:e,metaId:t}){const r=this.createQuery(gy);return await this.executeQuery(r,{metaType:e,metaId:t})}queryWallets({bundle:e=null,token:t=null,unspent:r=!0}){this.log("info",`KnishIOClient::queryWallets() - Querying wallets${e?` for ${e}`:""}...`);const i=this.createQuery(Dp);return this.executeQuery(i,{bundleHash:e||this.getBundle(),tokenSlug:t,unspent:r}).then(s=>s.payload())}queryBundle({bundle:e=null,fields:t=null,raw:r=!1}){this.log("info",`KnishIOClient::queryBundle() - Querying wallet bundle metadata${e?` for ${e}`:""}...`),e||(e=this.getBundle()),typeof e=="string"&&(e=[e]);const i=this.createQuery(Mp);return this.executeQuery(i,{bundleHashes:e}).then(s=>r?s:s.payload())}async queryContinuId({bundle:e}){const t=this.createQuery(Rp);return this.executeQuery(t,{bundle:e})}async requestTokens({token:e,to:t,amount:r=null,units:i=[],meta:s=null,batchId:o=null}){let a,c;s=s||{};const l=this.createQuery(py),u=await this.executeQuery(l,{slug:e}),p=he.get(u.data(),"0.fungibility")==="stackable";if(!p&&o!==null)throw new kr("Expected Batch ID = null for non-stackable tokens.");if(p&&o===null&&(o=Dr({})),i.length>0){if(r>0)throw new vr;r=i.length,s.tokenUnits=JSON.stringify(i)}t?(Object.prototype.toString.call(t)==="[object String]"&&(Y.isBundleHash(t)?(a="walletBundle",c=t):t=Y.create({secret:t,token:e})),t instanceof Y&&(a="wallet",s.position=t.position,s.bundle=t.bundle,c=t.address)):(a="walletBundle",c=this.getBundle());const d=await this.createMoleculeMutation({mutationClass:Qp});return d.fillMolecule({token:e,amount:r,metaType:a,metaId:c,meta:s,batchId:o}),await this.executeQuery(d)}async claimShadowWallet({token:e,batchId:t=null,molecule:r=null}){const i=await this.createMoleculeMutation({mutationClass:Jp,molecule:r});return i.fillMolecule({token:e,batchId:t}),await this.executeQuery(i)}async claimShadowWallets({token:e}){const t=await this.queryWallets({token:e});if(!t||!Array.isArray(t))throw new da;t.forEach(i=>{if(!i.isShadow())throw new da});const r=[];for(const i of t)r.push(await this.claimShadowWallet({token:e,batchId:i.batchId}));return r}async transferToken({bundleHash:e,token:t,amount:r=null,units:i=[],batchId:s=null,sourceWallet:o=null}){if(i.length>0){if(r>0)throw new vr;r=i.length}if(o===null&&(o=await this.querySourceWallet({token:t,amount:r})),o===null||an.cmp(o.balance,r)<0)throw new ft;const a=Y.create({bundle:e,token:t});s!==null?a.batchId=s:a.initBatchId({sourceWallet:o});const c=o.createRemainder(this.getSecret());o.splitUnits(i,c,a);const l=await this.createMolecule({sourceWallet:o,remainderWallet:c}),u=await this.createMoleculeMutation({mutationClass:Wp,molecule:l});return u.fillMolecule({recipientWallet:a,amount:r}),await this.executeQuery(u)}async depositBufferToken({tokenSlug:e,amount:t,tradeRates:r,sourceWallet:i=null}){i===null&&(i=await this.querySourceWallet({token:e,amount:t}));const s=i.createRemainder(this.getSecret()),o=await this.createMolecule({sourceWallet:i,remainderWallet:s}),a=await this.createMoleculeMutation({mutationClass:Ey,molecule:o});return a.fillMolecule({amount:t,tradeRates:r}),await this.executeQuery(a)}async withdrawBufferToken({tokenSlug:e,amount:t,sourceWallet:r=null,signingWallet:i=null}){r===null&&(r=await this.querySourceWallet({token:e,amount:t,type:"buffer"}));const s=r,o=await this.createMolecule({sourceWallet:r,remainderWallet:s}),a=await this.createMoleculeMutation({mutationClass:_y,molecule:o}),c={};return c[this.getBundle()]=t,a.fillMolecule({recipients:c,signingWallet:i}),await this.executeQuery(a)}async burnTokens({token:e,amount:t=null,units:r=[],sourceWallet:i=null}){i===null&&(i=await this.querySourceWallet({token:e,amount:t}));const s=i.createRemainder(this.getSecret());if(r.length>0){if(t>0)throw new vr;t=r.length,i.splitUnits(r,s)}const o=await this.createMolecule({sourceWallet:i,remainderWallet:s});o.burnToken({amount:t}),o.sign({bundle:this.getBundle()}),o.check();const a=await this.createMoleculeMutation({mutationClass:Re,molecule:o});return this.executeQuery(a)}async replenishToken({token:e,amount:t=null,units:r=[],sourceWallet:i=null}){if(i===null&&(i=(await this.queryBalance({token:e})).payload()),!i)throw new ft("Source wallet is missing or invalid.");const s=i.createRemainder(this.getSecret()),o=await this.createMolecule({sourceWallet:i,remainderWallet:s});o.replenishToken({amount:t,units:r}),o.sign({bundle:this.getBundle()}),o.check();const a=await this.createMoleculeMutation({mutationClass:Re,molecule:o});return this.executeQuery(a)}async fuseToken({bundleHash:e,tokenSlug:t,newTokenUnit:r,fusedTokenUnitIds:i,sourceWallet:s=null}){if(s===null&&(s=(await this.queryBalance({token:t})).payload()),s===null)throw new ft("Source wallet is missing or invalid.");if(!s.tokenUnits||!s.tokenUnits.length)throw new ft("Source wallet does not have token units.");if(!i.length)throw new ft("Fused token unit list is empty.");const o=[];s.tokenUnits.forEach(p=>{o.push(p.id)}),i.forEach(p=>{if(!o.includes(p))throw new ft(`Fused token unit ID = ${p} does not found in the source wallet.`)});const a=Y.create({bundle:e,token:t});a.initBatchId({sourceWallet:s});const c=s.createRemainder(this.getSecret());s.splitUnits(i,c),r.metas.fusedTokenUnits=s.getTokenUnitsData(),a.tokenUnits=[r];const l=await this.createMolecule({sourceWallet:s,remainderWallet:c});l.fuseToken(s.tokenUnits,a),l.sign({bundle:this.getBundle()}),l.check();const u=await this.createMoleculeMutation({mutationClass:Re,molecule:l});return this.executeQuery(u)}async requestGuestAuthToken({cellSlug:e,encrypt:t}){this.setCellSlug(e);const r=new Y({secret:Mr(await this.getFingerprint()),token:"AUTH"}),i=await this.createQuery(ny),s={cellSlug:e,pubkey:r.pubkey,encrypt:t},o=await i.execute({variables:s});if(o.success()){const a=Xn.create(o.payload(),r);this.setAuthToken(a)}else throw new pa(`KnishIOClient::requestGuestAuthToken() - Authorization attempt rejected by ledger. Reason: ${o.reason()}`);return o}async requestProfileAuthToken({secret:e,encrypt:t}){this.setSecret(e);const r=new Y({secret:e,token:"AUTH"}),i=await this.createMolecule({secret:e,sourceWallet:r}),s=await this.createMoleculeMutation({mutationClass:Up,molecule:i});s.fillMolecule({meta:{encrypt:t?"true":"false"}});const o=await s.execute({});if(o.success()){const a=Xn.create(o.payload(),r);this.setAuthToken(a)}else throw new pa(`KnishIOClient::requestProfileAuthToken() - Authorization attempt rejected by ledger. Reason: ${o.reason()}`);return o}async requestAuthToken({secret:e=null,seed:t=null,cellSlug:r=null,encrypt:i=!1}){if(this.$__serverSdkVersion<3)return this.log("warn","KnishIOClient::authorize() - Server SDK version does not require an authorization..."),null;e===null&&t&&(e=Mr(t)),r&&this.setCellSlug(r),this.$__authInProcess=!0;let s;return e?s=await this.requestProfileAuthToken({secret:e,encrypt:i}):s=await this.requestGuestAuthToken({cellSlug:r,encrypt:i}),this.log("info",`KnishIOClient::authorize() - Successfully retrieved auth token ${this.$__authToken.getToken()}...`),this.switchEncryption(i),this.$__authInProcess=!1,s}setAuthToken(e){if(!e){this.log("info","KnishIOClient::setAuthToken() - authToken object is empty.");return}this.$__authTokenObjects[this.getUri()]=e,this.client().setAuthData(e.getAuthData()),this.$__authToken=e}getAuthToken(){return this.$__authToken}log(e,t){if(this.$__logging)switch(e){case"info":console.info(t);break;case"warn":console.warn(t);break;case"error":console.error(t);break;default:console.log(t)}}}exports.Atom=H;exports.KnishIOClient=mm;exports.Meta=Kn;exports.Molecule=et;exports.Wallet=Y;exports.base64ToHex=La;exports.bufferToHexString=cl;exports.charsetBaseConvert=Pa;exports.chunkSubstr=zn;exports.generateBundleHash=Vt;exports.generateSecret=Mr;exports.hexStringToBuffer=ll;exports.hexToBase64=$a;exports.isHex=Ua;exports.randomString=Vr;
//# sourceMappingURL=client.cjs.js.map
