!(function (t, e) { typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = e() : typeof define === 'function' && define.amd ? define(e) : (t = t || self).JSONFormatter = e() }(this, function () { 'use strict'; function t (t) { return !!t && typeof t === 'object' } function e (t) { if (void 0 === t) return ''; if (t === null) return 'Object'; if (typeof t === 'object' && !t.constructor) return 'Object'; const e = /function ([^(]*)/.exec(t.constructor.toString()); return e && e.length > 1 ? e[1] : '' } function r (t, e, r) { return t === 'null' || t === 'undefined' ? t : (t !== 'string' && t !== 'stringifiable' || (r = `"${ r.replace(/"/g, '\\"') }"`), t === 'function' ? `${e.toString().replace(/[\r\n]/g, '').replace(/\{.*\}/, '') }{…}` : r) } function n (n, o) { let i = ''; return t(o) ? (i = e(o), Array.isArray(o) && (i += `[${ o.length }]`)) : i = r(n, o, o), i } function o (t) { return `json-formatter-${ t}` } function i (t, e, r) { const n = document.createElement(t); return e && n.classList.add(o(e)), void 0 !== r && (r instanceof Node ? n.appendChild(r) : n.appendChild(document.createTextNode(String(r)))), n }!(function (t) { if (t && typeof window !== 'undefined') { const e = document.createElement('style'); e.setAttribute('media', 'screen'), e.innerHTML = t, document.head.appendChild(e) } }('.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-row,\n.json-formatter-row a,\n.json-formatter-row a:hover {\n  color: black;\n  text-decoration: none;\n}\n.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-row .json-formatter-string,\n.json-formatter-row .json-formatter-stringifiable {\n  color: green;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-row .json-formatter-number {\n  color: blue;\n}\n.json-formatter-row .json-formatter-boolean {\n  color: red;\n}\n.json-formatter-row .json-formatter-null {\n  color: #855A00;\n}\n.json-formatter-row .json-formatter-undefined {\n  color: #ca0b69;\n}\n.json-formatter-row .json-formatter-function {\n  color: #FF20ED;\n}\n.json-formatter-row .json-formatter-date {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: blue;\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-bracket {\n  color: blue;\n}\n.json-formatter-row .json-formatter-key {\n  color: #00008B;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n.json-formatter-dark.json-formatter-row {\n  font-family: monospace;\n}\n.json-formatter-dark.json-formatter-row,\n.json-formatter-dark.json-formatter-row a,\n.json-formatter-dark.json-formatter-row a:hover {\n  color: white;\n  text-decoration: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-row {\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty {\n  opacity: 0.5;\n  margin-left: 1rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty:after {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-object:after {\n  content: "No properties";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-children.json-formatter-empty.json-formatter-array:after {\n  content: "[]";\n}\n.json-formatter-dark.json-formatter-row .json-formatter-string,\n.json-formatter-dark.json-formatter-row .json-formatter-stringifiable {\n  color: #31F031;\n  white-space: pre;\n  word-wrap: break-word;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-number {\n  color: #66C2FF;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-boolean {\n  color: #EC4242;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-null {\n  color: #EEC97D;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-undefined {\n  color: #ef8fbe;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-function {\n  color: #FD48CB;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-date {\n  background-color: rgba(255, 255, 255, 0.05);\n}\n.json-formatter-dark.json-formatter-row .json-formatter-url {\n  text-decoration: underline;\n  color: #027BFF;\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-bracket {\n  color: #9494FF;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-key {\n  color: #23A0DB;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler-link {\n  cursor: pointer;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler {\n  line-height: 1.2rem;\n  font-size: 0.7rem;\n  vertical-align: middle;\n  opacity: 0.6;\n  cursor: pointer;\n  padding-right: 0.2rem;\n}\n.json-formatter-dark.json-formatter-row .json-formatter-toggler:after {\n  display: inline-block;\n  transition: transform 100ms ease-in;\n  content: "►";\n}\n.json-formatter-dark.json-formatter-row > a > .json-formatter-preview-text {\n  opacity: 0;\n  transition: opacity 0.15s ease-in;\n  font-style: italic;\n}\n.json-formatter-dark.json-formatter-row:hover > a > .json-formatter-preview-text {\n  opacity: 0.6;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-toggler-link .json-formatter-toggler:after {\n  transform: rotate(90deg);\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > .json-formatter-children:after {\n  display: inline-block;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open > a > .json-formatter-preview-text {\n  display: none;\n}\n.json-formatter-dark.json-formatter-row.json-formatter-open.json-formatter-empty:after {\n  display: block;\n}\n')); const s = /(^\d{1,4}[\.|\\/|-]\d{1,2}[\.|\\/|-]\d{1,4})(\s*(?:0?[1-9]:[0-5]|1(?=[012])\d:[0-5])\d\s*[ap]m)?$/; const a = /\d{2}:\d{2}:\d{2} GMT-\d{4}/; const f = /\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z/; const m = window.requestAnimationFrame || function (t) { return t(), 0 }; const l = { hoverPreviewEnabled: !1, hoverPreviewArrayCount: 100, hoverPreviewFieldCount: 5, animateOpen: !0, animateClose: !0, theme: null, useToJSON: !0, sortPropertiesBy: null }; return (function () { function d (t, e, r, n) { void 0 === e && (e = 1), void 0 === r && (r = l), this.json = t, this.open = e, this.config = r, this.key = n, this._isOpen = null, void 0 === this.config.hoverPreviewEnabled && (this.config.hoverPreviewEnabled = l.hoverPreviewEnabled), void 0 === this.config.hoverPreviewArrayCount && (this.config.hoverPreviewArrayCount = l.hoverPreviewArrayCount), void 0 === this.config.hoverPreviewFieldCount && (this.config.hoverPreviewFieldCount = l.hoverPreviewFieldCount), void 0 === this.config.useToJSON && (this.config.useToJSON = l.useToJSON) } return Object.defineProperty(d.prototype, 'isOpen', { get: function () { return this._isOpen !== null ? this._isOpen : this.open > 0 }, set: function (t) { this._isOpen = t }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isDate', { get: function () { return this.json instanceof Date || this.type === 'string' && (s.test(this.json) || f.test(this.json) || a.test(this.json)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isUrl', { get: function () { return this.type === 'string' && this.json.indexOf('http') === 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isArray', { get: function () { return Array.isArray(this.json) }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isObject', { get: function () { return t(this.json) }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isEmptyObject', { get: function () { return !this.keys.length && !this.isArray }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'isEmpty', { get: function () { return this.isEmptyObject || this.keys && !this.keys.length && this.isArray }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'useToJSON', { get: function () { return this.config.useToJSON && this.type === 'stringifiable' }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'hasKey', { get: function () { return void 0 !== this.key }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'constructorName', { get: function () { return e(this.json) }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'type', { get: function () { return this.json === null ? 'null' : this.config.useToJSON && this.json && this.json.toJSON ? 'stringifiable' : typeof this.json }, enumerable: !0, configurable: !0 }), Object.defineProperty(d.prototype, 'keys', { get: function () { if (this.isObject) { const t = Object.keys(this.json).map(function (t) { return t || '""' }); return !this.isArray && this.config.sortPropertiesBy ? t.sort(this.config.sortPropertiesBy) : t } return [] }, enumerable: !0, configurable: !0 }), d.prototype.toggleOpen = function () { this.isOpen = !this.isOpen, this.element && (this.isOpen ? this.appendChildren(this.config.animateOpen) : this.removeChildren(this.config.animateClose), this.element.classList.toggle(o('open'))) }, d.prototype.openAtDepth = function (t) { void 0 === t && (t = 1), t < 0 || (this.open = t, this.isOpen = t !== 0, this.element && (this.removeChildren(!1), t === 0 ? this.element.classList.remove(o('open')) : (this.appendChildren(this.config.animateOpen), this.element.classList.add(o('open'))))) }, d.prototype.getInlinepreview = function () { const t = this; if (this.isArray) return this.json.length > this.config.hoverPreviewArrayCount ? `Array[${ this.json.length }]` : `[${ this.json.map(n).join(', ') }]`; const e = this.keys; const r = e.slice(0, this.config.hoverPreviewFieldCount).map(function (e) { return `${e}:${n(t.type, t.json[e])}` }); const o = e.length >= this.config.hoverPreviewFieldCount ? '…' : ''; return `{${ r.join(', ') }${o }}` }, d.prototype.render = function () { this.element = i('div', 'row'); const t = this.isObject ? i('a', 'toggler-link') : i('span'); if (this.isObject && !this.useToJSON && t.appendChild(i('span', 'toggler')), this.hasKey && t.appendChild(i('span', 'key', `${this.key }:`)), this.isObject && !this.useToJSON) { var e = i('span', 'value'); const n = i('span'); const s = i('span', 'constructor-name', this.constructorName); if (n.appendChild(s), this.isArray) { const a = i('span'); a.appendChild(i('span', 'bracket', '[')), a.appendChild(i('span', 'number', this.json.length)), a.appendChild(i('span', 'bracket', ']')), n.appendChild(a) }e.appendChild(n), t.appendChild(e) } else { (e = this.isUrl ? i('a') : i('span')).classList.add(o(this.type)), this.isDate && e.classList.add(o('date')), this.isUrl && (e.classList.add(o('url')), e.setAttribute('href', this.json)); const f = r(this.type, this.json, this.useToJSON ? this.json.toJSON() : this.json); e.appendChild(document.createTextNode(f)), t.appendChild(e) } if (this.isObject && this.config.hoverPreviewEnabled) { const m = i('span', 'preview-text'); m.appendChild(document.createTextNode(this.getInlinepreview())), t.appendChild(m) } const l = i('div', 'children'); return this.isObject && l.classList.add(o('object')), this.isArray && l.classList.add(o('array')), this.isEmpty && l.classList.add(o('empty')), this.config && this.config.theme && this.element.classList.add(o(this.config.theme)), this.isOpen && this.element.classList.add(o('open')), this.element.appendChild(t), this.element.appendChild(l), this.isObject && this.isOpen && this.appendChildren(), this.isObject && !this.useToJSON && t.addEventListener('click', this.toggleOpen.bind(this)), this.element }, d.prototype.appendChildren = function (t) { const e = this; void 0 === t && (t = !1); const r = this.element.querySelector(`div.${o('children')}`); if (r && !this.isEmpty) if (t) { let n = 0; const i = function () { const t = e.keys[n]; const o = new d(e.json[t], e.open - 1, e.config, t); r.appendChild(o.render()), (n += 1) < e.keys.length && (n > 10 ? i() : m(i)) }; m(i) } else this.keys.forEach(function (t) { const n = new d(e.json[t], e.open - 1, e.config, t); r.appendChild(n.render()) }) }, d.prototype.removeChildren = function (t) { void 0 === t && (t = !1); const e = this.element.querySelector(`div.${o('children')}`); if (t) { let r = 0; const n = function () { e && e.children.length && (e.removeChild(e.children[0]), (r += 1) > 10 ? n() : m(n)) }; m(n) } else e && (e.innerHTML = '') }, d }()) }))
